patch,msg,lang,relevance,expression,informativeness
"@@ -161,6 +161,13 @@ static void gamma_control_manager_get_gamma_control(struct wl_client *client,
 	wl_resource_set_implementation(gamma_control->resource, &gamma_control_impl,
 		gamma_control, gamma_control_handle_resource_destroy);
 
+	if (output == NULL) {
+		wl_resource_set_user_data(gamma_control->resource, NULL);
+		zwlr_gamma_control_v1_send_failed(gamma_control->resource);
+		free(gamma_control);
+		return;
+	}
+
 	wl_signal_add(&output->events.destroy,
 		&gamma_control->output_destroy_listener);
 	gamma_control->output_destroy_listener.notify =",This code could be rerouted to avoid the unnecessary gamma_control allocation,c,1,1,1
"@@ -3481,5 +3481,17 @@ move_mm_reg_opcode(bool aligned16, bool aligned32)
 #    endif /* X86/ARM */
 }
 
+uint
+move_mm_avx512_reg_opcode(bool aligned64)
+{
+#    ifdef X86
+    CLIENT_ASSERT(ZMM_ENABLED(), ""move_mm_avx512_reg_opcode on unsupported processor"");
+    return (aligned64 ? OP_vmovdqa64 : OP_vmovdqu64);
+#    else
+    CLIENT_ASSERT(false, ""move_mm_avx512_reg_opcode not supported on ARM/AArch64"");
+    return 0;
+#    endif /* X86 */
+}
+
 #endif /* !STANDALONE_DECODER */
 /****************************************************************************/",Isn't this an internal function? CLIENT_ASSERT is for API functions for reporting interface errors.,c,1,1,1
"@@ -709,7 +709,7 @@ read_vex(byte *pc, decode_info_t *di, byte instr_byte,
 }
 
 /* Given an instr_info_t PREFIX_EXT entry, reads the next entry based on the prefixes.
- * Note that this function does not initialise the opcode field in \p di but is set in
+ * Note that this function does not initialize the opcode field in \p di but is set in
  * \p info->type.
  */
 static inline const instr_info_t *",Not a fan of British spelling?,c,1,1,0
"@@ -1470,6 +1470,7 @@ func isValidRuleForXDP(rule *proto.Rule) bool {
 		len(rule.DstPorts) == 0 &&
 		len(rule.DstNamedPortIpSetIds) == 0 &&
 		len(rule.DstIpSetIds) == 0 &&
+		len(rule.DstIpPortSetIds) == 0 &&
 		len(rule.NotDstNet) == 0 &&
 		len(rule.NotDstPorts) == 0 &&
 		len(rule.NotDstIpSetIds) == 0 &&","Yep, looks right; your new selector _should_ disqualify the rule from being XDP accelerated.",c,1,1,1
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -0,0 +1,12 @@
+package testutils
+
+import (
+	""os""
+	""path""
+)
+
+func TestDataFile(name string) string {
+	dir, _ := os.Getwd()
+
+	return path.Join(dir, ""testdata"", name)
+}","Would it make sense to create an empty file here, perhaps in a tmp dir, instead of checking empty files into Git?",c,1,1,1
"@@ -133,6 +133,11 @@ proc_init(void)
         global_heap_free(buf, PAGE_SIZE HEAPACCT(ACCT_OTHER));
         os_close(cpuinfo);
     }
+    CLIENT_ASSERT(dcache_zva_size > 0, ""invalid dcache block size for zeroing"");
+    LOG(GLOBAL, LOG_TOP, 1, ""Data cache block size for zeroing is %d bytes\n"",
+        dcache_zva_size);
+    CLIENT_ASSERT(cache_line_size == dcache_zva_size,
+                  ""cache line and block sizes do not match"");
 #endif
 }
 ",Will this fail in the DR_HOST_NOT_TARGET case? Do we want to maybe use a default to prevent this and other failures due to not getting the `dcache_zva_size`?,c,1,1,1
"@@ -54,6 +54,7 @@ void handle_keyboard_key(struct libinput_event *event,
 	struct libinput_event_keyboard *kbevent =
 		libinput_event_get_keyboard_event(event);
 	struct wlr_event_keyboard_key wlr_event = { 0 };
+	wlr_event.device = wlr_dev;
 	wlr_event.time_msec =
 		usec_to_msec(libinput_event_keyboard_get_time_usec(kbevent));
 	wlr_event.keycode = libinput_event_keyboard_get_key(kbevent);",`wlr_event.keyboard` is undefined.,c,1,1,1
"@@ -428,7 +428,16 @@ ostree_builtin_commit (int argc, char **argv, GCancellable *cancellable, GError
   else if (!opt_orphan)
     {
       if (!ostree_repo_resolve_rev (repo, opt_branch, TRUE, &parent, error))
-        goto out;
+        {
+          if (g_error_matches (*error, G_IO_ERROR, G_IO_ERROR_IS_DIRECTORY))
+            {
+              /* A folder exists with the specified ref name,
+                 * which is handled by _ostree_repo_write_ref */
+              g_error_free (*error);
+              *error = NULL;
+            }
+          else goto out;
+        }
     }
 
   if (opt_editor)",This is `g_clear_error (&error);`,c,1,1,1
"@@ -398,6 +398,7 @@ void wlr_send_tablet_v2_tablet_tool_proximity_out(
 			send_tool_frame(tool->current_client);
 		}
 		zwp_tablet_tool_v2_send_proximity_out(tool->current_client->resource);
+		send_tool_frame(tool->current_client);
 
 		tool->current_client = NULL;
 		tool->focused_surface = NULL;",Using `queue_tool_frame` is probably enough to make sure we don't send two.,c,1,1,1
"@@ -0,0 +1,16 @@
+#include <stdlib.h>
+#include <string.h>
+#include <wayland-server.h>
+#include <wlr/interfaces/wlr_tablet_tool.h>
+#include <wlr/types/wlr_tablet_tool.h>
+
+void wlr_tablet_tool_tool_init(struct wlr_tablet_tool_tool *tool) {
+	// Intentionaly empty (for now)
+}
+
+void wlr_tablet_tool_tool_destroy(struct wlr_tablet_tool_tool *tool) {
+	if (!tool) {
+		return;
+	}
+	free(tool);
+}","Should be in a header file, or removed.",c,1,1,1
"@@ -53,7 +53,7 @@ class OrderedCheckersAction(argparse.Action):
         namespace.ordered_checkers = ordered_checkers
 
 
-# ------------------------------------------------------------------------------
+# -----------------------------------------------------------------------------
 class DeprecatedOptionAction(argparse.Action):
     """"""
     Deprecated argument action.",Maybe we could remove these as well if we are already touching these.,c,1,1,1
"@@ -0,0 +1,15 @@
+#include<iostream>
+using namespace std;
+int main(){
+    int digit = 0;
+    int n;
+    cout<<""enter digit""<<endl;
+    cin>>n;
+    while(n!=0){
+        n = n/10;
+        digit++;
+    }
+    cout<<digit;
+    return 0;
+    
+}","if n is 0, it'd print 0. but the number of digits would be 1. correct it",c,1,1,1
"@@ -396,7 +396,9 @@ static void destroy_tunnel(struct st_h2o_http3_server_stream_t *stream)
     struct st_h2o_http3_server_conn_t *conn = get_conn(stream);
     if (stream->tunnel->datagram_flow_id != UINT64_MAX) {
         khiter_t iter = kh_get(stream, conn->datagram_flows, stream->tunnel->datagram_flow_id);
-        assert(iter != kh_end(conn->datagram_flows));
+        /* the tunnel wasn't established yet */
+        if (iter == kh_end(conn->datagram_flows))
+            return;
         kh_del(stream, conn->datagram_flows, iter);
     }
 }","I wonder if we should avoid early return here. The rationale is that the function is expected to dispose all the properties, where `datagram_flow_id` is just one among them. Therefore, I tend to believe that a statement (or a block) that disposes each element should not do an early return, and that applies to the last property as well for the sake of consistency.",c,1,1,1
"@@ -140,8 +140,8 @@ type Config struct {
         PrometheusMetricsEnabled bool `config:""bool;false""`
         PrometheusMetricsPort    int  `config:""int(0,65535);9091""`
 
-        FailsafeInboundHostPorts  []uint16 `config:""port-list;22;die-on-fail""`
-        FailsafeOutboundHostPorts []uint16 `config:""port-list;2379,2380,4001,7001;die-on-fail""`
+        FailsafeInboundHostPorts  []ProtoPort `config:""port-list;tcp:22,udp:68;die-on-fail""`
+        FailsafeOutboundHostPorts []ProtoPort `config:""port-list;tcp:2379,tcp:2380,tcp:4001,tcp:7001,udp:53,udp:67;die-on-fail""`
 
         UsageReportingEnabled bool   `config:""bool;true""`
         ClusterGUID           string `config:""string;baddecaf""`",Not a big fan of this format. We also need to update the docs - can you link me to that PR when it's ready? It should probably explain the reason for each port being included as well.,c,1,1,0
"@@ -185,9 +185,8 @@ class SourceCodeCommentHandler(object):
         for a bug line.
         """"""
         source_file = self.__source_file
-        LOG.debug(""Checking for source code comments in the source file '{0}'""
-                  ""at line {1}"".format(self.__source_file,
-                                       bug_line))
+        LOG.debug(""Checking for source code comments in the source file '%s'""
+                  ""at line %s"", self.__source_file, bug_line)
 
         previous_line_num = bug_line - 1
 ","As far as I've seen, this `bug_line` really is a string, but I wouldn't have counted on that.",c,1,1,1
"@@ -34,6 +34,7 @@
  */
 
 #include ""globals.h""
+#include ""arch.h""
 
 void
 unit_test_io(void);","Put the unit tests in an arch/ location, not in this top-level driver file. IIRC I suggested arch.c in my original request for a unit test, but arch/x86 may be better.",c,1,1,1
"@@ -352,6 +352,8 @@ static fpga_result driver_register_event(fpga_handle handle,
 		} else if (objtype == FPGA_ACCELERATOR) {
 			return send_port_event_request(handle, event_handle, FPGA_IRQ_ASSIGN);
 		}
+		FPGA_ERR(""Invalid objtype: %d"", objtype);
+		return FPGA_EXCEPTION;
 	case FPGA_EVENT_INTERRUPT:
 		if (objtype != FPGA_ACCELERATOR) {
 			FPGA_MSG(""User events need an accelerator object"");","@tswhison should we try to avoid multiple return statements in a function by setting the ""res = FPGA_EXCEPTION in default case and returning the 'res' variable at the end of this function?",c,0,1,1
"@@ -355,9 +355,14 @@ static bool gles2_init_wl_display(struct wlr_renderer *wlr_renderer,
 		struct wl_display *wl_display) {
 	struct wlr_gles2_renderer *renderer =
 		gles2_get_renderer(wlr_renderer);
-	if (!wlr_egl_bind_display(renderer->egl, wl_display)) {
-		wlr_log(WLR_INFO, ""failed to bind wl_display to EGL"");
-		return false;
+
+	if (renderer->egl->exts.bind_wayland_display_wl) {
+		if (!wlr_egl_bind_display(renderer->egl, wl_display)) {
+			wlr_log(WLR_ERROR, ""Failed to bind wl_display to EGL"");
+			return false;
+		}
+	} else {
+		wlr_log(WLR_INFO, ""EGL_WL_bind_wayland_display is not supported"");
 	}
 	return true;
 }",Checking for BIND_WAYLAND_DISPLAY_WL is a separate change or should at least be mentioned in the commit message.,c,1,1,1
"@@ -974,6 +974,17 @@ drwrap_exit(void)
     if (count != 0)
         return;
 
+    ASSERT(drmgr_unregister_bb_app2app_event(drwrap_event_bb_app2app),
+           ""failed to unregister bb_app2app_event"");
+    ASSERT(drmgr_unregister_bb_instrumentation_event(drwrap_event_bb_analysis),
+           ""failed to unregister bb_instrumentation_event"");
+    ASSERT(drmgr_unregister_module_unload_event(drwrap_event_module_unload),
+           ""failed to unregister odule_unload_event"");
+    ASSERT(dr_unregister_delete_event(drwrap_fragment_delete),
+           ""failed to unregister delete_event"");
+    ASSERT(drmgr_unregister_tls_field(tls_idx),
+           ""failed to unregister tls_field"");
+
     hashtable_delete(&replace_table);
     hashtable_delete(&replace_native_table);
     hashtable_delete(&wrap_table);","Do the call outside the ASSERT: as is, this call will disappear in release build. Ditto below.",c,1,1,1
"@@ -1085,6 +1085,9 @@ module_lookup_symbol(ELF_SYM_TYPE *sym, os_privmod_data_t *pd)
      */
     ASSERT_OWN_RECURSIVE_LOCK(true, &privload_lock);
     mod = privload_first_module();
+    /* Symbols are currently looked up following the dependency chain depth-first instead
+     * of breadth-first as reflected in the global list 'modlist' (xref i#3850).
+     */
     while (mod != NULL) {
         pd = mod->os_privmod_data;
         ASSERT(pd != NULL && name != NULL);",This should be an XXX (or FIXME). Please mention that the ELF spec requires breadth-first symbol lookup.,c,1,1,1
"@@ -2009,6 +2009,7 @@ decode_operand(decode_info_t *di, byte optype, opnd_size_t opsize, opnd_t *opnd)
          */
         return decode_operand(di, TYPE_E, opsize, opnd);
     case TYPE_L: {
+        CLIENT_ASSERT(!TEST(PREFIX_EVEX_LL, di->prefixes), ""XXX i#1312: unsupported."");
         /* part of AVX: top 4 bits of 8-bit immed select xmm/ymm register */
         ptr_int_t immed = get_immed(di, OPSZ_1);
         reg_id_t reg = (reg_id_t)(immed & 0xf0) >> 4;","> Add instructions vunpcklps, vunpcklpd, more see below. There must be something which makes all these instructions similar: why did you group these particular ones? Use that in the title line. E.g., ""Add evex-encoded 0f{1,2}* opcodes"" or whatever it is.",c,1,1,1
"@@ -162,7 +162,7 @@ var xdpTestCases = []xdpTest{
 			SrcPort: 54321,
 		},
 		Drop:     false,
-		Metadata: true,
+		Metadata: false,
 	},
 	{
 		Description: ""6 - Match against a deny policy, must drop"",","Why this change (test name still says ""must pass with metadata"")?",c,1,1,1
"@@ -5761,6 +5761,19 @@ mark_page_as_guard(byte *pc)
     ASSERT(res);
 }
 
+/* Removes guard protection from page containing pc */
+void
+unmark_page_as_guard(byte *pc, uint prot)
+{
+    uint old_prot;
+    int res;
+    byte *start_page = (byte *)ALIGN_BACKWARD(pc, PAGE_SIZE);
+
+    uint flags = memprot_to_osprot(prot & ~MEMPROT_GUARD);
+    res = protect_virtual_memory(start_page, PAGE_SIZE, flags, &old_prot);
+    ASSERT(res);
+}
+
 /* Change page protection for pc:pc+size.
  * If set is false, makes [un]writable depending on add_writable argument,
  * preserving other flags; else, sets protection to new_prot.","Maybe assert, or curiosity if race could happen, that old_prot had PAGE_GUARD",c,1,1,1
"@@ -319,7 +319,7 @@ ot_variant_bsearch_str (GVariant   *array,
                         int        *out_pos)
 {
   gsize imax, imin;
-  gsize imid;
+  gsize imid = -1;
   gsize n;
 
   n = g_variant_n_children (array);","GCC is unfortunately not smart enough to figure out that the loop is guaranteed to run at least once. Maybe if we put it an the else block of the `n == 0` condition, but this is easier.",c,1,1,1
"@@ -455,6 +455,12 @@ static CALI_BPF_INLINE int calico_tc(struct __sk_buff *skb)
 		}
 	}
 
+	// Drop packets with IP options
+	if (ip_header->ihl > 5) {
+		fwd.reason = CALI_REASON_IP_OPTIONS;
+		CALI_DEBUG(""Drop packets with IP options\n"");
+		goto deny;
+	}
 	// Setting all of these up-front to keep the verifier happy.
 	struct tcphdr *tcp_header = (void*)(ip_header+1);
 	struct udphdr *udp_header = (void*)(ip_header+1);",I would say `!= 5`; A packet with <5 would be malformed.,c,1,1,1
"@@ -430,7 +430,7 @@ insert_meta_call_vargs(dcontext_t *dcontext, instrlist_t *ilist, instr_t *instr,
              * which specifies that the caller must save xax (and xcx and xdx)
              */
             insert_get_mcontext_base(dcontext, ilist, instr, SCRATCH_REG0);
-# ifdef AARCH64
+# ifdef AARCHXX
             /* TLS_REG1_SLOT is not safe since it may be used by clients.
              * We save it to dcontext.mcontext.x0.
              */","I realized that this is wrong. `SCRATCH_REG0` is `r0` on ARM, which is the first argument to each clean call... x86 is clearly fine though. I'm curious, how does this work for Aarch64 either then? Isn't `x0` the first argument to clean calls as well? @derekbruening thoughts?",c,0,1,1
"@@ -69,7 +69,7 @@ static const opt_arg_t* find_match(opt_state_t* s)
         // and short options might be grouped.
         if((match != NULL) && (match->id != p->id))
           return (opt_arg_t*)1;
-        
+
         match = p;
       }
     }",can you revert changes to this file.,c,1,1,1
"@@ -570,10 +570,12 @@ void wlr_xdg_popup_destroy(struct wlr_xdg_surface *surface) {
 
 static void xdg_popup_get_position(struct wlr_xdg_popup *popup,
                 double *popup_sx, double *popup_sy) {
-        struct wlr_xdg_surface *parent =
-                wlr_xdg_surface_from_wlr_surface(popup->parent);
-        struct wlr_box parent_geo;
-        wlr_xdg_surface_get_geometry(parent, &parent_geo);
+        struct wlr_box parent_geo = {0};
+        if (wlr_surface_is_xdg_surface(popup->parent)) {
+                struct wlr_xdg_surface *parent =
+                        wlr_xdg_surface_from_wlr_surface(popup->parent);
+                wlr_xdg_surface_get_geometry(parent, &parent_geo);
+        }
         *popup_sx = parent_geo.x + popup->geometry.x -
                 popup->base->geometry.x;
         *popup_sy = parent_geo.y + popup->geometry.y -","Perhaps I've misunderstood the issue, but don't we need to use the parent coordinates if the parent is a layer surface as well? Currently I don't see how this PR actually changes the result.",c,0,1,1
"@@ -51,7 +51,7 @@
 #    define DISPLAY_STRING(msg) dr_printf(""%s\n"", msg);
 #endif
 
-#define NULL_TERMINATE(buf) buf[(sizeof(buf) / sizeof(buf[0])) - 1] = '\0'
+#define NULL_TERMINATE(buf) (buf)[(sizeof((buf)) / sizeof((buf)[0])) - 1] = '\0'
 
 #define TESTALL(mask, var) (((mask) & (var)) == (mask))
 #define TESTANY(mask, var) (((mask) & (var)) != 0)","In the description: > Fixes: #4160 I don't know that this will auto-close: the Github docs say to not have a colon and that is what our guide says and all our commits. (We have a colon on `Issue: #xxx, #yyy` which is for our own parsing.)",c,0,1,1
"@@ -79,7 +79,8 @@ func (l *LivenessScanner) Scan() {
 			// Look up the reverse entry, where we do the book-keeping.
 			revEntryBytes, err := l.ctMap.Get(ctVal.ReverseNATKey().AsBytes())
 			if err != nil && bpf.IsNotExists(err) {
-				// Forward entry exists but no reverse entry (and the grace period has expired).
+				// Forward entry exists but no reverse entry. We might have come across the reverse
+				// entry first and removed it. It is useless on its own, so delete it now.
 				log.Info(""Found a forward NAT conntrack entry with no reverse entry, removing..."")
 				err := l.ctMap.Delete(k)
 				log.WithError(err).Debug(""Deletion result"")",Think you need to check the creation timestamp here to make sure that the entry wasn't just created (or we might be racing with the BPF program creating the pair of keys).,c,1,1,1
"@@ -843,13 +843,6 @@ err:
     return NULL;
 }
 
-/*  Create namespace name for jobid 'id'
- */
-static int job_get_ns_name (char *buf, int bufsz, flux_jobid_t id)
-{
-    return fluid_encode (buf, bufsz, id, FLUID_STRING_DOTHEX);
-}
-
 static double job_get_kill_timeout (flux_t *h)
 {
     double t = DEFAULT_KILL_TIMEOUT;","typo in commit message ""notiation"" -> ""notation""",c,0,1,0
"@@ -914,8 +914,7 @@ insert_reachable_cti(dcontext_t *dcontext, instrlist_t *ilist, instr_t *where,
 {
     ASSERT(scratch != REG_NULL); /* required */
     /* load target into scratch register */
-    insert_mov_immed_ptrsz(dcontext, (ptr_int_t)
-                           PC_AS_JMP_TGT(dr_get_isa_mode(dcontext), target),
+    insert_mov_immed_ptrsz(dcontext, (ptr_int_t)target,
                            opnd_create_reg(scratch), ilist, where, NULL, NULL);
     /* even if a call and not a jmp, we can skip this if it doesn't return */
     if (!jmp && returns) {","What I'm puzzling over is the reason that 850c10c0b8c3390608715074f0ce94379d039f2f put this here: it is called out in the commit message so there must have been something that did not have the lsb set. Not everything does: e.g., fragment tags deliberately do not have lsb set. There must have been something like that that would make its way here. Does a test suite run on arm hit any discrepancy here?",c,1,1,1
"@@ -350,7 +350,7 @@ session_thread_set_tls_interaction_cb (ThreadClosure *thread_closure,
   const char *cert_and_key_path = data; /* str\0str\0 in one malloc buf */
   const char *cert_path = cert_and_key_path;
   const char *key_path = cert_and_key_path + strlen (cert_and_key_path) + 1;
-  glnx_unref_object OstreeTlsCertInteraction *interaction = NULL;
+  g_autoptr(OstreeTlsCertInteraction) interaction = NULL;
 
   /* The GTlsInteraction instance must be created in the
    * session thread so it uses the correct GMainContext. */","AFAICT, there's no autocleanup defined for `OstreeTlsCertInteraction` yet.",c,1,1,1
"@@ -246,13 +246,13 @@ inject_into_thread(HANDLE phandle, CONTEXT *cxt, HANDLE thandle, char *dynamo_pa
              * the dynamorio lib.
              */
             for (i = 0; i < MCXT_NUM_SIMD_SLOTS; i++) {
-                for (j = 0; j < IF_X64_ELSE(2, 4); j++) {
+                for (j = 0; j < XMM_REG_SIZE / sizeof(*bufptr); j++) {
                     *bufptr++ = CXT_XMM(cxt, i)->reg[j];
                 }
                 /* FIXME i#437: save ymm fields.  For now we assume we're
                  * not saving and we just skip the upper 128 bits.
                  */
-                bufptr += IF_X64_ELSE(2, 4);
+                bufptr += (YMM_REG_SIZE - XMM_REG_SIZE) / sizeof(*bufptr);
             }
         } else {
             /* skip xmm slots */",These two expressions were identical before but now they're not?,c,1,1,1
"@@ -34,7 +34,7 @@ from shared.ttypes import DBStatus
 LOG = get_logger('system')
 
 
-class DBContext():
+class DBContext:
     """"""
     Simple helper class to setup and sql engine, a database session
     and a connection.",Please use new-style class `DBContext(object)`,c,1,1,1
"@@ -208,10 +208,12 @@ static bool atomic_crtc_set_gamma(struct wlr_drm_backend *drm,
 		struct wlr_drm_crtc *crtc, size_t size,
 		uint16_t *r, uint16_t *g, uint16_t *b) {
 	// Fallback to legacy gamma interface when gamma properties are not available
-	// (can happen on older intel gpu's that support gamma but not degamma)
-	// TEMP: This is broken on AMDGPU. Always fallback to legacy until they get
-	// it fixed. Ref https://bugs.freedesktop.org/show_bug.cgi?id=107459
-	if (crtc->props.gamma_lut == 0 || true) {
+	// (can happen on older Intel GPUs that support gamma but not degamma).
+	// TEMP: This is broken on AMDGPU. Provide a fallback to legacy until they
+	// get it fixed. Ref https://bugs.freedesktop.org/show_bug.cgi?id=107459
+	const char *no_atomic_str = getenv(""WLR_DRM_NO_ATOMIC_GAMMA"");
+	bool no_atomic = no_atomic_str != NULL && strcmp(no_atomic_str, ""1"") == 0;
+	if (crtc->props.gamma_lut == 0 || no_atomic) {
 		return legacy_iface.crtc_set_gamma(drm, crtc, size, r, g, b);
 	}
 ","I actually looked at this and was wondering about doing a getenv everytime we set gamma.. It's not a fast path but it's the first getenv we'll have that's not at init. Well, I guess it's probably ok",c,1,1,1
"@@ -792,18 +792,6 @@ static void implicit_tool_up(struct wlr_tablet_tool_v2_grab *grab) {
         check_and_release_implicit_grab(grab);
 }
 
-/* Only send the motion event, when we are over the surface for now */
-static void implicit_tool_motion(
-        struct wlr_tablet_tool_v2_grab *grab, double x, double y) {
-        struct implicit_grab_state *state = grab->data;
-        if (state->focused != state->original) {
-                return;
-        }
-
-        wlr_send_tablet_v2_tablet_tool_motion(grab->tool, x, y);
-}
-
-
 static void implicit_tool_button(
         struct wlr_tablet_tool_v2_grab *grab, uint32_t button,
         enum zwp_tablet_pad_v2_button_state state) {",Hmm. But using the default handler would send the event to the wrong surface then?,c,1,1,1
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -474,12 +474,12 @@ class TestAnalyze(unittest.TestCase):
         """"""
         build_json = os.path.join(self.test_workspace, ""build_extra_args.json"")
         report_dir = os.path.join(self.test_workspace, ""reports_extra_args"")
-        source_file = os.path.join(self.test_dir, ""extra_args.c"")
+        source_file = os.path.join(self.test_dir, ""extra_args.cpp"")
         tidyargs_file = os.path.join(self.test_dir, ""tidyargs"")
         saargs_file = os.path.join(self.test_dir, ""saargs"")
 
         build_log = [{""directory"": self.test_dir,
-                      ""command"": ""cc -c "" + source_file,
+                      ""command"": ""g++ -c "" + source_file,
                       ""file"": source_file
                       }]
 ",I don't see any test cases where you use the `--analyzer-config` and `--tidyargs` in the same command. So please create a new test case or extend an existing one with it.,c,1,1,1
"@@ -270,6 +270,10 @@ static jx_token_t jx_scan( struct jx_parser *s )
 	} else if(c=='!') {
 		char d = jx_getchar(s);
 		if(d=='=') return JX_TOKEN_NE;
+		if(isalpha(d) || d == '_') {
+			jx_ungetchar(s,d);
+			return JX_TOKEN_NOT;
+		}
 		jx_ungetchar(s,d);
 		jx_parse_error(s,""invalid character: !"");
 		return JX_TOKEN_PARSE_ERROR;","Let's just make this a simple `else` and avoid the problem of understanding all the valid characters that may follow.. (For example, an open paren could come after `!`)",c,1,1,1
"@@ -936,6 +936,8 @@ int32_t h2o_socket_getport(struct sockaddr *sa)
 static void create_ossl(h2o_socket_t *sock)
 {
     sock->ssl->ossl = SSL_new(sock->ssl->ssl_ctx);
+    /* set app data to be used in h2o_socket_ssl_new_session_cb */
+    assert(SSL_set_app_data(sock->ssl->ossl, sock));
     setup_bio(sock);
 }
 ","I think you need to split `assert` and the call to `SSL_set_app_data`. Otherwise, the call to the OpenSSL function will be eliminated when `NBEGUG` is set.",c,1,1,1
"@@ -298,7 +298,7 @@ commit_loose_regfile_object (OstreeRepo        *self,
        */
       if (S_ISREG (mode))
         {
-          const mode_t content_mode = (mode & (S_IFREG | 0775)) | S_IRUSR;
+          const mode_t content_mode = (mode & USERMODE_CANONICAL_MASK) | S_IFREG | S_IRUSR;
           if (!glnx_fchmod (tmpf->fd, content_mode, error))
             return FALSE;
         }","Hmm. There's a really important difference between `bare-user` and `bare-user-only`, which is that `bare-user` is intended to be losslessly convertible to-from `bare`. Now, we store the mode as an xattr, but it kind of intentional that the checked out tree mostly resembles what's in the `bare`. I'd be happier I think if this change only touched code paths involved in `bare-user-only`. Then the messaging is clearer.",c,1,1,1
"@@ -57,9 +57,8 @@ xfpga_fpgaGetPropertiesFromHandle(fpga_handle handle, fpga_properties *prop)
 	return result;
 }
 
-
-fpga_result __FPGA_API__
-xfpga_fpgaGetProperties(fpga_token token, fpga_properties *prop)
+fpga_result __FPGA_API__ xfpga_fpgaGetProperties(fpga_token token,
+						 fpga_properties *prop)
 {
 	struct _fpga_properties *_prop;
 	fpga_result result = FPGA_OK;",Should we call the API `fpgaGetProperties` with a null token to allocate the properties structure?,c,1,1,1
"@@ -22,6 +22,10 @@ void wlr_texture_destroy(struct wlr_texture *texture) {
 struct wlr_texture *wlr_texture_from_pixels(struct wlr_renderer *renderer,
 		uint32_t fmt, uint32_t stride, uint32_t width, uint32_t height,
 		const void *data) {
+	assert(width > 0);
+	assert(height > 0);
+	assert(stride >= width);
+	assert(data);
 	return renderer->impl->texture_from_pixels(renderer, fmt, stride, width,
 		height, data);
 }",Maybe also assert that `stride > 0`?,c,1,1,0
"@@ -67,6 +67,9 @@ static void surface_set_opaque_region(struct wl_client *client,
 		struct wl_resource *resource,
 		struct wl_resource *region_resource) {
 	struct wlr_surface *surface = wl_resource_get_user_data(resource);
+	if ((surface->pending.invalid & WLR_SURFACE_INVALID_OPAQUE_REGION)) {
+		pixman_region32_clear(&surface->pending.opaque);
+	}
 	surface->pending.invalid |= WLR_SURFACE_INVALID_OPAQUE_REGION;
 	if (region_resource) {
 		pixman_region32_t *region = wl_resource_get_user_data(region_resource);",Is this correct? Other regions accumulate according to the protocol.,c,1,1,1
"@@ -98,6 +98,10 @@ class ThriftProductHelper(object):
     def getCurrentProduct(self):
         pass
 
+    @ThriftClientCall
+    def getProductConfiguration(self, product_id):
+        pass
+
     # -----------------------------------------------------------------------
     @ThriftClientCall
     def addProduct(self, product):",Why did you add this to the product helper. Do you want to use it in the client?,c,1,1,1
"@@ -67,8 +67,8 @@ get_pthread_tls_offs(void)
 void
 init_android_version(void)
 {
-#   define VER_FILE ""/system/build.prop""
-#   define VER_PROP ""ro.build.version.release=""
+#define VER_FILE ""/system/build.prop""
+#define VER_PROP ""ro.build.version.release=""
     file_t fd = os_open(VER_FILE, OS_OPEN_READ);
     uint read_ver = 0;
     if (fd != INVALID_FILE) {",Ditto for these: lining up with code indentation level when inside function,c,1,1,1
"@@ -1,9 +1,3 @@
- /*
-Copyright (C) 2017- The University of Notre Dame
-This software is distributed under the GNU General Public License.
-See the file COPYING for details.
-*/
-
 #include ""batch_job_internal.h""
 #include ""process.h""
 #include ""batch_job.h""","Don't remove the copyright, please.",c,1,1,1
"@@ -126,6 +126,11 @@ instr_clone(dcontext_t *dcontext, instr_t *orig)
         instr->bytes =
             (byte *)heap_reachable_alloc(dcontext, instr->length HEAPACCT(ACCT_IR));
         memcpy((void *)instr->bytes, (void *)orig->bytes, instr->length);
+    } else if (instr_is_label(orig)) {
+        /* We don't know what this callback does, we can't copy this. The caller that
+         * makes the clone needs to take care of this, xref i#3926.
+         */
+        instr_set_label_callback(instr, NULL);
     }
 #ifdef CUSTOM_EXIT_STUBS
     if ((orig->flags & INSTR_HAS_CUSTOM_STUB) != 0) {","There seem to be deeper issues: drmgr_is_emulation_start will still return true for a cloned instrlist, and if the original is freed, then drmgr_get_emulated_instr_data on the clone will point to freed memory. Is there something we can do to prevent use-after-frees. Adding on-clone callbacks (starting to get overkill? would want C++ or sthg at that point); zeroing label data instead of shallow-copying it and thus committing to clones being second-class copies? nit: More comma issues.",c,1,0,1
"@@ -741,9 +741,15 @@ mangle_syscall_code(dcontext_t *dcontext, fragment_t *f, byte *pc, bool skip)
                 /* For A32 it's not OP_b_short */
                 IF_ARM(||
                        (instr_get_opcode(&instr) == OP_jmp &&
-                        opnd_get_pc(instr_get_target(&instr)) == pc + ARM_INSTR_SIZE)))
+                        opnd_get_pc(instr_get_target(&instr)) == pc + ARM_INSTR_SIZE))) {
+#    ifdef AARCH64
+            /* For A64, both skip_pc and cti_pc are an OP_jmp_short instr. */
+            skip_pc = cti_pc;
+            cti_pc = prev_pc;
+#    else
             skip_pc = prev_pc;
-        else if (instr_get_opcode(&instr) == OP_jmp)
+#    endif
+        } else if (instr_get_opcode(&instr) == OP_jmp)
             cti_pc = prev_pc;
         if (pc >= stop_pc) {
             LOG(THREAD, LOG_SYSCALLS, 3, ""\tno syscalls found\n"");","I haven't verified, but could this condition be a bug for A32? It matches only when the jmp instr at `skip_pc` has `cti_pc` as target. But, it won't match when the instr at `skip_pc` has already been modified to point to the syscall.",c,1,1,1
"@@ -2,11 +2,7 @@
 
 #include <wlr/config.h>
 
-#ifdef __linux__
 #include <linux/input-event-codes.h>
-#elif __FreeBSD__
-#include <dev/evdev/input-event-codes.h>
-#endif
 
 #include <xcb/xcb.h>
 #include <xcb/xfixes.h>","Hmm, what's the story about these? Are `linux/*` includes available on FreeBSD now?",c,1,1,1
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -22,6 +22,10 @@ def get_analyzer_checkers_cmd(cfg_handler, alpha=True, debug=True):
     Before clang9 alpha and debug checkers were printed by default.
     Since clang9 there are extra arguments to print the additional checkers.
     """"""
+    if not cfg_handler.version_info:
+        LOG.debug(""No clang version information. Can not get checkers."")
+        return None
+
     command = [cfg_handler.analyzer_binary, ""-cc1""]
 
     for plugin in cfg_handler.analyzer_plugins:","This should be a warning, not a normally silent debug.",c,1,1,1
"@@ -3333,7 +3333,14 @@ instr_is_reg_spill_or_restore_ex(void *drcontext, instr_t *instr, bool DR_only,
         reg = &myreg;
     if (instr_check_tls_spill_restore(instr, spill, reg, &check_disp)) {
         int offs = reg_spill_tls_offs(*reg);
-        if (!DR_only || (offs != -1 && check_disp == os_tls_offset((ushort)offs))) {
+        if (!DR_only ||
+            (offs != -1 &&
+             /* Mangling may choose to spill registers to a not natural tls offset,
+              * e.g. rip-rel mangling will, if rax is used by the instruction. We
+              * allow for this here and still recognize the DR spill.
+              */
+             (instr_is_our_mangling(instr) ||
+              check_disp == os_tls_offset((ushort)offs)))) {
             if (tls != NULL)
                 *tls = true;
             if (offs_out != NULL)","This only works for a mangled instruction list: i.e., only during bb building (after a client's events) or bb recreation (also after a client's events). Thus this call will never return true for a client. Plus, this is-spill function is used for more than instrlists: some callers use it when decoding raw instructions, such as drreg and also I think DR may use it that way when it decodes from the cache in some cases? So this does not seem a complete solution.",c,1,0,1
"@@ -2,7 +2,7 @@
 
 Name:           felix
 Summary:        Project Calico virtual networking for cloud data centers
-Version:        2.2.1
+Version:        2.4.0
 Release:        1%{?dist}
 License:        Apache-2
 URL:            http://projectcalico.org",Erk. The fact this jumped from 2.2.1 to 2.4.0 - did we miss a change for 2.3.0?,c,1,1,1
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -63,6 +63,7 @@ void shutdown_destroy (shutdown_t *s)
     if (s) {
         if (s->shutdown)
             flux_msg_handler_destroy (s->shutdown);
+        shutdown_disarm (s);
         if (s->h)
             (void)flux_event_unsubscribe (s->h, ""shutdown"");
         free (s);","Perhaps a good change, but unrelated to the logical topic of this commit.",c,1,1,1
"@@ -174,6 +174,16 @@ def add_arguments_to_parser(parser):
                                     ""compiler on the system is special, e.g. ""
                                     ""when doing cross-compilation."")
 
+    analyzer_opts.add_argument('--capture-analysis-output',
+                               dest='capture_analysis_output',
+                               action='store_true',
+                               default=argparse.SUPPRESS,
+                               required=False,
+                               help=""Store standard output and standard error ""
+                                    ""of successful analyzer invocations ""
+                                    ""into the '<OUTPUT_DIR>/success' ""
+                                    ""directory."")
+
     analyzer_opts.add_argument('--saargs',
                                dest=""clangsa_args_cfg_file"",
                                required=False,","I wonder, mayhaps _capture-**successful**-output_ could be a better optstring? Considering that failure output is also captured (about which I wonder perhaps we should introduce an optstring that _disables_ that notion, as there could be cases someone does not truly care about the analysis failures as deeply as the code currently does.)",c,1,1,1
"@@ -176,8 +176,8 @@ def add_arguments_to_parser(parser):
 
     analyzer_opts.add_argument('--add-compiler-defaults',
                                action='store_true',
-                               default=False,
                                required=False,
+                               default=argparse.SUPPRESS,
                                help=""Retrieve compiler-specific configuration ""
                                     ""from the compilers themselves, and use ""
                                     ""them with Clang. This is used when the """,Why do we need this change?,c,1,1,0
"@@ -376,7 +376,7 @@ static void on_connect(h2o_socket_t *sock, const char *err)
         }
         __sync_sub_and_fetch(&req->pool->_shared.count, 1);
         req->sock = NULL;
-        errstr = ""connection failed""; /* shouldn't we return err? */
+        errstr = err;
     } else {
         h2o_url_t *target_url = &req->pool->targets.entries[req->selected_target]->url;
         if (target_url->scheme->is_ssl) {","This looks like a fine change, though I think we can just get rid of `errstr`, and pass `err` as the argument to `call_connect_cb`?",c,1,1,1
"@@ -92,7 +92,7 @@ fpga_result __FPGA_API__ fpgaOpen(fpga_token token, fpga_handle *handle, int fla
 	_handle->mmio_root = NULL;
 
 	// Init workspace table
-	_handle->wsid_root = wsid_tracker_init(16384);
+	_handle->wsid_root = wsid_tracker_init(MAX_WSID_TRACKER_BUCKETS);
 
 	// set handle return value
 	*handle = (void *)_handle;","MAX is the wrong prefix. This is just a static number of buckets to allocate in the hash table. A better name would be ""NUM_WSID_TRACKER_BUCKETS"".",c,1,1,1
"@@ -82,6 +82,7 @@ IGNORED_OPTIONS_GCC = [
     '-fno-aggressive-loop-optimizations',
     '-fno-delete-null-pointer-checks',
     '-fno-jump-table',
+    '-fno-keep-static-consts',
     '-fno-strength-reduce',
     '-fno-toplevel-reorder',
     '-fno-unit-at-a-time',",Comma is missing at the end of line.,c,1,1,1
"@@ -0,0 +1,18 @@
+/**
+ * Autogenerated by Thrift Compiler (0.11.0)
+ *
+ * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
+ *  @generated
+ */
+
+/// <summary>
+/// You can define enums, which are just 32 bit integers. Values are optional
+/// and start at 1 if not supplied, C style again.
+/// </summary>
+public enum Operation
+{
+  ADD = 1,
+  SUBTRACT = 2,
+  MULTIPLY = 3,
+  DIVIDE = 4,
+}",Generated code should not be checked in.,c,1,1,1
"@@ -23,6 +23,15 @@ void wlr_renderer_end(struct wlr_renderer *r) {
         r->impl->end(r);
 }
 
+void wlr_renderer_clear(struct wlr_renderer *r, float red, float green,
+                float blue, float alpha) {
+        r->impl->clear(r, red, green, blue, alpha);
+}
+
+void wlr_renderer_scissor(struct wlr_renderer *r, struct wlr_box *box) {
+        r->impl->scissor(r, box);
+}
+
 struct wlr_texture *wlr_render_texture_create(struct wlr_renderer *r) {
         return r->impl->texture_create(r);
 }",Check for null,c,1,1,0
"@@ -348,6 +348,8 @@ void wlr_seat_destroy(struct wlr_seat *wlr_seat) {
 		return;
 	}
 
+	wl_signal_emit(&wlr_seat->events.destroy, NULL);
+
 	wl_list_remove(&wlr_seat->display_destroy.link);
 
 	struct wlr_seat_client *client, *tmp;","We generally emit the signal with the object itself as data, here `wlr_seat`.",c,1,1,1
"@@ -65,7 +65,7 @@ disable=all
 # Enable the message, report, category or checker with the given id(s). You can
 # either give multiple identifier separated by comma (,) or put this option
 # multiple time. See also the ""--disable"" option for examples.
-enable=logging-format-interpolation,old-style-class,unused-import,unused-variable,len-as-condition,bad-indentation
+enable=logging-format-interpolation,old-style-class,unused-import,unused-variable,len-as-condition,bad-indentation,unpacking-in-except,import-star-module-level,parameter-unpacking,long-suffix,old-octal-literal,old-ne-operator,backtick,old-raise-syntax,print-statement,unpacking-in-except,import-star-module-level,parameter-unpacking,long-suffix,old-octal-literal,old-ne-operator,backtick,old-raise-syntax,print-statement,not-in-loop,function-redefined,continue-in-finally,abstract-class-instantiated,sstar-needs-assignment-target,duplicate-argument-name,too-many-star-expressions,nonlocal-and-global,return-outside-function,return-arg-in-generator,invalid-star-assignment-target,bad-reversed-sequence,nonexistent-operator,yield-outside-function,init-is-generator,nonlocal-without-binding,invalid-unary-operand-type,unsupported-binary-operation,no-member,not-callable,redundant-keyword-arg,assignment-from-no-return,assignment-from-none,not-context-manager,repeated-keyword,missing-kwoa,no-value-for-parameter,invalid-sequence-index,invalid-slice-index,too-many-function-args,unexpected-keyword-arg,unsupported-membership-test,unsubscriptable-object,unpacking-non-sequence,invalid-all-object,no-name-in-module,unbalanced-tuple-unpacking,undefined-variable,undefined-all-variable,used-before-assignment,format-needs-mapping,truncated-format-string,missing-format-string-key,mixed-format-string,too-few-format-args,bad-str-strip-call,too-many-format-args,bad-format-character,access-member-before-definition,method-hidden,assigning-non-slot,duplicate-bases,inconsistent-mro,inherit-non-class,invalid-slots,invalid-slots-object,no-method-argument,no-self-argument,unexpected-special-method-signature,non-iterator-returned,invalid-length-returned
 
 [REPORTS]
 ",travis fails with this config,c,1,1,1
"@@ -4111,7 +4111,17 @@ ostree_repo_pull_with_options (OstreeRepo             *self,
         g_string_append_printf (msg, ""libostree pull from '%s' for %u refs complete"",
                                 pull_data->remote_name, g_hash_table_size (requested_refs_to_fetch));
 
-      g_string_append_printf (msg, ""\nsecurity: GPG: %s "", pull_data->gpg_verify ? ""yes"" : ""no"");
+      const char *gpg_verify_state;
+      if (pull_data->gpg_verify_summary)
+        {
+          if (pull_data->gpg_verify)
+            gpg_verify_state = ""summary+commit"";
+          else
+            gpg_verify_state = ""summary-only"";
+        }
+      else
+        gpg_verify_state = (pull_data->gpg_verify ? ""commit"" : ""disabled"");
+      g_string_append_printf (msg, ""\nsecurity: GPG: %s "", gpg_verify_state);
       OstreeFetcherURI *first_uri = pull_data->meta_mirrorlist->pdata[0];
       g_autofree char *first_scheme = _ostree_fetcher_uri_get_scheme (first_uri);
       if (g_str_has_prefix (first_scheme, ""http""))","Nit: can we call this `summary`, to be consistent with `commit` and `summary+commit`?",c,1,1,1
"@@ -610,4 +610,11 @@ Application %1!s! (%2!s!). Cannot identify VFP frame offset.
 .
 ;#endif
 
+MessageId =
+Severity = Error
+Facility = DRCore
+SymbolicName = MSG_COULDNT_SYNCH_WITH_ALL_THREADS
+Language=English
+%1!s!:  DynamoRIO could not synch with all threads.
+.
 ;// ADD NEW MESSAGES HERE","Include the application name and pid, as all the other messages do: best to match them and start with that. I would avoid ""DynamoRIO"": that's parameterized out for crash messages (xref dr_set_client_name(), PRODUCT_NAME, etc.), so best to avoid here. Maybe just ""Application %1!s! (%2!s!): Failed to synchronize with all threads when detaching.""",c,1,1,1
"@@ -36,11 +36,11 @@
 #include <sys/syscall.h>
 #endif
 #if HAVE_VALGRIND
-# if HAVE_VALGRIND_H
-#  include <valgrind.h>
-# elif HAVE_VALGRIND_VALGRIND_H
-#  include <valgrind/valgrind.h>
-# endif
+#if HAVE_VALGRIND_H
+#include <valgrind.h>
+#elif HAVE_VALGRIND_VALGRIND_H
+#include <valgrind/valgrind.h>
+#endif
 #endif
 
 #include ""src/common/libutil/log.h""",I prefer indented preprocessor macros as seen here. Could we consider adding `IndentPPDirectives: AfterHash`? Not important if nobody else cares...,c,1,1,1
"@@ -1936,6 +1936,14 @@ class ThriftRequestHandler(object):
 
         session = self.__storage_session.get_transaction(run_id)
 
+        all_reports = session.query(Report) \
+            .filter(Report.run_id == run_id) \
+            .all()
+
+        hash_map_reports = defaultdict(list)
+        for report in all_reports:
+            hash_map_reports[report.bug_id].append(report)
+
         # Processing PList files.
         _, _, report_files = next(os.walk(report_dir), ([], [], []))
         for f in report_files:",Is `defaultdict` known? Maybe having a regular dict and `hash_map_reports[report.bug_id] = [report]` Is easier to read?,c,1,1,1
"@@ -339,8 +339,12 @@ void wlr_output_layout_closest_point(struct wlr_output_layout *layout,
 		}
 	}
 
-	*dest_x = min_x;
-	*dest_y = min_y;
+	if (dest_x) {
+		*dest_x = min_x;
+	}
+	if (dest_y) {
+		*dest_y = min_y;
+	}
 }
 
 struct wlr_box *wlr_output_layout_get_box(","We can return early from this function without doing anything if these are both NULL, right?",c,1,1,1
"@@ -190,10 +190,17 @@ func (l *InheritIndex) OnUpdate(update api.Update) (_ bool) {
 }
 
 func (idx *InheritIndex) UpdateSelector(id interface{}, sel selector.Selector) {
-	log.Infof(""Updating selector %v"", id)
 	if sel == nil {
 		log.WithField(""id"", id).Panic(""Selector should not be nil"")
 	}
+	oldSel := idx.selectorsById[id]
+	// Since the selectorRoot struct has cache fields, the easiest way to compare two
+	// selectors is to compare their IDs.
+	if oldSel != nil && oldSel.UniqueID() == sel.UniqueID() {
+		log.WithField(""selID"", id).Info(""Skipping unchanged selector"")
+		return
+	}
+	log.WithField(""selID"", id).Info(""Updating selector"")
 	idx.scanAllLabels(id, sel)
 	idx.selectorsById[id] = sel
 }",Might we still want to do this line - i.e. not return before it - even when the old and new selectors have the same UniqueID?,c,1,1,1
"@@ -714,7 +714,7 @@ dispatch_enter_native(dcontext_t *dcontext)
          * be an alarm signal so we drop it as the simplest solution.
          */
         ASSERT(dcontext->signals_pending);
-        dcontext->signals_pending = false;
+        dcontext->signals_pending = 0;
     } while (true);
 #else
     (*go_native)(dcontext);",I wonder if usages like this need to be audited too. `signals_pending` can be < 0 if one is being currently handled.,c,1,1,1
"@@ -136,6 +136,9 @@ static inline pmix_status_t _job_data_store(const char *nspace, void *cbdata)
     int32_t cnt;
     size_t nnodes;
     uint32_t i;
+#if !(defined(PMIX_ENABLE_DSTORE) && (PMIX_ENABLE_DSTORE == 1))
+    uint32_t j;
+#endif
     pmix_nrec_t *nrec, *nr2;
     char **procs = NULL;
     pmix_byte_object_t *bo;",Why this variable was introduced but no usages are visible?,c,1,1,1
"@@ -1169,7 +1169,8 @@ dynamo_shared_exit(thread_record_t *toexit /* must ==cur thread for Linux */
     return SUCCESS;
 }
 
-int
+/* NOINLINE because dynamorio_app_exit is a stopping point. */
+NOINLINE int
 dynamorio_app_exit(void)
 {
     return dynamo_process_exit();",> Those scenarios would need their own optimizer-specific solution. Not for this PR but a future one -- We should add that to the docs: though we never made particular docs for static-library DR so we need to do that first. Maybe we should file an issue on doing that.,c,0,1,1
"@@ -108,6 +108,10 @@ static batch_job_id_t batch_job_wq_wait (struct batch_queue * q, struct batch_jo
 		{
 			return -1;
 		}
+
+		char *transactions = string_format(""%s.transactions"", q->logfile);
+		work_queue_specify_transactions_log(q->data, transactions);
+		free(transactions);
 	}
 
 	if(stoptime == 0) {","More of a meta question, but is there a reason we wait to specify the log and transaction log until batch_job_wait, as opposed to batch_job_create?",c,1,1,1
"@@ -772,10 +772,10 @@ read_evex(byte *pc, decode_info_t *di, byte instr_byte,
         }
         *is_evex = true;
 #if !defined(STANDALONE_DECODER)
-        char pc_addr[IF_X64_ELSE(20, 12)];
-        snprintf(pc_addr, BUFFER_SIZE_ELEMENTS(pc_addr), PFX, pc);
-        NULL_TERMINATE_BUFFER(pc_addr);
-        DO_ONCE(SYSLOG(SYSLOG_ERROR, AVX_512_SUPPORT_INCOMPLETE, 2,
+        DO_ONCE(char pc_addr[IF_X64_ELSE(20, 12)];
+                snprintf(pc_addr, BUFFER_SIZE_ELEMENTS(pc_addr), PFX, pc);
+                NULL_TERMINATE_BUFFER(pc_addr);
+                SYSLOG(SYSLOG_ERROR, AVX_512_SUPPORT_INCOMPLETE, 2,
                        get_application_name(), get_application_pid(), pc_addr));
 #endif
         info = &evex_prefix_extensions[0][1];",The rest of the codebase uses {} for all multi-statement code inside a macro.,c,1,1,1
"@@ -259,11 +259,11 @@ flb_sds_t flb_sds_cat_utf8 (flb_sds_t *sds, const char *str, int str_len)
             s[head->len++] = '\\';
             s[head->len++] = 'u';
             if (cp > 0xFFFF) {
-                c = int2hex[ (unsigned char) ((cp & 0xf00000) >> 20)];
+                c = (unsigned char) ((cp & 0xf00000) >> 20);
                 if (c > 0) {
                     s[head->len++] = int2hex[c];
                 }
-                c = int2hex[ (unsigned char) ((cp & 0x0f0000) >> 16)];
+                c = (unsigned char) ((cp & 0x0f0000) >> 16);
                 if (c > 0) {
                     s[head->len++] = int2hex[c];
                 }",Here's the array overrun (line 264 and 268).,c,1,1,1
"@@ -3853,6 +3853,8 @@ ostree_repo_pull_with_options (OstreeRepo             *self,
 
       while (g_variant_iter_loop (collection_refs_iter, ""(&s&s&s)"", &collection_id, &ref_name, &checksum))
         {
+          if (!ostree_validate_rev (ref_name, error))
+            goto out;
           g_hash_table_insert (requested_refs_to_fetch,
                                ostree_collection_ref_new (collection_id, ref_name),
                                (*checksum != '\0') ? g_strdup (checksum) : NULL);","We also need this in the next `else if` for `refs_to_fetch`, right?",c,1,1,1
"@@ -1,4 +1,4 @@
-// Copyright (c) 2020 Tigera, Inc. All rights reserved.
+// Copyright (c) 2020-2021 Tigera, Inc. All rights reserved.
 //
 // Licensed under the Apache License, Version 2.0 (the ""License"");
 // you may not use this file except in compliance with the License.","Should revert this copyright change, when the file isn't changing in any other way.",c,1,1,1
"@@ -1853,8 +1853,15 @@ presys_SetContextThread(dcontext_t *dcontext, reg_t *param_base)
     /* FIXME : we are going to read and write to cxt, which may be unsafe */
     ASSERT(tid != 0xFFFFFFFF);
     LOG(THREAD, LOG_SYSCALLS|LOG_THREADS, IF_DGCDIAG_ELSE(1, 2),
-        ""syscall: NtSetContextThread handle=""PFX"" tid=%d cxt->Xip=""PFX""\n"",
-        thread_handle, tid, cxt->CXT_XIP);
+        ""syscall: NtSetContextThread handle=""PFX"" tid=%d cxt->Xip=""PFX"" flags=""PFX""\n"",
+        thread_handle, tid, cxt->CXT_XIP, cxt->ContextFlags);
+    if (get_thread_id() == tid) {
+        /* Simple case when called on own thread. */
+        /* FIXME : we should handle theses flags. */
+        ASSERT(!TEST(CONTEXT_CONTROL, cxt->ContextFlags) &&
+               !TEST(CONTEXT_DEBUG_REGISTERS, cxt->ContextFlags));
+        return execute_syscall;
+    }
     mutex_lock(&thread_initexit_lock); /* need lock to lookup thread */
     if (intercept_asynch_for_thread(tid, false/*no unknown threads*/)) {
         priv_mcontext_t mcontext;","Include the issue number (so ""FIXME i#2249: ..."")",c,0,1,1
"@@ -354,13 +354,10 @@ type BPFDataplane interface {
 	RemoveXDP(ifName string, mode XDPMode) error
 	UpdateCIDRMap(ifName string, family IPFamily, ip net.IP, mask int, refCount uint32) error
 	UpdateFailsafeMap(proto uint8, port uint16) error
-	loadXDPRaw(objPath, ifName string, mode XDPMode, mapArgs []string) error
 	GetBPFCalicoDir() string
 	AttachToSockmap() error
 	DetachFromSockmap(mode FindObjectMode) error
 	RemoveSockmap(mode FindObjectMode) error
-	loadBPF(objPath, progPath, progType string, mapArgs []string) error
-	LoadSockops(objPath string) error
 	LoadSockopsWithBytes(objBytes []byte) error
 	LoadSockopsAuto() error
 	RemoveSockops() error",Please can you merge master in before making these changes. I just reinstated a bunch of BPF UTs. Possible that the UTs use this code.,c,0,1,0
"@@ -299,16 +299,11 @@ static int on_head(struct st_h2o_http2client_conn_t *conn, struct st_h2o_http2cl
         stream->super._cb.on_head(&stream->super, is_end_stream ? h2o_httpclient_error_is_eos : NULL, 0, stream->input.status,
                                   h2o_iovec_init(NULL, 0), stream->input.headers.entries, stream->input.headers.size, (int)len, 0);
 
-    if (is_end_stream) {
+    if (is_end_stream || stream->super._cb.on_body == NULL) {
         close_stream(stream);
         return 0;
     }
 
-    if (stream->super._cb.on_body == NULL) {
-        ret = H2O_HTTP2_ERROR_PROTOCOL; // TODO: what error is suitable for this case?
-        goto SendRSTStream;
-    }
-
     transition_state(stream, H2O_HTTP2CLIENT_STREAM_STATE_RECV_BODY);
 
     return 0;","The answer depends on what we want to do. If we are to allow applications to close the request by returning NULL in response to the `on_head` calleb with err (i.e. the second argument) set to NULL, we should send upstream a stream-level error and keep the connection alive. Otherwise, we would face errors on other requests sharing the same connection. If we are to *not* allow applications to return NULL, we should do `assert(stream->supe._cb.on_body != NULL)`. My assumption was that we are going for the latter approach, but I am definitely open to discussing what the correct way is, especially if there is a case that actually returns NULL.",c,1,0,1
"@@ -1337,12 +1337,12 @@ append_restore_simd_reg(dcontext_t *dcontext, instrlist_t *ilist, bool absolute)
         int i;
         uint opcode = move_mm_reg_opcode(true /*align32*/, true /*align16*/);
         ASSERT(proc_has_feature(FEATURE_SSE));
-        for (i = 0; i < NUM_SIMD_SAVED; i++) {
+        for (i = 0; i < proc_num_simd_saved(); i++) {
             APP(ilist,
                 instr_create_1dst_1src(
                     dcontext, opcode, opnd_create_reg(REG_SAVED_XMM0 + (reg_id_t)i),
                     OPND_DC_FIELD(absolute, dcontext, OPSZ_SAVED_XMM,
-                                  XMM_OFFSET + i * XMM_SAVED_REG_SIZE)));
+                                  XMM_OFFSET + i * MAX_SIMD_SLOT_SIZE)));
         }
     }
 }","This seems odd to me: to have a hardcoded opcde and operands for xmm, but with a MAX_ constant for the size? This seems like it could end in an error where MAX_ allows for zmm but this instruction only uses xmm. It seems like the whole insruction needs to vary, not just this size. Ditto below. OK after seeing that this MAX_ is the mcontext field size: how about renaming it so it doesn't sound like it varies. How about MCXT_SIMD_FIELD_SIZE or sthg?",c,1,0,1
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -1409,10 +1409,11 @@ common_disassemble_fragment(dcontext_t *dcontext, fragment_t *f_in, file_t outfi
             pc = (cache_pc)disassemble_with_bytes(dcontext, (byte *)pc, outfile);
         }
         if (LINKSTUB_DIRECT(l->flags) && DIRECT_EXIT_STUB_DATA_SZ > 0) {
-            ASSERT(DIRECT_EXIT_STUB_DATA_SZ == sizeof(cache_pc));
-            if (stub_is_patched(f, EXIT_STUB_PC(dcontext, f, l))) {
+            ASSERT(DIRECT_EXIT_STUB_DATA_SZ == sizeof(cache_pc) IF_AARCH64(+4));
+            if (stub_is_patched(dcontext, f, EXIT_STUB_PC(dcontext, f, l))) {
                 print_file(outfile, ""  <stored target: "" PFX "">\n"",
-                           *(cache_pc *)next_stop_pc);
+                           *(cache_pc *)IF_AARCH64_ELSE(ALIGN_FORWARD(next_stop_pc, 8),
+                                                        next_stop_pc));
             }
             pc += DIRECT_EXIT_STUB_DATA_SZ;
         }",Maybe make a named constant and use it here and in the define above where it says 12?,c,1,1,1
"@@ -91,15 +91,9 @@ struct wlr_backend *wlr_backend_autocreate(struct wl_display *display) {
                 return NULL;
         }
 
-        int gpu = wlr_session_find_gpu(session);
-        if (gpu == -1) {
-                wlr_log(L_ERROR, ""Failed to open DRM device"");
-                goto error_session;
-        }
-
         backend = wlr_multi_backend_create(session);
         if (!backend) {
-                goto error_gpu;
+                goto error_session;
         }
 
         struct wlr_backend *libinput = wlr_libinput_backend_create(display, session);","Something that might be useful in the future is to specify a list of GPUs to use - then maybe you can run a different compositor on each GPU, for example.",c,1,1,1
"@@ -2834,7 +2834,7 @@ mangle_icache_op(dcontext_t *dcontext, instrlist_t *ilist, instr_t *instr,
 {
     int opc = instr_get_opcode(instr);
     if (opc == OP_sys) {
-        reg_id_t xt = opnd_get_reg(instr_get_src(instr, 1));
+        reg_id_t xt = opnd_get_base(instr_get_dst(instr, 0));
         /* ic ivau, xT is replaced with: */
         PRE(ilist, instr, /* stp x0, x30, [x28] */
             INSTR_CREATE_stp(","Hmm, a cache line invalidation on x86 uses `OP_clflush` which for DR has the address as a source, not a destination. The actual memory contents are not modified so it makes some logical sense. For consistency we should make it a source here, too, right?",c,1,1,1
"@@ -1534,6 +1534,7 @@ const instr_info_t * const op_instr[] =
 #define KVw TYPE_K_VEX, OPSZ_2
 #define KVd TYPE_K_VEX, OPSZ_4
 #define KVq TYPE_K_VEX, OPSZ_8
+#define KE1b TYPE_K_EVEX, OPSZ_1b
 #define KEb TYPE_K_EVEX, OPSZ_1
 #define KEw TYPE_K_EVEX, OPSZ_2
 #define KEd TYPE_K_EVEX, OPSZ_4",> Fixes the evex masks's size for all ss* and sd* vector opcodes to reflect 1 bit. Grammar: masks',c,1,1,1
"@@ -2379,8 +2379,8 @@ options_init()
     /* .lspdata pages start out writable so no unprotect needed here */
     write_lock(&options_lock);
     ASSERT(sizeof(dynamo_options) == sizeof(options_t));
-    /* get dynamo options */
-    adjust_defaults_for_page_size(&dynamo_options);
+    /* reset options to the defaults and get current dynamo options */
+    set_dynamo_options_defaults(&dynamo_options);
     retval = get_parameter(PARAM_STR(DYNAMORIO_VAR_OPTIONS), option_string,
                            sizeof(option_string));
     if (IS_GET_PARAMETER_SUCCESS(retval))","This is a big memcpy. I'd prefer to do this on exit and only if detaching, like we're doing the other expensive zeroing.",c,1,1,1
"@@ -183,6 +183,10 @@ CodeChecker quickcheck -w ~/workspace -b ""cd ~/myproject && make""
 
         workspace_help_msg = """"""Directory where the codechecker can store analysis related data.""""""
 
+        name_help_msg = """"""Name of the analysis.""""""
+
+        jobs_help_msg = '''Number of jobs. Start multiple processes for faster analisys''';
+
         log_argument_help_msg=""""""Path to the log file which is created during the build. \nIf there is an already generated log file with the compilation commands\ngenerated by 'CodeChecker log' or 'cmake -DCMAKE_EXPORT_COMPILE_COMMANDS' \nCodechecker check can use it for the analisys in that case running the original build will \nbe left out from the analysis process (no log is needed).""""""
 
         # --------------------------------------","Use the same """""" everywhere.",c,1,1,1
"@@ -41,10 +41,8 @@ def send_suppress(run_id, connection, file_name):
     Collect suppress information from the suppress file to be stored
     in the database.
     """"""
-    suppress_data = []
-    if os.path.exists(file_name):
-        with codecs.open(file_name, 'r', 'UTF-8') as s_file:
-            suppress_data = suppress_file_handler.get_suppress_data(s_file)
+    suppress_data = suppress_file_handler.SuppressFileHandler. \
+        get_suppress_data_from_file(file_name)
 
     if len(suppress_data) > 0:
         connection.add_suppress_bug(run_id, suppress_data)","Is it on purpose not to use this UTF-8 thing? If it is, then `import codecs` is also unnecessary.",c,1,1,1
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -44,7 +44,7 @@ def execute_buildcmd(command, silent=False, env=None, cwd=None):
         if not line and proc.poll() is not None:
             break
         if not silent:
-            print(line)
+            sys.stdout.write(line)
 
     return proc.returncode
 ",Should we check if the line is empty?,c,1,1,1
"@@ -2,8 +2,8 @@
 
 Name:           calico
 Summary:        Project Calico virtual networking for cloud data centers
-Version:        1.3.0
-Release:        0.3%{?dist}
+Version:        1.3.0~pre.2
+Release:        1%{?dist}
 License:        Apache-2
 URL:            http://projectcalico.org
 Source0:        calico-%{version}.tar.gz","RHEL pre-release versions should look like Version: 1.3.0, Release: 0.2.pre%{?dist}. Increment the 2 for each build.",c,1,1,1
"@@ -93,6 +93,11 @@ xfpga_fpgaOpen(fpga_token token, fpga_handle *handle, int flags)
 	// Init workspace table
 	_handle->wsid_root = NULL;
 
+	// Init metric enum
+	_handle->metric_enum_status = false;
+	_handle->dl_handle = NULL;
+	_handle->_bmc_metric_value = NULL;
+
 	// Open resources in exclusive mode unless FPGA_OPEN_SHARED is given
 	open_flags = O_RDWR | ((flags & FPGA_OPEN_SHARED) ? 0 : O_EXCL);
 	fddev = open(_token->devpath, open_flags);",The name dl_handle is too generic. Please rename to reflect its association with metrics.,c,1,1,1
"@@ -67,6 +67,17 @@ static void handle_request_resize(struct wl_listener *listener, void *data) {
 	view_begin_resize(input, event->cursor, view, e->edges);
 }
 
+static void handle_commit(struct wl_listener *listener, void *data) {
+	struct roots_xdg_surface_v6 *roots_xdg_surface =
+		wl_container_of(listener, roots_xdg_surface, commit);
+	struct roots_view *view = roots_xdg_surface->view;
+
+	bool centered = view_center(view);
+	if (centered) {
+		wl_list_remove(&listener->link);
+	}
+}
+
 static void handle_destroy(struct wl_listener *listener, void *data) {
 	struct roots_xdg_surface_v6 *roots_xdg_surface =
 		wl_container_of(listener, roots_xdg_surface, destroy);","Why remove the link if the view is off-screen? Also, won't this center it every time the view configures itself? Like when it's resizing?",c,1,1,1
"@@ -4545,7 +4545,7 @@ ostree_repo_pull_with_options (OstreeRepo             *self,
             }
         }
 
-      if (!summary_from_cache && bytes_summary && bytes_sig)
+      if (!summary_from_cache && bytes_summary && bytes_sig && summary_sig_bytes_v == NULL)
         {
           if (!pull_data->remote_repo_local &&
               !_ostree_repo_cache_summary (self,","What about turning this into a `gboolean summary_sig_from_cache` and setting it to `TRUE` in the same place where the bytes are fetched from the GVariant? That would be symmetrical to `summary_from_cache` which already undergoes similar logic, and would make clearer what's going on (yes, I'm almost got lost reading/keeping track of the logic in this function).",c,1,1,1
"@@ -156,6 +156,7 @@ static pmix_status_t query(pmix_query_t queries[], size_t nqueries, pmix_list_t
                 }
             }
 
+            pmix_output(0, ""SILENCE WARNINGS %u %u"", uid, gid);
             if (0 == strcmp(queries[n].keys[m], PMIX_STORAGE_CAPACITY_LIMIT)) {
                 /* ADD HERE:
                  *",I think the cause of the CI failure is this debugging line that was left in place.,c,1,1,1
"@@ -155,6 +155,8 @@ typedef struct {
    * whether to fetch the primary object after fetching its
    * detached metadata (no need if it's already stored). */
   gboolean     object_is_stored;
+
+  OstreeCollectionRef *requested_ref;  /* (nullable) */
 } FetchObjectData;
 
 typedef struct {",Should this be `/* (nullable) */` for if we're just pulling a checksum?,c,1,1,1
"@@ -40,6 +40,12 @@
 -- @param _buttons The table of buttons that should bind to the widget.
 -- @function buttons
 
+--- Emit a signal and ensure all parent widgets in the hierarchies also
+-- forward the signal. This is useful to track signals when there is a dynamic
+-- set of containers and layouts wrapping the widget.
+-- @tparam string signal_name
+-- @param ... Other arguments
+-- @function emit_signal_recursive
 
 --- When the layout (size) change.
 -- This signal is emited when the previous results of `:layout()` and `:fit()`",This part seems to be in the wrong commit. The next commit adds this function.,c,0,1,0
"@@ -120,7 +120,11 @@ json_t *job_to_json (struct job *job, json_t *attrs, job_info_error_t *errp)
         else if (!strcmp (attr, ""ranks"")) {
             if (!(job->states_mask & FLUX_JOB_RUN))
                 continue;
-            val = json_string (job->ranks);
+            /* potentially NULL if R invalid */
+            if (job->ranks)
+                val = json_string (job->ranks);
+            else
+                val = json_string ("""");
         }
         else if (!strcmp (attr, ""expiration"")) {
             if (!(job->states_mask & FLUX_JOB_RUN))",Suggest you break the inner block of the loop out to its own function as this is getting pretty long and the control flow harder to follow.,c,1,1,1
"@@ -38,6 +38,9 @@ static int on_req(h2o_handler_t *_self, h2o_req_t *req)
     }
 
     h2o_http2_debug_state_t *debug_state = req->conn->callbacks->get_debug_state(req, self->hpack_enabled);
+    if (debug_state == NULL) {
+        return -1;
+    }
 
     // stringify these variables to embed in Debug Header
     h2o_iovec_t conn_flow_in, conn_flow_out;","I assume that we have similar code everywhere; one that check if the callback is NULL, if not, calls the callback and check if the return value is NULL. In other words, we are performing the check twice. I do not think that having such coding pattern is optimal. Instead, could we require every instance of `http_conn_callbacks_t` to setup all the callback pointers, so that we can call the callback unconditionally? For example, you could define ""default"" functions that return NULL (e.g. `h2o_http2_debug_state_t *h2o_conn_default_get_debug_state(h2o_req_t *req, int hpack_enabled) { return NULL; }`) and let the callbacks (that do not require a specialized implementation) use the default.",c,1,0,1
"@@ -142,6 +142,19 @@ def add_arguments_to_parser(parser):
                              ""consult the User guide on how a Skipfile ""
                              ""should be laid out."")
 
+    parser.add_argument('--trim-path-prefix',
+                        type=str,
+                        nargs='*',
+                        dest=""trim_path_prefix"",
+                        required=False,
+                        default=argparse.SUPPRESS,
+                        help=""Removes leading path from files which will be ""
+                             ""printed. So if you have /a/b/c/x.cpp and ""
+                             ""/a/b/c/y.cpp then by removing \""/a/b/\"" prefix ""
+                             ""will print files like c/x.cpp and c/y.cpp. ""
+                             ""If multiple prefix is given, the longest match ""
+                             ""will be removed."")
+
     logger.add_verbose_arguments(parser)
 
     def __handle(args):",Please update the help message. This is done for parse not for store.,c,1,1,1
"@@ -354,7 +354,12 @@ int main(int argc, char **argv)
 
     if (mode_listen) {
         int fd, reuseaddr_flag = 1;
-        if ((fd = socket(AF_INET, SOCK_STREAM, 0)) == -1 ||
+        if (
+#ifdef __linux__
+            (fd = socket(AF_INET, SOCK_STREAM | SOCK_CLOEXEC | SOCK_NONBLOCK, 0)) == -1 ||
+#else
+            (fd = socket(AF_INET, SOCK_STREAM, 0)) == -1 ||
+#endif
             setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &reuseaddr_flag, sizeof(reuseaddr_flag)) != 0 ||
             bind(fd, res->ai_addr, res->ai_addrlen) != 0 || listen(fd, SOMAXCONN) != 0) {
             fprintf(stderr, ""failed to listen to %s:%s:%s\n"", host, port, strerror(errno));","I would appreciate it if you could revert the change to minimize the maintenance cost of the code. Considering that a HTTP/2 connection is typically long-running and that latency optimization issues many syscalls than when set to off, I do not think we need to complicate things here.",c,1,1,1
"@@ -73,7 +73,7 @@ fpga_result read_sysfs(fpga_token token, char *sysfs_path,
 		resval = res;
 		goto out_destroy;
 	}
-	printf(""size=%d \n"", size);
+
 	if (size > len) {
 		OPAE_ERR(""object size bigger then buffer size"");
 		resval = FPGA_EXCEPTION;",Could you submit this one in a separate pull request?,c,0,1,0
"@@ -12,7 +12,7 @@
  * * Redistributions in binary form must reproduce the above copyright notice,
  *   this list of conditions and the following disclaimer in the documentation
  *   and/or other materials provided with the distribution.
- *
+ *sig
  * * Neither the name of Google, Inc. nor the names of its contributors may be
  *   used to endorse or promote products derived from this software without
  *   specific prior written permission.",Please do a self-review before posting.,c,0,1,0
"@@ -47,5 +47,11 @@ class ClangTidyPlistToFile(ResultHandler):
         tidy_stdout = self.analyzer_stdout.splitlines()
         generate_plist_from_tidy_result(output_file, tidy_stdout)
 
-        if self.report_hash_type == 'context-free':
+        # In the earlier versions of CodeChecker Clang Tidy never used context
+        # free hash even if we enabled it with '--report-hash context-free'
+        # when calling the analyze command. To do not break every hash
+        # automatically when using this option we introduced a new choice for
+        # --report-hash option ('context-free-v2') and we still do not use
+        # context free hash for 'context-free' choice.
+        if self.report_hash_type == 'context-free-v2':
             report.use_context_free_hashes(output_file)",why would `if self.report_hash_type == 'context-free-v2':` not enough here?,c,1,1,1
"@@ -93,8 +93,10 @@ static int signal_frame(void *data) {
 	return 0;
 }
 
+static int current_output_id = 0;
+
 struct wlr_output *wlr_headless_add_output(struct wlr_backend *wlr_backend,
-		unsigned int width, unsigned int height) {
+		unsigned int width, unsigned int height, char *name) {
 	struct wlr_headless_backend *backend =
 		(struct wlr_headless_backend *)wlr_backend;
 ",You can use `wl_list_length` instead of a global.,c,1,1,1
"@@ -5092,7 +5092,7 @@ const instr_info_t prefix_extensions[][12] = {
     {INVALID,  0xf338f018, ""(bad)"",   xx, xx, xx, xx, xx, no, x, NA},
     /* really this is regular data-size prefix */
     {OP_movbe, 0x6638f018, ""movbe"", Gw, xx, Mw, xx, xx, mrm, x, tpe[139][2]},
-    {OP_crc32, 0xf238f018, ""crc32"", Gv, xx, Eb, Gv, xx, mrm, x, END_LIST},
+    {OP_crc32, 0xf238f018, ""crc32"", Gd_q, xx, Eb, Gd_q, xx, mrm, x, END_LIST},
     {INVALID,    0x38f018, ""(bad)"",   xx, xx, xx, xx, xx, no, x, NA},
     {INVALID,  0xf338f018, ""(bad)"",   xx, xx, xx, xx, xx, no, x, NA},
     {INVALID,  0x6638f018, ""(bad)"",   xx, xx, xx, xx, xx, no, x, NA},","Looking at the manual, yes for the destination. But the source seems to be always 1-byte for the F0 version, and 2/4/8 bytes for the F1. Why Gd_q for the source?",c,1,1,1
"@@ -289,6 +289,12 @@ h2o_logconf_t *h2o_logconf_compile(const char *fmt, int escape, char *errbuf)
                     MAP_EXT_TO_PROTO(""ssl.cipher-bits"", ssl.cipher_bits);
                     MAP_EXT_TO_PROTO(""ssl.session-id"", ssl.session_id);
                     MAP_EXT_TO_PROTO(""ssl.server-name"", ssl.server_name);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.protocol-version"", proxy_ssl.protocol_version);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.session-reused"", proxy_ssl.session_reused);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.cipher"", proxy_ssl.cipher);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.cipher-bits"", proxy_ssl.cipher_bits);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.session-id"", proxy_ssl.session_id);
+                    MAP_EXT_TO_PROTO(""proxy.ssl.server-name"", proxy_ssl.server_name);
                     { /* not found */
                         h2o_iovec_t name = strdup_lowercased(pt, quote_end - pt);
                         NEW_ELEMENT(ELEMENT_TYPE_EXTENDED_VAR);",Maybe you missed removing some from here?,c,1,1,1
"@@ -94,7 +94,7 @@ my_setjmp(sigjmp_buf env)
 }
 
 static void
-signal_handler(int sig)
+signal_handler(int sig, siginfo_t *siginfo)
 {
     if (sig == SIGILL) {
         count++;",A signal handler should either have 1 arg (signal()) or 3 (sigaction()): I don't think there is any such thing as one taking 2 args.,c,1,1,1
"@@ -472,6 +472,18 @@ void TNonblockingServer::TConnection::workSocket() {
     }
     // size known; now get the rest of the frame
     transition();
+
+    // If the socket has more data than the frame header, continue to work on it. This is not strictly necessary for
+    // regular sockets, because if there is more data, libevent will fire the event handler registered for read
+    // readiness, which will in turn call workSocket(). However, some socket types (such as TSSLSocket) may have the
+    // data sitting in their internal buffers and from libevent's perspective, there is no further data available. In
+    // that case, not having this workSocket() call here would result in a hang as we will never get to work the socket,
+    // despite having more data.
+    if (tSocket_->hasPendingDataToRead())
+    {
+        workSocket();
+    }
+
     return;
 
   case SOCKET_RECV:","Should this be an ""if"" or a ""while""?",c,1,1,1
"@@ -22,7 +22,7 @@ import traceback
 import zipfile
 import zlib
 
-from Authentication.ttypes import Permission
+from shared.ttypes import Permission
 
 from libcodechecker import generic_package_context
 from libcodechecker import host_check",don't we want to separate handlers by directory too? like libhandlers/v6/store.py etc.,c,0,1,1
"@@ -1266,7 +1266,7 @@ const instr_info_t * const op_instr[] =
     /* OP_vpbroadcastd  */   &third_byte_38[118],
     /* OP_vpbroadcastq  */   &third_byte_38[119],
 
-    /* added in Intel Skylake */
+    /* Added in Intel Skylake */
     /* OP_xsavec32      */   &rex_w_extensions[5][0],
     /* OP_xsavec64      */   &rex_w_extensions[5][1],
 ","Per style guide: punctuate as well (end in period, or maybe colon here) and ideally make it a complete sentence. In general, either capitalized + punctuated + complete sentences, or short snippet where we don't care, with preference in new code for the former. So it seems either leave it alone or ""Opcodes added in Intel Skylake:"" or sthg.",c,1,1,1
"@@ -16,7 +16,6 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-
 #include <fluent-bit.h>
 #include <fluent-bit/flb_pack.h>
 #include <fluent-bit/flb_record_accessor.h>",Is this blank line deleted intentionally?,c,1,1,1
"@@ -32,6 +32,7 @@
 #include ""stackdriver.h""
 #include ""stackdriver_conf.h""
 
+
 static inline int key_cmp(const char *str, int len, const char *cmp) {
 
     if (strlen(cmp) != len) {",I think this is an accidental newline?,c,1,1,1
"@@ -0,0 +1,19 @@
+#include <iostream>
+using namespace std;
+
+void check(int n)
+{
+    if(n%2 == 0)
+       cout << ""EVEN"";
+    else
+       cout << ""ODD"";
+}
+
+int main()
+{
+    int n;
+    cout <<""\n Enter value of n:"" << endl;
+    cin >> n;
+    check(n);
+    return 0;
+}",use anything else except % operator,c,1,1,1
"@@ -0,0 +1,15 @@
+#include <stddef.h>
+
+#ifdef PLATFORM_IS_VISUAL_STUDIO
+#  define EXPORT_SYMBOL __declspec(dllexport)
+#else
+#  define EXPORT_SYMBOL
+#endif
+
+typedef void (*baretest_callback_fn)(size_t value);
+
+EXPORT_SYMBOL extern void baretest_callback(baretest_callback_fn cb, size_t value)
+{
+  cb(value);
+}
+","If we don't support Windows, this wouldn't be needed.",c,1,1,1
"@@ -17,8 +17,8 @@
 #include <libgen.h>
 #include <dlfcn.h>
 #include <argz.h>
-#include <flux/core.h>
 #include <czmq.h>
+#include <flux/core.h>
 #include <jansson.h>
 
 #include ""src/common/libutil/xzmalloc.h""",Can this czmq.h include be dropped with the addition of the czmq_containers.h?,c,1,1,1
"@@ -293,6 +293,7 @@ release:
 	pixman_region32_init(&surface->current.buffer_damage);
 
 	wl_resource_queue_event(surface->current.buffer, WL_BUFFER_RELEASE);
+	surface->current.buffer = NULL;
 }
 
 static void surface_set_buffer_transform(struct wl_client *client,","Probably ok for a temporary workaround. But keep in mind that this will lead to issues as soon as we implement the TODO at the top of the function, i.e. empty the texture when there was a null buffer attached. It would be triggered from this i guess (when damage_flush is called multiple times).",c,1,1,1
"@@ -63,7 +63,9 @@ type L3RouteResolver struct {
         blockToRoutes          map[string]set.Set
         allPools               map[string]model.IPPool
         workloadIDToCIDRs      map[model.WorkloadEndpointKey][]cnet.IPNet
+        nodeToCIDRs            map[string]set.Set
         useNodeResourceUpdates bool
+        routeSource            string
 }
 
 type l3rrNodeInfo struct {","UT spotted that we weren't marking routes dirty when they targeted at Node and that node's IP changed. e.g., the case where a WEP appears in the syncer before the corresponding node does, so we don't know the node's IP. I added a new map to track the CIDRs for each node so that when the node IP changes we can mark those CIDRs dirty. Right now it's only used for the ""WorkloadIPs"" scenario. Need to decide if the same issue applies in the ""CalicoIPAM' case. I suspect it might. It looks like we have some logic present to detect when our own node IP changes, but we don't seem to handle when a remote node's IP changes.",c,1,0,1
"@@ -72,7 +72,7 @@ static void cond_normalise(ast_t** astp)
               NODE(TK_IFDEFFLAG, ID(OS_LINUX_NAME))
               NODE(TK_IFDEFFLAG, ID(OS_MACOSX_NAME))
               NODE(TK_NONE))
-            NODE(TK_IFDEFFLAG, ID(OS_FREEBSD_NAME))
+            NODE(TK_IFDEFFLAG, ID(OS_BSD_NAME))
             NODE(TK_NONE)));
         break;
       }","i believe this is correct. we want any BSD. and we don't need freebsd or dragonfly specifically, correct?",c,1,1,1
"@@ -172,13 +172,16 @@ int main()
         # Check the second file version.
         self._create_source_file(1, 'test_run_tag_update')
 
+        test_run_tags = self.__get_run_tag_counts(run_id, 100, 0)
+        run_tags_v0 = [t for t in test_run_tags if t.name == self.tags[0]]
+        self.assertEqual(len(run_tags_v0), 1)
+        run_tags_v0 = run_tags_v0[0]
+
         # We do not show future bugs for later tags.
         reports = self.__reports_by_tag([run_tags_v0.id])
         self.assertEqual(run_tags_v0.count, len(reports))
 
-        test_run_tags = self.__get_run_tag_counts(run_id)
         run_tags_v1 = [t for t in test_run_tags if t.name == self.tags[1]]
-
         self.assertEqual(len(run_tags_v1), 1)
         run_tags_v1 = run_tags_v1[0]
         self.__check_reports(run_tags_v1)","are there any other run tags mixed into the test data, that is why this run tag filtering needed?",c,1,1,1
"@@ -35,7 +35,9 @@
 #include <pthread.h>
 #include <pwd.h>
 #include <signal.h>
+#ifndef __ANDROID__
 #include <spawn.h>
+#endif
 #include <stdio.h>
 #include <unistd.h>
 #include <sys/resource.h>",The same goes here as well.,c,0,1,0
"@@ -1332,11 +1332,15 @@ fsfreeze_thaw_cycle (OstreeSysroot *self,
       /* Do a freeze/thaw cycle; TODO add a FIFREEZETHAW ioctl */
       if (ioctl (rootfs_dfd, FIFREEZE, 0) != 0)
         {
-          /* Not supported, or we're running in the unit tests (as non-root)?
+          /* Not supported, we're running in the unit tests (as non-root), or
+           * the filesystem is already frozen (EBUSY).
            * OK, let's just do a syncfs.
            */
-          if (G_IN_SET (errno, EOPNOTSUPP, EPERM))
+          if (G_IN_SET (errno, EOPNOTSUPP, EPERM, EBUSY))
             {
+              /* Warn if the filesystem was already frozen */
+              if (errno == EBUSY)
+                g_debug (""Filesystem already frozen, falling back to syncfs"");
               if (TEMP_FAILURE_RETRY (syncfs (rootfs_dfd)) != 0)
                 return glnx_throw_errno_prefix (error, ""syncfs"");
               /* Write the completion, and return */","I'm not a big fan of random spew from libraries. (What spew we do I'd prefer to use `sd_journal_print` and not stderr). Let's drop the `g_warning()` here? I'd been thinking to at some point gather stats on how long `syncfs()` takes etc (and eventually a signal so clients can know we're doing it), so we could also log whether we used `FIFREEZE` or `syncfs()` then too.",c,1,1,1
"@@ -1040,7 +1040,9 @@ luaA_screen_module_index(lua_State *L)
             foreach(output, (*screen)->outputs)
                 if(A_STREQ(output->name, name))
                     return luaA_object_push(L, *screen);
-        luaL_error(L, ""Unknown screen output name: %s"", name);
+        luaA_warn(L, ""Unknown screen output name: %s"", name);
+        lua_pushnil(L);
+        return 1;
     }
 
     return luaA_object_push(L, luaA_checkscreen(L, 2));",mb still print the warning?,c,1,0,0
"@@ -77,9 +77,6 @@ struct flb_td *td_config_init(struct flb_output_instance *ins)
             return NULL;
         }
     }
-    else {
-        ctx->region = FLB_TD_REGION_US;
-    }
 
     flb_plg_info(ctx->ins, ""Treasure Data / database='%s' table='%s'"",
                  ctx->db_name, ctx->db_table);","If `tmp` is guaranteed not to be `NULL`, whole if statement has to be removed.",c,1,1,1
"@@ -2836,10 +2836,12 @@ client_process_bb(dcontext_t *dcontext, build_bb_t *bb)
 #    ifdef X86
         if (!d_r_is_avx512_code_in_use()) {
             if (ZMM_ENABLED()) {
-                if (instr_may_write_zmm_register(inst)) {
-                    LOG(THREAD, LOG_INTERP, 2, ""Detected AVX-512 code in use\n"");
-                    d_r_set_avx512_code_in_use(true);
-                    proc_set_num_simd_saved(MCXT_NUM_SIMD_SLOTS);
+                if (!instr_is_meta(inst)) {
+                    if (instr_may_write_zmm_or_opmask_register(inst)) {
+                        LOG(THREAD, LOG_INTERP, 2, ""Detected AVX-512 code in use\n"");
+                        d_r_set_avx512_code_in_use(true);
+                        proc_set_num_simd_saved(MCXT_NUM_SIMD_SLOTS);
+                    }
                 }
             }
         }",Just move this down below the instr_is_meta check + continue below and then this if goes away.,c,1,1,1
"@@ -312,6 +312,10 @@ static app_pc executable_end = NULL;
 static char executable_path[MAXIMUM_PATH];
 static char *executable_basename;
 
+/* Used by get_cl_args(). */
+static int *argc = NULL;
+static char **argv = NULL;
+
 /* does the kernel provide tids that must be used to distinguish threads in a group? */
 static bool kernel_thread_groups;
 ",Please qualify these: `app_argc` or `application_argc` or sthg.,c,1,1,1
"@@ -164,6 +164,7 @@ type Config struct {
 
         IptablesBackend                    string            `config:""oneof(legacy,nft,auto);legacy""`
         RouteRefreshInterval               time.Duration     `config:""seconds;90""`
+        InterfaceRefreshInterval           time.Duration     `config:""seconds;90""`
         DeviceRouteSourceAddress           net.IP            `config:""ipv4;""`
         DeviceRouteProtocol                int               `config:""int;3""`
         RemoveExternalRoutes               bool              `config:""bool;true""`",Shall we set default to 10 seconds as before?,c,1,1,1
"@@ -238,6 +238,10 @@ def main(args):
     # Parse the JSON CCDBs and retrieve the compile commands.
     actions = []
 
+    if len(args.logfile) != 1:
+        LOG.warning(""Only one log file can be processed right now!"")
+        sys.exit(1)
+
     for log_file in args.logfile:
         if not os.path.exists(log_file):
             LOG.error(""The specified logfile '"" + log_file + ""' does not """,`logfile` flag is declared to be a string in the command line arguments. Isn't it going to check the length of that string? This can be an array if this `analyze` module is loaded from a wrapper module (e.g. `CodeChecker check`) which gives it an array. By the way `CodeChecker check` gives it an array of length 1. Can this array be longer?,c,1,1,1
"@@ -394,6 +394,8 @@ static SSL_CTX *_create_ssl_context(int is_client) {
 
         openssl_initialized = 1;
 
+        SSL_load_error_strings();
+
         if(is_client) {
                 #ifdef HAS_TLS_method
                 method = TLS_client_method();",Move to if in line 390.,c,1,1,0
"@@ -801,6 +801,13 @@ func findHostMTU(matchRegex *regexp.Regexp) (int, error) {
 			smallest = l.Attrs().MTU
 		}
 	}
+
+	if smallest == 0 {
+		// We failed to find a usable interface. Default the MTU of the host
+		// to 1460 - the smallest among common cloud providers.
+		log.Warn(""Failed to auto-detect host MTU, assuming 1460"")
+		return 1460, nil
+	}
 	return smallest, nil
 }
 ","You could improve this log by saying something like ""Failed to auto-detect host's MTU, no interfaces matched the MTU data interface pattern; to use auto MTU detection, set <param name> to match your host's interfaces.""",c,1,1,1
"@@ -823,7 +823,10 @@ err:
  */
 static int job_get_ns_name (char *buf, int bufsz, flux_jobid_t id)
 {
-    return fluid_encode (buf, bufsz, id, FLUID_STRING_DOTHEX);
+    int n = snprintf (buf, bufsz - 1, ""job-%ju"", id);
+    if (n < 0 || n > bufsz - 1)
+        return -1;
+    return 0;
 }
 
 static double job_get_kill_timeout (flux_t *h)","i think you have to check `n` for validity before doing `n-1` b/c snprintf takes a `size_t`. although this is internal code (static function), so maybe it doesn't matter.",c,1,1,1
"@@ -877,15 +877,12 @@ static vString *parseInteger (int c)
 
 static vString *parseNumeric (int c)
 {
-	vString *string = vStringNew ();
-	vString *integer = parseInteger (c);
-	vStringCopy (string, integer);
-	vStringDelete (integer);
+	vString *string = parseInteger (c);
 
 	c = getChar ();
 	if (c == '.')
 	{
-		integer = parseInteger ('\0');
+		vString *integer = parseInteger ('\0');
 		vStringPut (string, c);
 		vStringCat (string, integer);
 		vStringDelete (integer);","could be on one single line, `vString *integer = parseInteger ('\0');`",c,1,1,1
"@@ -645,13 +645,6 @@ func (r *DefaultRuleRenderer) filterOutputChain(ipVersion uint8) *Chain {
 		},
 	)
 
-	// Jump to chain for blocking service CIDR loops.
-	rules = append(rules,
-		Rule{
-			Action: JumpAction{Target: ChainCIDRBlock},
-		},
-	)
-
 	return &Chain{
 		Name:  ChainFilterOutput,
 		Rules: rules,",Does that mean we disable service loop prevention for packet generated by local host?,c,1,1,1
"@@ -316,9 +316,9 @@ AS_IF([test ""x$enable_pylint"" = ""xyes""], [
   AC_CHECK_PROG(PYLINT,[pylint],[pylint])
   AS_IF([test ""x$PYLINT"" != ""xpylint""], [AC_MSG_ERROR([No pylint found in PATH])])
   AM_CHECK_PYMOD(pylint,
-                   [StrictVersion(pylint.__version__) >= StrictVersion('1.4.5')],
+                   [StrictVersion(pylint.__version__) >= StrictVersion('1.8.4')],
                    ,
-                   [AC_MSG_ERROR([could not find python module pylint, version 1.4.5+ required])]
+                   [AC_MSG_ERROR([could not find python module pylint, version 1.8.4+ required])]
                  )
 ])
 AM_CONDITIONAL([ENABLE_PYLINT], [test ""x$PYLINT"" = ""xpylint""])","pylint on TOSS 3 is 1.6.5. However, since this check is only made with `--enable-pylint` it is probably fine.",c,1,1,1
"@@ -59,6 +59,15 @@ else
 fi
 AM_CONDITIONAL(BUILDOPT_ASAN, [test x$using_asan = xyes])
 
+AC_MSG_CHECKING([for -fsanitize=thread in CFLAGS])
+if echo $CFLAGS | grep -q -e -fsanitize=thread; then
+  AC_MSG_RESULT([yes])
+  using_tsan=yes
+else
+  AC_MSG_RESULT([no])
+fi
+AM_CONDITIONAL(BUILDOPT_TSAN, [test x$using_tsan = xyes])
+
 # Initialize libtool
 LT_PREREQ([2.2.4])
 LT_INIT([disable-static])",Almost; since we're doing the preprocessor here we need an `AM_COND_IF()` + `AC_DEFINE()`.,c,1,1,1
"@@ -9,6 +9,14 @@
 #include ""rootston/desktop.h""
 #include ""rootston/server.h""
 
+static void resize(struct roots_view *view, uint32_t width, uint32_t height) {
+	assert(view->type == ROOTS_XWAYLAND_VIEW);
+	struct wlr_xwayland_surface *xwayland_surface = view->xwayland_surface;
+	xwayland_surface->width = width;
+	xwayland_surface->height = height;
+	wlr_xwayland_surface_configure(view->desktop->xwayland, xwayland_surface);
+}
+
 static void handle_destroy(struct wl_listener *listener, void *data) {
 	struct roots_xwayland_surface *roots_surface =
 		wl_container_of(listener, roots_surface, destroy);",Xwayland should handle setting the width and height itself.,c,1,1,1
"@@ -294,7 +294,7 @@ static bool link_exe(compile_t* c, ast_t* program,
 
   snprintf(ld_cmd, ld_len,
 #if defined(PLATFORM_IS_ARM)
-    ""%s -execute -arch %.*s ""
+    ""%s -execute -no_pie -arch %.*s ""
 #else
     ""%s -execute -no_pie -arch %.*s ""
 #endif",This option doesn't exist on the m1. I don't know if it's something related to arm64 or apple-specific.,c,1,1,1
"@@ -67,6 +67,8 @@ ewmh_client_update_hints(lua_State *L)
         state[i++] = _NET_WM_STATE_HIDDEN;
     if(c->urgent)
         state[i++] = _NET_WM_STATE_DEMANDS_ATTENTION;
+    if(c->ontop)
+        state[i++] = _NET_WM_STATE_ONTOP;
 
     xcb_change_property(globalconf.connection, XCB_PROP_MODE_REPLACE,
                         c->window, _NET_WM_STATE, XCB_ATOM_ATOM, 32, i, state);","This is a potential buffer overflow. If all the `if`s are taken (which should never happen since some states are mutually exclusive), this might write beyond the end of the array.",c,1,1,1
"@@ -485,7 +485,7 @@ void genprim_pointer_methods(compile_t* c, reach_type_t* t)
   pointer_lt(c, t);
 }
 
-static void maybe_create(compile_t* c, reach_type_t* t, compile_type_t* t_elem)
+static void nullable_pointer_create(compile_t* c, reach_type_t* t, compile_type_t* t_elem)
 {
   FIND_METHOD(""create"", TK_NONE);
 ",i dont think we want to do these changes as part of RFC. need to discuss at sync.,c,1,1,1
"@@ -503,6 +503,11 @@ drreg_insert_restore_all(void *drcontext, instrlist_t *bb, instr_t *inst,
             regs_restored[GPR_IDX(reg)] = false;
         if (!pt->reg[GPR_IDX(reg)].native) {
             if (force_restore || instr_reads_from_reg(inst, reg, DR_QUERY_INCLUDE_ALL) ||
+                /* Restore all app values prior to an annotation to ensure the
+                 * arguments passed to the handler are correct.
+                 */
+                (instr_is_label(inst) &&
+                 (ptr_uint_t)instr_get_note(inst) == DR_NOTE_ANNOTATION) ||
                 /* Treat a partial write as a read, to restore rest of reg */
                 (instr_writes_to_reg(inst, reg, DR_QUERY_INCLUDE_ALL) &&
                  !instr_writes_to_exact_reg(inst, reg, DR_QUERY_INCLUDE_ALL)) ||",In this context it may be better to s/handler/annotation handler/,c,1,1,1
"@@ -56,6 +56,15 @@ struct st_h2o_http1_conn_t {
         void *data;
         h2o_http1_upgrade_cb cb;
     } upgrade;
+    struct {
+        unsigned sending : 1;
+        unsigned has_pending_hints : 1;
+        struct {
+            h2o_iovec_t *inbufs;
+            size_t inbufcnt;
+            h2o_send_state_t send_state;
+        } pending_final;
+    } informational;
     /* the HTTP request / response (intentionally placed at the last, since it is a large structure and has it's own ctor) */
     h2o_req_t req;
 };","I can see that we need to buffer the content passed from the generator, now that informational responses could be in flight. Then, can't we simplify the logic by using the same buffer for storing _any_ pending data, including when we receive an additional 103 while a previous 103 is in flight?",c,1,1,1
"@@ -94,6 +94,9 @@ static struct optparse_option put_opts[] =  {
     { .name = ""no-merge"", .key = 'n', .has_arg = 0,
       .usage = ""Set the NO_MERGE flag to ensure commit is standalone"",
     },
+    { .name = ""append"", .key = 'A', .has_arg = 0,
+      .usage = ""Append value(s) to key instead of overwriting"",
+    },
     OPTPARSE_TABLE_END
 };
 ",Any reason not to use little a for the short opt?,c,1,1,1
"@@ -141,6 +141,8 @@ event_module_load(void *drcontext, const module_data_t *data, bool loaded)
         entry = drvector_get_entry(&module_table.vector, i);
         mod   = entry->data;
         if (entry->unload &&
+            /* only check the main (containing) module */
+            entry->id == entry->containing_id &&
             /* If the same module is re-loaded at the same address,
              * we will try to use the existing entry.
              */",Please add a note that this is needed b/c the loop is backward,c,1,1,1
"@@ -38,13 +38,17 @@
 
 /* Per-checkout call state/caching */
 typedef struct {
-  GString *selabel_path_buf;
+  GString *path_buf; /* buffer for real path if filtering enabled */
+  GString *selabel_path_buf; /* buffer for selinux path if labeling enabled */
+  gboolean shared_path_buf; /* we try to use the same buf if we can */
 } CheckoutState;
 
 static void
 checkout_state_clear (CheckoutState *state)
 {
-  if (state->selabel_path_buf)
+  if (state->path_buf)
+    g_string_free (state->path_buf, TRUE);
+  if (state->selabel_path_buf && !state->shared_path_buf)
     g_string_free (state->selabel_path_buf, TRUE);
 }
 G_DEFINE_AUTO_CLEANUP_CLEAR_FUNC(CheckoutState, checkout_state_clear)","We could also just check `state->path_buf != state->selabel_path_buf` and lose the boolean, right?",c,1,1,1
"@@ -490,6 +490,7 @@ static pmix_status_t create_local_tracker(char nspace[], pmix_rank_t rank,
     if (NULL == lcd){
         return PMIX_ERR_NOMEM;
     }
+    PMIX_RETAIN(cbdata);
     pmix_strncpy(lcd->proc.nspace, nspace, PMIX_MAX_NSLEN);
     lcd->proc.rank = rank;
     lcd->info = info;","Hold on a second - you cannot do a retain on cbdata as it is a void*, which means you cannot know for certain that it is a PMIX_OBJECT",c,1,1,1
"@@ -1824,7 +1824,7 @@ find_syscall_num(dcontext_t *dcontext, instrlist_t *ilist, instr_t *instr)
 
     if (prev == NULL) {
 #if defined(WINDOWS) && defined(X64)
-        if (get_os_version() >= WINDOWS_VERSION_10_1511) {
+        if (get_os_version() >= WINDOWS_VERSION_10_1511 && !DYNAMO_OPTION(inject_x64)) {
             /* Handle the branch added in 1511 that isolates OP_syscall:
              *   7ff9`13185630 4c8bd1          mov     r10,rcx
              *   7ff9`13185633 b843000000      mov     eax,43h",I don't understand: this same code will be there when in 64-bit mode: why disable it?,c,1,1,1
"@@ -662,4 +662,12 @@ Language=English
 Application %1!s! (%2!s!). Out of contiguous memory. %3!s!
 .
 
+MessageId =
+Severity = Error
+Facility = DRCore
+SymbolicName = MSG_AVX_512_SUPPORT_INCOMPLETE
+Language=English
+Application %1!s! (%2!s!): AVX-512 was detected at PC 0x%3!lx!
+.
+
 ;// ADD NEW MESSAGES HERE","First, long is 32 bits in Visual Studio, so this the wrong size specifier. Second, I don't know for sure whether anything but 's' works for Windows event log -- we had sort of been operating under that assumption as you can see from all of the other numeric params being 's' but I didn't write that code.",c,1,1,1
"@@ -158,12 +158,7 @@ void event_publish (struct event *event, const char *topic,
     struct job_manager *ctx = event->ctx;
     flux_future_t *f;
 
-    /* O? support in jansson 2.8 */
-    if (o)
-        f = flux_event_publish_pack (ctx->h, topic, 0, ""{s:O}"", key, o);
-    else
-        f = flux_event_publish_pack (ctx->h, topic, 0, ""{s:n}"", key);
-    if (!f) {
+    if (!(f = flux_event_publish_pack (ctx->h, topic, 0, ""{s:O?}"", key, o))) {
         flux_log_error (ctx->h, ""%s: flux_event_publish_pack"", __FUNCTION__);
         goto error;
     }",There's another one of these in `event_batch_pub_annotations()` (searsch for jansson 2.8).,c,1,1,1
"@@ -4,11 +4,13 @@
 #   This file is distributed under the University of Illinois Open Source
 #   License. See LICENSE.TXT for details.
 # -----------------------------------------------------------------------------
+from time import sleep
 
 """"""Setup for the test package comment.""""""
 
 from subprocess import CalledProcessError
 
+import json
 import multiprocessing
 import os
 import shutil",This import might be unused.,c,1,1,1
"@@ -76,6 +76,13 @@ func StartKubeProxy(k8s kubernetes.Interface, hostname string,
         }
 
         go func() {
+                // Before we start, scan for all finished / timed out connections to
+                // free up the conntrack table asap as it may take time to sync up the
+                // proxy and kick off the first full cleaner scan.
+                lc := conntrack.NewLivenessScanner(kp.conntrackTimeouts, kp.dsrEnabled)
+                connScan := conntrack.NewScanner(kp.ctMap, lc.ScanEntry)
+                connScan.Scan()
+
                 err := kp.start()
                 if err != nil {
                         log.WithError(err).Panic(""kube-proxy failed to start"")","Since it's a one-off, worth putting an info log before and after.",c,1,1,1
"@@ -741,6 +741,12 @@ read_evex(byte *pc, decode_info_t *di, byte instr_byte,
             return pc;
         }
         *is_evex = true;
+#if !defined(STANDALONE_DECODER)
+        char pc_addr[IF_X64_ELSE(20, 12)];
+        snprintf(pc_addr, BUFFER_SIZE_ELEMENTS(pc_addr), PFX, pc);
+        SYSLOG(SYSLOG_ERROR, AVX_512_SUPPORT_INCOMPLETE, 2, get_application_name(),
+               get_application_pid(), pc_addr);
+#endif
         info = &evex_prefix_extensions[0][1];
     } else {
         /* not evex */",style: always NULL_TERMINATE_BUFFER after snprintf,c,1,1,1
"@@ -5555,10 +5555,6 @@ emit_special_ibl_xfer(dcontext_t *dcontext, byte *pc, generated_code_t *code, ui
         INSTR_CREATE_cbz(dcontext, opnd_create_instr(skip_unlinked_tgt_jump),
                          opnd_create_reg(SCRATCH_REG5)));
     insert_shared_restore_dcontext_reg(dcontext, &ilist, NULL);
-    /* i#4670: The unlinking case is observed to hit very infrequently on x86. The issue
-     *  or the fix have not been observed on AArchXX yet.
-     */
-    ASSERT_NOT_TESTED();
 #        if defined(AARCH64)
     APP(&ilist,
         INSTR_CREATE_ldr(","> iX: r We don't put ""iX"" in the title: just the branch name. So `s/iX: r/R/`.",c,0,1,0
"@@ -41,6 +41,10 @@ static gboolean opt_verbose;
 static gboolean opt_version;
 static gboolean opt_print_current_dir;
 
+// TODO: make this public?  But no one sane wants to use our C headers
+// to find where to put files.  Maybe we can make it printed by the CLI?
+#define _OSTREE_EXT_DIR PKGLIBEXECDIR ""/ext""
+
 static GOptionEntry global_entries[] = {
   { ""verbose"", 'v', 0, G_OPTION_ARG_NONE, &opt_verbose, ""Print debug information during command processing"", NULL },
   { ""version"", 0, 0, G_OPTION_ARG_NONE, &opt_version, ""Print version information and exit"", NULL },","`/usr/share/pkgconfig/ostree.pc` like `/usr/share/pkgconfig/systemd.pc`? Not a blocker, but I think it provides a natural place to provide info about the CLI. Another alternative is to put it in the `--version` output like `Features`.",c,1,1,1
"@@ -84,8 +84,6 @@ void mainloop(struct work_queue *queue, struct link *client)
 		ssize_t read = link_read(client, message, 1, time(NULL) + timeout);
 		while(message[0] != '{') {
 
-			//printf(""server number read: %c\n"", message[0]);
-
 			l[i] = message[0];
 			i++;
 			link_read(client, message, 1, time(NULL) + timeout);",Use `link_readline` here to do what you want.,c,1,1,1
"@@ -862,7 +862,7 @@ static const enum_name_pair_t pt_req_map[] = { { PTRACE_TRACEME, ""PTRACE_TRACEME
 #    endif
                                                { PTRACE_ATTACH, ""PTRACE_ATTACH"" },
                                                { PTRACE_DETACH, ""PTRACE_DETACH"" },
-#    ifndef AARCH64
+#    if defined(PTRACE_GETFPXREGS) && defined(PTRACE_SETFPXREGS)
                                                { PTRACE_GETFPXREGS, ""PTRACE_GETFPXREGS"" },
                                                { PTRACE_SETFPXREGS, ""PTRACE_SETFPXREGS"" },
 #    endif","nit: It seems cleaner to have a separate define check for each of these, rather than bundling them, right?",c,1,1,1
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -1323,6 +1323,14 @@ os_terminate_with_code(dcontext_t *dcontext, terminate_flags_t flags, int exit_c
     if (TEST(TERMINATE_CLEANUP, flags)) {
         /* we enter from several different places, so rewind until top-level kstat */
         KSTOP_REWIND_UNTIL(thread_measured);
+
+        /* This thread is on its way to exit, we are blocking all signals since any
+         * signal that reaches us now can be delayed until after the exit is complete.
+         * We may still receive a suspend signal for synchronization that we may need
+         * to reply to (i#2921).
+         */
+        block_all_signals_except(NULL, 1, SUSPEND_SIGNAL);
+
         cleanup_and_terminate(dcontext, SYSNUM_EXIT_PROCESS, exit_code, 0,
                               true /*whole process*/, 0, 0);
     } else {","grammar: two separate sentences joined by a comma. Fix by s/, w/. W/ or sthg. Ditto multiple times below.",c,1,0,1
"@@ -336,7 +336,7 @@ static void do_send(struct rp_generator_t *self)
     size_t veccnt;
     h2o_send_state_t ststate;
 
-    assert(self->sending.bytes_inflight == 0);
+    assert(!self->sending.inflight);
 
     vecs[0] = h2o_doublebuffer_prepare(&self->sending,
                                        self->client != NULL ? &self->client->sock->input : &self->last_content_before_send,",How about removing this assertion now that the check is done in `h2o_doublebuffer_prepare`?,c,1,1,1
"@@ -116,8 +116,7 @@ func fieldsByName(example interface{}) map[string]reflect.StructField {
 var _ = DescribeTable(""Config parsing"",
         func(key, value string, expected interface{}, errorExpected ...bool) {
                 config := New()
-                config.UpdateFrom(map[string]string{key: value},
-                        EnvironmentVariable)
+                config.UpdateFrom(map[string]string{key: value}, EnvironmentVariable)
                 configPtr := reflect.ValueOf(config)
                 configElem := configPtr.Elem()
                 fieldRef := configElem.FieldByName(key)","Note, another possibly unnecessary change here.",c,1,1,0
"@@ -3432,7 +3432,7 @@ enum xnn_status xnn_initialize(const struct xnn_allocator* allocator) {
     allocator = &xnn_default_allocator;
   }
   #ifdef _MSC_VER
-    _InterlockedCompareExchangePointer(&init_allocator, allocator, NULL);
+    _InterlockedCompareExchangePointer((void* volatile)(&init_allocator), allocator, NULL);
   #else
     __sync_bool_compare_and_swap(&init_allocator, NULL, allocator);
   #endif","Just `(void* volatile) &init_allocator`, no need for extra brackets.",c,1,1,1
"@@ -3719,6 +3719,11 @@ static int check_hand_against_task(struct work_queue *q, struct work_queue_worke
 	if(w->resources->gpus.inuse + limits->gpus > overcommitted_resource_total(q, w->resources->gpus.total, 0)) {
 		ok = 0;
 	}
+		
+	//if the wall time for the worker is specified and there's not enough time for the task, then not ok
+	if(w->resources->time_left != -1 && w->resources->time_left < t->resources_requested->wall_time){
+		ok = 0;
+	}
 
 	rmsummary_delete(limits);
 ","Here we should also check for t->resources_requested->end (if > 0). end is an absolute time, so something like: t->resources->time_left > t->resources_requested->end - timestamp(). or something like that. Also, not all tasks define -> wall_time, so you have to check for wall_time > 0 I would also change time_left != -1 to > 0 for consistency.",c,1,1,1
"@@ -107,7 +107,14 @@ REPLACE_OPTIONS_MAP = {
 
 IGNORED_OPTION_MAP = {
     '-MT': 1,
+    '-MQ': 1,
     '-MF': 1,
+    '-MJ': 1,
+    '-MM': 0,
+    '-MP': 0,
+    '-MD': 0,
+    '-MV': 0,
+    '-MMD': 0,
     '-fsyntax-only': 0,
     '-save-temps': 0,
     '-install_name': 1,",Why do we have both this map and some of these hard coded above?,c,1,1,1
"@@ -31,6 +31,7 @@
  * DAMAGE.
  */
 
+/* Copyright (c) 2019 Google */
 /* Copyright (c) 2003-2007 Determina Corp. */
 /* Copyright (c) 2001-2003 Massachusetts Institute of Technology */
 /* Copyright (c) 2001 Hewlett-Packard Company */",The Google copyright is on line 1.,c,1,1,1
"@@ -180,6 +180,16 @@ struct flb_kafka *flb_kafka_conf_create(struct flb_output_instance *ins,
     if (tmp) {
         ctx->gelf_fields.level_key = flb_sds_create(tmp);
     }
+    /* Config: Time_Key_Format */
+    tmp = flb_output_get_property(""time_key_format"", ins);
+    if(tmp){
+        ctx->time_key_format = flb_strdup(tmp);
+        ctx->time_key_format_len = strlen(tmp);
+    }
+    else {
+       ctx->time_key_format = NULL;
+       ctx->time_key_format_len = 0;
+    }
 
     /* Kafka Producer */
     ctx->producer = rd_kafka_new(RD_KAFKA_PRODUCER, ctx->conf,","at this level I think would be important to do a dummy validation of the given time format in the configuration, like call a static function that does a strftime(3) and check it return value. Otherwise on runtime it might mess up thinks without noticing it.",c,1,1,1
"@@ -734,6 +734,17 @@ write_content_object (OstreeRepo         *self,
     }
   else
     {
+      /* Update size metadata if configured */
+      if (indexable && object_file_type == G_FILE_TYPE_REGULAR)
+        {
+          struct stat stbuf;
+
+          if (!glnx_fstat (tmpf.fd, &stbuf, error))
+            return FALSE;
+
+          repo_store_size_entry (self, actual_checksum, unpacked_size, stbuf.st_size);
+        }
+
       /* This path is for regular files */
       if (!commit_loose_regfile_object (self, actual_checksum, &tmpf,
                                         uid, gid, mode,",Can you elaborate on how this makes a difference? Aren't `phys_object_is_symlink` and `object_file_type == G_FILE_TYPE_REGULAR` already mutually exclusive?,c,1,1,1
"@@ -0,0 +1,14 @@
+int method(void)
+{
+  return 0;
+}
+
+int sub(void)
+{
+  return 0;
+}
+
+int fun(void)
+{
+  return 0;
+}",...becase there is no whitespace after `(void)`.,c,0,0,0
"@@ -202,8 +202,10 @@ static void on_handshake_complete(h2o_socket_t *sock, const char *err)
 static void on_connect(h2o_socket_t *sock, const char *err)
 {
     if (err != NULL) {
+        char buf[128];
         /* connection failed */
-        fprintf(stderr, ""failed to connect to host:%s\n"", err);
+        fprintf(stderr, ""failed to connect to host:%s:%s\n"", err,
+                h2o_strerror_r(errno, buf, sizeof(buf)));
         h2o_socket_close(sock);
         exit(1);
         return;","I think this change is also not appropriate due to the same reason (i.e., the failure might be due to something other than a syscall, e.g., certificate validation).",c,1,1,1
"@@ -170,7 +170,7 @@ const char* cxxDebugScopeDecode(enum CXXScopeType scope)
 		[CXXScopeTypeUnion] = ""union"",
 		[CXXScopeTypeStruct] = ""structg"",
 	};
-	if (sizeof(table) > scope)
+	if (CXXScopeTypeLAST > scope)
 		return table[scope];
 	else
 		return NULL;",could also have been `ARRAY_SIZE(table) > scope`,c,1,1,1
"@@ -16,7 +16,9 @@
  * specific language governing permissions and limitations
  * under the License.
  */
-
+#if defined(_MSC_VER) && (_MSC_VER < 1900)
+#define snprintf _snprintf
+#endif
 #include <thrift/thrift-config.h>
 
 #include <cstring>",This is already done in PlatformSocket.h - you can replace snprintf in this file with THRIFT_SNPRINTF and remove this code block instead.,c,1,1,1
"@@ -2833,6 +2833,15 @@ client_process_bb(dcontext_t *dcontext, build_bb_t *bb)
         if (!instr_opcode_valid(inst))
             continue;
 
+#    ifdef X86
+        if (!d_r_avx512_code_in_use()) {
+            if (instr_may_write_zmm_register(inst)) {
+                if (ZMM_ENABLED())
+                    dynamo_avx512_code_in_use = true;
+            }
+        }
+#    endif
+
         if (instr_is_cti(inst) && inst != instrlist_last(bb->ilist)) {
             /* PR 213005: coarse_units can't handle added ctis (meta or not)
              * since decode_fragment(), used for state recreation, can't","This seems odd to have an accessor function d_r_avx512_code_in_use() yet to have the state it's using be written here. You would expect to either have a set() routine and to hide the state var inside the getter and setter, or to expose both.",c,1,1,1
"@@ -226,7 +226,7 @@ void ValidationStateTracker::PreCallRecordCmdClearColorImage(VkCommandBuffer com
                                                              uint32_t rangeCount, const VkImageSubresourceRange *pRanges) {
     if (disabled[command_buffer_state]) return;
 
-    auto cb_node = Get<CMD_BUFFER_STATE>(commandBuffer);
+    auto cb_node = GetWrite<CMD_BUFFER_STATE>(commandBuffer);
     if (cb_node) {
         cb_node->RecordTransferCmd(CMD_CLEARCOLORIMAGE, Get<IMAGE_STATE>(image));
     }",All get writes this file. Same split lock concern.,cpp,0,0,0
"@@ -60,7 +60,12 @@ TEST_F(FunctionCallExpressionTest, FunctionCallTest) {
     path.src.vid = ""1"";
     STEP(""2"", ""edge"", 0, 1);
     STEP(""1"", ""edge"", 0, -1);
-    TEST_FUNCTION(hasSameEdgeInPath, {path}, true);
+    ArgumentList *argList = ArgumentList::make(&pool);
+    argList->addArgument(ConstantExpression::make(&pool, path));
+    auto functionCall = FunctionCallExpression::make(&pool, ""hasSameEdgeInPath"", argList);
+    auto eval = Expression::eval(functionCall, gExpCtxt);
+    // EXPECT_EQ(eval.type(), expected.type());
+    EXPECT_EQ(eval, Value(true));
   }
   {
     // hasSameEdgeInPath",I think you should provide some new test utilities instead of expand them.,cpp,1,0,1
"@@ -3176,8 +3176,8 @@ void WorldServer::UpdateLFP(uint32 LeaderID, GroupLFPMemberEntry *LFPMembers) {
 
 void WorldServer::StopLFP(uint32 LeaderID) {
 
-	GroupLFPMemberEntry LFPMembers;
-	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", &LFPMembers);
+	GroupLFPMemberEntry LFPMembers[MAX_GROUP_MEMBERS];
+	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", LFPMembers);
 }
 
 void WorldServer::HandleLFGMatches(ServerPacket *pack) {",There a reason we're no longer passing by reference here ?,cpp,1,0,0
"@@ -46,6 +46,8 @@
 
 #include <Kokkos_Core.hpp>
 
+// FIXME_SYCL requires allocate_tracked
+#ifndef KOKKOS_ENABLE_SYCL
 #if !defined(KOKKOS_ENABLE_CUDA) || defined(__CUDACC__)
 
 #include <default/TestDefaultDeviceType_Category.hpp>",Does `malloc` test not pass?,cpp,0,0,0
"@@ -3635,6 +3635,8 @@ static PropertyDefinition g_properties[] = {
     {""swift-module-search-paths"", OptionValue::eTypeFileSpecList, false, 0,
      nullptr, nullptr,
      ""List of directories to be searched when locating modules for Swift.""},
+    {""swift-create-module-contexts-in-parallel"", OptionValue::eTypeBoolean, false, true,
+     nullptr, nullptr, ""Create modules AST context in parallel.""},
     {""auto-import-clang-modules"", OptionValue::eTypeBoolean, false, true,
      nullptr, nullptr,
      ""Automatically load Clang modules referred to by the program.""},",`Create the per-module Swift AST contexts in parallel.` ?,cpp,1,0,0
"@@ -354,6 +354,10 @@ TEST(Scanner, Basic) {
         CHECK_SEMANTIC_VALUE(""\""He\\\nllo\"""", TokenType::STRING, ""He\nllo""),
         CHECK_SEMANTIC_VALUE(""\""\\\""Hello\\\""\"""", TokenType::STRING, ""\""Hello\""""),
 
+        CHECK_SEMANTIC_VALUE(""'Hello'"", TokenType::STRING, ""Hello""),
+        CHECK_SEMANTIC_VALUE(""'\""Hello\""'"", TokenType::STRING, ""\""Hello\""""),
+        CHECK_SEMANTIC_VALUE(""'\\'Hello\\''"", TokenType::STRING, ""'Hello'""),
+
         // escape Normal character
         CHECK_SEMANTIC_VALUE(""\""Hell\\o\"""", TokenType::STRING, ""Hello""),
         CHECK_SEMANTIC_VALUE(""\""Hell\\\\o\"""", TokenType::STRING, ""Hell\\o""),","""he\'llo""-> he'llo ""he'llo"" -> he'llo or syntax error?",cpp,1,0,1
"@@ -981,7 +981,7 @@ void DatasetLoader::ConstructBinMappersFromTextData(int rank, int num_machines,
         bin_type = BinType::CategoricalBin;
       }
       bin_mappers[i].reset(new BinMapper());
-      if (sample_values.size() <= start[rank] + i) {
+      if (static_cast<int>(sample_values.size()) <= start[rank] + i) {
         continue;
       }
       if (config_.max_bin_by_feature.empty()) {",thanks! Was seeing this warning too last night,cpp,1,0,0
"@@ -102,7 +102,7 @@ Point2D bondInsideRing(const ROMol &mol, const Bond &bond, const Point2D &cds1,
     Atom *bgn_atom = bond->getBeginAtom();
     for (const auto &nbri2 : make_iterator_range(mol.getAtomBonds(bgn_atom))) {
       const Bond *bond2 = mol[nbri2];
-      if (bond2 == bond) {
+      if (bond2->getIdx() == bond->getIdx()) {
         continue;
       }
       if (find(ring.begin(), ring.end(), bond2->getIdx()) != ring.end()) {",oh is that embarrassing,cpp,0,0,0
"@@ -886,6 +886,11 @@ void declare_optimization_goal(const size_t context,
 #include <cstring>
 
 namespace Kokkos {
+
+namespace Profiling {
+bool profileLibraryLoaded() { return false; }
+}  // namespace Profiling
+
 namespace Tools {
 
 bool profileLibraryLoaded() { return false; }","```diff diff --git a/core/src/impl/Kokkos_Profiling.cpp b/core/src/impl/Kokkos_Profiling.cpp index 3e593c5..387b83e 100644 --- a/core/src/impl/Kokkos_Profiling.cpp +++ b/core/src/impl/Kokkos_Profiling.cpp @@ -889,7 +889,7 @@ namespace Kokkos { namespace Profiling { bool profileLibraryLoaded() { return false; } -} +} // namespace Profiling namespace Tools {",cpp,0,0,0
"@@ -9,6 +9,7 @@
 #include ""meta/processors/ListHostsProcessor.h""
 #include ""meta/processors/ListSpacesProcessor.h""
 #include ""meta/processors/GetPartsAllocProcessor.h""
+#include <meta/processors/AuthenticationProcessor.h>
 
 #define RETURN_FUTURE(processor) \
     auto f = processor->getFuture(); \",Please do not use **<>** for our own header files,cpp,1,1,1
"@@ -8,14 +8,17 @@
 #  which is included in the file license.txt, found at the root
 #  of the RDKit source tree.
 #
+from rdkit.TestRunner import redirect_stdout
+from rdkit.six import StringIO
 """"""unit testing code for the signatures
 
 """"""
-import unittest
 import os.path
+import unittest
+
+from rdkit import Chem
 from rdkit import RDConfig
 from rdkit.Chem import ChemicalFeatures
-from rdkit import Chem
 from rdkit.Chem.Pharm2D import Generate, SigFactory, Matcher, Gobbi_Pharm2D
 
 ","These should not be over the doctstring for the file. Given that this particular docstring (the one starting on l13) is useless, it makes sense to just remove that.",cpp,1,1,1
"@@ -848,13 +848,12 @@ class Dataset(object):
             self.set_weight(weight)
         if group is not None:
             self.set_group(group)
-        # load init score
-        if init_score is not None:
-            self.set_init_score(init_score)
-            if predictor is not None:
-                warnings.warn(""The prediction of init_model will be overridden by init_score."")
-        elif isinstance(predictor, _InnerPredictor):
+        if isinstance(predictor, _InnerPredictor):
+            if self._predictor is None and init_score is not None:
+                warnings.warn(""The init_score will be overridden by the prediction of init_model."")
             self._set_init_score_by_predictor(predictor, data)
+        elif init_score is not None:
+            self.set_init_score(init_score)
         elif predictor is not None:
             raise TypeError('Wrong predictor type {}'.format(type(predictor).__name__))
         # set feature names",Can you please clarify `if self._predictor is None` check?,cpp,1,1,1
"@@ -330,7 +330,8 @@ class LGBMModel(_LGBMModelBase):
             sample_weight=None, init_score=None, group=None,
             eval_set=None, eval_names=None, eval_sample_weight=None,
             eval_class_weight=None, eval_init_score=None, eval_group=None,
-            eval_metric=None, early_stopping_rounds=None, verbose=True,
+            eval_metric=None, eval_train_metric=None, eval_valid_metric=None,
+            early_stopping_rounds=None, verbose=True,
             feature_name='auto', categorical_feature='auto', callbacks=None):
         """"""Build a gradient boosting model from the training set (X, y).
 ",I don't think that these new args are really needed. One can achieve the needed result in their rare case with `params`.,cpp,1,1,1
"@@ -43,6 +43,7 @@ DesktopSwitchConfiguration::DesktopSwitchConfiguration(PluginSettings *settings,
 
     connect(ui->rowsSB, SIGNAL(valueChanged(int)), this, SLOT(rowsChanged(int)));
     connect(ui->labelTypeCB, SIGNAL(currentIndexChanged(int)), this, SLOT(labelTypeChanged(int)));
+    connect(ui->showOnlyActiveCB, &QAbstractButton::toggled, [this] (bool checked) { this->settings().setValue(""showOnlyActive"", checked); });
 
     loadDesktopsNames();
 }",Implicit string cast,cpp,1,1,0
"@@ -79,13 +79,17 @@ bool PDPServer2::init(
         return false;
     }
 
+    // Initialize server dedicated thread.
+    resource_event_thread_.init_thread();
+
     /*
         Given the fact that a participant is either a client or a server the
         discoveryServer_client_syncperiod parameter has a context defined meaning.
      */
     mp_sync = new DServerEvent2(this,
-                    TimeConv::Duration_t2MilliSecondsDouble(m_discovery.discovery_config.
-                    discoveryServer_client_syncperiod));
+                    TimeConv::Duration_t2MilliSecondsDouble(
+                            m_discovery.discovery_config.discoveryServer_client_syncperiod));
+
     awakeServerThread();
 
     return true;","I'd leave the first awaken for the first data received/added to the database, either by listeners or `PDPServer2::announceParticipantState()`",cpp,1,1,1
"@@ -148,6 +148,16 @@ CONSTEXPR uint32_t info_dst_message_length = 16;
 CONSTEXPR uint32_t info_ts_message_length = 12;
 CONSTEXPR uint32_t data_frag_submessage_header_length = 36;
 
+uint32_t RTPSWriter::get_max_fragment_payload_size()
+{
+    constexpr uint32_t data_frag_header_size = 28;
+    constexpr uint32_t max_inline_qos_size = 32;
+    // Max fragment is 64KBytes_max - header - inlineqos - 4(for better alignment)
+    constexpr uint32_t max_fragment_size = std::numeric_limits<uint16_t>::max() - data_frag_header_size - max_inline_qos_size - 4;
+    
+    return max_fragment_size;
+}
+
 uint32_t RTPSWriter::getMaxDataSize()
 {
     return calculateMaxDataSize(mp_RTPSParticipant->getMaxMessageSize());",Move this method to the header file and make it an inline constexpr one.,cpp,1,1,1
"@@ -179,6 +179,14 @@ Client::Client(EQStreamInterface* ieqs)
         for (int client_filter = 0; client_filter < _FilterCount; client_filter++)
                 ClientFilters[client_filter] = FilterShow;
 
+        m_TimeSinceLastPositionCheck = 0;
+        m_DistanceSinceLastPositionCheck = 0.0f;
+        m_ShadowStepExemption = 0;
+        m_KnockBackExemption = 0;
+        m_PortExemption = 0;
+        m_SenseExemption = 0;
+        m_AssistExemption = 0;
+        m_CheatDetectMoved = false;
         mMovementManager->AddClient(this);
         character_id = 0;
         conn_state = NoPacketsReceived;","I know the source is inconsistent but I believe the effort is to have variable names snake case where possible for these, like `m_distance_since_last_position_check`, `m_cheat_detect_moved`, etc",cpp,1,1,1
"@@ -2277,7 +2277,7 @@ TEST_F(VkLayerTest, GpuValidationArrayOOB) {
 
     VkDescriptorImageInfo image_info[6] = {};
     for (int i = 0; i < 6; i++) {
-        image_info[i] = texture.m_imageInfo;
+        image_info[i] = texture.DescriptorImageInfo();
         image_info[i].sampler = sampler.handle();
         image_info[i].imageLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL;
     }","this is part of the framework cleanup for correct image layout tracking. The former code had a ""man with two watches"" problem. It tracked to different DescriptorImageInfo structs, partially updating each (and thus making part of each stale)",cpp,1,1,1
"@@ -56,6 +56,10 @@ void outputMetaData(const t_obj *obj, std::ostream &d_os,
     d_os << "" "" << prop.substr(10) << ""=\"""" << value << ""\"""";
   }
 }
+std::string formatDouble(double val) {
+  return str(boost::format(""%.1f"") % val);
+}
+
 }  // namespace
 
 std::string DrawColourToSVG(const DrawColour &col) {",this should be deleted after the function is moved,cpp,1,1,1
"@@ -111,6 +111,8 @@ void parseMCSParametersJSON(const char* json, MCSParameters* params) {
         ""RingMatchesRingOnly"", p.AtomCompareParameters.RingMatchesRingOnly);
     p.BondCompareParameters.RingMatchesRingOnly = pt.get<bool>(
         ""RingMatchesRingOnly"", p.BondCompareParameters.RingMatchesRingOnly);
+    p.AtomCompareParameters.CompleteRingsOnly = pt.get<bool>(
+        ""CompleteRingsOnly"", p.AtomCompareParameters.CompleteRingsOnly);
     p.BondCompareParameters.CompleteRingsOnly = pt.get<bool>(
         ""CompleteRingsOnly"", p.BondCompareParameters.CompleteRingsOnly);
     p.BondCompareParameters.MatchFusedRings = pt.get<bool>(",This is a little bit misleading since `CompleteRingsOnly` will apply to both to both atoms and bonds. Would it maybe be clearer to call this one `CompleteAtomRingsOnly`? (To be clear: I'm not sure... asking for your opinion),cpp,1,1,1
"@@ -46,7 +46,7 @@ void CleanTCPSocketsEvent::event(EventCode code, const char* /*msg*/)
 {
     if(code == EVENT_SUCCESS)
     {
-        mp_transport->clean_deleted_sockets();
+        //mp_transport->clean_deleted_sockets();
     }
 }
 ","So... the whole class isn't necessary, didn't?",cpp,1,1,0
"@@ -39,17 +39,9 @@ kvstore::ResultCode QueryEdgePropsProcessor::collectEdgesProps(
     return ret;
 }
 
-void QueryEdgePropsProcessor::addDefaultProps() {
-    this->edgeContext_.props_.emplace_back(""_src"", 0, PropContext::PropInKeyType::SRC);
-    this->edgeContext_.props_.emplace_back(""_rank"", 1, PropContext::PropInKeyType::RANK);
-    this->edgeContext_.props_.emplace_back(""_dst"", 2, PropContext::PropInKeyType::DST);
-}
-
 void QueryEdgePropsProcessor::process(const cpp2::EdgePropRequest& req) {
     spaceId_ = req.get_space_id();
-    // By default, _src, _rank, _dst will be returned as the first 3 fields
-    addDefaultProps();
-    int32_t returnColumnsNum = req.get_return_columns().size() + this->edgeContext_.props_.size();
+    //    initContext(req.edge_types, true);
     auto retCode = this->checkAndBuildContexts(req);
     if (retCode != cpp2::ErrorCode::SUCCEEDED) {
         for (auto& p : req.get_parts()) {",Why remove the default props?,cpp,1,1,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -55,9 +55,10 @@ struct LocalFile : VirtualFileReader, VirtualFileWriter {
 };
 
 const char* kHdfsProto = ""hdfs://"";
-const size_t kHdfsProtoLength = strlen(kHdfsProto);
 
 #ifdef USE_HDFS
+const size_t kHdfsProtoLength = strlen(kHdfsProto);
+
 struct HDFSFile : VirtualFileReader, VirtualFileWriter {
   HDFSFile(const std::string& filename, int flags) : filename_(filename), flags_(flags) {}
   ~HDFSFile() {",maybe `const size_t kHdfsProtoLength = static_cast<size_t>(strlen(kHdfsProto));` ?,cpp,1,1,1
"@@ -63,7 +63,7 @@ void P016_data_struct::ExecuteCode(uint32_t  Code) {
   uint32_t _now = millis();
   if (iLastCmd == Code) {
     // same code as before
-    if (iCmdInhibitTime > (int32_t)(_now - iLastCmdTime)) {
+    if (iCmdInhibitTime > static_cast<uint32_t>(_now - iLastCmdTime)) {
       // inhibit time not ellapsed
       return;
     }",Why not using the `timePassedSince` function here? This is very tricky what you're doing here.,cpp,1,1,1
"@@ -387,6 +387,7 @@ int command_init(void)
                 command_add(""unscribespells"", ""- Clear out your or your player target's spell book."", AccountStatus::GMCoder, command_unscribespells) ||
                 command_add(""untraindisc"", ""[spellid] - Untrain specified discipline from your target."", AccountStatus::GMCoder, command_untraindisc) ||
                 command_add(""untraindiscs"", ""- Untrains all disciplines from your target."", AccountStatus::GMCoder, command_untraindiscs) ||
+                command_add(""updatechecksum"", ""gm only"", AccountStatus::GMImpossible, command_updatechecksum) ||
                 command_add(""uptime"", ""[zone server id] - Get uptime of worldserver, or zone server if argument provided"", AccountStatus::Steward, command_uptime) ||
                 command_add(""version"", ""- Display current version of EQEmu server"", AccountStatus::Player, command_version) ||
                 command_add(""viewcurrencies"", ""- View your or your target's currencies"", AccountStatus::GMAdmin, command_viewcurrencies) ||",Could use a bit more verbosity here on the command note.,cpp,1,1,1
"@@ -1246,7 +1246,7 @@ nano::error nano::telemetry_data::serialize_json (nano::jsonconfig & json, bool
 	json.put (""block_count"", block_count);
 	json.put (""cemented_count"", cemented_count);
 	json.put (""unchecked_count"", unchecked_count);
-	json.put (""account_count"", account_count);
+	json.put (""count"", account_count);
 	json.put (""bandwidth_cap"", bandwidth_cap);
 	json.put (""peer_count"", peer_count);
 	json.put (""protocol_version"", protocol_version);","ops, this wasn't supposed to be changed. I'll fix.",cpp,1,1,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -8,13 +8,13 @@ const char *counterNames[NUM_CONV_TYPES] = {
     ""version"", ""init"", ""device"", ""mem"", ""kern"", ""coord_func"", ""math_func"", ""device_func"",
     ""special_func"", ""stream"", ""event"", ""occupancy"", ""ctx"", ""peer"", ""module"",
     ""cache"", ""exec"", ""err"", ""def"", ""tex"", ""gl"", ""graphics"",
-    ""surface"", ""jit"", ""d3d9"", ""d3d10"", ""d3d11"", ""vdpau"", ""egl"",
+    ""surface"", ""jit"", ""d3d9"", ""d3d10"", ""d3d11"", ""vdpau"", ""egl"", ""complex"",
     ""thread"", ""other"", ""include"", ""include_cuda_main_header"", ""type"", ""literal"",
     ""numeric_literal""
 };
 
 const char *apiNames[NUM_API_TYPES] = {
-    ""CUDA Driver API"", ""CUDA RT API"", ""CUBLAS API"", ""CURAND API"", ""CUDNN API"", ""CUFFT API""
+    ""CUDA Driver API"", ""CUDA RT API"", ""CUBLAS API"", ""CURAND API"", ""CUDNN API"", ""CUFFT API"", ""cuComplex API""
 };
 
 namespace {",why this api name is not capitalized as other?,cpp,1,1,1
"@@ -18,7 +18,7 @@ thread ([this]() {
 
 void nano::vote_processor::process_loop ()
 {
-        nano::timer<std::chrono::milliseconds> elapsed;
+        nano::timer<std::chrono::milliseconds> elapsed (nano::timer_state::stopped);
         bool log_this_iteration;
 
         nano::unique_lock<std::mutex> lock (mutex);",A nano timer is initially stopped so passing the stopped state shouldn't be necessary. Otherwise LGTM.,cpp,1,1,1
"@@ -1,6 +1,7 @@
 // unit tests creating LAMMPS instances via the library interface
 
 #include ""lammps.h""
+#define LAMMPS_LIB_MPI 1
 #include ""library.h""
 #include <cstdio> // for stdin, stdout
 #include <mpi.h>",Should this be here?,cpp,1,1,0
"@@ -3268,8 +3268,9 @@ bool ValidateMapImageLayouts(core_validation::layer_data *device_data, VkDevice
 
 // Helper function to validate correct usage bits set for buffers or images. Verify that (actual & desired) flags != 0 or, if strict
 // is true, verify that (actual & desired) flags == desired
-static bool validate_usage_flags(layer_data *device_data, VkFlags actual, VkFlags desired, VkBool32 strict, uint64_t obj_handle,
-                                 VulkanObjectType obj_type, std::string msgCode, char const *func_name, char const *usage_str) {
+static bool validate_usage_flags(const layer_data *device_data, VkFlags actual, VkFlags desired, VkBool32 strict,
+                                 uint64_t obj_handle, VulkanObjectType obj_type, std::string msgCode, char const *func_name,
+                                 char const *usage_str) {
     const debug_report_data *report_data = core_validation::GetReportData(device_data);
 
     bool correct_usage = false;","Not required for this pull, thoughts about string passing... We shouldn't be passing strings by value (in general), but by const reference, or if all callers invoke by string literal, by const char * . If there is a mix (literal and string callers), then caller side construction (in the case of 1-2 literal invocations) or overloaded const char * wrapper function (in the case of many literal invocations).",cpp,0,1,1
"@@ -305,7 +305,14 @@ void nano::bootstrap_server::receive_bulk_pull_action (boost::system::error_code
 		{
 			if (node->config.logging.bulk_pull_logging ())
 			{
-				node->logger.try_log (boost::str (boost::format (""Received bulk pull for %1% down to %2%, maximum of %3%"") % request->start.to_string () % request->end.to_string () % (request->count ? request->count : std::numeric_limits<double>::infinity ())));
+				if (!request->start.is_zero ())
+				{
+					node->logger.try_log (boost::str (boost::format (""Received bulk pull for %1% down to %2%, maximum of %3%"") % request->start.to_string () % request->end.to_string () % (request->count ? request->count : std::numeric_limits<double>::infinity ())));
+				}
+				else
+				{
+					node->logger.try_log (boost::str (boost::format (""Received bulk pull for %1% down to %2%, maximum of %3% from %4%"") % request->start.to_string () % request->end.to_string () % (request->count ? request->count : std::numeric_limits<double>::infinity ()) % remote_endpoint));
+				}
 			}
 			if (is_bootstrap_connection () && !node->flags.disable_bootstrap_bulk_pull_server)
 			{","These clauses are almost identical, can we just always log the remote endpoint?",cpp,1,1,1
"@@ -17,7 +17,9 @@
 #include ""oneapi/dal/test/engine/config.hpp""
 
 #include <stdexcept>
-#include ""oneapi/dal/test/engine/common.hpp""
+#include ""oneapi/dal/test/engine/common_base.hpp""
+
+#include <iostream>
 
 namespace oneapi::dal::test::engine {
 ",Is it necessary?,cpp,1,1,0
"@@ -284,6 +284,8 @@ void finalize_internal( const bool all_spaces = false )
       Kokkos::Cuda::impl_finalize();
 #endif
   }
+#else
+  (void)all_spaces;
 #endif
 
 #if defined( KOKKOS_ENABLE_ROCM )","Casting to void sometimes helps, but not always.",cpp,1,1,1
"@@ -47,6 +47,10 @@ void UpdateEdgeProcessor::onProcessFinished(int32_t retNum) {
             return it->second;
         };
         for (auto& exp : returnColumnsExp_) {
+            if (!exp->prepare().ok()) {
+                LOG(ERROR) << ""Expression::prepare failed"";
+                return;
+            }
             auto value = exp->eval(getters);
             if (!value.ok()) {
                 LOG(ERROR) << value.status();",The check here should be redundant because `UpdateEdgeProcessor::checkAndBuildContexts` has already processed.,cpp,1,1,1
"@@ -15,6 +15,7 @@
 // converted to color.
 
 #include <glog/logging.h>
+#include <gflags/gflags.h>
 #include <leveldb/db.h>
 #include <leveldb/write_batch.h>
 #include <lmdb.h>",Consider moving this up above glog.,cpp,1,1,1
"@@ -150,8 +150,10 @@ namespace LightGBM {
   }
 
   std::vector<double> FindBinWithZeroAsOneBin(const double* distinct_values, const int* counts,
-    int num_distinct_values, int max_bin, size_t total_sample_cnt, int min_data_in_bin) {
+    int num_distinct_values, int max_bin, size_t total_sample_cnt, int min_data_in_bin, std::vector<double> forced_upper_bounds) {
     std::vector<double> bin_upper_bound;
+
+    // get list of distinct values
     int left_cnt_data = 0;
     int cnt_zero = 0;
     int right_cnt_data = 0;","could we add an independent function,`FindBinWithPredefinedBin`, to include these changes? I am afraid of these changes may introduce some bugs.",cpp,1,1,1
"@@ -55,6 +55,12 @@ folly::StringPiece LogStrListIterator::logMsg() const {
     return logEntries_.at(idx_).get_log_str();
 }
 
+LogEntry LogStrListIterator::logEntry() {
+    DCHECK(valid());
+    return {firstLogId_ + idx_, term_, logEntries_.at(idx_).get_cluster(),
+            logEntries_.at(idx_).get_log_str()};
+}
+
 }  // namespace raftex
 }  // namespace nebula
 ","I strongly suggest to explicitly construct the tuple, like `return LogEntry(...)`. Actually, using it this way is not standardized until C++17, although the compilers of latest versions(at least not in GCC 5.2) already have supported it.",cpp,1,1,1
"@@ -305,9 +305,15 @@ void addRecursiveQueriesHelper(ROMol &mol, python::dict replDict,
   addRecursiveQueries(mol, replacements, propName);
 }
 
-ROMol *addHs(const ROMol &orig, bool explicitOnly = false,
-             bool addCoords = false) {
-  return MolOps::addHs(orig, explicitOnly, addCoords);
+ROMol *addHs(const ROMol &orig, bool explicitOnly, bool addCoords,
+             python::object onlyOnAtoms) {
+  std::vector<unsigned int> *onlyOn = NULL;
+  if (onlyOnAtoms) {
+    onlyOn = pythonObjectToVect(onlyOnAtoms, orig.getNumAtoms());
+  }
+  ROMol *res = MolOps::addHs(orig, explicitOnly, addCoords, onlyOn);
+  delete onlyOn;
+  return res;
 }
 int getSSSR(ROMol &mol) {
   VECT_INT_VECT rings;","if this throws an exception, isn't onlyOn leaked since it never reaches delete? (normally RAII takes care of this stuff, but I have no idea how boost::python deals with this).",cpp,1,1,1
"@@ -41,7 +41,7 @@ bool Scripts::loadScripts(std::string folderName, bool isLib, bool reload)
 {
 	namespace fs = boost::filesystem;
 
-	const auto dir = fs::current_path() / ""data"" / folderName;
+	const auto dir = fs::current_path() / g_config.getString(ConfigManager::DATA_DIRECTORY) / folderName;
 	if(!fs::exists(dir) || !fs::is_directory(dir)) {
 		std::cout << ""[Warning - Scripts::loadScripts] Can not load folder '"" << folderName << ""'."" << std::endl;
 		return false;","You can now change this to be `std::filesystem`, we used `boost` because C++11 didn't have `filesystem` but C++17 has.",cpp,1,1,1
"@@ -2200,6 +2200,12 @@ TEST_F(VkLayerTest, GpuValidationArrayOOB) {
         printf(""%s GPU-Assisted validation test requires a driver that can draw.\n"", kSkipPrefix);
         return;
     }
+#if defined(ANDROID)
+    if (instance() == VK_NULL_HANDLE) {
+        printf(""%s Skipping test on Android temporarily while debugging test execution failure.\n"", kSkipPrefix);
+        return;
+    }
+#endif
     VkValidationFeatureEnableEXT enables[] = {VK_VALIDATION_FEATURE_ENABLE_GPU_ASSISTED_EXT};
     VkValidationFeaturesEXT features = {};
     features.sType = VK_STRUCTURE_TYPE_VALIDATION_FEATURES_EXT;","This test looks odd, but I wanted an ""always true"" test here so that the compiler would not complain about unreachable code after the return.",cpp,1,1,1
"@@ -32,7 +32,7 @@ namespace ddb {
 DiscoveryDataBase::DiscoveryDataBase(
         fastrtps::rtps::GuidPrefix_t server_guid_prefix)
     : server_guid_prefix_(server_guid_prefix)
-    , server_acked_by_all_(false)
+    , server_acked_by_all_(true)
 {
 }
 ",I would not change this until the list of servers is defined in the database construction. Better to change it with the implementation that @EduPonz is going to do in the pinging PR.,cpp,0,1,0
"@@ -339,7 +339,8 @@ EvalType evaluate(model& m, const std::string& metric_name) {
   m.make_data_store_preloaded(execution_mode::validation);
 
   // Clean up and return metric value
-  c.set_execution_mode(original_mode);
+  m.reset_mode(c, original_mode);
+  c.get_trainer().get_data_coordinator().reset_mode(c);
   return metric_value;
 
 }",This should be correct and we do not want to change the execution mode of the execution context as was being done in the previous code.,cpp,1,1,1
"@@ -416,6 +416,7 @@ void fence_internal() {
     Kokkos::Serial::impl_static_fence();
   }
 #endif
+  memory_fence();
 }
 
 bool check_arg(char const* arg, char const* expected) {","This feels like it's almost certainly superfluous. In what backend does `fence()` not imply `memory_fence()` already? IIUC, the end of a OpenMP section implies a memory fence, and the threads backend already has one. I can't imagine that the Cuda, ROCm, or HPX join mechanisms do some sort of voodoo that I'm unaware of to perform an execution fence without implying a memory fence. I'm additionally wary of adding this because compilers can't remove redundant memory fences (because of the nature of fences), and AFAICT this is redundant in every case, so it's strictly overhead.",cpp,1,0,1
"@@ -57,12 +57,10 @@ int Tree::Split(int leaf, int feature, int real_feature, uint32_t threshold_bin,
   decision_type_[new_node_idx] = 0;
   SetDecisionType(&decision_type_[new_node_idx], false, kCategoricalMask);
   SetDecisionType(&decision_type_[new_node_idx], default_left, kDefaultLeftMask);
-  if (missing_type == MissingType::None) {
-    SetMissingType(&decision_type_[new_node_idx], 0);
-  } else if (missing_type == MissingType::Zero) {
-    SetMissingType(&decision_type_[new_node_idx], 1);
-  } else if (missing_type == MissingType::NaN) {
-    SetMissingType(&decision_type_[new_node_idx], 2);
+  if (missing_type == MissingType::None
+      || missing_type == MissingType::Zero
+      || missing_type == MissingType::NaN) {
+    SetMissingType(&decision_type_[new_node_idx], missing_type);
   }
   threshold_in_bin_[new_node_idx] = threshold_bin;
   threshold_[new_node_idx] = threshold_double;",I think this `if` could be removed,cpp,1,1,0
"@@ -294,6 +294,9 @@ const std::unordered_set<std::string>& Config::parameter_set() {
   ""gpu_platform_id"",
   ""gpu_device_id"",
   ""gpu_use_dp"",
+#ifdef USE_CUDA
+  ""num_gpu"", /* LGBM_CUDA */
+#endif
   });
   return params;
 }","I remember these codes are auto-generated, so we cannot manually change it. @StrikerRUS to confirm.",cpp,0,1,1
"@@ -1868,6 +1868,13 @@ static inline VkExtent3D GetImageSubresourceExtent(const IMAGE_STATE *img, const
     // Don't allow mip adjustment to create 0 dim, but pass along a 0 if that's what subresource specified
     VkExtent3D extent = img->createInfo.extent;
 
+    // If multi-plane, adjust per-plane extent
+    if (FormatIsMultiplane(img->createInfo.format)) {
+        VkExtent2D divisors = FindMultiplaneExtentDivisors(img->createInfo.format, subresource->aspectMask);
+        extent.width /= divisors.width;
+        extent.height /= divisors.height;
+    }
+
     if (img->createInfo.flags & VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV) {
         extent.width = (0 == extent.width ? 0 : std::max(2U, 1 + ((extent.width - 1) >> mip)));
         extent.height = (0 == extent.height ? 0 : std::max(2U, 1 + ((extent.height - 1) >> mip)));","If these divisors are always power of 2, then could >> by 2^x for the pow of 2 instead of divide for perf.",cpp,1,1,1
"@@ -3287,6 +3287,15 @@ NABoolean TSJRule::topMatch (RelExpr * expr,
       ((updateExpr->getOperatorType() == REL_UNARY_DELETE) && updateExpr->isMtsStatement()))
     return FALSE;
 
+  // It is not semantically correct to convert a MERGE having a 
+  // ""NOT MATCHED"" action to a TSJ, since the former has right 
+  // join semantics. (If we converted here to a TSJ, a non-matching
+  // row would not be returned by the outer child scan node, so
+  // the inner child merge node would never see it and hence the
+  // ""NOT MATCHED"" logic would not be activiated.)
+  if (updateExpr->isMerge() && updateExpr->insertValues())
+    return FALSE;
+
   return TRUE;
 }
 ",I am assuming that when a TSJ is used for IndexMaintenence or to to flow rows from a TupleList or a source select it should be acceptable. Are those cases excluded somehow by this restriction?,cpp,1,1,1
"@@ -38,7 +38,7 @@ void BalanceTask::invoke() {
         case Status::CHANGE_LEADER: {
             LOG(INFO) << taskIdStr_ << ""Ask the src to give up the leadership."";
             SAVE_STATE();
-            client_->transLeader(spaceId_, partId_, src_, dst_).thenValue([this](auto&& resp) {
+            client_->transLeader(spaceId_, partId_, src_).thenValue([this](auto&& resp) {
                 if (!resp.ok()) {
                     ret_ = Result::FAILED;
                 } else {","line 36: ms or s ? BTW, do more logs in this function: a lot of cases for state change tracking",cpp,0,1,1
"@@ -43,7 +43,8 @@ data_reader_merge_features::data_reader_merge_features(
   const data_reader_merge_features& other) :
   generic_compound_data_reader(other),
   m_data_size(other.m_data_size) {
-  m_label_reader = other.m_label_reader->copy();
+  if(other.m_label_reader != nullptr) 
+    m_label_reader = other.m_label_reader->copy();
 }
 
 data_reader_merge_features& data_reader_merge_features::operator=(",We should handle the case where `other.m_label_reader == nullptr`.,cpp,1,1,1
"@@ -51,6 +51,7 @@ using namespace MathSpecial;
 
 enum{REVERSE_RHO};
 enum{FORWARD_IK,FORWARD_AD,FORWARD_IK_PERATOM,FORWARD_AD_PERATOM};
+enum{FORWARD=-1,BACKWARD=1};
 
 #ifdef FFT_SINGLE
 #define ZEROF 0.0f",This enumerator should be placed inside the `FFT3d` class definition in `fft3d_wrap.h` and then referenced with `FFT3d::FORWARD` or `FFT3d::BACKWARD`.,cpp,1,1,1
"@@ -170,12 +170,12 @@ public:
         const auto infer_result = this->infer(desc, model, x_test);
         check_infer_shapes(desc, data, infer_result);
 
-        SECTION(""infer accuracy is expected"") {
-            for (auto ch : checker_list) {
-                CAPTURE(ch.name);
-                REQUIRE(ch.check(infer_result.get_labels(), y_test) < ch.required_accuracy + eps);
-            }
+        for (auto ch : checker_list) {
+            CAPTURE(ch.name);
+            REQUIRE(ch.check(infer_result.get_labels(), y_test) < ch.required_accuracy + eps);
         }
+        INFO(""infer accuracy is expected"")
+
         return infer_result;
     }
 ","Info should go before the actual check, and it's better to rephrase like ""check if infer accuracy is expected""",cpp,1,1,1
"@@ -5663,7 +5663,7 @@ void Client::SuspendMinion()
         else
         {
                 uint16 SpellID = CurrentPet->GetPetSpellID();
-
+                std::string OrigName = database.GetOriginalPetName(0, this->character_id);
                 if(SpellID)
                 {
                         if(m_suspendedminion.SpellID > 0)",Variable name: should be something like `original_name`,cpp,1,1,1
"@@ -41,6 +41,7 @@ FixAveAtom::FixAveAtom(LAMMPS *lmp, int narg, char **arg) :
   nevery = utils::inumeric(FLERR,arg[3],false,lmp);
   nrepeat = utils::inumeric(FLERR,arg[4],false,lmp);
   peratom_freq = utils::inumeric(FLERR,arg[5],false,lmp);
+  time_depend = 1;
 
   nvalues = narg - 6;
 ",Should also remove the error check in end_of_step*( with message Invalid timestep reset ... Ditto for other fix ave/*,cpp,0,1,1
"@@ -1178,6 +1178,8 @@ static void CreateDirectoryRecursively(PJ_CONTEXT *ctx,
 
 std::string pj_context_get_user_writable_directory(PJ_CONTEXT *ctx,
                                                    bool create) {
+    if (!ctx)
+        ctx = pj_get_default_ctx();
     if (ctx->user_writable_directory.empty()) {
         // For testing purposes only
         const char *env_var_PROJ_USER_WRITABLE_DIRECTORY =",Was this missing before?,cpp,1,1,0
"@@ -278,6 +278,10 @@ String BuildFixes()
     Settings.WiFi_sensitivity_margin = 3; // Margin in dBm on top of sensitivity.
   }
 
+  if (Settings.Build < 20113) {
+    Settings.JSONBoolWithQuotes(true); // Set JSON output to backward compatible
+  }
+
   Settings.Build = BUILD;
   return SaveSettings();
 }","Why not invert the boolean logic, so that a `0` is the default value? This way you don't need this transition and also new default settings will be the old behavior.",cpp,1,1,1
"@@ -667,13 +667,16 @@ double Comm::get_comm_cutoff()
 
   // always take the larger of max neighbor list and user specified cutoff
 
-  maxcommcutoff = MAX(cutghostuser,neighbor->cutneighmax);
+  if (force->pair)
+    maxcommcutoff = MAX(neighbor->cutneighmax,force->pair->cutforce+neighbor->skin);
+
+  maxcommcutoff = MAX(maxcommcutoff,cutghostuser);
 
   // use cutoff estimate from bond length only if no user specified
   // cutoff was given and no pair style present. Otherwise print a
   // warning, if the estimated bond based cutoff is larger than what
   // is currently used.
-  
+
   if (!force->pair && (cutghostuser == 0.0)) {
     maxcommcutoff = MAX(maxcommcutoff,maxbondcutoff);
   } else {","I don't think this works. Say a user does a first run with a long pair cutoff, then a 2nd run with short pair cutoff. Then on the 2nd run, this will set maxcommcutoff to the too-big value from the first run, not the new smaller value? Which will then be used by compute rdf, etc b/c it is invoking this Comm method too early.",cpp,1,1,1
"@@ -242,7 +242,7 @@ void nano::transport::tcp_channels::process_message (nano::message const & messa
 			{
 				node.network.process_message (message_a, channel);
 			}
-			else
+			else if (!node.flags.disable_udp || (message_a.header.type != nano::message_type::confirm_req && message_a.header.type != nano::message_type::confirm_req))
 			{
 				auto udp_channel (std::make_shared<nano::transport::channel_udp> (node.network.udp_channels, nano::transport::map_tcp_to_endpoint (endpoint_a)));
 				node.network.process_message (message_a, udp_channel);",Same type checked twice,cpp,0,1,1
"@@ -53,7 +53,10 @@ TEST(infer_and_train_cls_kernels_test, can_process_simple_case_default_params) {
     const auto y_train_table =
         dal::homogen_table{ queue, y_train, row_count_train, 1, dal::empty_delete<const float>() };
 
-    const auto x_test_table = dal::homogen_table{ x_test_host,
+    auto x_test = sycl::malloc_shared<float>(row_count_test * column_count, queue);
+    queue.memcpy(x_test, x_test_host, sizeof(float) * row_count_test * column_count).wait();
+    const auto x_test_table = dal::homogen_table{ queue,
+                                                  x_test,
                                                   row_count_test,
                                                   column_count,
                                                   dal::empty_delete<const float>() };","If I am right, `queue.memcpy()` shall be used only with USM pointers. In that case to copy data from host pointer to the USM one, `std::memcpy()` shall be used.",cpp,1,1,1
"@@ -240,6 +240,9 @@ StatusOr<HostAddr> NetworkUtils::toHostAddr(folly::StringPiece ipPort) {
 }
 
 StatusOr<std::vector<HostAddr>> NetworkUtils::toHosts(const std::string& peersStr) {
+    if (peersStr.empty()) {
+        return Status::Error(""Input string(ip:port) empty"");
+    }
     std::vector<HostAddr> hosts;
     std::vector<std::string> peers;
     folly::split("","", peersStr, peers, true);","I think we should NOT forbid empty peersStr. Because in some cases, we actually pass in empty string.",cpp,1,1,1
"@@ -90,7 +90,9 @@ int main(int argc, char *argv[])
                 for (unsigned int v = 0; v < variablesSize; ++v)
                 {
                     myFloats[0] = static_cast<float>(v + timeStep);
-                    bpWriter.Put(bpFloats[v], myFloats.data());
+                    // Note: Put is deferred, so all variables will see v == 9
+                    // and myFloats[0] == 9, 10, or 11
+                    bpWriter.Put<float>(bpFloats[v], myFloats.data());
                 }
                 const std::string myString(
                     ""Hello from rank: "" + std::to_string(rank) +","Good catch, it needs a `adios2::Mode::Sync` or a call to PerformPuts before the loop ends. The end result is the same.",cpp,1,1,1
"@@ -443,12 +443,13 @@ TEST (store, pruned_load)
 					nano::block_hash random_hash;
 					nano::random_pool::generate_block (random_hash.bytes.data (), random_hash.bytes.size ());
 					store->pruned.put (transaction, random_hash);
+					hashes.insert (random_hash);
 				}
 			}
 			if (!nano::rocksdb_config::using_rocksdb_in_tests ())
 			{
 				auto transaction (store->tx_begin_write ());
-				for (auto k (0); k < batch_size / 2; ++k)
+				for (auto k (0); !hashes.empty () && k < batch_size / 2; ++k)
 				{
 					auto hash (hashes.begin ());
 					store->pruned.del (transaction, *hash);","Do we need the check `!hashes.empty ()`? This is a unit test, if anything is wrong, we want to fail loud and clear rather than handle it quietly. So I would say that we should ASSERT that hashes is not empty.",cpp,1,1,1
"@@ -968,8 +968,8 @@ bool cvdescriptorset::ValidateCopyUpdate(const debug_report_data *report_data, c
     if (dst_layout->IsDestroyed()) {
         *error_code = ""VUID-VkCopyDescriptorSet-dstSet-parameter"";
         string_sprintf(error_msg,
-                       ""Cannot call %s to perform copy update on descriptor set dstSet %s""
-                       "" created with destroyed VkDescriptorSetLayout %s."",
+                       ""Cannot call %s to perform copy update on dstSet %s""
+                       "" created with destroyed %s."",
                        func_name, report_data->FormatHandle(dst_set->GetSet()).c_str(),
                        report_data->FormatHandle(dst_layout->GetDescriptorSetLayout()).c_str());
         return false;",Note that there a couple of places in descriptor_set where FormatHandle isn't being used... `cvdescriptorset::VerifySetLayoutCompatibility` has a couple uses like that. Also output of `buffer` and `imageView` in `ValidateDrawState` These all occur in error_str << message formatting lines. There may be others.,cpp,1,1,1
"@@ -74,7 +74,7 @@ double getLabuteAtomContribs(const ROMol &mol, std::vector<double> &Vi,
     Vi[i] = M_PI * Ri * (4. * Ri - Vi[i]);
     res += Vi[i];
   }
-  if (includeHs) {
+  if (includeHs && fabs(hContrib) > 1e-4) {
     double Rj = PeriodicTable::getTable()->getRb0(1);
     hContrib = M_PI * Rj * (4. * Rj - hContrib);
     res += hContrib;",Why not includeHs && nAtoms?,cpp,1,1,0
"@@ -97,14 +97,11 @@ lbann_callback* construct_callback(lbann_comm* comm,
   //////////////////////////////////////////////////////////////
 
   if (proto_cb.has_ltfb()) {
-    auto&& m = parse_list<>(proto_cb.ltfb().eval_metrics());
-    auto&& w = parse_list<>(proto_cb.ltfb().weights_tosend());
-    std::unordered_set<std::string> metric_names(m.begin(), m.end());
-    std::unordered_set<std::string> weight_names(w.begin(), w.end());
-    return new lbann_callback_ltfb(proto_cb.ltfb().round_size(),
-                                   metric_names,
-                                   proto_cb.ltfb().increasing_metric_mode(),
-                                   weight_names,
+    const auto& params = proto_cb.ltfb();
+    return new lbann_callback_ltfb(params.batch_interval(),
+                                   params.metric(),
+                                   parse_set<std::string>(params.weights()),
+                                   params.low_score_wins(),
                                    summarizer);
   }
   /// @todo","We are not using multiple metrics now but how would this support space-delimited metric (e.g., categorical accuracy) and multiple metrics with the same name as metric specified one of the metrics for training/inference ?",cpp,1,1,1
"@@ -498,6 +498,10 @@ void collapseTurnAt(std::vector<RouteStep> &steps,
     BOOST_ASSERT(one_back_index < steps.size());
     const auto &current_step = steps[step_index];
     const auto &one_back_step = steps[one_back_index];
+    // Don't collapse roundabouts
+    if (entersRoundabout(current_step.maneuver.instruction) ||
+        entersRoundabout(one_back_step.maneuver.instruction))
+        return;
 
     // This function assumes driving on the right hand side of the streat
     BOOST_ASSERT(!one_back_step.intersections.empty() && !current_step.intersections.empty());",Hmm do you know where we introduced the regression and why our tests did not catch it? Also why only the roundabout enter instruction - are the silent roundabout instructions already collapsed into the multi-hop roundabout instruction here?,cpp,1,1,1
"@@ -85,7 +85,7 @@ void GetObjectiveType(const std::unordered_map<std::string, std::string>& params
   }
 }
 
-void GetMetricType(const std::unordered_map<std::string, std::string>& params, std::vector<std::string>* metric) {
+void GetMetricType(const std::unordered_map<std::string, std::string>& params, const std::string& objective, std::vector<std::string>* metric) {
   std::string value;
   if (Config::GetString(params, ""metric"", &value)) {
     std::transform(value.begin(), value.end(), value.begin(), Common::tolower);","as a general, rule, I like to avoid inserting new arguments in the middle of a function signature. In my experience, I've found that it leads to fewer mistakes when updating the places that call that function. I think this is especially important in C/C++ code, where all arguments are provided positionally. Would you consider adding `objective` at the end of this signature? Or is there a specific reason that `objective` needs to come before `metric`?",cpp,1,1,1
"@@ -932,7 +932,7 @@ bool Dataset::GetIntField(const char* field_name, data_size_t* out_len,
 
 void Dataset::SaveBinaryFile(const char* bin_filename) {
   if (bin_filename != nullptr && std::string(bin_filename) == data_filename_) {
-    Log::Warning(""Binary file %s already exists"", bin_filename);
+    Log::Warning(""Bianry file %s already exists"", bin_filename);
     return;
   }
   // if not pass a filename, just append "".bin"" of original file",It seems that this reverts the typo fixing.,cpp,1,1,1
"@@ -1637,7 +1637,15 @@ hipError_t ihipMemcpy2D(void* dst, size_t dpitch, const void* src, size_t spitch
                     stream->locked_copySync((unsigned char*)dst + i * dpitch,
                                     (unsigned char*)src + i * spitch, width, kind);
             } else {
-                stream->locked_copy2DSync(dst, src, width, height, spitch, dpitch, kind);
+                int HIP_MEMCPY2D_FORCE_SDMA = 0;
+                ihipReadEnv_I(&HIP_MEMCPY2D_FORCE_SDMA, ""HIP_MEMCPY2D_FORCE_SDMA"", ""HIP_MEMCPY2D_FORCE_SDMA"",
+                            ""Force SDMA for 2D Memcpy"");
+                if(HIP_MEMCPY2D_FORCE_SDMA)
+                    stream->locked_copy2DSync(dst, src, width, height, spitch, dpitch, kind);
+                else {
+                    ihipMemcpy2dKernel<uint8_t> (stream, static_cast<uint8_t*> (dst), static_cast<const uint8_t*> (src), width, height, dpitch, spitch);
+                    stream->locked_wait();
+                }
             }
         } catch (ihipException& ex) {
             e = ex._code;",Why are we reading this env variable in every memcpy2D? Is it a requirement for the user to be able to turn this on or off while the process is still running? We should probably handle it like the rest of the env variables that are read once during init. Also we seem to be changing the default from SDMA enabled to SDMA disabled.,cpp,1,1,1
"@@ -760,13 +760,13 @@ TEST(NebulaStoreTest, ThreeCopiesCheckpointTest) {
         fs::FileUtils::remove(folly::stringPrintf(""%s/data"", rm.data()).c_str(), true);
         fs::FileUtils::remove(folly::stringPrintf(""%s/wal"", rm.data()).c_str(), true);
         std::string mv = folly::stringPrintf(
-                ""/usr/bin/mv %s/disk%d/nebula/0/checkpoints/snapshot/data %s/disk%d/nebula/0/data"",
+                ""mv %s/disk%d/nebula/0/checkpoints/snapshot/data %s/disk%d/nebula/0/data"",
                 rootPath.path(), i , rootPath.path(), i);
         sleep(1);
         auto ret = system(mv.c_str());
         ASSERT_EQ(0, ret);
         mv = folly::stringPrintf(
-                ""/usr/bin/mv %s/disk%d/nebula/0/checkpoints/snapshot/wal %s/disk%d/nebula/0/wal"",
+                ""mv %s/disk%d/nebula/0/checkpoints/snapshot/wal %s/disk%d/nebula/0/wal"",
                 rootPath.path(), i , rootPath.path(), i);
         sleep(1);
         ret = system(mv.c_str());",Consider the function `rename` in stdio.h?,cpp,1,1,0
"@@ -78,7 +78,7 @@ const Outfit* Outfits::getOutfitByLookType(PlayerSex_t sex, uint16_t lookType) c
 
 const Outfit* Outfits::getOutfitByLookType(uint16_t lookType) const
 {
-	for (uint8_t sex = 0; sex <= 1; sex++) {
+	for (uint8_t sex = PLAYERSEX_FEMALE; sex <= PLAYERSEX_LAST; sex++) {
 		for (const Outfit& outfit : outfits[sex]) {
 			if (outfit.lookType == lookType) {
 				return &outfit;","I'd argue that adding `PLAYERSEX_FIRST` enum would be a better choice and would be done as other enums. If you decide to add it, do not forget to register it in lua (along with `PLAYERSEX_LAST` which is missing for some reason  )",cpp,1,1,1
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -18,11 +18,12 @@
 #include <iostream>
 #include <thread>
 
-#include <arpa/inet.h> //AvailableIpAddresses() inet_ntoa
-#include <net/if.h>    //AvailableIpAddresses() struct if_nameindex
-#include <string.h>    //AvailableIpAddresses() strncp
-#include <sys/ioctl.h> //AvailableIpAddresses() ioctl
-#include <unistd.h>    //AvailableIpAddresses() close
+#include <arpa/inet.h>  //AvailableIpAddresses() inet_ntoa
+#include <net/if.h>     //AvailableIpAddresses() struct if_nameindex
+#include <netinet/in.h> //AvailableIpAddresses() struct sockaddr_in
+#include <string.h>     //AvailableIpAddresses() strncp
+#include <sys/ioctl.h>  //AvailableIpAddresses() ioctl
+#include <unistd.h>     //AvailableIpAddresses() close
 
 #include <nlohmann/json.hpp>
 ","I have tried to make it compile on FreeBSD very long time ago, but as far as I remember these socket header files did not exist on BSD systems. Just wondering if there is any tricks I didn't know, or do they actually exist on BSD?",cpp,1,1,1
"@@ -4555,7 +4555,7 @@ void ValueIdSet::unparse(NAString &result,
 
   NAString connectorText;
 
-  if ((form == MVINFO_FORMAT) || (form == QUERY_FORMAT))
+  if ((form == MVINFO_FORMAT) || (form == QUERY_FORMAT) || (form == CONNECT_BY_FORMAT))
     connectorText = "" AND "";
   else
     connectorText = "" , "";","How is the CONNECT_BY_FORMAT different from QUERY or MVINFO formats? The answer might be in other parts of code, its just that I cannot tell. Thank you for explaining",cpp,1,1,1
"@@ -240,9 +240,9 @@ void canonicalizeDoubleBond(Bond *dblBond, INT_VECT &bondVisitOrders,
 
   // now set the directionality on the other side:
   if (setFromBond1) {
-    if (dblBond->getStereo() == Bond::STEREOE) {
+    if (dblBond->getStereo() == Bond::STEREOE || dblBond->getStereo() == Bond::STEREOTRANS ) {
       atom2Dir = atom1Dir;
-    } else if (dblBond->getStereo() == Bond::STEREOZ) {
+    } else if (dblBond->getStereo() == Bond::STEREOZ || dblBond->getStereo() == Bond::STEREOCIS) {
       atom2Dir = (atom1Dir == Bond::ENDUPRIGHT) ? Bond::ENDDOWNRIGHT
                                                 : Bond::ENDUPRIGHT;
     }","This is repeated a lot, consider replacing with bond->isStereo() ? This seems like a better place to encapsulate this logic.",cpp,1,1,1
"@@ -201,13 +201,13 @@ TEST_F(MutateValidatorTest, UpdateEdgeTest) {
     auto cmd = ""UPDATE EDGE ON study \""Tom\""->\""Lily\"" SET count = 1"";
     ASSERT_FALSE(checkResult(cmd, {}));
   }
-  // Wrong expr ""$^.peson.age""
+  // Wrong expr ""$^.person_.age""
   {
     auto cmd =
         ""UPDATE EDGE \""Tom\""->\""Lily\"" OF like ""
         ""SET end = like.end + 1 ""
-        ""WHEN $^.peson.age >= 18 ""
-        ""YIELD $^.peson.age AS age, like.end AS end"";
+        ""WHEN $^.person_.age >= 18 ""
+        ""YIELD $^.person_.age AS age, like.end AS end"";
     ASSERT_FALSE(checkResult(cmd, {}));
   }
   // 1.0 syntax succeed","Happy to drop, but I find it's easier to understand things are typos when they're explicit, and `peson` isn't particularly obvious...",cpp,1,1,1
"@@ -28,7 +28,17 @@ void LMDB::Open(const string& source, Mode mode) {
   }
   int flags = 0;
   if (mode == READ) {
-    flags = MDB_RDONLY | MDB_NOTLS;
+    // No locking, assume DB is not written to at the same time, otherwise
+    // LMDB tries to lock the file, which fails if filesystem is read-only
+    flags = MDB_RDONLY | MDB_NOTLS | MDB_NOLOCK;
+  }
+  // Allow DB to be stand-alone file
+  {
+    struct stat st_buf;
+    stat(source.c_str(), &st_buf);
+    if (S_ISREG(st_buf.st_mode)) {
+      flags |= MDB_NOSUBDIR;
+    }
   }
   MDB_CHECK(mdb_env_open(mdb_env_, source.c_str(), flags, 0664));
   LOG(INFO) << ""Opened lmdb "" << source;",You should check the return value of stat(2).,cpp,1,1,0
"@@ -789,6 +789,8 @@ SharedAllocationRecord<Kokkos::CudaHostPinnedSpace, void>
 // Iterate records to print orphaned memory ...
 void SharedAllocationRecord<Kokkos::CudaSpace, void>::print_records(
     std::ostream &s, const Kokkos::CudaSpace &, bool detail) {
+  (void)s;
+  (void)detail;
 #ifdef KOKKOS_DEBUG
   SharedAllocationRecord<void, void> *r = &s_root_record;
 ",from experience we know that this doesn't work on all compilers. but we can try.,cpp,1,1,1
"@@ -40,8 +40,8 @@ TEST_F(OrderByTest, SyntaxError) {
         cpp2::ExecutionResponse resp;
         auto &player = players_[""Boris Diaw""];
         auto *fmt = ""GO FROM %ld OVER serve YIELD ""
-                    ""$^[player].name as name, serve.start_year as start, $$[team].name""
-                    ""| ORDER BY $-.$$[team].name"";
+                    ""$^player.name as name, serve.start_year as start, $$[team].name""
+                    ""| ORDER BY $-.$$team.name"";
         auto query = folly::stringPrintf(fmt, player.vid());
         auto code = client_->execute(query, resp);
         ASSERT_EQ(cpp2::ErrorCode::E_SYNTAX_ERROR, code);",$$[team].name or $$team.name,cpp,1,1,0
"@@ -91,8 +91,9 @@ static bool ZipFile(PGLOBAL g, ZIPUTIL *zutp, PCSZ fn, PCSZ entry, char *buf)
 static bool ZipFiles(PGLOBAL g, ZIPUTIL *zutp, PCSZ pat, char *buf)
 {
 	char filename[_MAX_PATH];
+#if defined(__WIN__)
 	int  rc;
-
+#endif
 	/*********************************************************************/
 	/*  pat is a multiple file name with wildcard characters             */
 	/*********************************************************************/",Can you please move the `int rc;` declaration in the ifdef block below? I see no reason to create a new one.,cpp,1,1,1
"@@ -54,7 +54,7 @@ DEFINE_string(part_type, ""simple"", ""simple, consensus..."");
     } while (false)
 
 /**
- * check spaceId is exist and return related partitions
+ * Check spaceId is exist and return related partitions.
  */
 #define CHECK_AND_RETURN_SPACE_ENGINES(spaceId) \
     auto it = kvs_.find(spaceId); \","What about `RETURN_IF_SPACE_NOT_FOUND`? Besides, if `it` would be used immediately, better to specify it in the macro parameter list, explicitly. Otherwise, better to enclose the macro body in a `do while (false)`",cpp,1,1,1
"@@ -35,15 +35,17 @@ int main(int argc, char *argv[])
         adios2::Variable<float> bpFloats = bpIO.DefineVariable<float>(
             ""bpFloats"", {}, {}, {Nx}, adios2::ConstantDims);
 
+        std::string filename = ""myVector_cpp.bp"";
         /** Engine derived class, spawned to start IO operations */
         adios2::Engine bpWriter =
-            bpIO.Open(""myVector_cpp.bp"", adios2::Mode::Write);
+            bpIO.Open(filename, adios2::Mode::Write);
 
         /** Write variable for buffering */
         bpWriter.Put<float>(bpFloats, myFloats.data());
 
         /** Create bp file, engine becomes unreachable after this*/
         bpWriter.Close();
+        std::cout << ""Wrote file "" << filename << "" to disk. It can now be read by running ./bin/hello_bpReader.\n"";
     }
     catch (std::invalid_argument &e)
     {",Add an extra `catch(std::ios_base::failure &e) { ..// your extra error message }`,cpp,1,1,1
"@@ -95,9 +95,9 @@ services::Status generateShuffledIndicesImpl(const NumericTablePtr & idxTable, c
     const size_t nThreads  = threader_get_threads_number();
     const size_t n         = idxTable->getNumberOfRows();
     const size_t stateSize = rngStateTable->getNumberOfRows();
-    // number of generated uints: 1.5x of n for reserve
-    DAAL_OVERFLOW_CHECK_BY_MULTIPLICATION(size_t, n / 2lu, 3lu);
-    const size_t nRandomUInts = n / 2lu * 3lu;
+    // number of generated uints: 2 x n + 32 for reserve
+    DAAL_OVERFLOW_CHECK_BY_MULTIPLICATION(size_t, n + 16, 2);
+    const size_t nRandomUInts = 2 * n + 32;
 
     daal::internal::WriteColumns<IdxType, cpu> idxBlock(*idxTable, 0, 0, n);
     IdxType * idx = idxBlock.get();","Am I right that in Sklearn approximately the same amount of random number were generated? Do we have understanding how much the performance will change (might be better to save current number of random number for big ""n"" and change for small)?",cpp,1,1,1
"@@ -344,6 +344,16 @@ try:
     cast = image.astype(np.float32)
     assert cast.dtype == np.float32
 
+    # Test .astype for conversion between vector-like pixel types.
+    components = 3
+    numpyImage = np.random.randint(0, 256, (12,8,components)).astype(np.uint8)
+    input_image = itk.image_from_array(numpyImage, is_vector=True)
+    if (type(input_image) == itk.Image[itk.RGBPixel[itk.UC],2] and
+        hasattr(itk.CastImageFilter, 'IRGBUC2IVF32')):
+        output_pixel_type = itk.Vector[itk.F,components]
+        output_image = input_image.astype(output_pixel_type)
+        assert type(output_image) == itk.Image[output_pixel_type, 2]
+
 except ImportError:
     print(""NumPy not imported. Skipping BridgeNumPy tests"")
     # Numpy is not available, do not run the Bridge NumPy tests","Unrelated to this PR, we should remove this exception. We now require `numpy`.",cpp,0,1,1
"@@ -1408,7 +1408,7 @@ void Neighbor::init_topology()
 void Neighbor::print_pairwise_info()
 {
   int i,m;
-  char str[128];
+  char str[256];
   NeighRequest *rq;
   FILE *out;
 ",missing the changes of `sprintf` to `snprintf` in this file.,cpp,0,1,1
"@@ -56,14 +56,9 @@ int main(int argc, char const *argv[]) {
           .set_features_per_node(1)
           .set_min_observations_in_leaf_node(1)
           .set_variable_importance_mode(df::variable_importance_mode::mdi)
-          .set_train_results_to_compute(
-              df::train_result_to_compute::compute_out_of_bag_error)
-          .set_infer_results_to_compute(
-              df::infer_result_to_compute::compute_class_labels |
-              df::infer_result_to_compute::compute_class_probabilities)
           .set_voting_method(df::voting_method::weighted);
 
-  const auto result_train = dal::train(df_desc, x_train_table, y_train_table);
+  const auto result_train = dal::train(df_desc, x_train_table, y_train_table, df::train_result_to_compute::compute_out_of_bag_error);
 
   std::cout << ""Variable importance results:"" << std::endl
             << result_train.get_var_importance() << std::endl;",Seems like line wrapping convention is different for classification and regression examples,cpp,1,1,1
"@@ -332,7 +332,7 @@ TEST_F(UDPv4Tests, send_to_allowed_interface)
 
         if (IsAddressDefined(locator))
         {
-            descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
+            // descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
             descriptor.interfaceWhiteList.emplace_back(IPLocator::toIPv4string(locator));
             UDPv4Transport transportUnderTest(descriptor);
             transportUnderTest.init();","Can we remove this line, please?",cpp,1,1,0
"@@ -238,12 +238,15 @@ bool StatelessReader::matched_writer_is_matched(
 bool StatelessReader::change_received(
         CacheChange_t* change)
 {
-    // Only make visible the change if there is not other with bigger sequence number.
+    // std::cout << ""[FAST STATELESS READER] change_received"" << std::endl;
+    // Only make visible the change if there is change_received other with bigger sequence number.
     // TODO Revisar si no hay que incluirlo.
     if (!thereIsUpperRecordOf(change->writerGUID, change->sequenceNumber))
     {
         if (mp_history->received_change(change, 0))
         {
+            auto payload_length = change->serializedPayload.length;
+
             Time_t::now(change->receptionTimestamp);
             update_last_notified(change->writerGUID, change->sequenceNumber);
             ++total_unread_;",Seems this was left here unintentionally,cpp,1,1,0
"@@ -23,6 +23,9 @@
 #include <fastdds/rtps/network/NetworkFactory.h>
 #include <rtps/builtin/data/ProxyDataFilters.hpp>
 #include ""../../../fastdds/core/policy/QosPoliciesSerializer.hpp""
+#include ""../../../fastdds/core/policy/ParameterList.hpp""
+
+using ParameterList = eprosima::fastdds::dds::ParameterList;
 
 namespace eprosima {
 namespace fastrtps {",Don't use relative paths. src directory is already on the include search path,cpp,1,1,1
"@@ -708,7 +708,8 @@ void nano::rpc_handler::account_representative_set ()
 			{
 				bool generate_work (work == 0); // Disable work generation if ""work"" option is provided
 				auto response_a (response);
-				wallet->change_async (account, representative, [response_a](std::shared_ptr<nano::block> block) {
+				// clang-format off
+                wallet->change_async (account, representative, [response_a](std::shared_ptr<nano::block> block) {
 					nano::block_hash hash (0);
 					if (block != nullptr)
 					{","Something happened to indentation here it seems, and with clang-format off there're no complaints :D",cpp,1,1,1
"@@ -832,7 +832,6 @@ ParKeyWord ParKeyWords::keyWords_[] = {
   ParKeyWord(""PROTECTION"",         TOK_PROTECTION,  NONRESTOKEN_),  
   ParKeyWord(""PROTOTYPE"",          TOK_PROTOTYPE,   COMPAQ_|RESWORD_),
   ParKeyWord(""PUBLIC"",             TOK_PUBLIC,      ANS_|RESWORD_),
-  ParKeyWord(""PUBLISH"",            TOK_PUBLISH,     NONRESTOKEN_),
   ParKeyWord(""PURGEDATA"",          TOK_PURGEDATA,   NONRESTOKEN_),
   ParKeyWord(""QID"",                TOK_QID,         NONRESTOKEN_),
   ParKeyWord(""QID_INTERNAL"",       TOK_QID_INTERNAL,  NONRESTOKEN_),",sqlci/sqlci_yacc.y defines PUBLISH and UNPUBLISH as token. May want to remove this also.,cpp,1,1,1
"@@ -510,6 +510,12 @@ void PairMESONTTPM::compute(int eflag, int vflag){
 
   // set per atom values and accumulators
   // reallocate per-atom arrays if necessary
+  if (eatom_s == nullptr)
+   memory->create(eatom_s,comm->nthreads*maxeatom,""pair:eatom_s"");
+  if (eatom_b == nullptr)
+   memory->create(eatom_b,comm->nthreads*maxeatom,""pair:eatom_b"");
+  if (eatom_t == nullptr)
+   memory->create(eatom_t,comm->nthreads*maxeatom,""pair:eatom_t"");
   if (atom->nmax > maxeatom) {
     maxeatom = atom->nmax;
     memory->destroy(eatom);","This is likely the wrong fix. It should not be needed, if `maxeatom` is properly initialized.",cpp,1,1,1
"@@ -2971,6 +2971,15 @@ void rai::add_node_options (boost::program_options::options_description & descri
 bool rai::handle_node_options (boost::program_options::variables_map & vm)
 {
 	auto result (false);
+	boost::filesystem::path data_path;
+	if (vm.count (""data_path""))
+	{
+		data_path = boost::filesystem::path (vm [""data_path""].as <std::string> ());
+	}
+	else
+	{
+		data_path = rai::working_path ();
+	}
 	if (vm.count (""account_create""))
 	{
 		if (vm.count (""wallet"") == 1)",This would be better as a ternary IMO.,cpp,1,1,0
"@@ -5,6 +5,16 @@
 
 namespace caffe {
 
+// Function uses casting from int to unsigned to compare if value of
+// parameter a is greater or equal to zero and lower than value of
+// parameter b. The b parameter is of type signed and is always positive,
+// therefore its value is always lower than 0x800... where casting
+// negative value of a parameter converts it to value higher than 0x800...
+// The casting allows to use one condition instead of two.
+inline bool is_a_ge_zero_and_a_lt_b(int a, int b) {
+  return static_cast<unsigned>(a) < static_cast<unsigned>(b);
+}
+
 template <typename Dtype>
 void im2col_cpu(const Dtype* data_im, const int channels,
     const int height, const int width, const int kernel_h, const int kernel_w,",This should be a two-space indent per Google style guide (not sure why lint doesn't catch it).,cpp,1,1,1
"@@ -12769,7 +12769,7 @@ int LuaScriptInterface::luaMonsterTypeGetLoot(lua_State* L)
 		return 1;
 	}
 
-	static const std::function<void(const std::vector<LootBlock>&)> parseLoot = [&](const std::vector<LootBlock>& lootList) {
+	static const std::function<void(const std::vector<LootBlock>&)> parseLoot = [L](const std::vector<LootBlock>& lootList) {
 		lua_createtable(L, lootList.size(), 0);
 
 		int index = 0;","This is not a proper fix. Please move the code in this lambda into a separate function - `void pushLoot(lua_State* L, const std::vector<LootBlock>& loot)`",cpp,1,1,1
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -53,11 +53,7 @@ static bool add_change_to_rtps_group(
         {
             for (uint32_t frag = 1; frag <= n_fragments; frag++)
             {
-                if (group.add_data_frag(*change, frag, inline_qos))
-                {
-                    reader_change->markFragmentsAsSent(frag);
-                }
-                else
+                if (!group.add_data_frag(*change, frag, inline_qos))
                 {
                     logError(RTPS_WRITER, ""Error sending fragment ("" << change->sequenceNumber << "", "" << frag << "")"");
                 }",Why now is not needed to mark fragment as sent?,cpp,1,1,0
"@@ -79,6 +79,8 @@ void handle_tools() {
 
   addWideButtonPlusDescription(F(""json""),        F(""Show JSON""),    F(""Open JSON output""));
 
+  addWideButtonPlusDescription(F(""metrics""),        F(""Show Metrics""),    F(""Open Prometheus Metrics""));
+
   # ifdef WEBSERVER_TIMINGSTATS
   addWideButtonPlusDescription(F(""timingstats""), F(""Timing stats""), F(""Open timing statistics of system""));
   # endif // WEBSERVER_TIMINGSTATS",This also needs the `#ifdef WEBSERVER_METRICS` wrapped,cpp,1,1,1
"@@ -236,9 +236,7 @@ void ImageDataLayer<Dtype>::CreatePrefetchThread() {
   phase_ = Caffe::phase();
   const bool prefetch_needs_rand =
       this->layer_param_.image_data_param().shuffle() ||
-          ((phase_ == Caffe::TRAIN) &&
-           (this->layer_param_.image_data_param().mirror() ||
-            this->layer_param_.image_data_param().crop_size()));
+      this->layer_param_.image_data_param().crop_size();
   if (prefetch_needs_rand) {
     const unsigned int prefetch_rng_seed = caffe_rng_rand();
     prefetch_rng_.reset(new Caffe::RNG(prefetch_rng_seed));","Is this change intended? I guess it is fine to initialize a RNG and not use it, but this modification seems unnecessary...",cpp,1,1,1
"@@ -1121,11 +1121,11 @@ bool CoreChecks::ValidateCmdBufDrawState(const CMD_BUFFER_STATE *cb_node, CMD_TY
                                         state.per_set[setIndex].validated_set_binding_req_map.begin(),
                                         state.per_set[setIndex].validated_set_binding_req_map.end(),
                                         std::inserter(delta_reqs, delta_reqs.begin()));
-                    result |= ValidateDrawState(descriptor_set, delta_reqs, state.per_set[setIndex].dynamicOffsets, cb_node,
-                                                attachment_views, function, vuid);
+                    result |= ValidateDrawState(bind_point, descriptor_set, delta_reqs, state.per_set[setIndex].dynamicOffsets,
+                                                cb_node, attachment_views, function, vuid);
                 } else {
-                    result |= ValidateDrawState(descriptor_set, binding_req_map, state.per_set[setIndex].dynamicOffsets, cb_node,
-                                                attachment_views, function, vuid);
+                    result |= ValidateDrawState(bind_point, descriptor_set, binding_req_map, state.per_set[setIndex].dynamicOffsets,
+                                                cb_node, attachment_views, function, vuid);
                 }
             }
         }","EDIT: Hmmm... this is an ordered map lookup typically containing one entry, so while it's not going to be zero cost, compared to the two finds below this point probably not as bad as I was thinking... still it's inside out to do an inner loop lookup of an invariant key. --- I'm willing to bet this is a big part of the performance hit. We're passing in bind_point instead of a `const LAST_BOUND_STATE & ` ... and then in the in most loop, looking up the LAST_BOUND_STATE in the same map, at the same key over and over... if you need the CB's last bound state pass it in ... or look it up *once* at the top of the per descriptor set loop.",cpp,1,0,1
"@@ -257,6 +257,9 @@ bool CombatSpell::loadScriptCombat()
 
 bool CombatSpell::castSpell(Creature* creature)
 {
+	if (!creature) {
+		return false;
+	}
 	if (scripted) {
 		LuaVariant var;
 		var.type = VARIANT_POSITION;","This check is redundant, this function is only ever called from line 316.",cpp,1,1,1
"@@ -63,7 +63,8 @@ void nano_daemon::daemon::run (boost::filesystem::path const & data_path, nano::
 				auto network_label = node->network_params.network.get_current_network_as_string ();
 				auto version = (NANO_VERSION_PATCH == 0) ? NANO_MAJOR_MINOR_VERSION : NANO_MAJOR_MINOR_RC_VERSION;
 				std::cout << ""Network: "" << network_label << "", version: "" << version << std::endl
-				          << ""Path: "" << node->application_path.string () << std::endl;
+				          << ""Path: "" << node->application_path.string () << std::endl
+				          << ""Build Info: "" << BUILD_INFO << std::endl;
 
 				node->start ();
 				nano::ipc::ipc_server ipc_server (*node, config.rpc);",Would be better to use `\n` instead of `std::endl` multiple times otherwise you are doing multiple flushes. But it's only called once so not too bothered.,cpp,1,1,1
"@@ -105,7 +105,7 @@ int Properties::registerProperty(PropertyFunctor *prop) {
 std::vector<std::string> Properties::getAvailableProperties() {
   registerDescriptors();
   std::vector<std::string> names;
-  BOOST_FOREACH (boost::shared_ptr<PropertyFunctor> prop,
+  for (boost::shared_ptr<PropertyFunctor> prop :
                  Properties::registry) {
     names.push_back(prop->getName());
   }","so _technically_ this is an extra copy of the shared_ptr, which invokes an extra increment/decrement of the reference count. But I think that using the C++11 range-based for loop makes pop out, so I'm a LGTM as is.",cpp,1,1,1
"@@ -160,8 +160,7 @@ int main(int argc, char* argv[]) {
   long incorrect_count_2d = 0;
   {
     // Rank<2> Case: Rank is provided, all other parameters are default
-    using MDPolicyType_2D = typename Kokkos::Experimental::MDRangePolicy<
-        Kokkos::Experimental::Rank<2> >;
+    using MDPolicyType_2D = typename Kokkos::MDRangePolicy<Kokkos::Rank<2> >;
 
     // Construct 2D MDRangePolicy: lower and upper bounds provided, tile dims
     // defaulted",`typename` is superfluous,cpp,1,1,1
"@@ -346,6 +346,19 @@ const std::string GetMolFileAliasInfo(const RWMol &mol) {
   return ss.str();
 }
 
+const std::string GetMolFilePXAInfo(const RWMol &mol) {
+  std::string res;
+  unsigned int nEntries = 0;
+  for (const auto atom : mol.atoms()) {
+    if (atom->hasProp(""_MolFile_PXA"")) {
+      nEntries += 1;
+      res +=
+          boost::str(boost::format(""M  PXA % 3d%s\n"") % (atom->getIdx() + 1) %
+                     atom->getProp<std::string>(""_MolFile_PXA""));
+    }
+  }
+  return res;
+}
 const std::string GetMolFileZBOInfo(const RWMol &mol) {
   std::stringstream res;
   std::stringstream ss;","This variable is set, but never used.",cpp,1,1,0
"@@ -10552,12 +10552,12 @@ bool CoreChecks::ValidateBindImageMemory(VkImage image, VkDeviceMemory mem, VkDe
         uint64_t image_handle = HandleToUint64(image);
         skip = ValidateSetMemBinding(mem, image_handle, kVulkanObjectTypeImage, api_name);
 #ifdef VK_USE_PLATFORM_ANDROID_KHR
-        if (lvl_find_in_chain<VkExternalFormatANDROID>(image_state->createInfo.pNext)) {
+        if (image_state->external_format_android) {
             if (image_state->memory_requirements_checked) {
                 skip |= log_msg(report_data, VK_DEBUG_REPORT_ERROR_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_IMAGE_EXT, image_handle,
                                 kVUID_Core_DrawState_InvalidImage,
-                                ""%s: Applications must not call vkGetImageMemoryRequirements with such an image %s before it has ""
-                                ""been bound to memory"",
+                                ""%s: Must not call vkGetImageMemoryRequirements on image %s that will be bound to an external ""
+                                ""Android hardware buffer."",
                                 api_name, report_data->FormatHandle(image_handle).c_str());
             }
             return skip;",Please clarify following message: Must not call vkGetImageMemoryRequirements on image %s that will be bound to an external Android hardware buffer,cpp,1,1,1
"@@ -178,10 +178,10 @@ TEST (work, eco_pow)
 	std::future<std::chrono::nanoseconds> future2 = promise2.get_future ();
 
 	std::thread thread1 (work_func, std::ref (promise1), std::chrono::nanoseconds (0));
-	std::thread thread2 (work_func, std::ref (promise2), std::chrono::nanoseconds (100000));
+	std::thread thread2 (work_func, std::ref (promise2), std::chrono::nanoseconds (10000000));
 
 	// Confirm that the eco pow rate limiter is working.
-	// It's possible under some unlucky circumstances that this fails.
+	// It's possible under some unlucky circumstances that this fails to the random nature of valid work generation. 
 	ASSERT_LT (future1.get (), future2.get ());
 
 	thread1.join ();","Maybe `std::chrono::milliseconds (10)` is a bit more readable. Other than that, LGTM and the test now survives 1000 iterations.",cpp,1,1,1
"@@ -46,7 +46,8 @@ bool ResultSchemaProvider::ResultSchemaField::isValid() const {
  *
  **********************************/
 ResultSchemaProvider::ResultSchemaProvider(Schema schema)
-        : columns_(std::move(schema.get_columns())) {
+        : columns_(std::move(schema.get_columns())),
+          schemaProp_(std::move(schema.get_schema_prop())) {
     for (int64_t i = 0; i < static_cast<int64_t>(columns_.size()); i++) {
         const std::string& name = columns_[i].get_name();
         nameIndex_.emplace(std::make_pair(SpookyHashV2::Hash64(name.data(), name.size(), 0), i));","Use NebulaSchemaProvider, ResultSchemaProvider is designed for result.",cpp,1,1,1
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -82,6 +82,8 @@ MSG(object_does_not_provide_read_access_to_columns,
     ""Given object does not provide read access to columns"")
 MSG(object_does_not_provide_write_access_to_columns,
     ""Given object does not provide write access to columns"")
+MSG(object_does_not_provide_access_to_rows_or_columns,
+    ""Given object does not provide access to rows or columns"")
 MSG(unsupported_conversion_types, ""Unsupported conversion types"")
 MSG(row_indices_lt_min_value, ""Row indices are less than the minimum acceptable value"")
 MSG(row_indices_gt_max_value, ""Row indices are larger than the maximum acceptable value"")","Place it in some ""compatibility"" section?",cpp,1,1,0
"@@ -28,10 +28,11 @@ THE SOFTWARE.
  */
 
 #include ""hip/hip_runtime.h""
+
 #include <test_common.h>
 
 #ifdef __HCC__
-#include <amp.h>
+    #include <hc.hpp>
 #endif
 
 // cudaA",This change has already been submitted and merged since HCC broke this HIP test. So we can discard this change from this PR.,cpp,0,1,1
"@@ -179,6 +179,10 @@ model *build_model_from_prototext(int argc, char **argv,
                                    pb.model());
     model->setup(io_thread_pool);
 
+    if(opts->has_bool(""disable_background_io_activity"") && opts->get_bool(""disable_background_io_activity"")) {
+      model->allow_background_io_activity(false);
+    }
+
     //under development; experimental
     if (opts->has_bool(""use_data_store"") && opts->get_bool(""use_data_store"")) {
       if (master) {","You don't need has_bool(); The code was changed; instead of throwing an exception if the option doesn't exist, 'false' is returned. (other get_XX() methods still throw exceptions, since there's no reasonable default value)",cpp,1,1,1
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -444,12 +444,11 @@ is passed to :cpp:func:`lammps_commands_string` for processing.
 
 void lammps_commands_list(void *handle, int ncmd, const char **cmds)
 {
-  LAMMPS *lmp = (LAMMPS *) handle;
   std::string allcmds;
 
   for (int i = 0; i < ncmd; i++) {
     allcmds.append(cmds[i]);
-    if (allcmds.back() != '\n') allcmds.append(1,'\n');
+    if (allcmds.empty() || (allcmds.back() != '\n')) allcmds.append(1,'\n');
   }
 
   lammps_commands_string(handle,allcmds.c_str());",@rbberger somehow this bug went unnoticed by the automated unit tests while it created an exception/segmentation fault on my local machine in the PythonCommands test (you must not use `std::string.back()` on an empty string). Was this just by chance or do some tests fall through the grid of the various configurations?,cpp,0,1,1
"@@ -2158,6 +2158,15 @@ TEST_F(VkLayerTest, RenderPassBeginLayoutsFramebufferImageUsageMismatches) {
     iavci.subresourceRange.aspectMask = VK_IMAGE_ASPECT_COLOR_BIT;
     vk::CreateImageView(m_device->device(), &iavci, NULL, &iav);
 
+    // Create an input depth attachment view
+    VkImageObj iadi(m_device);
+
+    VkFormat dformat = FindSupportedDepthStencilFormat(gpu());
+    iadi.InitNoLayout(128, 128, 1, dformat, VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT, VK_IMAGE_TILING_OPTIMAL);
+    ASSERT_TRUE(iadi.initialized());
+
+    VkImageView iadv = iadi.targetView(dformat, VK_IMAGE_ASPECT_DEPTH_BIT | VK_IMAGE_ASPECT_STENCIL_BIT, 0, 1, 0, 1);
+
     // Create a color attachment view
     VkImageObj cai(m_device);
 ",Can this be done with `VkImageObj::targetView`?,cpp,1,1,0
"@@ -498,6 +498,7 @@ void Sol2ScriptingEnvironment::ProcessElements(
         [&](const tbb::blocked_range<std::size_t> &range) {
             ExtractionNode result_node;
             ExtractionWay result_way;
+            std::vector<boost::optional<InputRestrictionContainer>> result_res;
             auto &local_context = this->GetSol2Context();
 
             for (auto x = range.begin(), end = range.end(); x != end; ++x)",Remove the `optional`.,cpp,1,1,0
"@@ -217,7 +217,7 @@ void nano::bootstrap_connections::populate_connections (bool repeat)
 			if (auto client = c.lock ())
 			{
 				new_clients.push_back (client);
-				endpoints.insert (client->socket->remote_endpoint ());
+				endpoints.insert (*client->socket->remote_endpoint ());
 				double elapsed_sec = client->elapsed_seconds ();
 				auto blocks_per_sec = client->sample_block_rate ();
 				rate_sum += blocks_per_sec;",Is this guaranteed to have a value? Isn't remote_endpoint the side that can switch to ANYADDR?,cpp,1,1,1
"@@ -9,6 +9,8 @@
 #include <LightGBM/utils/openmp_wrapper.h>
 #include <LightGBM/utils/text_reader.h>
 
+#include <R_ext/Rdynload.h>
+
 #include <string>
 #include <cstdio>
 #include <cstring>","ah ok, thanks! I should have looked at `cpplint` manually in the logs when I did #2911",cpp,0,1,0
"@@ -1445,6 +1445,10 @@ ex_expr::exp_return_type convUnicodeToDatetime(char *target,
    }
 
    ExRaiseSqlError(heap, diagsArea, EXE_CONVERT_DATETIME_ERROR);
+   char hexstr[256];
+   if(*diagsArea)
+     **diagsArea << DgString0(stringToHex(hexstr, sizeof(hexstr) , source, sourceLen ));
+
    return ex_expr::EXPR_ERROR;
 
 }",This 256 should be a constant declared in some common header.,cpp,1,1,1
"@@ -1133,12 +1133,12 @@ bool CoreChecks::ValidateImageDescriptor(const char *caller, const DrawDispatchV
             static_cast<const cvdescriptorset::ImageSamplerDescriptor &>(image_descriptor).GetSamplerState());
     } else {
         if (binding_info.second.samplers_used_by_image.size() > index) {
-            for (auto &sampler : binding_info.second.samplers_used_by_image[index]) {
+            for (const auto &desc_index : binding_info.second.samplers_used_by_image[index]) {
+                const auto *desc = descriptor_set->GetDescriptorFromBinding(desc_index.sampler_slot.binding, desc_index.sampler_index);
                 // NOTE: This check _shouldn't_ be necessary due to the checks made in IsSpecificDescriptorType in
                 //       shader_validation.cpp. However, without this check some traces still crash.
-                if (sampler.second && (sampler.second->GetClass() == cvdescriptorset::DescriptorClass::PlainSampler)) {
-                    const auto *sampler_state =
-                        static_cast<const cvdescriptorset::SamplerDescriptor *>(sampler.second)->GetSamplerState();
+                if (desc && (desc->GetClass() == cvdescriptorset::DescriptorClass::PlainSampler)) {
+                    const auto *sampler_state = static_cast<const cvdescriptorset::SamplerDescriptor *>(desc)->GetSamplerState();
                     if (sampler_state) sampler_states.emplace_back(sampler_state);
                 }
             }","IIRC, it was never really understood why the `desc->GetClass() == cvdescriptorset::DescriptorClass::PlainSampler` check was necessary. On the one hand I wonder if this change allows this check to be removed. On the other hand, it's probably not worth the effort to find out as there's nothing incorrect about it.",cpp,1,1,1
"@@ -1376,8 +1376,6 @@ void DataReaderImpl::release_payload_pool()
 
     PoolConfig config = PoolConfig::from_history_attributes(history_.m_att);
     payload_pool_->release_history(config, true);
-
-    TopicPayloadPoolRegistry::release(payload_pool_);
 }
 
 ReturnCode_t DataReaderImpl::check_datasharing_compatible(",Shouldn't we do `payload_pool_.reset()` here ?,cpp,1,1,0
"@@ -0,0 +1,12 @@
+#include <bits/stdc++.h>
+using namespace std;
+int main()
+{
+  ios_base::sync_with_stdio(0);
+  cin.tie(0);
+  cout.tie(0);
+  int a,b;
+  cin>>a>>b;
+  cout<<__gcd(a,b)<<""\n"";
+  return 0;
+}",Sample input out are missing.,cpp,0,1,1
"@@ -0,0 +1,2 @@
+#include <cstdio>
+void print_cxx() { printf(""Hello From C++\n""); }",Should this file have the copyright too?,cpp,1,1,1
"@@ -19,10 +19,10 @@ import numpy as np
 import pandas as pd
 from scipy.stats import spearmanr
 from dask.array.utils import assert_eq
+from dask.distributed import wait
 from distributed.utils_test import client, cluster_fixture, gen_cluster, loop
 from scipy.sparse import csr_matrix
 from sklearn.datasets import make_blobs, make_regression
-from sklearn.utils import check_random_state
 
 from .utils import make_ranking
 ",oh thanks for removing this. Didn't realize it was unused.,cpp,1,1,1
"@@ -1622,6 +1622,7 @@ node (init_a, io_ctx_a, application_path_a, alarm_a, nano::node_config (peering_
 }
 
 nano::node::node (nano::node_init & init_a, boost::asio::io_context & io_ctx_a, boost::filesystem::path const & application_path_a, nano::alarm & alarm_a, nano::node_config const & config_a, nano::work_pool & work_a) :
+startup_time (std::chrono::system_clock::now ()),
 io_ctx (io_ctx_a),
 config (config_a),
 alarm (alarm_a),","Effective C++ (Scott Meyers) - Item 13 > ""List members in an initialization list in the order in which they are declared"" > Reason for rule: Class members are initialized in the order of their declaration in the class, not by the order in which they are listed in a member initialization list. If you want `startup_time` to be called before other members then it should be listed at the top in the class definition.",cpp,1,1,1
"@@ -925,7 +925,6 @@ RelExpr *RelSample::bindNode(BindWA *bindWA)
   RelExpr* myChild = child(0);
   if (myChild->getOperatorType() == REL_SCAN &&
       (static_cast<Scan*>(myChild))->isHbaseTable() &&
-      myChild->selectionPred().entries() == 0 &&
       isSimpleRandomRelative() &&
       trafSampleRate <= 1.0f)
     {","I would have assumed that we still need this check for a query with a sample clause and a predicate ? Not for update stats, but for some other SELECT statement with SAMPLE. Simple predicates can be pushed down only for regular format rows, for aligned format rows predicate evaluation will be in Trafodion.",cpp,1,1,1
"@@ -139,7 +139,12 @@ CmpContext::CmpContext(UInt32 f, CollHeap * h)
   optPCodeCache_(NULL),                       // just to be safe ...
   CDBList_(NULL),
   allControlCount_(0),
-  optSimulator_(NULL)
+  optSimulator_(NULL),
+  hosts_(h),
+  invocationInfos_(h),
+  planInfos_(h),
+  routineHandles_(h),
+  ddlObjs_(h)
 {
   SetMode(isDynamicSQL() ? STMT_DYNAMIC : STMT_STATIC);
 ","My bad, sorry for adding these leaks.",cpp,0,1,0
"@@ -249,6 +249,11 @@ bool Creature::getNextStep(Direction& dir, uint32_t&)
 
 void Creature::startAutoWalk(const std::forward_list<Direction>& listDir)
 {
+	if (getPlayer() && getPlayer()->isNoMove()) {
+		getPlayer()->sendCancelWalk();
+		return;
+	}
+
 	listWalkDir = listDir;
 
 	size_t size = 0;",Rename `isNoMove()` to `canMove()` and use that throughout this patch (should default to true obviously).,cpp,1,1,1
"@@ -27,8 +27,11 @@ void ImageDataLayer<Dtype>::DataLayerSetUp(const vector<Blob<Dtype>*>& bottom,
       ""new_height and new_width to be set at the same time."";
   // Read the file with filenames and labels
   const string& source = this->layer_param_.image_data_param().source();
+  CHECK_GT(source.size(), 0);
   LOG(INFO) << ""Opening file "" << source;
   std::ifstream infile(source.c_str());
+  CHECK(infile.good())
+      << ""Could not open image list (filename: \""""+ source + ""\"")"";
   string filename;
   int label;
   while (infile >> filename >> label) {","how about a `CHECK_GT(source.size(), 0)`? Leaving it unspecified seems like the most common error mode so it would be good to have an error message specifically for that case.",cpp,1,1,1
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -87,6 +87,8 @@ namespace thread_role
 			case nano::thread_role::name::wallet_actions:
 				thread_role_name_string = ""Wallet actions"";
 				break;
+			case nano::thread_role::name::wallet_work_regen:
+				thread_role_name_string = ""Wallet work regen"";
 			case nano::thread_role::name::bootstrap_initiator:
 				thread_role_name_string = ""Bootstrap init"";
 				break;",This will assert on debug builds as we check that the length is < 16 below.,cpp,1,1,1
"@@ -54,11 +54,11 @@ unsigned int RGroupDecompositionParameters::autoGetLabels(const RWMol &core) {
 
 bool rgdAtomCompare(const MCSAtomCompareParameters &p, const ROMol &mol1,
                     unsigned int atom1, const ROMol &mol2, unsigned int atom2,
-                    void *userData) {
-  if (!MCSAtomCompareElements(p, mol1, atom1, mol2, atom2, nullptr)) {
+                    MCSCompareFunctionsData& cfd) {
+  if (!MCSAtomCompareElements(p, mol1, atom1, mol2, atom2, cfd)) {
     return false;
   }
-  unsigned int autoLabels = *reinterpret_cast<unsigned int *>(userData);
+  unsigned int autoLabels = *reinterpret_cast<unsigned int *>(cfd.userData);
   bool atom1HasLabel = false;
   bool atom2HasLabel = false;
   const auto a1 = mol1.getAtomWithIdx(atom1);","with the new structure for MCSCompareFunctionsData, the MCSAtomCompareElements functor can pass around dynamic data and custom functors can call it without a problem",cpp,1,1,1
"@@ -41,13 +41,13 @@ void Connection::handle_read(const boost::system::error_code &error, std::size_t
 
     // no error detected, let's parse the request
     http::compression_type compression_type(http::no_compression);
-    util::tribool result;
+    RequestStatus result;
     std::tie(result, compression_type) =
         request_parser.parse(current_request, incoming_data_buffer.data(),
                              incoming_data_buffer.data() + bytes_transferred);
 
     // the request has been parsed
-    if (result == util::tribool::yes)
+    if (result == RequestStatus::yes)
     {
         current_request.endpoint = TCP_socket.remote_endpoint().address();
         request_handler.handle_request(current_request, current_reply);",This needs to be `RequestParser::RequestStatus`. Remember this is a nested type and we are outside of `RequestParser`.,cpp,1,1,1
"@@ -160,6 +160,19 @@ uint32_t IOLoginData::gameworldAuthentication(const std::string& accountName, co
 	return accountId;
 }
 
+uint32_t IOLoginData::getAccountIdByPlayerName(const std::string& playerName)
+{
+	Database* db = Database::getInstance();
+
+	std::ostringstream query;
+	query << ""SELECT `account_id` FROM `players` WHERE `name` = "" << db->escapeString(playerName);
+	DBResult_ptr result = db->storeQuery(query.str());
+	if (!result) {
+		return 0;
+	}
+	return result->getNumber<uint32_t>(""account_id"");
+}
+
 AccountType_t IOLoginData::getAccountType(uint32_t accountId)
 {
 	std::ostringstream query;","`bool House::isInvited(const Player* player)` is checked frequently, maybe needs a cache on Game class to improve performance.",cpp,1,1,1
"@@ -86,8 +86,7 @@ bool isValidMatch(const TurnLaneType::Mask tag, const TurnInstruction instructio
                (instruction.type ==
                     TurnType::Continue && // Forks can be experienced, even for straight segments
                 (instruction.direction_modifier == DirectionModifier::SlightLeft ||
-                 instruction.direction_modifier == DirectionModifier::SlightRight)) ||
-               instruction.type == TurnType::Suppressed;
+                 instruction.direction_modifier == DirectionModifier::SlightRight));
     }
     else if (tag == TurnLaneType::slight_left || tag == TurnLaneType::left ||
              tag == TurnLaneType::sharp_left)",we should refactor this ten line return statement ..,cpp,0,1,0
"@@ -36,6 +36,7 @@ ReaderLocator::ReaderLocator(
     : owner_(owner)
     , locator_info_(max_unicast_locators, max_multicast_locators)
     , expects_inline_qos_(false)
+    , is_local_reader_(false)
     , guid_prefix_as_vector_(1u)
     , guid_as_vector_(1u)
 {",Field `local_reader_` should be initialized to `nullptr`,cpp,1,1,0
"@@ -199,6 +199,18 @@ int main(int argc, const char **argv) {
 #if defined(HIPIFY_CLANG_RES)
     Tool.appendArgumentsAdjuster(ct::getInsertArgumentAdjuster(""-resource-dir="" HIPIFY_CLANG_RES));
 #endif
+    if (!MacroNames.empty()) {
+      for (std::string s : MacroNames) {
+        Tool.appendArgumentsAdjuster(ct::getInsertArgumentAdjuster(""-D"", ct::ArgumentInsertPosition::END));
+        Tool.appendArgumentsAdjuster(ct::getInsertArgumentAdjuster(s.c_str(), ct::ArgumentInsertPosition::END));
+      }
+    }
+    if (!IncludeDirs.empty()) {
+      for (std::string s : IncludeDirs) {
+        Tool.appendArgumentsAdjuster(ct::getInsertArgumentAdjuster(""-I"", ct::ArgumentInsertPosition::END));
+        Tool.appendArgumentsAdjuster(ct::getInsertArgumentAdjuster(s.c_str(), ct::ArgumentInsertPosition::END));
+      }
+    }
     Tool.appendArgumentsAdjuster(ct::getClangSyntaxOnlyAdjuster());
     Statistics& currentStat = Statistics::current();
     // Hipify _all_ the things!","possible this and second checks are redundant otherwise, lgtm",cpp,1,1,1
"@@ -61,6 +61,9 @@ void ThroughputPublisher::DataPubListener::onPublicationMatched(
     if (info.status == MATCHED_MATCHING)
     {
         ++throughput_publisher_.data_discovery_count_;
+        std::cout << C_RED << ""Pub: DATA Pub Matched ""
+                  << throughput_publisher_.data_discovery_count_ << ""/"" << throughput_publisher_.subscribers_
+                  << C_DEF << std::endl;
     }
     else
     {","Should this be done before unlocking, as it is done below?",cpp,0,1,1
"@@ -358,6 +358,15 @@ int main (int argc, char * const * argv)
 					{
 						data_path = nano::working_path ();
 					}
+					size_t batch_size;
+					if (vm.count (""batch_size""))
+					{
+						batch_size = (vm[""batch_size""].as<size_t> ());
+					}
+					else
+					{
+						batch_size = 512;
+					}
 					nano::node_flags flags;
 					flags.disable_backup = (vm.count (""disable_backup"") > 0);
 					flags.disable_lazy_bootstrap = (vm.count (""disable_lazy_bootstrap"") > 0);",I guess no need to set 512 as this is sideband_batch_size default value,cpp,1,1,1
"@@ -319,7 +319,8 @@ void setHydrogenCoords(ROMol *mol, unsigned int hydIdx, unsigned int heavyIdx) {
 }  // end of unnamed namespace
 
 namespace MolOps {
-void addHs(RWMol &mol, bool explicitOnly, bool addCoords) {
+void addHs(RWMol &mol, bool explicitOnly, bool addCoords,
+           const UINT_VECT *onlyOnAtoms) {
   // when we hit each atom, clear its computed properties
   // NOTE: it is essential that we not clear the ring info in the
   // molecule's computed properties.  We don't want to have to",Would a bit vector make more sense here?,cpp,1,1,0
"@@ -57,8 +57,10 @@ ResultCode RocksEngine::get(const std::string& key, std::string* value) {
     if (status.ok()) {
         return ResultCode::SUCCEEDED;
     } else if (status.IsNotFound()) {
+        LOG(ERROR) << ""Get: "" << key << "" Not Found"";
         return ResultCode::ERR_KEY_NOT_FOUND;
     }
+    LOG(ERROR) << ""Failed Get: "" << key << "" "" << status.ToString();
     return ResultCode::ERR_UNKNOWN;
 }
 ","Better to put this line in the `else`, otherwise, one `get` will incur two duplicated log.",cpp,1,1,1
"@@ -350,7 +350,7 @@ if __name__ == ""__main__"":
               ],
           },
           maintainer='Guolin Ke',
-          maintainer_email='guolin.ke@microsoft.com',
+          maintainer_email='guolin.ke@outlook.com',
           zip_safe=False,
           cmdclass={
               'install': CustomInstall,",Ah thanks for catching this! Sorry I didn't think of it on #4633. Thankfully it's not as critical with PyPI as it is with CRAN. @shiyu1994 should this be changed to your name and email? My assumption is that Microsoft would prefer to have a Microsoft employee as the primary contact for these artifacts.,cpp,0,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -525,7 +525,7 @@ void PDPServer2::announceParticipantState(
                 // Update the database with our own data
                 if (discovery_db().update(
                             change,
-                            ddb::DiscoveryParticipantChangeData(metatraffic_locators, false, false, false)))
+                            ddb::DiscoveryParticipantChangeData(metatraffic_locators, false, false)))
                 {
                     // Distribute
                     awake_routine_thread();","This will make our server apear as remote in the DDB. Should not affect anything I believe, but it's still weird IMHO",cpp,1,1,1
"@@ -281,7 +281,10 @@ bool nano::election::transition_time (nano::confirmation_solicitor & solicitor_a
 		result = true;
 		state_change (state_m.load (), nano::election::state_t::expired_unconfirmed);
 		status.type = nano::election_status_type::stopped;
-		log_votes (tally ());
+		if (node.config.logging.election_expiration_tally_logging ())
+		{
+			log_votes (tally (), ""Election expired"");
+		}
 	}
 	return result;
 }","This should probably be ""Election expired: "" otherwise it smashes in to ""Vote tally...""",cpp,1,1,1
"@@ -244,14 +244,14 @@ bool RowReader::processHeader(folly::StringPiece row) {
     }
     offsets_.resize(numFields + 1, -1);
     offsets_[0] = 0;
-    blockOffsets_.push_back(std::make_pair(0, 0));
+    blockOffsets_.emplace_back(std::make_pair(0, 0));
     blockOffsets_.reserve(numOffsets);
     for (uint32_t i = 0; i < numOffsets; i++) {
         int64_t offset = 0;
         for (int32_t j = 0; j < numBytesForOffset_; j++) {
             offset |= (uint64_t(*(it++)) << (8 * j));
         }
-        blockOffsets_.push_back(std::make_pair(offset, 0));
+        blockOffsets_.emplace_back(std::make_pair(offset, 0));
         offsets_[16 * (i + 1)] = offset;
     }
     // Now done with the header",You should have known that `std::make_pair` is not necessary here if `emplace_back` used.,cpp,1,1,1
"@@ -9,6 +9,7 @@
 
 DEFINE_int32(default_parts_num, 100, ""The default number of parts when a space is created"");
 DEFINE_int32(default_replica_factor, 1, ""The default replica factor when a space is created"");
+DEFINE_int32(default_max_parts_num, 100, ""The default max partitions number"");
 
 namespace nebula {
 namespace meta {","I think you can set default to max, and give it a proper value in configuration when deploy.",cpp,1,1,1
"@@ -428,6 +428,12 @@ void encodeVectorTile(const datafacade::ContiguousInternalMemoryDataFacadeBase &
                 const auto &edge = edges[edge_index];
                 const auto geometry_id = get_geometry_id(edge);
 
+                // Get coordinates for start/end nodes of segment (NodeIDs u and v)
+                const auto a = facade.GetCoordinateOfNode(edge.u);
+                const auto b = facade.GetCoordinateOfNode(edge.v);
+                // Calculate the length in meters
+                const double length = osrm::util::coordinate_calculation::haversineDistance(a, b);
+
                 // Weight values
                 const auto forward_weight_vector =
                     facade.GetUncompressedForwardWeights(geometry_id);","when trying to refactor this I thought about this line a bit. It adds some overhead for calculating the distances. Whats is you opinion here @danpat on the potential slowdown? I feel it might be alright, but I am not entirely sure. (This length calculation is already happening further down as well)",cpp,0,1,0
"@@ -33,14 +33,14 @@ static PJ_XY fouc_s_s_forward (PJ_LP lp, PJ *P) {           /* Spheroidal, forwa
 static PJ_LP fouc_s_s_inverse (PJ_XY xy, PJ *P) {           /* Spheroidal, inverse */
     PJ_LP lp = {0.0,0.0};
     struct pj_opaque *Q = static_cast<struct pj_opaque*>(P->opaque);
-    double V;
     int i;
 
     if (Q->n != 0.0) {
         lp.phi = xy.y;
         for (i = MAX_ITER; i ; --i) {
-            lp.phi -= V = (Q->n * lp.phi + Q->n1 * sin(lp.phi) - xy.y ) /
-                (Q->n + Q->n1 * cos(lp.phi));
+            const double V = (Q->n * lp.phi + Q->n1 * sin(lp.phi) - xy.y ) /
+                             (Q->n + Q->n1 * cos(lp.phi));
+            lp.phi -= V;
             if (fabs(V) < LOOP_TOL)
                 break;
         }","Curious question: in cases like this, would a new address for `V` need to be created each iteration within this for-loop? Are there advantages of declaring the scope of the variable as `const double V` within the for-loop rather than with `double V` outside the for-loop?",cpp,1,1,1
"@@ -183,6 +183,9 @@ double Bond::getBondTypeAsDouble() const {
 }
 
 double Bond::getValenceContrib(const Atom *atom) const {
+  if (atom != getBeginAtom() && atom != getEndAtom()) {
+    return 0.0;
+  }
   double res;
   if ((getBondType() == DATIVE || getBondType() == DATIVEONE) &&
       atom->getIdx() != getEndAtomIdx()) {",Should this be a warning? i.e. atom not in bond?,cpp,1,1,1
"@@ -167,7 +167,10 @@ std::string DeleteEdgeSentence::toString() const {
     std::string buf;
     buf.reserve(256);
     buf += ""DELETE EDGE "";
+    buf += *edge_;
+    buf += ""("";
     buf += edgeList_->toString();
+    buf += "")"";
     if (whereClause_ != nullptr) {
         buf += "" "";
         buf += whereClause_->toString();",buf.append() would be better ?,cpp,1,1,0
"@@ -2327,6 +2327,7 @@ static bool PreCallValidateCreateDevice(instance_layer_data *instance_data, cons
     return skip;
 }
 
+std::unordered_map<std::string, void *> &GetNameToFuncptrMap();
 static void PreCallRecordCreateDevice(VkLayerDeviceCreateInfo *chain_info) {
     chain_info->u.pLayerInfo = chain_info->u.pLayerInfo->pNext;
 }",The way that core_validation declares this table requires some forward declaration and indirection to get it where it is needed.,cpp,1,1,1
"@@ -782,10 +782,12 @@ hipError_t ihipDevice_t::initProperties(hipDeviceProp_t* prop) {
     DeviceErrorCheck(err);
 
     // BDFID is 16bit uint: [8bit - BusID | 5bit - Device ID | 3bit - Function/DomainID]
-    prop->pciDomainID = bdf_id & 0x7;
     prop->pciDeviceID = (bdf_id >> 3) & 0x1F;
     prop->pciBusID = (bdf_id >> 8) & 0xFF;
 
+    err = hsa_agent_get_info(_hsaAgent, (hsa_agent_info_t)HSA_AMD_AGENT_INFO_DOMAIN, &prop->pciDomainID);
+    DeviceErrorCheck(err);
+
     // Masquerade as a 3.0-level device. This will change as more HW functions are properly
     // supported. Application code should use the arch.has* to do detailed feature detection.
     prop->major = 3;",Are the last 3bits of BDFID still Function/Domain? Aren't BusID and DeviceID inquired by a separate HSA API call too?,cpp,1,1,1
"@@ -11115,6 +11115,17 @@ bool CoreChecks::ValidateCreateSwapchain(const char *func_name, VkSwapchainCreat
     }
 
     auto physical_device_state = GetPhysicalDeviceState();
+    bool skip = false;
+    VkSurfaceTransformFlagBitsKHR currentTransform = physical_device_state->surfaceCapabilities.currentTransform;
+    if ((pCreateInfo->preTransform & currentTransform) != pCreateInfo->preTransform) {
+        skip |= log_msg(report_data, VK_DEBUG_REPORT_PERFORMANCE_WARNING_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_PHYSICAL_DEVICE_EXT,
+                        HandleToUint64(physical_device), kVUID_Core_Swapchain_PreTransform,
+                        ""%s: pCreateInfo->preTransform (0x%"" PRIx32 "") doesn't match the currentTransform (0x%"" PRIx32
+                        "") returned by vkGetPhysicalDeviceSurfaceCapabilitiesKHR, the presentation engine will transform the image ""
+                        ""content as part of the presentation operation."",
+                        func_name, pCreateInfo->preTransform, currentTransform);
+    }
+
     if (physical_device_state->vkGetPhysicalDeviceSurfaceCapabilitiesKHRState == UNCALLED) {
         if (log_msg(report_data, VK_DEBUG_REPORT_WARNING_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_PHYSICAL_DEVICE_EXT,
                     HandleToUint64(physical_device), kVUID_Core_DrawState_SwapchainCreateBeforeQuery,",Please use string_VkSurfaceTransformFlagBitsKHR() to convert transform bits to string.,cpp,1,1,1
"@@ -109,6 +109,7 @@ int main(int argc, char *argv[]) {
                                                                       paths);
     if (!gStorageServer->start()) {
         LOG(ERROR) << ""Storage server start failed"";
+        gStorageServer->stop();
         return EXIT_FAILURE;
     }
 ",Well done. I want to know why the daemon crash?,cpp,0,1,0
"@@ -5135,6 +5135,11 @@ bool SwiftASTContext::IsVoidType(void *type) {
   return type == GetASTContext()->TheEmptyTupleType.getPointer();
 }
 
+bool SwiftASTContext::CanPassInRegisters(const CompilerType &type) {
+  abort();
+  return false;
+}
+
 bool SwiftASTContext::IsGenericType(const CompilerType &compiler_type) {
   if (!compiler_type.IsValid())
     return false;",Is abort what we really want here? Maybe use `unreachable` instead?,cpp,1,1,1
"@@ -43,7 +43,17 @@ services::Status Parameter::check() const
     return services::Status();
 }
 }
+namespace interface2
+{
+Parameter::Parameter(size_t nClasses) : nClasses(nClasses), resultsToEvaluate(computeClassLabels) {}
 
+services::Status Parameter::check() const
+{
+    DAAL_CHECK_EX(nClasses > 0, services::ErrorIncorrectParameter, services::ParameterName, nClassesStr());
+    DAAL_CHECK_EX(resultsToEvaluate != 0, services::ErrorIncorrectParameter, services::ParameterName, resultsToEvaluateStr())
+    return services::Status();
+}
+}
 namespace training
 {
 namespace interface1",On row 106 in current file we always cast to interface2::Parammeter class. That`s wrong. Branching should be added.,cpp,1,1,1
"@@ -204,6 +204,14 @@ void Tree::AddPredictionToScore(const Dataset* data,
   }
 }
 
+void Tree::AddMaxValueToScore(double& score) const {
+    score += *std::max_element(leaf_value_.begin(), leaf_value_.end());
+}
+
+void Tree::AddMinValueToScore(double& score) const {
+    score += *std::min_element(leaf_value_.begin(), leaf_value_.end());
+}
+
 #undef PredictionFun
 
 std::string Tree::ToString() const {","why not just return the max/min values, and add outside?",cpp,1,1,1
"@@ -13,7 +13,10 @@ template <typename Dtype>
 void CuDNNPoolingLayer<Dtype>::LayerSetUp(const vector<Blob<Dtype>*>& bottom,
     const vector<Blob<Dtype>*>& top) {
   PoolingLayer<Dtype>::LayerSetUp(bottom, top);
-
+  // Sanity check: CUDNN currently only supports pad=0 and top.size()=1 cases.
+  CHECK_EQ(pad_h_, 0);
+  CHECK_EQ(pad_w_, 0);
+  CHECK_EQ(top.size(), 1);
   CUDNN_CHECK(cudnnCreate(&handle_));
   cudnn::createTensor4dDesc<Dtype>(&bottom_desc_);
   cudnn::createTensor4dDesc<Dtype>(&top_desc_);","This does not compile for me, This does: CHECK_EQ(this->pad_h_, 0);",cpp,1,1,1
"@@ -280,15 +280,15 @@ dataframe_builder& dataframe_builder::fill_uniform(double a, double b, std::int6
 
 dataframe dataframe_builder::build() const {
     const auto& program = impl_->get_program();
-    const auto [df, hit] = get_dataframe_builder_cache().lookup(program);
+    const auto df_hit = get_dataframe_builder_cache().lookup(program);
 #ifdef ONEDAL_DEBUG_DATAFRAMES_CACHE
-    const std::string hit_or_miss = hit ? ""hit"" : ""miss"";
+    const std::string hit_or_miss = std::get<1>(df_hit) ? ""hit"" : ""miss"";
     fmt::print(""{}\t{}\t{:.2f}Mb\n"",
                hit_or_miss,
                program.get_code(),
                get_dataframe_builder_cache().get_occupied_size_mb());
 #endif
-    return df;
+    return std::get<0>(df_hit);
 }
 
 template <typename Float>","GCC 7.4 complains that `hit` variable is unused, but GCC 9.x is ok",cpp,1,1,1
"@@ -81,6 +81,11 @@ namespace Impl {
 CudaLockArrays g_host_cuda_lock_arrays = {nullptr, nullptr, 0};
 
 void initialize_host_cuda_lock_arrays() {
+#ifdef KOKKOS_ENABLE_IMPL_DESUL_ATOMICS
+  desul::Impl::init_lock_arrays();
+
+  DESUL_ENSURE_CUDA_LOCK_ARRAYS_ON_DEVICE();
+#endif
   if (g_host_cuda_lock_arrays.atomic != nullptr) return;
   CUDA_SAFE_CALL(cudaMalloc(&g_host_cuda_lock_arrays.atomic,
                             sizeof(int) * (CUDA_SPACE_ATOMIC_MASK + 1)));","This one is replaced by `desul`, isn't it? Can `g_host_cuda_lock_arrays.atomic` be guarded and eventually removed as well?",cpp,1,1,1
"@@ -99,9 +99,12 @@ void Client::Handle_OP_ZoneChange(const EQApplicationPacket *app) {
 				//unable to find a zone point... is there anything else
 				//that can be a valid un-zolicited zone request?
 
-				//Todo cheat detection
 				Message(Chat::Red, ""Invalid unsolicited zone request."");
 				LogError(""Zoning [{}]: Invalid unsolicited zone request to zone id [{}]"", GetName(), target_zone_id);
+				if (GetBindZoneID() == target_zone_id)
+					CheatDetected(MQGate, glm::vec3(zc->x, zc->y, zc->z));
+				else
+					CheatDetected(MQZone, glm::vec3(zc->x, zc->y, zc->z));
 				SendZoneCancel(zc);
 				return;
 			}",Please use brackets here,cpp,1,1,1
"@@ -48,6 +48,10 @@ void PairDeprecated::settings(int, char **)
     my_style = hybrid->keywords[hybrid->nstyles];
   }
 
+  if (strcmp(my_style,""reax"") == 0) {
+    writemsg(lmp,""\nPair style 'reax' has been removed from LAMMPS ""
+                    ""after the 12 December 2018 version\n\n"",1);
+
   if (strcmp(my_style,""DEPRECATED"") == 0) {
     writemsg(lmp,""\nPair style 'DEPRECATED' is a dummy style\n\n"",0);
 ",Missing closing curly bracket `}`,cpp,1,1,1
"@@ -4797,6 +4797,8 @@ GetLastMethodIlOffset(
     HighestOffset = 0;
     for (size_t i = 0; i < MapNeeded; i++)
     {
+        ExtDbgOut(""%d il: %08x start: %p end: %p\n"", i, Map[i].ilOffset, Map[i].startAddress, Map[i].endAddress);
+
         if (Map[i].ilOffset != (ULONG32)CLRDATA_IL_OFFSET_NO_MAPPING &&
             Map[i].ilOffset != (ULONG32)CLRDATA_IL_OFFSET_PROLOG &&
             Map[i].ilOffset != (ULONG32)CLRDATA_IL_OFFSET_EPILOG &&",This adds logging only to the `GetLastMethodIlOffset`. For diagnostic purposes isn't it better for all the methods to include this info?,cpp,1,1,1
"@@ -9,11 +9,11 @@ This module contains tools for enumerating tautomers and determining a canonical
 :license: MIT, see LICENSE file for more details.
 """"""
 
-
 import copy
 import logging
 
 from rdkit import Chem
+from rdkit.Chem.MolStandardize import rdMolStandardize
 from rdkit.Chem.rdchem import BondDir, BondStereo, BondType
 
 from .utils import memoized_property, pairwise",I don't think you need to make any edits at all to this file for this PR,cpp,0,1,0
"@@ -168,7 +168,7 @@ void testRingMatching3Score() {
   // expect test1 to have better score than test2 since all halogens are on R1
   // but this is not the case
 
-  TEST_ASSERT(test1 < test2); // Fix Me!
+  TEST_ASSERT(test1 > test2); 
 
   // But it is for the fingerprint score
 ",Now it's fixed we can remove this line,cpp,1,1,1
"@@ -269,6 +269,7 @@ bool nano::mdb_store::do_upgrades (nano::write_transaction & transaction_a, bool
                 case 17:
                         upgrade_v17_to_v18 (transaction_a);
                         needs_vacuuming = true;
+                        // Upgrades to v19 & v20 are both part of the v22 node release
                 case 18:
                         upgrade_v18_to_v19 (transaction_a);
                         needs_vacuuming = true;",Should we start using [[fallthrough]]; ?,cpp,1,1,0
"@@ -308,8 +308,12 @@ std::string PrimaryExpression::toString() const {
         case VAR_INT64:
             snprintf(buf, sizeof(buf), ""%ld"", boost::get<int64_t>(operand_));
             break;
-        case VAR_DOUBLE:
-            return std::to_string(boost::get<double>(operand_));
+        case VAR_DOUBLE: {
+            int digits10 = std::numeric_limits<double>::digits10;
+            const char *fmt = folly::sformat(""%.{}lf"", digits10).c_str();
+            snprintf(buf, sizeof(buf), fmt, boost::get<double>(operand_));
+            break;
+        }
         case VAR_BOOL:
             snprintf(buf, sizeof(buf), ""%s"", boost::get<bool>(operand_) ? ""true"" : ""false"");
             break;",`fmt` will be a dangling pointer here.,cpp,1,1,1
"@@ -1184,13 +1184,8 @@ static swift::ASTContext *SetupASTContext(
   if (disable_objc_runtime())
     swift_ast_context->GetLanguageOptions().EnableObjCInterop = false;
 
-  if (repl || playground) {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = true;
-  } else {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = false;
-  }
+  swift_ast_context->GetLanguageOptions().Playground = repl || playground;
+  swift_ast_context->GetIRGenOptions().Playground = repl || playground;
 
   // For the expression parser and REPL we want to relax the
   // requirement that you put ""try"" in front of every expression that",This was a typo that prevented the feature to work correctly.,cpp,1,1,0
"@@ -443,9 +443,16 @@ Cylinder* Container::queryDestination(int32_t& index, const Thing &thing, Item**
 		return this;
 	}
 
+	if (index != INDEX_WHEREEVER) {
+		Item* itemFromIndex = getItemByIndex(index);
+		if (itemFromIndex) {
+			*destItem = itemFromIndex;
+		}
+	}
+
 	bool autoStack = !hasBitSet(FLAG_IGNOREAUTOSTACK, flags);
-	if (autoStack && item->isStackable() && item->getParent() != this) {
-		//try find a suitable item to stack with
+	//try find a suitable item to stack with
+	if (autoStack && item->isStackable() && item->getParent() != this && !(*destItem && (*destItem)->isStackable() && (*destItem)->equals(item))) {
 		uint32_t n = 0;
 		for (Item* listItem : itemlist) {
 			if (listItem != item && listItem->equals(item) && listItem->getItemCount() < 100) {","`!(*destItem && (*destItem)->isStackable() && (*destItem)->equals(item))` Can't this be simplified to: `!(*destItem && (*destItem)->equals(item))` I can't verify this right now, but afaik, ->equals should be enough for this check",cpp,1,1,1
"@@ -49,7 +49,8 @@ def GetDbNames(user='sysdba', password='masterkey', dirName='.', dBase='::templa
       names = ['::' + str(x[0]) for x in c.fetchall()]
     names.remove(dBase)
   elif DbModule.fileWildcard:
-    import os.path, glob
+    import os.path
+    import glob
     names = glob.glob(os.path.join(dirName, DbModule.fileWildcard))
   else:
     names = []",I don't really understand the reason to split these across multiple lines.,cpp,1,1,1
"@@ -6234,7 +6234,7 @@ VisitNodeQualifiedArchetype (SwiftASTContext *ast,
     {
         swift::Demangle::Node::iterator end = cur_node->end();
         VisitNodeResult type_result;
-        size_t index = LLDB_INVALID_ADDRESS;
+        uint64_t index = LLDB_INVALID_ADDRESS;
         for (swift::Demangle::Node::iterator pos = cur_node->begin(); pos != end; ++pos)
         {
             switch (pos->get()->getKind())","This should be ""lldb::addr_t"" instead of ""uint64_t"" if we are initializing this with LLDB_INVALID_ADDRESS.",cpp,1,1,1
"@@ -41,8 +41,12 @@ using nebula::cpp2::SupportedType;
 using apache::thrift::FragileConstructor::FRAGILE;
 
 TEST(ProcessorTest, AddHostsTest) {
+    auto workers = std::make_shared<thread::GenericThreadPool>();
+    workers->start(4);
+    auto ioPool = std::make_shared<folly::IOThreadPoolExecutor>(4);
     fs::TempDir rootPath(""/tmp/AddHostsTest.XXXXXX"");
-    std::unique_ptr<kvstore::KVStore> kv(TestUtils::initKV(rootPath.path()));
+    auto kv = TestUtils::initKV(rootPath.path(), ioPool, workers);
+
     {
         std::vector<nebula::cpp2::HostAddr> thriftHosts;
         for (auto i = 0; i < 10; i++) {",You could move the workers and ioPool related code into TestUtils::initKV,cpp,1,1,1
"@@ -74,6 +74,15 @@ InternalRouteResult directShortestPathSearch(SearchEngineData<mld::Algorithm> &e
     auto &reverse_heap = *engine_working_data.reverse_heap_1;
     insertNodesInHeaps(forward_heap, reverse_heap, phantom_nodes);
 
+    std::cout << ""source_phantom.forward_segment_id.id: ""
+              << phantom_nodes.source_phantom.forward_segment_id.id
+              << "" source_phantom.reverse_segment_id.id: ""
+              << phantom_nodes.source_phantom.reverse_segment_id.id << std::endl;
+    std::cout << ""target_phantom.forward_segment_id.id: ""
+              << phantom_nodes.target_phantom.forward_segment_id.id
+              << "" target_phantom.reverse_segment_id.id: ""
+              << phantom_nodes.target_phantom.reverse_segment_id.id << std::endl;
+
     // TODO: when structured bindings will be allowed change to
     // auto [weight, source_node, target_node, unpacked_edges] = ...
     EdgeWeight weight = INVALID_EDGE_WEIGHT;",This is debug code and needs to be removed.,cpp,1,1,1
"@@ -4,15 +4,17 @@
  */
 #include <LightGBM/config.h>
 
+#include <LightGBM/dataset.h>
 #include <LightGBM/utils/common.h>
 #include <LightGBM/utils/log.h>
 #include <LightGBM/utils/random.h>
+#include <LightGBM/utils/text_reader.h>
 
 #include <limits>
 
 namespace LightGBM {
 
-void Config::KV2Map(std::unordered_map<std::string, std::string>& params, const char* kv) {
+void Config::KV2Map(std::unordered_map<std::string, std::string>* params, const char* kv) {
   std::vector<std::string> tmp_strs = Common::Split(kv, '=');
   if (tmp_strs.size() == 2 || tmp_strs.size() == 1) {
     std::string key = Common::RemoveQuotationSymbol(Common::Trim(tmp_strs[0]));",Not needed anymore?,cpp,1,1,0
"@@ -53,7 +53,7 @@ void* DataLayerPrefetch(void* layer_pointer) {
       CHECK(data.size()) << ""Image cropping only support uint8 data"";
       int h_off, w_off;
       // We only do random crop when we do training.
-      if (Caffe::phase() == Caffe::TRAIN) {
+      if (layer->phase_ == Caffe::TRAIN) {
         // NOLINT_NEXT_LINE(runtime/threadsafe_fn)
         h_off = rand() % (height - crop_size);
         // NOLINT_NEXT_LINE(runtime/threadsafe_fn)","I'm not sure that this is related to anything, but rand() is not thread safe.",cpp,1,1,1
"@@ -395,8 +395,7 @@ const ComResWord ComResWords::resWords_[] = {
   ComResWord(""USAGE"",            ANS_|RESWORD_),
   ComResWord(""USER"",             ANS_|RESWORD_),
   ComResWord(""USING"",            ANS_|RESWORD_),
-  ComResWord(""UUID"",            ANS_|RESWORD_),
-  ComResWord(""VALUE"",            ANS_|RESWORD_),
+  ComResWord(""VALUE"",           ANS_|RESWORD_|MPWORD_),
   ComResWord(""VALUES"",           ANS_|RESWORD_|MPWORD_),
   ComResWord(""VARCHAR"",          ANS_|RESWORD_),
   ComResWord(""VARIABLE"",         POTANS_|RESWORD_),","I'm not sure what ""MPWORD_"" will do here but it is probably harmless.",cpp,1,1,1
"@@ -302,6 +302,13 @@ void PDPServer2::initializeParticipantProxyData(
     {
         logWarning(RTPS_PDP_SERVER, ""SERVER or BACKUP PDP requires always all EDP endpoints creation."");
     }
+
+    // Set participant type and discovery server version properties
+    participant_data->m_properties.push_back(
+        std::pair<std::string, std::string>(
+            {dds::parameter_property_participant_type, ParticipantType::SERVER}));
+    participant_data->m_properties.push_back(
+        std::pair<std::string, std::string>({dds::parameter_property_ds_version, ""2.0""}));
 }
 
 void PDPServer2::assignRemoteEndpoints(",Use new constant for current version,cpp,1,1,0
"@@ -2816,9 +2816,11 @@ void rai::rpc_handler::representatives_online ()
 	boost::property_tree::ptree response_l;
 	boost::property_tree::ptree representatives;
 	auto reps (node.online_reps.list ());
+	rai::transaction transaction (node.store.environment, nullptr, false);
 	for (auto & i : reps)
 	{
-		representatives.put (i.to_account (), """");
+		auto sequence (node.store.vote_current (transaction, i)->sequence);
+		representatives.put (i.to_account (), std::to_string (sequence));
 	}
 	response_l.add_child (""representatives"", representatives);
 	response (response_l);","Would this make more sense on the ""representatives"" call to get all representatives sequence numbers?",cpp,1,1,1
"@@ -1964,10 +1964,18 @@ bool CoreChecks::ValidatePipelineShaderStage(VkPipelineShaderStageCreateInfo con
 
     // The following tries to limit the number of passes through the shader module. The validation passes in here are ""stateless""
     // and mainly only checking the instruction in detail for a single operation
+    uint32_t total_shared_size = 0;
     for (auto insn : *module) {
         skip |= ValidateShaderCapabilitiesAndExtensions(module, insn);
         skip |= ValidatePropertiesAndFeatures(module, insn);
         skip |= ValidateShaderStageGroupNonUniform(module, pStage->stage, insn);
+        total_shared_size += module->CalcComputeSharedMemory(pStage->stage, insn);
+    }
+
+    if (total_shared_size > phys_dev_props.limits.maxComputeSharedMemorySize) {
+        skip |= LogError(device, kVUID_Core_Shader_MaxComputeSharedMemorySize,
+                         ""Shader uses %"" PRIu32 "" bytes of shared memory, more than allowed by physicalDeviceLimits::maxComputeSharedMemorySize (%"" PRIu32 "")"",
+                         total_shared_size, phys_dev_props.limits.maxComputeSharedMemorySize);
     }
 
     skip |=","This limit is in bytes, but isn't `total_shared_size` in bits?",cpp,1,1,1
"@@ -10929,9 +10929,12 @@ static bool AddAttachmentUse(const layer_data *dev_data, RenderPassCreateVersion
     const char *const function_name = use_rp2 ? ""vkCreateRenderPass2KHR()"" : ""vkCreateRenderPass()"";
 
     if (uses & new_use) {
-        log_msg(dev_data->report_data, VK_DEBUG_REPORT_ERROR_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_UNKNOWN_EXT, 0,
-                kVUID_Core_DrawState_InvalidRenderpass, ""%s: subpass %u already uses attachment %u as a %s attachment."",
-                function_name, subpass, attachment, StringAttachmentType(new_use));
+        if (attachment_layouts[attachment] != new_layout) {
+            vuid = use_rp2 ? ""VUID-VkSubpassDescription2KHR-layout-02528"" : ""VUID-VkSubpassDescription-layout-02519"";
+            log_msg(dev_data->report_data, VK_DEBUG_REPORT_ERROR_BIT_EXT, VK_DEBUG_REPORT_OBJECT_TYPE_UNKNOWN_EXT, 0, vuid,
+                    ""%s: subpass %u already uses attachment %u with a different image layout (%s vs %s)."", function_name, subpass,
+                    attachment, string_VkImageLayout(attachment_layouts[attachment]), string_VkImageLayout(new_layout));
+        }
     } else if (uses & ~ATTACHMENT_INPUT || (uses && (new_use == ATTACHMENT_RESOLVE || new_use == ATTACHMENT_PRESERVE))) {
         /* Note: input attachments are assumed to be done first. */
         vuid = use_rp2 ? ""VUID-VkSubpassDescription2KHR-pPreserveAttachments-03074""",include the two conflicting layouts in the message -- `string_VkImageLayout` to convert them to human readable strings.,cpp,1,1,1
"@@ -132,10 +132,13 @@ int main(int argc, char *argv[]) {
     }
     El::ReportException(e);
     return EXIT_FAILURE;
-  } catch (std::exception& e) {
+  }
+#if 0
+  catch (std::exception& e) {
     El::ReportException(e);
     return EXIT_FAILURE;
   }
+#endif // 0
 
   return EXIT_SUCCESS;
 }",Is this to allow normal exceptions to propagate all of the way out?,cpp,1,1,1
"@@ -1339,6 +1339,7 @@ void ProtocolGame::sendBasicData()
 {
 	NetworkMessage msg;
 	msg.AddByte(0x9F);
+	msg.AddByte(0x9F);
 	msg.AddByte(player->isPremium() ? 0x01 : 0x00);
 	msg.AddByte(player->getVocation()->getClientId());
 	msg.add<uint16_t>(0x00);",This doesn't make sense. Why another 0x9F?,cpp,1,1,1
"@@ -246,6 +246,18 @@ void model::replace_weights(std::vector<weights*>& new_weights) {
 
 }
 
+void model::replace_weights_by_name(std::vector<weights*>& new_weights) {
+  if (new_weights.empty()) {
+    throw lbann_exception(""Model::replace_weights_by name failed : because new_weight vector is empty."");
+  }
+  for(size_t i = 0; i < new_weights.size(); ++i) {
+     for (size_t j = 0; j < m_weights.size(); ++j) {
+       if(m_weights[j]->get_name() == new_weights[i]->get_name())
+         m_weights[j]->set_values(new_weights[i]->get_values());
+     }
+   }
+}
+
 optimizer* model::create_optimizer() const {
   if (m_default_optimizer != nullptr) {
     return m_default_optimizer->copy();",I don't think this check is necessary. The function can just do nothing if the input vector is empty.,cpp,1,1,1
"@@ -248,12 +248,13 @@ void runServer(Int32 argc, char **argv)
   {
      cout << tmbuf << "" RMS Shared segment exists, attaching to it, shmid=""<< shmid << "", key="" << (key_t)getStatsSegmentId() << ""\n"";
   }
-  if ((statsGlobalsAddr = shmat(shmid, getRmsSharedMemoryAddr(), 0))
+  if ((statsGlobalsAddr = shmat(shmid, getRmsSharedMemoryAddr(), SHM_REMAP | SHM_RND))
 		== (void *)-1)
   {
     cout << tmbuf << ""Shmat failed, shmid="" <<shmid << "", key="" << (key_t) getStatsSegmentId() << "", Error code : ""  << errno << ""("" << strerror(errno) << "")\n"";
     exit(errno);
   }
+  gRmsSharedMemoryAddr_ = statsGlobalsAddr;
   char *statsGlobalsStartAddr = (char *)statsGlobalsAddr;
   if (createStatsGlobals)
   {","This shared segment can't be remapped because RMS shared segment have pointers stored within its space. All the processes attaching to the shared segment should attach at the same address. If the process is unable to do it, then the process can't participate in updating the shared segment. This can lead to corruption in the shared segment",cpp,1,1,1
"@@ -512,9 +512,14 @@ folly::Future<Status> AdminClient::createSnapshot(GraphSpaceID spaceId, const st
 
     folly::Promise<Status> pro;
     auto f = pro.getFuture();
+
+    /**
+     * Don't need retry.
+     * Because existing checkpoint directories leads to fail again.
+     **/
     getResponse(allHosts, 0, std::move(req), [] (auto client, auto request) {
         return client->future_createCheckpoint(request);
-    }, 0, std::move(pro), 1 /*The snapshot operation only needs to be retried twice*/);
+    }, 0, std::move(pro), 0);
     return f;
 }
 ",What if there are some connection failure?,cpp,1,1,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -26,7 +26,7 @@ using namespace lldb_private::formatters::swift;
 
 bool lldb_private::formatters::swift::SwiftMetatype_SummaryProvider(
     ValueObject &valobj, Stream &stream, const TypeSummaryOptions &options) {
-  lldb::addr_t metadata_ptr = valobj.GetValueAsUnsigned(LLDB_INVALID_ADDRESS);
+  lldb::addr_t metadata_ptr = valobj.GetPointerValue();
   if (metadata_ptr == LLDB_INVALID_ADDRESS || metadata_ptr == 0) {
     CompilerType compiler_metatype_type(valobj.GetCompilerType());
     CompilerType instancetype(compiler_metatype_type.GetInstanceType());","As this might not be entirely obvious from the patch, the issue here is that GetValueAsUnsigned() doesn't work for a zero-sized type, e.g. MetaTypes, but we can call `GetPointerValue()` because we always have the location of the value in our hands.",cpp,1,1,1
"@@ -2789,8 +2789,7 @@ void tm_process_msg(BMS_SRE *pp_sre)
 {
     short                  lv_ret;
     char                   la_send_buffer[4096];
-    char                   la_recv_buffer[sizeof(Tm_Req_Msg_Type)];
-    char                  *la_recv_buffer_ddl = NULL;
+    char                   la_recv_buffer[pp_sre->sre_reqDataSize];
     Tm_Broadcast_Req_Type *lp_br_req;
     Tm_Broadcast_Rsp_Type *lp_br_rsp; 
     Tm_Perf_Stats_Req_Type *lp_ps_req;","Would be good to check the size for non zero value. If the caller passes zero, process will crash at a later point.",cpp,1,1,1
"@@ -37,8 +37,8 @@ using namespace FixConst;
 extern ""C"" {
   void latte(int *, int *, double *, int *, int *,
              double *, double *, double *, double *,
-             double *, double *, double *, int*,
-             double *, double *, double *, double *, bool *);
+             double *, double *, double *, int *,
+             double *, double *, double *, double *, int * , bool *);
   int latte_abiversion();
 }
 ","If you are changing ABI you need to update the `LATTE_ABIVERSION` in `latte_lib.f90` and the abi check below. Plus, you need to update the version downloaded in `lib/latte/Install.py` and `cmake/CMakeLists.txt`.",cpp,1,1,1
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -111,7 +111,7 @@ FILELOADER_ERRORS Items::loadFromOtb(const std::string& file)
 		return ERROR_INVALID_FORMAT;
 	}
 
-	for(auto & itemNode : root.children) {
+	for (auto & itemNode : root.children) {
 		PropStream stream;
 		if (!loader.getProps(itemNode, stream)) {
 			return ERROR_INVALID_FORMAT;","While at it, remove that space before &",cpp,1,1,1
"@@ -73,6 +73,7 @@ FixRigidSmall::FixRigidSmall(LAMMPS *lmp, int narg, char **arg) :
   dof_flag = 1;
   enforce2d_flag = 1;
   stores_ids = 1;
+  centroidstressflag = CENTROID_AVAIL;
 
   MPI_Comm_rank(world,&me);
   MPI_Comm_size(world,&nprocs);","This flag will be inherited by the `FixRigidNHSmall` class and thus the corresponding derived classes, but I don't see the corresponding changes to enable the feature; similarly `FixRigidSmallOMP`. So it either needs to be disabled in the corresponding constructors or the equivalent changes added.",cpp,1,1,1
"@@ -40,11 +40,8 @@ namespace PrepareRelease
 
             foreach (var outputDirectory in outputDirectories)
             {
-                var filename = Path.Combine(outputDirectory, ""integrations.json"");
                 var utf8NoBom = new UTF8Encoding(encoderShouldEmitUTF8Identifier: false);
-                Console.WriteLine($""Writing {filename}..."");
-                File.WriteAllText(filename, json, utf8NoBom);
-
+                
                 // CallTarget
                 var calltargetPath = Path.Combine(outputDirectory, ""src"", ""Datadog.Trace"", ""ClrProfiler"", ""InstrumentationDefinitions.Generated.cs"");
                 Console.WriteLine($""Writing {calltargetPath}..."");","Doesn't have to be done in this PR, but we can also delete the `json` and `serializerSettings` variables, and the `IntegrationGroups.CallSite` property,",.cs,0,1,1
"@@ -101,6 +101,7 @@ namespace NLog
         /// <summary>
         /// Initializes static members of the LogManager class.
         /// </summary>
+        [System.Diagnostics.CodeAnalysis.SuppressMessage(""Microsoft.Performance"", ""CA1810:InitializeReferenceTypeStaticFieldsInline"", Justification = ""Significant logic in .cctor()"")]
         static LogFactory()
         {
             RegisterEvents(DefaultAppEnvironment);","What code-analysis tool where you using, that required this `SuppressMessage` ?",.cs,1,1,1
"@@ -29,8 +29,7 @@ namespace MicroBenchmarks
                     .WithMinIterationCount(15)
                     .WithMaxIterationCount(20) // we don't want to run more that 20 iterations
                     .AsDefault()) // tell BDN that this are our default settings
-                .WithArtifactsPath(Path.Combine(
-                    Path.GetDirectoryName(typeof(Program).Assembly.Location), ""BenchmarkDotNet.Artifacts""))
+                .With(ConfigOptions.DontOverwriteResults) // tell BDN to not overwrite the results
                 .With(MemoryDiagnoser.Default) // MemoryDiagnoser is enabled by default
                 .With(new OperatingSystemFilter())
                 .With(JsonExporter.Full) // make sure we export to Json (for BenchView integration purpose)","Data generated by the harness should be with the binaries, not drop side-by-side with the source code. I do not agree this should be changed.",.cs,1,1,1
"@@ -34,7 +34,12 @@ namespace Microsoft.CodeAnalysis.Sarif
 
                         var sha256Cng = new SHA256Cng();
                         checksum = sha256Cng.ComputeHash(bufferedStream);
-                        sha256 = BitConverter.ToString(checksum).Replace(""-"", String.Empty);                            
+                        sha256 = BitConverter.ToString(checksum).Replace(""-"", String.Empty);
+
+                        // disposals
+                        md5Cng.Dispose();
+                        sha1Cng.Dispose();
+                        sha256Cng.Dispose();                        
                     }
                 }
             }",As we've discussed: Use `using` statements to ensure that `Dispose` is called even if the intervening code throws an exception.,.cs,1,1,1
"@@ -23,6 +23,8 @@ using Microsoft.Extensions.Configuration;
 using Microsoft.Extensions.DependencyInjection;
 using Microsoft.Extensions.Hosting;
 using Microsoft.OpenApi.Models;
+using OpenTelemetry;
+using OpenTelemetry.Resources;
 using OpenTelemetry.Trace;
 
 namespace Examples.AspNetCore",I had to add both `OpenTelemetry` and `OpenTelemetry.Resources` here because the `AddService` extension method is in the `OpenTelemetry` namespace. Was this intentional? Relates to #1541 in that I think we should aim to be consistent.,.cs,0,1,1
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -22,13 +22,6 @@ namespace System.Diagnostics
         [Benchmark]
         public void GetProcessById() => Process.GetProcessById(_currentProcessId).Dispose();
 
-        [Benchmark]
-        public void EnterLeaveDebugMode()
-        {
-            Process.EnterDebugMode();
-            Process.LeaveDebugMode();
-        }
-        
         [Benchmark]
         public void GetProcesses()
         {","@jorive @billwert I am removing this benchmark because: 1. it does nothing on Unix OSes (not implemented in CoreCLR, instead of throwing does nothing) 2. On Windows it requires some certain privileges to work, it currently fails even on my box (it used to work fine) I am the person who created this benchmark ;)",.cs,0,1,1
"@@ -118,9 +118,9 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Networking
             _uv.read_stop(this);
         }
 
-        public int TryWrite(Libuv.uv_buf_t buf)
+        public void TryWrite(Libuv.uv_buf_t buf)
         {
-            return _uv.try_write(this, new[] { buf }, 1);
+            _uv.try_write(this, new[] { buf }, 1);
         }
 
         private static void UvConnectionCb(IntPtr handle, int status)","TryWrite returns the number of bytes written to a socket or an error. I don't think that removing the returned value is really something one wants to do with this API. It is currently not used, but in the future, if one were to use it, one would check how much of the buffer would have been written by using the returned value and eventually queue the rest of the buffer for writing with a normal Write call.",.cs,1,1,1
"@@ -10,9 +10,9 @@ namespace Datadog.Trace.ClrProfiler.Managed.Tests
     {
         private static readonly List<MethodInfo> StaticInstrumentations = new List<MethodInfo>()
         {
-            typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.BeforeAction)),
-            typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.AfterAction)),
-            typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.Rethrow)),
+             typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.BeforeAction)),
+             typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.AfterAction)),
+             typeof(AspNetCoreMvc2Integration).GetMethod(nameof(AspNetCoreMvc2Integration.Rethrow)),
         };
 
         public static IEnumerable<object[]> GetWrapperMethodWithInterceptionAttributes()",Can you fix this small thing? I think there's an extra space now.,.cs,1,1,1
"@@ -22,6 +22,8 @@ namespace Nethermind.Consensus.Ethash
 {
     public class EthashCache : IEthashDataSet
     {
+        private ArrayPool<uint[]> _arrayPool = ArrayPool<uint[]>.Create(1024 * 1024 * 4, 50);
+        
         private uint[][] Data { get; set; }
 
         public uint Size { get; set; }",why separate pool?,.cs,1,1,0
"@@ -202,6 +202,19 @@ namespace Microsoft.AspNetCore.Server.KestrelTests
             }
         }
 
+        [Fact]
+        public async Task BadRequestIfContentLengthInvalid()
+        {
+            using (var server = new TestServer(context => { return Task.FromResult(0); }))
+            {
+                using (var connection = server.CreateConnection())
+                {
+                    await connection.Send(""GET / HTTP/1.1\r\nContent-Length: NaN\r\n\r\n"");
+                    await ReceiveBadRequestResponse(connection, ""400 Bad Request"", server.Context.DateHeaderValue);
+                }
+            }
+        }
+
         private async Task ReceiveBadRequestResponse(TestConnection connection, string expectedResponseStatusCode, string expectedDateHeaderValue)
         {
             await connection.ReceiveForcedEnd(",Test with negative value too.,.cs,1,1,0
"@@ -23,6 +23,7 @@ namespace Nethermind.Wallet
     public interface IBasicWallet
     {
         Signature Sign(Keccak message, Address address);
+        bool IsUnlocked(Address address);
         
         void Sign(Transaction tx, int chainId)
         {",This look like a common case when we decide to move only one of a group of transactions but truly we should move ll of them or none. I think that if you need to check whether address is unlocked then you should use IWallet instead. IBasicWallet does not include locking / unlocking.,.cs,1,1,1
"@@ -184,6 +184,8 @@ namespace OpenTelemetry.Instrumentation.Http.Implementation
                     HttpInstrumentationEventSource.Log.EnrichmentException(ex);
                 }
 
+                activity.RecordException(exc);
+
                 if (exc is HttpRequestException)
                 {
                     if (exc.InnerException is SocketException exception)",lets discuss and do this in separate PR.,.cs,0,1,0
"@@ -83,7 +83,7 @@ namespace Nethermind.Core.Collections
         public static int BinarySearch<TItem>(this IList<TItem> list, TItem value,  IComparer<TItem> comparer) => list.BinarySearch(value, comparer.Compare);
         
         public static bool TryGetSearchedItem<TComparable>(this IList<TComparable> list, in TComparable activation, out TComparable item) where TComparable : IComparable<TComparable> => 
-            list.TryGetSearchedItem(activation, (b, c) => b.CompareTo(c), out item);
+            list.TryGetSearchedItem(activation, (b, c) => b.CompareTo(c), out item!);
 
         public static bool TryGetForBlock(this IList<long> list, in long blockNumber, out long item) =>
             list.TryGetSearchedItem(blockNumber, (b, c) => b.CompareTo(c), out item);","the other way around, item can be nulll, so out TComparable? item",.cs,1,0,1
"@@ -22,10 +22,12 @@ namespace Nethermind.Blockchain.Processing
     public class BlockProcessedEventArgs : EventArgs
     {
         public Block Block { get; }
+        public TxReceipt[] TxReceipts { get; }
 
-        public BlockProcessedEventArgs(Block block)
+        public BlockProcessedEventArgs(Block block, TxReceipt[] txReceipts)
         {
             Block = block;
+            TxReceipts = txReceipts;
         }
     }
-}
+}",should be allowed to be null I guess as we sometimes may not create receipts,.cs,1,1,1
"@@ -95,7 +95,7 @@ namespace Nethermind.Blockchain.Processing
                     return false;
                 }
 
-                if (transaction.IsEip1559 && !transaction.IsServiceTransaction && senderBalance < (UInt256)transaction.GasLimit * transaction.MaxFeePerGas)
+                if (eip1559Enabled && !transaction.IsServiceTransaction && senderBalance < (UInt256)transaction.GasLimit * transaction.MaxFeePerGas + transaction.Value)
                 {
                     e.Set(TxAction.Skip, $""MaxFeePerGas ({transaction.MaxFeePerGas}) times GasLimit {transaction.GasLimit} is higher than sender balance ({senderBalance})"");
                     return false;","This and the check above in line 90 look similar (same?) as the ones in TransactionProcessor, should we have an extension method or something?",.cs,1,1,1
"@@ -0,0 +1,19 @@
+﻿// Licensed to the .NET Foundation under one or more agreements.
+// The .NET Foundation licenses this file to you under the MIT license.
+// See the LICENSE file in the project root for more information.
+
+using System;
+using Xunit.Sdk;
+
+namespace Xunit
+{
+    /// <summary>
+    /// Apply this attribute to your test method to specify this is a platform specific test.
+    /// </summary>
+    [TraitDiscoverer(""Xunit.NetCore.Extensions.SkipOnTargetFrameworkDiscoverer"", ""Xunit.NetCore.Extensions"")]
+    [AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = false)]
+    public class SkipOnTargetFramework : Attribute, ITraitAttribute
+    {
+        public SkipOnTargetFramework(TargetFrameworkMoniker platform) { }
+    }
+}",This should be named `SkipOnTargetFrameworkAttribute` (with the Attribute suffix).,.cs,1,1,1
"@@ -26,11 +26,15 @@ namespace System.Tests
         [Benchmark]
         [ArgumentsSource(nameof(Int32Values))]
         public string ToString(int value) => value.ToString();
-        
+
+        [Benchmark]
+        [ArgumentsSource(nameof(StringValues))]
+        public int Parse(string value) => int.Parse(value);
+
 #if !NETFRAMEWORK && !NETCOREAPP2_0 // API added in .NET Core 2.1
         [Benchmark]
         [ArgumentsSource(nameof(StringValues))]
-        public int Parse(string value) => int.Parse(value.AsSpan());
+        public int ParseSpan(string value) => int.Parse(value.AsSpan());
 
         [Benchmark]
         [ArgumentsSource(nameof(Int32Values))]",this is a breaking change (benchmark rename) but totally needed and reasonable,.cs,1,1,1
"@@ -59,7 +59,14 @@ namespace Datadog.Trace.Tests
                 Environment = env
             };
             var tracer = new Tracer(settings);
-            Tracer.Instance = tracer;
+            if (Ci.CIVisibility.IsRunning)
+            {
+                Tracer.UnsafeSetTracerInstance(tracer);
+            }
+            else
+            {
+                Tracer.Instance = tracer;
+            }
 
             using (var parentScope = Tracer.Instance.StartActive(""parent""))
             using (var childScope = Tracer.Instance.StartActive(""child""))",Do we need the condition? We could use `Tracer.UnsafeSetTracerInstance(tracer);` in either case right?,.cs,1,1,1
"@@ -14,7 +14,9 @@
 // limitations under the License.
 // </copyright>
 
+using System;
 using System.Diagnostics;
+using OpenTelemetry.Exporter.Jaeger.Implementation;
 
 namespace OpenTelemetry.Exporter
 {",I would move this section to a new method - eg `SetOptionsViaEnvironmentVariables`.,.cs,1,1,0
"@@ -38,6 +38,18 @@ namespace OpenTelemetry.Metrics
 
         public string[] TagKeys { get; set; }
 
+        /// <summary>
+        /// Gets or sets the names of <see cref=""Baggage""/> keys, which,
+        /// if available, will be used as additional tags for Metric
+        /// aggregation.
+        /// <see cref=""Baggage.GetBaggage(string)""/> will be used by the SDK
+        /// internally to obtain the additional tags.
+        /// </summary>
+        /// <remarks>
+        /// It is invalid to specify this for Observable instruments.
+        /// </remarks>
+        public string[] BaggageKeysForAdditionalTags { get; set; }
+
         public virtual Aggregation Aggregation { get; set; }
 
         // TODO: MetricPoints caps can be configured here","I'm not sure if these should be called Tags or Dimensions? It seems the word ""tag"" could mean two different things: 1. The .NET way of calling an Attribute. 2. The Prometheus way of calling a ""dimension"".",.cs,1,1,1
"@@ -31,6 +31,15 @@ namespace Nethermind.Core
             Bytes = new byte[ByteLength];
         }
         
+        public Bloom(Bloom[] blooms)
+        {
+            Bytes = new byte[ByteLength];
+            for (int i = 0; i < blooms.Length; i++)
+            {
+                Accumulate(blooms[i]);
+            }
+        }
+        
         public Bloom(LogEntry[] logEntries, Bloom? blockBloom = null)
         {
             Bytes = new byte[ByteLength];",we could reuse other ctor: public Bloom(Bloom[] blooms) : this {...,.cs,1,1,1
"@@ -112,7 +112,7 @@ namespace OpenTelemetry.Instrumentation.AspNetCore.Implementation
 
             if (activity.IsAllDataRequested)
             {
-                activity.SetCustomProperty(RequestCustomPropertyName, request);
+                this.options.Enrich?.Invoke(activity, ""OnStartActivity"", request);
 
                 var path = (request.PathBase.HasValue || request.Path.HasValue) ? (request.PathBase + request.Path).ToString() : ""/"";
                 activity.DisplayName = path;",this can be user code and can potentially throw. We need to try.catch.log,.cs,1,1,1
"@@ -13,8 +13,10 @@ namespace Microsoft.AspNet.Server.Kestrel.Http
 {
     public class Connection : ConnectionContext, IConnectionControl
     {
-        private static readonly Action<UvStreamHandle, int, object> _readCallback = ReadCallback;
-        private static readonly Func<UvStreamHandle, int, object, Libuv.uv_buf_t> _allocCallback = AllocCallback;
+        private static readonly Action<UvStreamHandle, int, object> _readCallback = 
+            (handle, status, state) => ReadCallback(handle, status, state);
+        private static readonly Func<UvStreamHandle, int, object, Libuv.uv_buf_t> _allocCallback = 
+            (handle, suggestedsize, state) => AllocCallback(handle, suggestedsize, state);
 
         private static long _lastConnectionId;
 ","Do you have to use the `=>` to remove the closure allocation? I think I remember that being the case at one point, but I figured that was a compiler bug that should be fixed by now.",.cs,1,1,1
"@@ -1396,8 +1396,11 @@ namespace pwiz.Skyline.Controls.Graphs
                 {
                     if (IsRunToRun)
                     {
-                        return string.Format(Resources.GraphData_CorrelationLabel_Measured_Time___0__,
-                            _document.MeasuredResults.Chromatograms[_originalIndex].Name);
+                        return _document.MeasuredResults != null && !_document.MeasuredResults.IsEmpty &&
+                               0 <= _originalIndex && _originalIndex < _document.MeasuredResults.Chromatograms.Count
+                            ? string.Format(Resources.GraphData_CorrelationLabel_Measured_Time___0__,
+                                _document.MeasuredResults.Chromatograms[_originalIndex].Name)
+                            : string.Empty;
                     }
                     else
                     {","I think you should make this an ""if/else"" statement instead of ""?:"" so that it's easier to understand. Also, we should probably get rid of the property ""MeasuredResults.IsEmpty"". We never create empty MeasuredResults objects (it's always null instead).",.cs,1,1,1
"@@ -30,12 +30,12 @@ namespace OpenTelemetry.Exporter.Zipkin.Implementation
 
         private static readonly Dictionary<string, int> RemoteEndpointServiceNameKeyResolutionDictionary = new Dictionary<string, int>(StringComparer.OrdinalIgnoreCase)
         {
-            [""net.peer.name""] = 0, // RemoteEndpoint.ServiceName primary.
-            [""peer.service""] = 0, // RemoteEndpoint.ServiceName primary.
-            [""peer.hostname""] = 1, // RemoteEndpoint.ServiceName alternative.
-            [""peer.address""] = 1, // RemoteEndpoint.ServiceName alternative.
-            [""http.host""] = 2, // RemoteEndpoint.ServiceName for Http.
-            [""db.instance""] = 2, // RemoteEndpoint.ServiceName for Redis.
+            [SpanAttributeConstants.PeerServiceKey] = 0, // RemoteEndpoint.ServiceName primary.
+            [""net.peer.name""] = 1, // RemoteEndpoint.ServiceName primary.
+            [""peer.hostname""] = 2, // RemoteEndpoint.ServiceName alternative.
+            [""peer.address""] = 2, // RemoteEndpoint.ServiceName alternative.
+            [""http.host""] = 3, // RemoteEndpoint.ServiceName for Http.
+            [""db.instance""] = 4, // RemoteEndpoint.ServiceName for Redis.
         };
 
         private static readonly ConcurrentDictionary<string, ZipkinEndpoint> LocalEndpointCache = new ConcurrentDictionary<string, ZipkinEndpoint>();","I made Zipkin & Jaeger consistent, but I wasn't sure what should have top priority: ""net.peer.name"" or ""peer.service."" I went with ""peer.service"" because that's what it is called in the Jaeger protocol, but OT spec calls out ""net.peer.name"" specifically. I have a feeling it will change a bunch.",.cs,1,1,1
"@@ -55,7 +55,15 @@ namespace Datadog.Trace
             Settings = settings ?? TracerSettings.FromDefaultSources();
             _agentWriter = agentWriter ?? new AgentWriter(new Api(Settings.AgentUri));
             _scopeManager = scopeManager ?? new AsyncLocalScopeManager();
-            Sampler = sampler ?? new RateByServiceSampler();
+            Sampler = sampler ?? new RuleBasedSampler(new RateLimiter(Settings.MaxTracesSubmittedPerSecond));
+
+            if (!string.IsNullOrEmpty(Settings.CustomSamplingRules))
+            {
+                foreach (var rule in RegexSamplingRule.BuildFromConfigurationString(Settings.CustomSamplingRules))
+                {
+                    Sampler.RegisterRule(rule);
+                }
+            }
 
             // if not configured, try to determine an appropriate service name
             DefaultServiceName = Settings.ServiceName ??",Suggest using `string.IsNullOrWhitespace` instead of `string.IsNullOrEmpty`.,.cs,1,1,0
"@@ -81,7 +81,8 @@ namespace pwiz.Skyline.Model.Results
 
         public override string ToString()
         {
-            return Ratio + (double.IsNaN(StdDev) ? """" : ("" rdotp "" + DotProduct));  // Not L10N
+            // ReSharper disable once LocalizableElement
+            return Ratio + (double.IsNaN(StdDev) ? """" : ("" rdotp "" + DotProduct));
         }
 
         public int CompareTo(object obj)","There's more than one string on this line. Doesn't that mean the ""disable once"" isn't going to work?",.cs,1,1,1
"@@ -5,8 +5,8 @@ namespace Microsoft.CodeAnalysis.Sarif
     public static class VersionConstants                                       
     {                                                                          
         public const string Prerelease = ""-beta"";                       
-        public const string AssemblyVersion = ""1.5.21"";       
-        public const string FileVersion = ""1.5.21"" + "".0"";    
+        public const string AssemblyVersion = ""1.5.22"";       
+        public const string FileVersion = ""1.5.22"" + "".0"";    
         public const string Version = AssemblyVersion + Prerelease;            
     }                                                                          
  }                                                                             ",How'd this get updated? Why don't I see a chance somewhere to SetCurrentVersion.cmd?,.cs,1,1,1
"@@ -14,12 +14,18 @@ namespace Microsoft.AspNet.Server.Kestrel.Http
 {
     public class SocketOutput : ISocketOutput
     {
+        public const int MaxPooledWriteReqs = 1024;
+
         private const int _maxPendingWrites = 3;
         private const int _maxBytesPreCompleted = 65536;
         private const int _initialTaskQueues = 64;
+        private const int _maxWriteContextsPooledPerThread = 128;
 
         private static WaitCallback _returnBlocks = (state) => ReturnBlocks((MemoryPoolBlock2)state);
 
+        [ThreadStatic]
+        private static Queue<WriteContext> _threadWriteContextPool;
+
         private readonly KestrelThread _thread;
         private readonly UvStreamHandle _socket;
         private readonly Connection _connection;","I'm afraid of adding a ThreadStatic. We don't use ThreadStatics anywhere else in Kestrel that I'm aware of. I just checked the default maximum number of worker threads on my machine using ThreadPool.GetMaxThreads, and it was 32,767. I don't like having potentially that many static queues. Considering that each queue could pool up to 128 WriteContexts (and you just calculated the size WriteContext being 88 bytes), that's up to ~370MB of WriteContexts that will never be freed. That's not even considering the size of the queues themselves.",.cs,1,0,1
"@@ -38,7 +38,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets
             _remoteEndPoint = (IPEndPoint)_socket.RemoteEndPoint;
         }
 
-        public async void Start(IConnectionHandler connectionHandler)
+        public async Task Start(IConnectionHandler connectionHandler)
         {
             try
             {",Can we rename this to `StartAsync`?,.cs,1,1,1
"@@ -660,7 +660,11 @@ namespace pwiz.Skyline.Model.AuditLog
 
         public AuditLogEntry ChangeExtraInfo(string extraInfo)
         {
-            return ChangeProp(ImClone(this), im => im.ExtraInfo = extraInfo);
+            return ChangeProp(ImClone(this), im =>
+            {
+                im._enExtraInfo = null;
+                im.ExtraInfo = extraInfo;
+            });
         }
 
         #endregion",Should the setter for ExtraInfo do this? Are their other cases where it makes sense to set ExtraInfo without doing this?,.cs,1,1,1
"@@ -115,7 +115,13 @@ namespace Datadog.Trace.ClrProfiler.Integrations
         /// <param name=""moduleVersionPtr"">A pointer to the module version GUID.</param>
         /// <returns>Returns the value returned by the inner method call.</returns>
         [InterceptMethod(
-            TargetAssembly = ""System.Net"",
+            TargetAssembly = ""System"", // .NET Framework
+            TargetType = WebRequestTypeName,
+            TargetSignatureTypes = new[] { ""System.Threading.Tasks.Task`1<System.Net.WebResponse>"" },
+            TargetMinimumVersion = Major4,
+            TargetMaximumVersion = Major4)]
+        [InterceptMethod(
+            TargetAssembly = ""System.Net.Requests"", // .NET Core
             TargetType = WebRequestTypeName,
             TargetSignatureTypes = new[] { ""System.Threading.Tasks.Task`1<System.Net.WebResponse>"" },
             TargetMinimumVersion = Major4,","Maybe this change was already in the branch when I handed it off, but is this change necessary for this PR or can it be moved out?",.cs,0,1,1
"@@ -21,5 +21,6 @@ namespace Nethermind.Core.Specs.ChainSpecStyle
     public interface IChainSpecLoader
     {
         ChainSpec Load(byte[] data);
+        ChainSpec Load(string jsonData);
     }
 }",i remember there was a reason for which I had to make it byte[] only... I do not remember the exact reason. I think that not every implementation could provide a string (do not know why),.cs,1,1,0
"@@ -470,14 +470,11 @@ namespace pwiz.Skyline.Controls.Graphs
                 progressControl.ShowGraph += (sender, args) => ShowGraph();
                 progressControl.ShowLog += (sender, args) => ShowLog();
                 controlsToAdd.Add(progressControl);
+                _fileProgressControls.Add(filePath.GetLocation(), progressControl);
                 first = false;
             }
 
             flowFileStatus.Controls.AddRange(controlsToAdd.ToArray());
-            foreach (var control in controlsToAdd)
-            {
-                _fileProgressControls.Add(control.FilePath.GetLocation(), control);
-            }
         }
 
         private void CancelMissingFiles(MultiProgressStatus status)",This seems to be a repeat or removal of Nick's recent change and not related to this PR.,.cs,0,1,1
"@@ -105,6 +105,10 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal
         {
             try
             {
+                // TODO: When we start tracking all connection middleware for shutdown, go back
+                // to logging connections tart and stop in ConnectionDispatcher so we get these
+                // logs for all connection middleware.
+                Log.ConnectionStart(ConnectionId);
                 KestrelEventSource.Log.ConnectionStart(this);
 
                 AdaptedPipeline adaptedPipeline = null;",Why did you move this?,.cs,1,1,0
"@@ -49,12 +49,12 @@ namespace NLog.UnitTests.Layouts
             {
                 Attributes =
                     {
-                        new JsonAttribute(""date"", ""${longdate}""),
-                        new JsonAttribute(""level"", ""${level}""),
-                        new JsonAttribute(""message"", ""${message}""),
+                        new JsonAttribute(""date"", ""${longdate}"", true),
+                        new JsonAttribute(""level"", ""${level}"", true),
+                        new JsonAttribute(""message"", ""${message}"", true),
                     }
             };
-            
+
             var ev = new LogEventInfo();
             ev.TimeStamp = new DateTime(2010, 01, 01, 12, 34, 56);
             ev.Level = LogLevel.Info;","Please don't change existing unit tests, without good reason. (this is also a hint that it isn't backwards compatible)",.cs,1,1,1
"@@ -13,6 +13,7 @@ namespace System.Buffers.Tests
     [BenchmarkCategory(Categories.CoreFX)]
     [GenericTypeArguments(typeof(byte))] // value type
     [GenericTypeArguments(typeof(object))] // reference type
+    [GcServer(true)] // Server GC is the most important scenario for ArrayPool
     public class RentReturnArrayPoolTests<T>
     {
         private readonly ArrayPool<T> _createdPool = ArrayPool<T>.Create();",Is doing this per test suite the right thing to do? Or would it be better to do GcServer(false) runs for all benchmarks and GcServer(true) runs for all benchmarks? I imagine that many of our benchmarks are allocation-heavy and would be influenced by client vs server GC.,.cs,1,1,1
"@@ -0,0 +1,13 @@
+namespace Datadog.Trace.Agent
+{
+    internal static class TraceRequestDecorator
+    {
+        public static void AddHeaders(IApiRequest request)
+        {
+            request.AddHeader(AgentHttpHeaderNames.Language, "".NET"");
+            request.AddHeader(AgentHttpHeaderNames.TracerVersion, TracerConstants.AssemblyVersion);
+            // don't add automatic instrumentation to requests from datadog code
+            request.AddHeader(HttpHeaderNames.TracingEnabled, ""false"");
+        }
+    }
+}","This isn't a big deal, but without a full Decorator pattern, this feels a little weird to me. Maybe this could be `IApiRequestExtensions`?",.cs,1,1,1
"@@ -45,17 +45,6 @@ namespace Microsoft.CodeAnalysis.Sarif
 
         private static string[] InvalidFiles = new string[]
         {
-            @""ClangAnalyzer\ArrayDataTypes.xml.sarif"",
-            @""ClangAnalyzer\BadMissingString.xml.sarif"",
-            @""ClangAnalyzer\ClangAnalyzer_issueLog1_raw.xml.sarif"",
-            @""ClangAnalyzer\DictionaryDataTypes.xml.sarif"",
-            @""ClangAnalyzer\DivByZero.xml.sarif"",
-            @""ClangAnalyzer\FileNumberCoverage.xml.sarif"",
-            @""ClangAnalyzer\GarbageValueLog.xml.sarif"",
-            @""ClangAnalyzer\MediumLog.xml.sarif"",
-            @""ClangAnalyzer\MissingLocation.xml.sarif"",
-            @""ClangAnalyzer\RealLog.xml.sarif"",
-            @""CppCheck\CppCheck_issueLog1_raw.xml.sarif""
         };
 
         public static IEnumerable<object[]> TestCases",I like that you left the empty array in there.,.cs,1,1,0
"@@ -18,6 +18,7 @@ namespace Nethermind.Trie.Pruning
 {
     public interface IPruningStrategy
     {
+        bool Enabled { get; }
         bool ShouldPrune(in long currentMemory);
     }
-}
+}",what does it mean enabled?,.cs,1,0,1
"@@ -1950,6 +1950,7 @@ namespace pwiz.Skyline.Util
         {
             return d.HasValue ? d.Value.ToString(LocalizationHelper.CurrentCulture) : String.Empty;
         }
+
     }
 
     /// <summary>",We should get this file cleanly reverted and out of the diffs.,.cs,1,1,1
"@@ -45,7 +45,7 @@ namespace OpenTelemetry.Trace
             var zpagesExporter = new ZPagesExporter(exporterOptions);
 
             // TODO: Pick Simple vs Batching based on ZipkinExporterOptions
-            return builder.AddProcessor(new SimpleActivityProcessor(zpagesExporter));
+            return builder.AddProcessor(new BatchExportActivityProcessor(zpagesExporter));
         }
     }
 }",I guess ZPages can use the simple processor?,.cs,1,1,1
"@@ -55,6 +55,11 @@ namespace Nethermind.TxPool.Filters
 
             for (int i = 0; i < transactions.Length; i++)
             {
+                if (transactions[i].Nonce < account.Nonce)
+                {
+                    continue;
+                }
+
                 if (transactions[i].Nonce < tx.Nonce)
                 {
                     overflow |= UInt256.MultiplyOverflow(",it feels like this should be a separate filter -> why the nonce check is added to the TooExpensiveTxFilter?,.cs,1,1,1
"@@ -19,7 +19,7 @@ namespace Microsoft.DotNet.Build.Tasks
 
         private const string ConfigurationPropsFilename = ""Configurations.props"";
         private static Regex s_configurationConditionRegex = new Regex(@""'\$\(Configuration\)\|\$\(Platform\)' ?== ?'(?<config>.*)'"");
-        private static string[] s_configurationSuffixes = new [] { ""Debug|AnyCPU"", ""Release|AnyCPU"" };
+        private static string[] s_configurationSuffixes = new [] { ""Debug"", ""Release"" };
 
         public override bool Execute()
         {",Just to confirm: every consumer of this is doing the switch so you don't need to keep the old format?,.cs,1,1,1
"@@ -263,14 +263,15 @@ namespace NLog.Layouts
                 }
                 catch (Exception exception)
                 {
-                    if (exception.MustBeRethrown())
+                    //also check IsErrorEnabled, otherwise 'MustBeRethrown' writes it to Error
+                    if (InternalLogger.IsWarnEnabled || InternalLogger.IsErrorEnabled)
                     {
-                        throw;
+                        InternalLogger.Warn(exception, ""Exception in Append(): {0}."", renderer.GetType().FullName);
                     }
 
-                    if (InternalLogger.IsWarnEnabled)
+                    if (exception.MustBeRethrown())
                     {
-                        InternalLogger.Warn(""Exception in {0}.Append(): {1}."", renderer.GetType().FullName, exception);
+                        throw;
                     }
                 }
             }",`Append()`? Is this message text not outdated?,.cs,1,1,1
"@@ -3,12 +3,16 @@
 // This product includes software developed at Datadog (https://www.datadoghq.com/). Copyright 2017 Datadog, Inc.
 // </copyright>
 
+using System.ComponentModel;
+
 #if !NETFRAMEWORK
 namespace Datadog.Trace.ClrProfiler.AutoInstrumentation.Azure.Functions
 {
     /// <summary>
     /// Enum for ducktyping
     /// </summary>
+    [Browsable(false)]
+    [EditorBrowsable(EditorBrowsableState.Never)]
     public enum AzureFunctionsExecutionReason
     {
         /// <summary>Indicates a function executed because of an automatic trigger.</summary>",Many of these changes are not breaking and should also go into 1.x.,.cs,0,1,1
"@@ -31,7 +31,7 @@ namespace Nethermind.Blockchain.Producers
         private Task _producerTask;
         private readonly CancellationTokenSource _loopCancellationTokenSource = new CancellationTokenSource();
         private readonly CancellationTokenSource _stepCancellationTokenSource = new CancellationTokenSource();
-        private bool _canProduce;
+        private bool _canProduce = true;
 
         protected BaseLoopBlockProducer(
             IPendingTxSelector pendingTxSelector,","I had some nasty forks with this true as default when syncing pre-existing networks, this is under investigation",.cs,0,1,0
"@@ -259,7 +259,7 @@ namespace OpenTelemetry.Context.Propagation
                 return Convert.ToByte(c);
             }
 
-            throw new ArgumentOutOfRangeException(nameof(c), $""Invalid character: {c}."");
+            throw new ArgumentOutOfRangeException(nameof(c), c, $""Invalid character: {c}."");
         }
     }
 }",A general question - do we want all the exception messages to be ended with period `.` or not. I don't have strong opinion on either way. I would suggest that we 1) follow the .NET convention (if there is one) and 2) make it consistent in this repo.,.cs,1,1,1
"@@ -344,9 +344,12 @@ namespace Nethermind.JsonRpc.Modules.Eth
         {
             try
             {
-                Keccak txHash =
+                (Keccak txHash, AddTxResult? addTxResult) =
                     await _txSender.SendTransaction(tx, txHandlingOptions | TxHandlingOptions.PersistentBroadcast);
-                return ResultWrapper<Keccak>.Success(txHash);
+
+                return addTxResult == AddTxResult.Added
+                    ? ResultWrapper<Keccak>.Success(txHash)
+                    : ResultWrapper<Keccak>.Fail(string.Concat(txHash, "": Transaction not added - "", addTxResult.ToString()), ErrorCodes.TransactionRejected);
             }
             catch (SecurityException e)
             {","Can we check what error messages Geth returns and be more standard? Not sure if ""Transaction not added -"" prefix is adding any value, but not sure.",.cs,1,1,1
"@@ -22,13 +22,15 @@ namespace Datadog.Trace.ClrProfiler.Integrations
         /// <summary>
         /// Type for unobtrusive hooking into Microsoft.AspNetCore.Mvc.Core pipeline.
         /// </summary>
-        private const string DiagnosticSource = ""Microsoft.AspNetCore.Mvc.Internal.MvcCoreDiagnosticSourceExtensions"";
+        private const string DiagnosticSourceTypeName = ""Microsoft.AspNetCore.Mvc.Internal.MvcCoreDiagnosticSourceExtensions"";
 
         /// <summary>
         /// Base type used for traversing the pipeline in Microsoft.AspNetCore.Mvc.Core.
         /// </summary>
-        private const string ResourceInvoker = ""Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker"";
+        private const string ResourceInvokerTypeName = ""Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker"";
 
+        private static readonly Type DiagnosticSourceType = Type.GetType($""{DiagnosticSourceTypeName}, {AspnetMvcCore}"");
+        private static readonly Type ResourceInvokerType = Type.GetType($""{ResourceInvokerTypeName}, {AspnetMvcCore}"");
         private static readonly ILog Log = LogProvider.GetLogger(typeof(AspNetCoreMvc2Integration));
 
         private readonly object _httpContext;","I like the `TypeName` postfix for clarity, I'm going to adopt that.",.cs,1,1,1
"@@ -23,6 +23,11 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal
 
         private static readonly Action<object, object> _postCallbackAdapter = (callback, state) => ((Action<object>)callback).Invoke(state);
         private static readonly Action<object, object> _postAsyncCallbackAdapter = (callback, state) => ((Action<object>)callback).Invoke(state);
+        private static readonly Libuv.uv_walk_cb _heartbeatWalkCallback = (ptr, arg) =>
+        {
+            var handle = UvMemory.FromIntPtr<UvHandle>(ptr);
+            (handle as UvStreamHandle)?.Connection?.Tick((long)arg);
+        };
 
         // maximum times the work queues swapped and are processed in a single pass
         // as completing a task may immediately have write data to put on the network",nit: call it `_heartbeatWalkCallbackAdapter` to be consistent with the other ones.,.cs,1,1,1
"@@ -32,7 +32,7 @@ namespace OpenTelemetry.Exporter
     /// Exporter consuming <see cref=""Metric""/> and exporting the data using
     /// the OpenTelemetry protocol (OTLP).
     /// </summary>
-    [AggregationTemporality(AggregationTemporality.Both, AggregationTemporality.Cumulative)]
+    [AggregationTemporality(AggregationTemporality.Cumulative | AggregationTemporality.Delta, AggregationTemporality.Cumulative)]
     public class OtlpMetricsExporter : BaseOtlpExporter<Metric>
     {
         private readonly OtlpCollector.MetricsService.IMetricsServiceClient metricsClient;","Not related to this PR, but I'm not following why the OTLP exporter is marked to prefer `Cumulative`. Seems to me the OTLP exporter should effectively not have a preference. For a given service, is it currently not possible for some metrics to have a cumulative aggregation and others to have a delta aggregation?",.cs,0,1,1
"@@ -13,12 +13,12 @@ namespace Datadog.Trace
     /// all newly created spans that are not created with the ignoreActiveSpan
     /// parameter will be automatically children of the active span.
     /// </summary>
-    public class Scope : IDisposable
+    public class Scope : IScope
     {
         private readonly IScopeManager _scopeManager;
         private readonly bool _finishOnClose;
 
-        internal Scope(Scope parent, Span span, IScopeManager scopeManager, bool finishOnClose)
+        internal Scope(Scope parent, ISpan span, IScopeManager scopeManager, bool finishOnClose)
         {
             Parent = parent;
             Span = span;","In the latest set of commits, I removed the member `Scope.InternalSpan` so the change is only that `Scope.Span` has type `ISpan`. This should remove concerns about nullability. Now at runtime we still don't know what runtime type `Scope.Span` actually is, so we have to test against `Scope.Span is Span` returning a null or non-null value",.cs,1,1,1
"@@ -199,7 +199,7 @@ namespace Datadog.Trace
                     return true;
 
                 case HttpHeaderNames.SamplingPriority:
-                    var samplingPriority = SamplingPriority ?? TraceContext?.SamplingPriority;
+                    var samplingPriority = SamplingPriority;
 
                     value = samplingPriority != null ? ((int)samplingPriority.Value).ToString() : null;
                     return true;","I think we want to keep this. The sampling priority is sometimes found in `SpanContext` (when coming from a propagated context) and sometimes in `TraceContext`, so we always need the fallback. I'm looking into fixing this discrepancy in the near future.",.cs,1,1,1
"@@ -90,8 +90,8 @@ namespace Nethermind.Baseline.Test
                 transaction.SenderAddress = key.Address;
                 ecdsa.Sign(key, transaction, true);
                 transaction.Hash = transaction.CalculateHash();
-                AddTxResult result = testRpc.TxPool.SubmitTx(transaction, TxHandlingOptions.None);
-                if (result != AddTxResult.Added)
+                AcceptTxResult result = testRpc.TxPool.SubmitTx(transaction, TxHandlingOptions.None);
+                if (!result.Equals(AcceptTxResult.Accepted))
                 {
                     throw new Exception(""failed to add "" + result);
                 }",implicit bool cast,.cs,1,0,0
"@@ -144,12 +144,17 @@ namespace pwiz.Skyline.Model.Irt
         {
             RequireUsable();
 
-            var returnStandard = peptides.Where(_database.IsStandard).Distinct().ToArray();
+            var pepArr = peptides.ToArray();
+            var returnStandard = pepArr.Where(_database.IsStandard).Distinct().ToArray();
             var returnCount = returnStandard.Length;
             var databaseCount = _database.StandardPeptideCount;
 
             if (!IsAcceptableStandardCount(databaseCount, returnCount))
+            {
+                Console.Out.WriteLine(@""Database standards: {0}"", string.Join(@""; "", _database.StandardPeptides.Select(pep => pep.ToString())));
+                Console.Out.WriteLine(@""Chosen ({0}): {1}"", pepArr.Length, string.Join(@""; "", pepArr.Select(pep => pep.ToString())));
                 throw new IncompleteStandardException(this);
+            }
 
             minCount = MinStandardCount(databaseCount);
             return returnStandard;","The pep.ToString() is not necessary. You can just do: string.Join(@""; "", _database.StandardPeptides)",.cs,1,1,1
"@@ -100,8 +100,15 @@ namespace Nethermind.Runner.Ethereum.Steps
             _ctx.SyncPeerPool = new SyncPeerPool(_ctx.BlockTree, _ctx.NodeStatsManager, maxPeersCount, _ctx.LogManager);
             _ctx.DisposeStack.Push(_ctx.SyncPeerPool);
             
-            SyncProgressResolver syncProgressResolver = new SyncProgressResolver(_ctx.BlockTree, _ctx.ReceiptStorage, _ctx.DbProvider.StateDb, _syncConfig, _ctx.LogManager);
+            SyncProgressResolver syncProgressResolver = new SyncProgressResolver(_ctx.BlockTree, _ctx.ReceiptStorage, _ctx.DbProvider.StateDb, _ctx.DbProvider.BeamStateDb, _syncConfig, _ctx.LogManager);
             MultiSyncModeSelector syncModeSelector = new MultiSyncModeSelector(syncProgressResolver, _ctx.SyncPeerPool, _syncConfig, _ctx.LogManager);
+            if (_ctx.SyncModeSelector != null)
+            {
+                // this is really bad and is a result of lack of proper dependency management
+                PendingSyncModeSelector pendingOne = (PendingSyncModeSelector) _ctx.SyncModeSelector;
+                pendingOne.SetActual(syncModeSelector);
+            }
+            
             _ctx.SyncModeSelector = syncModeSelector;
             _ctx.DisposeStack.Push(syncModeSelector);
             ",maybe just inject delegate to BeaSyncDb in the first place? Or SyncModeSelectorSource ;),.cs,1,1,1
"@@ -86,6 +86,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
         public void Start()
         {
             Log.ConnectionStart(ConnectionId);
+            KestrelEventSource.Log.ConnectionStart(this);
 
             // Start socket prior to applying the ConnectionAdapter
             _socket.ReadStart(_allocCallback, _readCallback, this);",Can we move this into `KestrelTrace`?,.cs,1,1,0
"@@ -75,7 +75,7 @@ namespace NLog.Targets
         /// <value>The endpoint address.</value>
         /// <docgen category='Connection Options' order='10' />
         [RequiredParameter]
-        public string EndpointAddress { get; set; }
+        public virtual string EndpointAddress { get; set; }
 
 #if WCF_SUPPORTED
         /// <summary>",This is the only line that should change. Ignore any other file changes.,.cs,1,1,0
"@@ -10,10 +10,13 @@ using Microsoft.AspNetCore.Server.Kestrel.Filter;
 using Microsoft.AspNetCore.Server.Kestrel.Filter.Internal;
 using Microsoft.AspNetCore.Server.Kestrel.Internal.Infrastructure;
 using Microsoft.AspNetCore.Server.Kestrel.Internal.Networking;
+using Microsoft.Extensions.Internal;
 using Microsoft.Extensions.Logging;
 
 namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
 {
+    using System.IO.Pipelines;
+
     public class Connection : ConnectionContext, IConnectionControl
     {
         // Base32 encoding - in ascii sort order for easy text based sorting",nit: move `using` outside of namespace,.cs,1,1,1
"@@ -58,11 +58,12 @@ namespace Datadog.Trace.Ci
                 // Clean branch name
                 if (!string.IsNullOrEmpty(Branch))
                 {
-                    var regex = new Regex(@""^refs\/heads\/(.*)|refs\/(.*)$"", RegexOptions.Compiled);
+                    var regex = new Regex(@""^refs\/heads\/(.*)|refs\/tags\/(.*)|refs\/(.*)$"", RegexOptions.Compiled);
                     var match = regex.Match(Branch);
-                    if (match.Success && match.Groups.Count == 3)
+                    if (match.Success && match.Groups.Count == 4)
                     {
-                        Branch = !string.IsNullOrWhiteSpace(match.Groups[1].Value) ? match.Groups[1].Value : match.Groups[2].Value;
+                        Branch = !string.IsNullOrWhiteSpace(match.Groups[1].Value) ? match.Groups[1].Value : match.Groups[3].Value;
+                        Tag = match.Groups[2].Value;
                     }
                 }
             }","As the number of groups is increasing, you should consider using named groups for better readability",.cs,1,1,1
"@@ -50,7 +50,7 @@ namespace NLog.UnitTests
         private string appConfigContents = @""
 <configuration>
 <configSections>
-    <section name='nlog' type='NLog.Config.ConfigSectionHandler, NLog' requirePermission='false' />
+    <section name='nlog' type='NLog.Config.XmlLoggingConfigurationSection, NLog' requirePermission='false' />
 </configSections>
 
 <nlog>",This seems not be backwards compatible. I think we should rename the class back to `ConfigSectionHandler`,.cs,1,1,1
"@@ -63,7 +63,7 @@ namespace Nethermind.HealthChecks
                     args: new object[] { _nodeHealthService });
             if (_healthChecksConfig.UIEnabled)
             {
-                service.AddHealthChecksUI(setup =>
+                service.AddHealthChecksUI(setupSettings: setup =>
                 {
                     setup.AddHealthCheckEndpoint(""health"", BuildEndpointForUi());
                     setup.SetEvaluationTimeInSeconds(_healthChecksConfig.PollingInterval);","This change was necessary because of the upgrade from `AspNetCore.HealthChecks.UI` 3.x to 5.x. I am not actually familiar with this syntax so I don't know what it is doing, but whatever it is doing it seemed to be necessary for things to compile.  ",.cs,1,1,1
"@@ -22,7 +22,7 @@ namespace Datadog.Trace.ClrProfiler.Integrations
         private const string HttpClientHandlerTypeName = ""HttpClientHandler"";
 
         private const string HttpMessageHandler = SystemNetHttp + ""."" + HttpMessageHandlerTypeName;
-        private const string HttpClientHandler = SystemNetHttp + ""."" + HttpClientHandlerTypeName;
+        private const string HttpClientHandlerConst = SystemNetHttp + ""."" + HttpClientHandlerTypeName;
         private const string SendAsync = ""SendAsync"";
 
         private static readonly Vendors.Serilog.ILogger Log = DatadogLogging.GetLogger(typeof(HttpMessageHandlerIntegration));","nit: should we rename both of these to `FooTypeFullName` to match the `FooTypeName` above? If I understand correctly, the difference is that these include the namespace with the name.",.cs,1,1,1
"@@ -89,5 +89,15 @@ namespace NLog.Targets
             QuoteKeys = true;
             MaxRecursionLimit = 10;
         }
+
+        /// <summary>Registers a type<see cref=""T:System.Type"" /> to be excluded from serialization.</summary>
+        public static void RegisterSerializationExclusion(Type t) => NLog.Internal.ObjectReflectionCache.SerializationExclusionList.Add(x => x == t);
+        /// <summary>Registers a type<see cref=""T:System.Type"" /> to be excluded from serialization.</summary>
+        public static void RegisterSerializationExclusion<T>() => NLog.Internal.ObjectReflectionCache.SerializationExclusionList.Add(x => x == typeof(T));
+        /// <summary>Registers a custom evaluation function to determine if a given type should be serialized.  If the func returns true, the object's ToString() will be invoked.  If false, the object will be serialized.</summary>
+        public static void RegisterSerializationExclusion(Func<Type, bool> func) => NLog.Internal.ObjectReflectionCache.SerializationExclusionList.Add(func);
+        /// <summary>Resets the list for custom serialization.</summary>
+        public static void ResetSerializationExclusions() => NLog.Internal.ObjectReflectionCache.SerializationExclusionList.Clear();
+
     }
 }","I don't believe these methods belong in this class, but I couldn't find a better class. Any suggestions?",.cs,1,1,1
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -406,6 +406,8 @@ namespace Nethermind.State
                     Set(cellByAddress.Key, _zeroValue);
                 }
             }
+
+            _storages[address] = new StorageTree(_stateDb, Keccak.EmptyTreeHash);
         }
 
         private enum ChangeType",this is the fix,.cs,1,0,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -13,7 +13,7 @@ namespace MvvmCross.Platforms.Android.Views
         Intent GetIntentFor(MvxViewModelRequest request);
 
         // Important: if calling GetIntentWithKeyFor then you must later call RemoveSubViewModelWithKey on the returned key
-        Tuple<Intent, int> GetIntentWithKeyFor(IMvxViewModel existingViewModelToUse);
+        (Intent Intent, int Key) GetIntentWithKeyFor(IMvxViewModel existingViewModelToUse, MvxViewModelRequest request);
 
         void RemoveSubViewModelWithKey(int key);
     }",Please lowercase return names.,.cs,1,1,1
"@@ -0,0 +1,10 @@
+﻿namespace Microsoft.Azure.Cosmos.CosmosElements
+{
+    internal abstract class CosmosNull : CosmosElement
+    {
+        protected CosmosNull()
+            : base(CosmosElementType.Null)
+        {
+        }
+    }
+}",does this class (also Boolean) need to be abstract?,.cs,1,1,1
"@@ -59,7 +59,7 @@ namespace Microsoft.AspNet.Server.Kestrel.Http
 
                                 DispatchPipe.ReadStart(
                                     (_1, _2, _3) => buf,
-                                    (_1, status2, error2, state2) =>
+                                    (_1, status2, errCode, error2, state2) =>
                                     {
                                         if (status2 < 0)
                                         {","wtf is _1, status2, errCode, erro2, state2? I know we have nested lambdas by maybe this is a case for a method...",.cs,1,0,1
"@@ -16,6 +16,7 @@
 
 using System.Runtime.CompilerServices;
 
+[assembly: InternalsVisibleTo(""OpenTelemetry"" + AssemblyInfo.PublicKey)]
 [assembly: InternalsVisibleTo(""OpenTelemetry.Tests"" + AssemblyInfo.PublicKey)]
 [assembly: InternalsVisibleTo(""OpenTelemetry.Shims.OpenTracing.Tests"" + AssemblyInfo.PublicKey)]
 [assembly: InternalsVisibleTo(""DynamicProxyGenAssembly2"" + AssemblyInfo.MoqPublicKey)]",which particular class/api is triggering this change? can we keep using shared file approach instead?,.cs,1,1,1
"@@ -0,0 +1,16 @@
+﻿using System;
+using MvvmCross.Core.ViewModels;
+
+namespace MvvmCross.Forms.Views.Hints
+{
+    public class MvxPopToRootPresentationHint
+        : MvxPresentationHint
+    {
+        public MvxPopToRootPresentationHint(bool animated = true)
+        {
+            Animated = animated;
+        }
+
+        public bool Animated { get; set; }
+    }
+}",Same about this presentation hint,.cs,0,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -52,6 +52,8 @@ namespace Nethermind.Runner.Ethereum.Steps
 
                 JsonRpcService jsonRpcService = new(_api.RpcModuleProvider, _api.LogManager);
 
+                _api.EthereumJsonSerializer.RegisterConverters(jsonRpcService.Converters);
+                
                 JsonRpcProcessor jsonRpcProcessor = new(
                     jsonRpcService,
                     _api.EthereumJsonSerializer,",This change will register JSON RPC converters for the API serializer that is used in multiple places. Is it OK ? HTTP JSON RPC uses own instance of the serializer. Maybe we should do the same for the sockets or share the same instance with the HTTP module ?,.cs,1,1,1
"@@ -42,7 +42,7 @@ namespace OpenTelemetry.Trace
         /// <param name=""attributes"">Link attributes.</param>
         public Link(in SpanContext spanContext, SpanAttributes attributes)
         {
-            this.ActivityLink = new ActivityLink(spanContext.ActivityContext, attributes.Attributes);
+            this.ActivityLink = new ActivityLink(spanContext.ActivityContext, attributes?.Attributes ?? null);
         }
 
         /// <summary>","`?? null` is basically a noop :smile: `new ActivityLink(spanContext.ActivityContext, attributes?.Attributes);` should accomplish the same.",.cs,1,1,1
"@@ -186,6 +186,8 @@ namespace OpenTelemetry
             this.shutdownDrainTarget = this.circularBuffer.AddedCount;
             this.shutdownTrigger.Set();
 
+            OpenTelemetrySdkEventSource.Log.DroppedExportProcessorItems(this.GetType().Name, this.droppedCount);
+
             if (timeoutMilliseconds == Timeout.Infinite)
             {
                 this.exporterThread.Join();","this is not the exporter name. this'd be the name of the batchexportprocessor. Exporter example is ""OTLPExporter"", ""ZipkinExporter"" etc.",.cs,1,1,1
"@@ -420,6 +420,13 @@ namespace Datadog.Trace.Configuration
             /// </summary>
             /// <seealso cref=""TracerSettings.RouteTemplateResourceNamesEnabled""/>
             public const string RouteTemplateResourceNamesEnabled = ""DD_TRACE_ROUTE_TEMPLATE_RESOURCE_NAMES_ENABLED"";
+
+            /// <summary>
+            /// Feature Flag: disables the replacement of periods by underscores in header tags.
+            /// This is needed for compatibility with other tracers
+            /// </summary>
+            /// <seealso cref=""TracerSettings.LeavePeriodsInHeaderTags""/>
+            public const string LeavePeriodsInHeaderTags = ""DD_TRACE_LEAVE_PERIODS_IN_HEADER_TAGS"";
         }
     }
 }","The standard name for feature flags is `DD_TRACE_{0}_ENABLED`. I think we should probably call this `DD_TRACE_REPLACE_HEAD_TAG_PERIODS_ENABLED`. This moves from `leave` to `replace` because ""replace"" feels like a positive action which is preferable for booleans. The default would then be `true`, and customers can disable the flag. Not sure if everyone will agree with that though :D",.cs,1,1,1
"@@ -47,7 +47,7 @@ namespace TestPerf // Note: tests in the ""TestPerf"" namespace only run when the
         public void WatersIMSImportTest()
         {
             Log.AddMemoryAppender();
-            TestFilesZip = GetPerfTestDataURL(@""PerfImportResultsWatersIMS.zip"");
+            TestFilesZip = GetPerfTestDataURL(@""PerfImportResultsWatersIMSv2.zip""); // v2 has _func003.cdt file removed, to test our former assumption that lockmass would have IMS data if other functions did and vice verse
             TestFilesPersistent = new[] { ""ID12692_01_UCA168_3727_040714.raw"", ""ID12692_01_UCA168_3727_040714_IA_final_fragment.csv"" }; // List of files that we'd like to unzip alongside parent zipFile, and (re)use in place
 
             MsDataFileImpl.PerfUtilFactory.IssueDummyPerfUtils = false; // Turn on performance measurement",Does this leave other tests still testing that the lockmass-with-IMS test still works?,.cs,1,1,1
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -39,8 +39,8 @@ namespace OpenTelemetry.Trace
         /// <summary>
         /// Adds given activitysource names to the list of subscribed sources.
         /// </summary>
-        /// <param name=""names"">Activity source names.</param>
+        /// <param name=""sources"">Activity source names.</param>
         /// <returns>Returns <see cref=""TracerProviderBuilder""/> for chaining.</returns>
-        public abstract TracerProviderBuilder AddSource(params string[] names);
+        public abstract TracerProviderBuilder AddSource(params Source[] sources);
     }
 }","We can keep the string version as well, and internally convert that to use Source. Most users don't care about Version, so they can use the easy version.",.cs,1,1,1
"@@ -24,6 +24,11 @@ namespace OpenTelemetry.Metrics
     {
         private string name;
 
+        public MetricConsoleExporter()
+            : this(string.Empty)
+        {
+        }
+
         public MetricConsoleExporter(string name)
         {
             this.name = name;",It is a bit confusing to have the exporter class derived from processor class. Not introduced by this PR so no need to block on it.,.cs,0,1,1
"@@ -1,4 +1,7 @@
-﻿using System;
+﻿// Copyright (c) Microsoft Corporation. All rights reserved.
+// Licensed under the MIT license. See LICENSE file in the project root for full license information.
+
+using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Threading.Tasks;",Nitpick : Put using statements inside namespace declaration.,.cs,1,1,1
"@@ -892,7 +892,7 @@ namespace pwiz.Skyline.EditUI
                     Adduct.Tips;
             }
             // ReSharper restore LocalizableElement
-            MessageBox.Show(this, helpText, Resources.PasteDlg_btnTransitionListHelp_Click_Transition_List_Help);
+            MultiButtonMsgDlg.Show(this, helpText, MessageBoxButtons.OK, DialogResult.OK, Resources.PasteDlg_btnTransitionListHelp_Click_Transition_List_Help);
         }
 
         private void btnCancel_Click(object sender, EventArgs e)",Should be MessageDlg.Show(),.cs,1,1,0
"@@ -1,12 +1,19 @@
 // Copyright (c) .NET Foundation. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
+using System;
 using Microsoft.AspNetCore.Server.Kestrel.Filter;
 
 namespace Microsoft.AspNetCore.Server.Kestrel
 {
     public interface IKestrelServerInformation
     {
+        TimeSpan ExecutionTimeout { get; set; }
+
+        TimeSpan HeadersCompleteTimeout { get; set; }
+
+        TimeSpan KeepAliveTimeout { get; set; }
+
         int ThreadCount { get; set; }
 
         bool NoDelay { get; set; }","KeepAlive and HeadersComplete are reasonable, but I don't think we need or want ExecutionTimeout at the server level. A) The same functionality can be provided in app/middleware code. B) The timeout is un-enforceable. You can't force an app to abandon a request, you can only close the socket and trip the token. The RequestAborted CancellationToken is at best a hint. There are no thread aborts like v4. C) There are known scenarios this breaks with long running requests. It's one more setting on the server to hunt down and fiddle with when that happens.",.cs,1,0,1
"@@ -17,5 +17,6 @@ namespace Nevermind.Core
         public long GasUsed { get; set; }
         public Bloom Bloom { get; set; }
         public LogEntry[] Logs { get; set; }
+        public Address Recipient { get; set; }
     }
 }",need to learn more - this I guess is only in the network version but not in the one created by EVM,.cs,1,1,1
"@@ -21,8 +21,8 @@ namespace MvvmCross.Droid.Shared.Presenter
     {
         public const string ViewModelRequestBundleKey = ""__mvxViewModelRequest"";
 
-        private readonly FragmentHostRegistrationSettings _fragmentHostRegistrationSettings;
-        private readonly Lazy<IMvxNavigationSerializer> _lazyNavigationSerializerFactory;
+        protected FragmentHostRegistrationSettings _fragmentHostRegistrationSettings;
+        protected Lazy<IMvxNavigationSerializer> _lazyNavigationSerializerFactory;
 
         protected IMvxNavigationSerializer Serializer => _lazyNavigationSerializerFactory.Value;
 ",I would leave these as `private readonly` and just expose them as a protected property unless we want them to be assigned outside of the constructor.,.cs,1,1,1
"@@ -40,6 +40,12 @@ namespace pwiz.Skyline.Model.Results
         public double? ExtractionWidth;
         public IonMobilityFilter _ionMobilityInfo;
         public Identity Id;  // ID of the associated TransitionDocNode
+
+        public bool MatchMz(double mz)
+        {
+            return mz > ProductMz.Value - ExtractionWidth / 2 &&
+                   mz <= ProductMz.Value + ExtractionWidth / 2;
+        }
     }
 
     public interface IScanProvider : IDisposable","This needs to be the same as the logic that's in ""SpectrumFilterPair.FilterSpectrumList"". I think that logic would be ""mz >= ProductMz.Value - ExtractionWidth / 2 && mz < ProductMz.Value + ExtractionWidth / 2""; because of that ""mzArray[iNext] < endFilter"" in FilterSpectrumList",.cs,1,1,1
"@@ -0,0 +1,14 @@
+// <copyright file=""OSPlatforms.cs"" company=""Datadog"">
+// Unless explicitly stated otherwise all files in this repository are licensed under the Apache 2 License.
+// This product includes software developed at Datadog (https://www.datadoghq.com/). Copyright 2017 Datadog, Inc.
+// </copyright>
+
+namespace Datadog.Trace
+{
+    internal static class OSPlatforms
+    {
+        public const string Windows = ""Windows"";
+        public const string Linux = ""Linux"";
+        public const string MacOS = ""MacOS"";
+    }
+}","Really small nit, I suggest removing the ""s"" so it's singular: `OSPlatform`",.cs,1,1,1
"@@ -1,9 +1,7 @@
 #if !NETSTANDARD2_0
 
 using System;
-using System.Diagnostics.CodeAnalysis;
 using System.Web;
-using Datadog.Trace.ClrProfiler.Emit;
 using Datadog.Trace.Logging;
 
 namespace Datadog.Trace.ClrProfiler.Integrations",Let's delete this file. We're not using `AspNetIntegration`.,.cs,1,1,1
"@@ -4,13 +4,12 @@
 
 using System;
 using System.Reflection;
-using System.Threading.Tasks;
 using MvvmCross.Exceptions;
 using MvvmCross.Logging;
 
 namespace MvvmCross.Base
 {
-    public abstract class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
+    public class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
     {
         protected static void ExceptionMaskedAction(Action action, bool maskExceptions)
         {",Please leave as abstract,.cs,1,1,0
"@@ -406,6 +406,11 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2
                 throw new Http2ConnectionErrorException(Http2ErrorCode.PROTOCOL_ERROR);
             }
 
+            if (_incomingFrame.StreamId != 0)
+            {
+                throw new Http2ConnectionErrorException(Http2ErrorCode.PROTOCOL_ERROR);
+            }
+
             Stop();
             return Task.CompletedTask;
         }",For our logging purposes we should include messages describing these errors.,.cs,1,1,1
"@@ -0,0 +1,9 @@
+﻿namespace Nevermind.Json
+{
+    public interface IJsonSerializer
+    {
+        T DeserializeAnonymousType<T>(string json, T definition);
+        T DeserializeObject<T>(string json);
+        string SerializeObject<T>(T value);
+    }
+}","let us review if the test projects should use this as well, might be that a similar interface is already in test namespaces",.cs,1,1,1
"@@ -84,7 +84,7 @@ namespace Nethermind.Core.Test
 
         [Test]
         [Retry(3)]
-        public async Task Update_twice_current_per_second()
+        public void Update_twice_current_per_second()
         {
             ManualTimestamper manualTimestamper = new ManualTimestamper();
             MeasuredProgress measuredProgress = new MeasuredProgress(manualTimestamper);","This silences warnings about async functions without an await. I saw some other tests that were void returning instead of `async Task` returning, so I think that is acceptable from a style standpoint.",.cs,1,1,1
"@@ -5,14 +5,13 @@
 using Microsoft.Build.Framework;
 using Microsoft.DotNet.VersionTools.Automation;
 using System.Diagnostics;
-using System.Linq;
 
 namespace Microsoft.DotNet.Build.Tasks.VersionTools
 {
     public class LocalUpdatePublishedVersions : BuildTask
     {
         [Required]
-        public ITaskItem[] ShippedNuGetPackage { get; set; }
+        public string[] ShippedNuGetPackage { get; set; }
 
         [Required]
         public string VersionsRepoLocalBaseDir { get; set; }",Why the switch to string[]? This potentially break users of this task.,.cs,1,1,1
"@@ -22,7 +22,7 @@ namespace Nethermind.Network.Config
         public string LocalIp { get; set; }
         public string StaticPeers { get; set; }
         public bool OnlyStaticPeers { get; set; }
-        public string TrustedPeers { get; set; } = string.Empty;
+        public string TrustedPeers { get; set; } = null;
         public bool IsPeersPersistenceOn { get; set; } = true;
         public int ActivePeersMaxCount { get; set; } = 50;
         public int PeersPersistenceInterval { get; set; } = 1000 * 5;",I think this change may cause trouble in other parts of the system,.cs,1,1,0
"@@ -34,7 +34,8 @@ namespace Microsoft.CodeAnalysis.Sarif.Writers
         [TestMethod]
         public void ResultLogJsonWriter_DefaultIsEmpty()
         {
-            Assert.AreEqual(String.Empty, GetJson(delegate { }));
+            string expected = @""{""""version"""":""""1.0.0-beta.1"""",""""runLogs"""":[{}]}"";
+            Assert.AreEqual(expected, GetJson(delegate { }));
         }
 
         [TestMethod]","Is it ""beta.1""? I thought we were now ""beta.2"" after the big-breaking-change.",.cs,1,1,1
"@@ -0,0 +1,17 @@
+// Copyright (c) Microsoft.  All Rights Reserved.
+// Licensed under the Apache License, Version 2.0.  See License.txt in the project root for license information.
+
+using System.CodeDom.Compiler;
+
+namespace Microsoft.CodeAnalysis.Sarif
+{
+    /// <summary>
+    /// Indicates whether a result has been suppressed in source (or if that information is unknown).
+    /// </summary>
+    [GeneratedCode(""Microsoft.Json.Schema.ToDotNet"", ""0.16.0.0"")]
+    public enum IsSuppressedInSource
+    {
+        Unknown,
+        True,False
+    }
+}","I'm intrigued that the code gen put those on the same line. Not crazy about the names. How about: type = SourceSuppressionState, with values Unknown, Suppressed, NotSuppressed?",.cs,1,1,1
"@@ -115,6 +115,11 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Adapter.Internal
                 var readableBuffer = result.Buffer;
                 try
                 {
+                    if (result.IsCompleted)
+                    {
+                        return 0;
+                    }
+
                     if (!readableBuffer.IsEmpty)
                     {
                         var count = Math.Min(readableBuffer.Length, buffer.Count);",If we want to make this similar to the request and response streams both read and write should throw.,.cs,1,1,1
"@@ -3,8 +3,9 @@
 // See the LICENSE file in the project root for more information.
 
 using System;
-using System.Collections.Generic;
 using System.IO;
+using System.Text;
+using System.Threading;
 using Microsoft.Build.Framework;
 using Microsoft.Build.Utilities;
 using Newtonsoft.Json;",You can probably revert this whole file. None of the changes here look substantive.,.cs,1,1,1
"@@ -61,6 +61,11 @@ namespace Datadog.Trace.Agent
             }
         }
 
+        public Task FlushAsync()
+        {
+            return FlushTracesAsync();
+        }
+
         public async Task FlushAndCloseAsync()
         {
             if (!_processExit.TrySetResult(true))","Any reason you did just make `FlushTracesAsync()` public? The class is internal, so I don't think we need to worry about exposing it as a public API.",.cs,1,1,1
"@@ -0,0 +1,18 @@
+namespace Datadog.Trace
+{
+    /// <summary>
+    /// Contains a set of standard operation names that can be used by integrations.
+    /// </summary>
+    public static class OperationNames
+    {
+        /// <summary>
+        /// Gets the operation name for an ASP.NET MVC web request.
+        /// </summary>
+        public static string AspNetMvcRequest => ""aspnet_mvc.request"";
+
+        /// <summary>
+        /// Gets the operation name for an ASP.NET Core MVC web request.
+        /// </summary>
+        public static string AspNetCoreMvcRequest => ""aspnet_core_mvc.request"";
+    }
+}","This is really integration specific, would it make more sense to have it as a constant in the integration itself?",.cs,1,1,1
"@@ -147,8 +147,8 @@ namespace Nethermind.Blockchain.Synchronization
             receipt.TxHash = transaction.Hash;
             receipt.Index = transactionIndex;
             receipt.Sender = transaction.SenderAddress;
-            receipt.Recipient = transaction.IsContractCreation ? null : transaction.To;
-            receipt.ContractAddress = transaction.IsContractCreation ? transaction.To : null;
+            receipt.Recipient = transaction.GetRecipient();
+            receipt.ContractAddress = transaction.GetCreatedContract();
             receipt.GasUsed = receipt.GasUsedTotal - gasUsedBefore;
             if (receipt.StatusCode != StatusCode.Success)
             {",this is actually all incorrect here for created contract - created contract is not the To field,.cs,1,1,1
"@@ -362,6 +362,11 @@ namespace Samples.Elasticsearch.V5
             task.GetAwaiter().GetResult();
             var taskType = task.GetType();
 
+            while (!taskType.Name.StartsWith(""Task""))
+            {
+                taskType = taskType.BaseType;
+            }
+
             bool isTaskOfT = taskType.IsGenericType &&
                              taskType.GetGenericTypeDefinition() == typeof(Task<>);
 ",What types show up here that we need this check? Just curious.,.cs,1,1,1
"@@ -78,8 +78,9 @@ namespace NLog.Internal
         /// </summary>
         /// <param name=""exception"">The exception to check.</param>
         /// <param name=""loggerContext"">Target context of the exception.</param>
+        /// <param name=""logFactory"">For checking <see cref=""LogFactory.ThrowExceptions""/> and <see cref=""LogFactory.ThrowConfigExceptions""/>. Falls back to <see cref=""LogManager""/> </param>
         /// <returns><c>true</c>if the <paramref name=""exception""/> must be rethrown, <c>false</c> otherwise.</returns>
-        public static bool MustBeRethrown(this Exception exception, IInternalLoggerContext loggerContext = null)
+        public static bool MustBeRethrown(this Exception exception, IInternalLoggerContext loggerContext = null, LogFactory logFactory = null)
         {
             if (exception.MustBeRethrownImmediately())
             {","Maybe add LoggingConfiguration as property to `IInternalLoggerContext`, and then extract the LogFactory from that? When InternalLogger-logging is improved with Nlog 5, then it will all work automagically.",.cs,1,1,1
"@@ -38,7 +38,16 @@ namespace OpenTelemetry.Trace
                 throw new ArgumentNullException(nameof(builder));
             }
 
-            var exporterOptions = new JaegerExporterOptions();
+            JaegerExporterOptions exporterOptions;
+            if (builder is IResolvingTracerProviderBuilder resolvingTracerProviderBuilder)
+            {
+                exporterOptions = resolvingTracerProviderBuilder.ResolveOptions<JaegerExporterOptions>();
+            }
+            else
+            {
+                exporterOptions = new JaegerExporterOptions();
+            }
+
             configure?.Invoke(exporterOptions);
             var jaegerExporter = new JaegerExporter(exporterOptions);
 ",Here is an example of how something like JaegerExporter can use IResolvingTracerProviderBuilder to inject options.,.cs,1,1,1
"@@ -43,11 +43,6 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.System.IO.Pipelines
             {
                 var part = _enumerator.Current;
 
-                if (_end)
-                {
-                    return new ReadCursor(part.Segment, part.Start + _currentSpan.Length);
-                }
-
                 return new ReadCursor(part.Segment, part.Start + _index);
             }
         }","This is really strange, now when I look at it.",.cs,1,1,0
"@@ -461,6 +461,11 @@ namespace Nethermind.TxPool
             return transaction != null;
         }
 
+        public bool IsTransactionKnown(Keccak hash)
+        {
+            return _hashCache.Get(hash);
+        }
+
         // TODO: Ensure that nonce is always valid in case of sending own transactions from different nodes.
         public UInt256 ReserveOwnTransactionNonce(Address address)
         {",Now good question. Is know would be hashCashe? Or maybe we should only check actual held transactions? Or maybe we should also check DB?,.cs,1,0,1
"@@ -25,7 +25,9 @@ namespace Benchmarks.Trace
         {
             var settings = new TracerSettings { StartupDiagnosticLogEnabled = false };
 
+#pragma warning disable CS0618 // Setter isn't actually obsolete, just should be internal
             Tracer.Instance = new Tracer(settings, new DummyAgentWriter(), null, null, null);
+#pragma warning restore CS0618
 
             var builder = new WebHostBuilder()
                 .UseStartup<Startup>();",One way to avoid this warning could be to add an internal `SetTracer` method and use it instead,.cs,1,1,1
"@@ -26,9 +26,19 @@ namespace Datadog.Trace
         private readonly CultureInfo _invariantCulture = CultureInfo.InvariantCulture;
         private readonly IDatadogLogger _log = DatadogLogging.GetLoggerFor<SpanContextPropagator>();
         private readonly ConcurrentDictionary<Key, string?> _defaultTagMappingCache = new();
+        private readonly Func<IReadOnlyDictionary<string, string?>?, string, IEnumerable<string?>> _readOnlyDictionaryValueGetterDelegate;
 
         private SpanContextPropagator()
         {
+            IEnumerable<string?> ReadOnlyDictionaryValueGetter(IReadOnlyDictionary<string, string?>? carrier, string name)
+            {
+                if (carrier != null && carrier.TryGetValue(name, out var value))
+                {
+                    yield return value;
+                }
+            }
+
+            _readOnlyDictionaryValueGetterDelegate = ReadOnlyDictionaryValueGetter;
         }
 
         public static SpanContextPropagator Instance { get; } = new();",TODO: `yield return value` or `return new[] { value }`?,.cs,0,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -164,7 +164,7 @@ namespace OpenTelemetry.Instrumentation.AspNetCore.Tests
                 var response = await client.GetAsync(""/api/values/2"");
                 response.EnsureSuccessStatusCode(); // Status Code 200-299
 
-                WaitForProcessorInvocations(spanProcessor, 4);
+                WaitForProcessorInvocations(spanProcessor, 2);
             }
 
             // begin and end was called once each.",I'm probably just missing it... but what accounted for this change?,.cs,1,1,0
"@@ -0,0 +1,10 @@
+﻿namespace Microsoft.Azure.Cosmos.CosmosElements
+{
+    using System.IO;
+    using Microsoft.Azure.Cosmos.Json;
+
+    internal interface ILazyCosmosElement
+    {
+        void WriteToWriter(IJsonWriter jsonWriter);
+    }
+}","Lets use ""abstract class"" for consistency inside SDK.",.cs,1,1,1
"@@ -0,0 +1,11 @@
+using Xamarin.Forms;
+
+[assembly: XmlnsDefinition(""http://mvvmcross.com/bind"", nameof(MvvmCross.Forms.Bindings))]
+[assembly: XmlnsDefinition(""http://mvvmcross.com/bind"", nameof(MvvmCross.Forms.Converters))]
+[assembly: XmlnsDefinition(""http://mvvmcross.com/bind"", nameof(MvvmCross.Forms.Views))]
+namespace MvvmCross.Forms
+{
+    internal class AssemblyInfo
+    {
+    }
+}",This won't work unless you also tell msbuild not to generate its own default AssemblyInfo file. Can we add these assembly things elsewhere?,.cs,1,1,1
"@@ -18,6 +18,7 @@
  */
 
 using System;
+using System.Globalization;
 using System.IO;
 using System.Linq;
 using System.Windows.Forms;",This is causing a code inspection failure.,.cs,1,1,1
"@@ -116,6 +116,11 @@ namespace OpenTelemetry.Trace
                 + ""}"";
         }
 
+        public override Type GetType()
+        {
+            return this.GetType();
+        }
+
         /// <inheritdoc/>
         public override TReturn Match<TReturn>(
             Func<string, TReturn> stringFunction,",is this needed?,.cs,1,0,0
"@@ -60,7 +60,10 @@ namespace MvvmCross.Forms.Platform.Ios.Core
                     Xamarin.Forms.Forms.Init();
                 if (_formsApplication == null)
                 {
-                    _formsApplication = _formsApplication ?? CreateFormsApplication();
+                    _formsApplication = CreateFormsApplication();
+                }
+                if (Application.Current != _formsApplication) {
+                    Application.Current = _formsApplication;
                 }
                 return _formsApplication;
             }",`{` should be placed in a new line,.cs,1,1,1
"@@ -14,6 +14,10 @@ namespace Datadog.Trace.ClrProfiler.Managed.Loader
     public partial class Startup
     {
         private const string AssemblyName = ""Datadog.Trace, Version=2.0.1.0, Culture=neutral, PublicKeyToken=def86d061d0d2eeb"";
+        private const string AzureAppServicesKey = ""DD_AZURE_APP_SERVICES"";
+        private const string AasCustomTracingKey = ""DD_AAS_ENABLE_CUSTOM_TRACING"";
+        private const string AasCustomMetricsKey = ""DD_AAS_ENABLE_CUSTOM_METRICS"";
+        private const string TraceEnabledKey = ""DD_TRACE_ENABLED"";
 
         /// <summary>
         /// Initializes static members of the <see cref=""Startup""/> class.","`DD_AZURE_APP_SERVICES` is already defined in `AzureAppServices`, and `DD_TRACE_ENABLED` is already defined in `ConfigurationKeys`. I suggest we reuse those, and add `DD_AAS_ENABLE_CUSTOM_TRACING` and `DD_AAS_ENABLE_CUSTOM_METRICS` to `AzureAppServices`.",.cs,1,1,1
"@@ -331,6 +331,7 @@ namespace NLog.UnitTests.Layouts
                         new CsvColumn(""date"", ""${longdate}""),
                         new CsvColumn(""level"", ""${level}""),
                         new CsvColumn(""message"", ""${message}""),
+                        new CsvColumn(""threadid"", ""${threadid}""),
                     },
                 QuoteChar = ""'"",
                 Delimiter = CsvColumnDelimiterMode.Semicolon,",was a new unit test not a better option?,.cs,1,1,0
"@@ -24,13 +24,18 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.HPack
             _enumerator.MoveNext();
 
             var statusCodeLength = EncodeStatusCode(statusCode, buffer);
-            var done = Encode(buffer.Slice(statusCodeLength), out var headersLength);
+            var done = Encode(buffer.Slice(statusCodeLength), throwIfNoneEncoded: false, out var headersLength);
             length = statusCodeLength + headersLength;
 
             return done;
         }
 
         public bool Encode(Span<byte> buffer, out int length)
+        {
+            return Encode(buffer, throwIfNoneEncoded: true, out length);
+        }
+
+        private bool Encode(Span<byte> buffer, bool throwIfNoneEncoded, out int length)
         {
             length = 0;
 ","Will this be raised to app code on the first write to the body if an encoded header is greater than the max frame size specified to the client or the server? If this can be induced simply by the client setting a small enough max frame size, I'm not sure that an ArgumentOutOfRangeException is appropriate particularly if there's no way for the app to discover what the client configured the max frame size to be. If this is typically thrown on the first write to the body, how is this handled and logged if there is no body? Any particular reason for not using a resource string here?",.cs,1,0,1
"@@ -89,7 +89,7 @@ namespace Benchmarks.Exporter
             {
                 for (int c = 0; c < this.NumberOfSpans; c++)
                 {
-                    await jaegerUdpBatcher.AppendAsync(this.testSpan, CancellationToken.None).ConfigureAwait(false);
+                    await jaegerUdpBatcher.AppendAsync(this.testSpan.ToJaegerSpan(), CancellationToken.None).ConfigureAwait(false);
                 }
 
                 await jaegerUdpBatcher.FlushAsync(CancellationToken.None).ConfigureAwait(false);",Prior to this PR `ToJaegerSpan()` was called inside `AppendAsync` so the amount of work in the benchmark it is still the same.,.cs,0,1,1
"@@ -63,7 +63,7 @@ namespace System.Text.Json.Document.Tests
             int arrayLength = _element.GetArrayLength();
             for (int j = 0; j < arrayLength; j++)
             {
-                JsonElement dummy = _element[j];
+                _ = _element[j];
             }
         }
     }",Will this still work in 3.1 and 5.0? I don't remember what version of C# this is from.,.cs,1,1,1
"@@ -55,7 +55,7 @@ namespace OpenTelemetry.Exporter.OpenTelemetryProtocol.Implementation.ExportClie
             }
             catch (HttpRequestException ex)
             {
-                OpenTelemetryProtocolExporterEventSource.Log.FailedToReachCollector(ex);
+                OpenTelemetryProtocolExporterEventSource.Log.FailedToReachCollector(this.Options.Endpoint, ex);
 
                 return false;
             }",I'm assuming it's always present but happy to make it nullable and make it conditional,.cs,1,1,1
"@@ -66,7 +66,7 @@ namespace MvvmCross.Droid.Views
             onGlobalLayout = (sender, args) =>
             {
                 view.ViewTreeObserver.GlobalLayout -= onGlobalLayout;
-                ViewModel.Appeared();
+                ViewModel?.Appeared();
             };
 
             view.ViewTreeObserver.GlobalLayout += onGlobalLayout;",We might need to add those null checks on iOS and Windows as well.,.cs,1,1,1
"@@ -499,7 +499,14 @@ namespace pwiz.Skyline.Model
             var transitionsUnranked = new List<DocNode>();
             foreach (var peak in spectrum.Peaks)
             {
-                transitionsUnranked.Add(TransitionFromPeakAndAnnotations(key, nodeGroupMatched, fragmentCharge, peak, null));
+                try
+                {
+                    transitionsUnranked.Add(TransitionFromPeakAndAnnotations(key, nodeGroupMatched, fragmentCharge, peak, null));
+                }
+                catch (InvalidDataException)
+                {
+                    // Some kind of garbage in peaklist, e.g fragment mass is absurdly small or large - ignore
+                }
             }
             var nodeGroupUnranked = (TransitionGroupDocNode) nodeGroupMatched.ChangeChildren(transitionsUnranked);
             // Filter again, retain only those with rank info,  or at least an interesting name","This call should be paying attention to settings and the minimum value that causes the exception reported to initiate this fix. For peptide fragment annotation, we definitely consider the settings, and since we do not rank fragments outside the instrument range. This code also strikes me as odd that you wouldn't just create the precursor and then use a precursor.ChangeSettings(Settings, diff ?? SrmSettingsDiff.ALL) to materialize all of the transitions based on the settings. That way you only write the code once to materialize transitions based on settings.",.cs,1,0,1
"@@ -30,5 +30,15 @@ namespace OpenTelemetry.Trace.Sampler
         /// Gets the sampler than never samples.
         /// </summary>
         public static ISampler NeverSample { get; } = new Internal.NeverSampleSampler();
+
+        /// <summary>
+        /// Gets the always on sampling decision.
+        /// </summary>
+        public static Decision AlwaysOnDecision { get; } = new Decision(true);
+
+        /// <summary>
+        /// Gets the always off sampling decision.
+        /// </summary>
+        public static Decision AlwaysOffDecision { get; } = new Decision(false);
     }
 }","nit: this is a single decision, it's not 'AlwaysOn', maybe we can do 'SampledIn'? Or since it's a struct, it't cheap to always do `new Decision(true)` without having static preconfigured value",.cs,1,1,1
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -19,7 +19,13 @@ namespace Datadog.Trace.ClrProfiler.Managed.Loader
         private static string ResolveManagedProfilerDirectory()
         {
             string tracerFrameworkDirectory = ""netstandard2.0"";
-            var tracerHomeDirectory = Environment.GetEnvironmentVariable(""DD_DOTNET_TRACER_HOME"") ?? string.Empty;
+
+            var tracerHomeDirectory = Environment.GetEnvironmentVariable(""DD_DOTNET_TRACER_HOME"");
+            if (string.IsNullOrWhiteSpace(tracerHomeDirectory))
+            {
+                tracerHomeDirectory = Path.GetDirectoryName(Environment.GetEnvironmentVariable(""DD_INTEGRATIONS"")) ?? string.Empty;
+            }
+
             return Path.Combine(tracerHomeDirectory, tracerFrameworkDirectory);
         }
 ",.NET Core: Fallback to `DD_INTEGRATIONS` if `DD_DOTNET_TRACER_HOME` was not set.,.cs,1,1,1
"@@ -43,7 +43,9 @@ namespace Microsoft.DotNet.Build.Tasks.Feed
 
         public void LogError(string data)
         {
-            _log.LogError(data);
+            // There are cases where Sleet fails and we retry on our side causing things to actually work but if Sleet logs an error the whole build leg
+            // is marked as failed even though it actually succeeded, hence we log a warning here but we will log an error if the retry did not help
+            _log.LogWarning(data);
         }
 
         public void LogInformation(string data)",I meant something should be added in the warning message to alert anyone trying to diagnose sleet errors that show up as warnings.,.cs,1,1,1
"@@ -389,6 +389,7 @@ namespace NLog.UnitTests.Config
                 Assert.NotEmpty(fileLocations);
                 Assert.NotNull(fileLocations[0].Key);
                 Assert.NotNull(fileLocations[0].Value); // Primary search location is NLog-assembly
+                Assert.Equal(fileLocations.Length, fileLocations.Select(f => f.Key).Distinct().Count());
 
                 var configuration = CreateConfigurationFromString(@""
 <nlog throwExceptions='true'>","another option is to group-by and check if there aren't duplicate items, isn't?",.cs,1,1,1
"@@ -96,9 +96,10 @@ namespace MvvmCross.Droid.Support.V7.AppCompat
         
         protected virtual void RunAppStart(Bundle bundle)
         {
-            var startup = Mvx.IoCProvider.Resolve<IMvxAppStart>();
-            if (!startup.IsStarted)
+            if (Mvx.IoCProvider.TryResolve(out IMvxAppStart startup) && !startup.IsStarted)
+            {
                 startup.Start(GetAppStartHint(bundle));
+            }
         }
 
         protected virtual object GetAppStartHint(object hint = null)",Why are we using TryResolve here - is it safe for RunAppStart to be invoked when we're not able to resolve IMvxAppStart? Not throwing an exception here isn't as bad as not throwing an exception and not reporting to developer that mvx wasn't able to locate AppStart. Unless I'm missing a scenario where this is valid?,.cs,1,1,1
"@@ -34,8 +34,8 @@ namespace Datadog.Trace.DiagnosticListeners
         private static readonly PropertyFetcher HttpRequestInStopHttpContextFetcher = new PropertyFetcher(""HttpContext"");
         private static readonly PropertyFetcher UnhandledExceptionHttpContextFetcher = new PropertyFetcher(""HttpContext"");
         private static readonly PropertyFetcher UnhandledExceptionExceptionFetcher = new PropertyFetcher(""Exception"");
-        private static readonly PropertyFetcher BeforeActionHttpContextFetcher = new PropertyFetcher(""HttpContext"");
-        private static readonly PropertyFetcher BeforeActionActionDescriptorFetcher = new PropertyFetcher(""ActionDescriptor"");
+        private static readonly PropertyFetcher BeforeActionHttpContextFetcher = new PropertyFetcher(""httpContext"");
+        private static readonly PropertyFetcher BeforeActionActionDescriptorFetcher = new PropertyFetcher(""actionDescriptor"");
 
         private readonly IDatadogTracer _tracer;
         private readonly AspNetCoreDiagnosticOptions _options;","This seems unrelated, what's the deal here? Was this a bug?",.cs,1,1,1
"@@ -33,7 +33,7 @@ namespace Microsoft.AspNet.Server.Kestrel
                 }
                 if (Libuv.IsWindows)
                 {
-                    var architecture = IntPtr.Size == 4
+                    var architecture = Environment.Is64BitProcess
                         ? ""x86""
                         : ""amd64"";
 ","This is wrong, it either needs to be `!Environment.Is64BitProcess` or switch x86 and amd64.",.cs,1,1,1
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -94,6 +94,7 @@ namespace Datadog.Trace.AppSec
                     if (_waf != null)
                     {
                         _instrumentationGateway.InstrumentationGatewayEvent += InstrumentationGatewayInstrumentationGatewayEvent;
+                        Log.Information(""DDAS-0014-00: AppSec has started"");
                     }
                     else
                     {",Definitely Info? Do we always want to write here?,.cs,1,1,1
"@@ -1,16 +1,16 @@
 //  Copyright (c) 2018 Demerzel Solutions Limited
 //  This file is part of the Nethermind library.
-// 
+//
 //  The Nethermind library is free software: you can redistribute it and/or modify
 //  it under the terms of the GNU Lesser General Public License as published by
 //  the Free Software Foundation, either version 3 of the License, or
 //  (at your option) any later version.
-// 
+//
 //  The Nethermind library is distributed in the hope that it will be useful,
 //  but WITHOUT ANY WARRANTY; without even the implied warranty of
 //  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 //  GNU Lesser General Public License for more details.
-// 
+//
 //  You should have received a copy of the GNU Lesser General Public License
 //  along with the Nethermind. If not, see <http://www.gnu.org/licenses/>.
 ",I guess your IDE automatically edited these files?,.cs,1,1,0
"@@ -370,13 +370,13 @@ namespace Nethermind.Specs.ChainSpecStyle
             chainSpec.Allocations = new Dictionary<Address, ChainSpecAllocation>();
             foreach (KeyValuePair<string, AllocationJson> account in chainSpecJson.Accounts)
             {
-                if (account.Value.BuiltIn != null && account.Value.Balance == UInt256.Zero)
+                if (account.Value.BuiltIn != null && account.Value.Balance == null)
                 {
                     continue;
                 }
                 
                 chainSpec.Allocations[new Address(account.Key)] = new ChainSpecAllocation(
-                    account.Value.Balance,
+                    account.Value.Balance ?? UInt256.Zero,
                     account.Value.Nonce,
                     account.Value.Code,
                     account.Value.Constructor,",Is it necessary to check this at all?,.cs,1,1,0
"@@ -14,11 +14,16 @@ namespace Datadog.Trace
         private readonly AgentWriterBuffer<ServiceInfo> _servicesBuffer = new AgentWriterBuffer<ServiceInfo>(100);
         private readonly IApi _api;
         private readonly Task _flushTask;
+        private readonly TaskCompletionSource<bool> _processExit = new TaskCompletionSource<bool>();
 
         public AgentWriter(IApi api)
         {
             _api = api;
             _flushTask = Task.Run(FlushTracesTaskLoop);
+            // Register callbacks to make sure we flush the traces before exiting
+            AppDomain.CurrentDomain.ProcessExit += CurrentDomain_ProcessExit;
+            AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
+            Console.CancelKeyPress += Console_CancelKeyPress;
         }
 
         public void WriteServiceInfo(ServiceInfo serviceInfo)","can't we have this at the Tracer level? my point about having the logic of ""Write"" in the Tracer, is that this `AgentWriter` is a class that may have multiple implementations, so this logic will be replicated. Think about the possibility of having a `SyncWriter` that writes immediately in the main thread (it was a specific use case that came out in the Ruby client)",.cs,1,1,1
"@@ -41,7 +41,7 @@ namespace OpenTelemetry.Exporter.Jaeger.Tests.Implementation
         [Fact]
         public async void JaegerThriftIntegrationTest_TAbstractBaseGeneratesConsistentThriftPayload()
         {
-            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQxAAAWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQyAAAAAAA="");
+            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgHbWVzc2FnZRUAGAZFdmVudDEAABaAgLPexpa/BRksGANrZXkVABgFdmFsdWUAGAdtZXNzYWdlFQAYBkV2ZW50MgAAAAAA"");
             
             using (var memoryTransport = new InMemoryTransport())
             {",this test case is so wierd. I remember updating it last time =) Hope we will make somthing better eventually,.cs,1,1,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -63,7 +63,11 @@ namespace Microsoft.Cci.Writers.CSharp
             if (property.GetHiddenBaseProperty(_filter) != Dummy.Property)
                 WriteKeyword(""new"");
 
+            if (property.ReturnValueIsByRef)
+                WriteKeyword(""ref"");
+
             WriteTypeName(property.Type);
+
             if (isIndexer)
             {
                 int index = property.Name.Value.LastIndexOf(""."");",I couldn't find the C# spec but is ref supposed to be the thing directly in front of the type?,.cs,1,1,1
"@@ -23,6 +23,9 @@ namespace MvvmCross.Platforms.Uap.Presenters
     {
         protected readonly IMvxWindowsFrame _rootFrame;
 
+        private MvxWindowsContentDialog mDialogView;
+
+
         public MvxWindowsViewPresenter(IMvxWindowsFrame rootFrame)
         {
             _rootFrame = rootFrame;",Can we avoid by any chance holding a strong reference to the dialog view here?,.cs,1,1,1
"@@ -17,6 +17,7 @@
 using System.Diagnostics;
 using Microsoft.Extensions.Logging;
 using OpenTelemetry;
+using OpenTelemetry.Trace;
 
 public class Program
 {","Although this is technically correct, I wonder if we could make it simpler by not requiring this namespace?",.cs,1,1,1
"@@ -23,12 +23,13 @@ namespace OpenTelemetry.Metrics
         private Aggregation aggregation = Aggregation.Histogram;
 
         /// <summary>
-        /// Gets or sets the custom histogram bounds.
+        /// Gets or sets the values representing explicit histogram bucket
+        /// boundary values.
         /// </summary>
         /// <remarks>
         /// The array must be in ascending order with distinct values.
         /// </remarks>
-        public double[] BucketBounds { get; set; }
+        public double[] Boundaries { get; set; }
 
         public override Aggregation Aggregation
         {","Consider changing this class name to `ExplicitBucketHistogramConfiguration` (so that later if we add exponential bucket histogram, we don't expose `Boundaries`).",.cs,1,1,1
"@@ -386,7 +386,10 @@ namespace NLog.Layouts
                         var value = ParseParameterValue(stringReader);
                         if (!string.IsNullOrEmpty(parameterName) || !StringHelpers.IsNullOrWhiteSpace(value))
                         {
-                            // TODO NLog 5.0 Should throw exception when invalid configuration (Check throwConfigExceptions)
+                            if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions == true)
+                            {
+                                throw new NLogConfigurationException(""Unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
+                            }
                             InternalLogger.Warn(""Skipping unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
                         }
                     }",Maybe this instead: `if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions ?? LogManager.ThrowExceptions)` ?,.cs,1,1,0
"@@ -59,7 +59,10 @@ namespace Nethermind.Evm
             0, 0, 0, 0, 0, 0, 0, 0
         };
 
+        private readonly byte[] _chainId;
+
         private readonly IBlockhashProvider _blockhashProvider;
+        private readonly ISpecProvider _specProvider;
         private readonly LruCache<Keccak, CodeInfo> _codeCache = new LruCache<Keccak, CodeInfo>(4 * 1024);
         private readonly ILogger _logger;
         private readonly IStateProvider _state;",remove readonly for performance reasons,.cs,1,1,1
"@@ -24,6 +24,8 @@ namespace Nethermind.Consensus
     {
         private readonly UInt256 _constantDifficulty;
 
+        public static readonly IDifficultyCalculator Zero = new ConstantDifficultyCalculator(UInt256.Zero);
+
         public static readonly IDifficultyCalculator One = new ConstantDifficultyCalculator(UInt256.One);
 
         public ConstantDifficultyCalculator(UInt256 constantDifficulty)","rename to ConstantDifficulty instead of ConstantDifficultyCalculator -> or even -> Difficulty.One, Difficulty.Zero",.cs,1,1,1
"@@ -52,10 +52,7 @@ namespace NLog
 
         private static readonly IDictionary<string, object> EmptyDefaultDictionary = new SortHelpers.ReadOnlySingleBucketDictionary<string, object>();
 
-        /// <summary>
-        /// 
-        /// </summary>
-        private class ItemRemover : IDisposable
+        private sealed class ItemRemover : IDisposable
         {
             private readonly string _item;
             private bool _disposed;",note: sealed for keep Sonar stop warning about IDisposable,.cs,0,1,0
"@@ -316,6 +316,11 @@ namespace OpenTelemetry.Instrumentation.AspNetCore.Implementation
         [MethodImpl(MethodImplOptions.AggressiveInlining)]
         private static void AddGrpcAttributes(Activity activity, string grpcMethod, HttpContext context)
         {
+            // The RPC semantic conventions indicate the span name
+            // should not have a leading forward slash.
+            // https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/semantic_conventions/rpc.md#span-name
+            activity.DisplayName = grpcMethod.Trim('/');
+
             activity.SetTag(SemanticConventions.AttributeRpcSystem, GrpcTagHelper.RpcSystemGrpc);
             activity.SetTag(SemanticConventions.AttributeNetPeerIp, context.Connection.RemoteIpAddress.ToString());
             activity.SetTag(SemanticConventions.AttributeNetPeerPort, context.Connection.RemotePort);",`TrimStart` might be slightly faster (if we're only concerned with the leading character).,.cs,1,1,1
"@@ -98,7 +98,8 @@ namespace OpenTelemetry.Instrumentation.Grpc.Tests
 
             // Tags added by the library then removed from the instrumentation
             Assert.Null(activity.GetTagValue(GrpcTagHelper.GrpcMethodTagName));
-            Assert.NotNull(activity.GetTagValue(GrpcTagHelper.GrpcStatusCodeTagName));
+            Assert.Null(activity.GetTagValue(GrpcTagHelper.GrpcStatusCodeTagName));
+            Assert.NotNull(activity.GetTagValue(SemanticConventions.AttributeRpcGrpcStatusCode));
         }
 
         [Theory]","Minor thing, though should be able to make this an `Assert.Equal(0, activity.GetTagValue(SemanticConventions.AttributeRpcGrpcStatusCode))` (I _think_ this test should result in a status code of 0).",.cs,1,1,1
"@@ -34,6 +34,8 @@ namespace Nethermind.Core2.Types
         public static ValidatorIndex None => new ValidatorIndex(ulong.MaxValue);
 
         public static implicit operator ulong(ValidatorIndex validatorIndex) => validatorIndex.Number;
+        
+        public static explicit operator int(ValidatorIndex validatorIndex) => (int)validatorIndex.Number;
 
         public static implicit operator ValidatorIndex(ulong value) => new ValidatorIndex(value);
 ","Suggest that implicit from ValidatorIndex => ulong is okay, but keep the opposite direction explicit. Be consistent across all the types (Slot, Gwei, etc). To avoid situations like: ValidatorIndex index = currentEpoch + maxGwei;",.cs,1,1,1
"@@ -60,7 +60,11 @@ namespace Datadog.Trace
         /// <summary>
         /// Gets the service name
         /// </summary>
-        public string ServiceName => _context.ServiceName;
+        public string ServiceName
+        {
+            get { return _context.ServiceName; }
+            internal set { _context.ServiceName = value; }
+        }
 
         /// <summary>
         /// Gets the trace's unique identifier.","I'm late to the party sorry, but why not let the non opentracing tracer change the service name too?",.cs,1,1,0
"@@ -1529,8 +1529,11 @@ namespace pwiz.SkylineTestUtil
             // Compare file contents
             var expected = existsInProject ? ReadTextWithNormalizedLineEndings(projectFile) : string.Empty;
             var actual = ReadTextWithNormalizedLineEndings(recordedFile);
-            if (Equals(expected, actual))
+            var diff = Helpers.DiffIgnoringTimeStampsAndGUIDs(expected, actual); // Don't mind any differences in generated GUIDs or timestamps
+            if (string.IsNullOrEmpty(diff))
+            {
                 return;
+            }
 
             if (ForceMzml)
             {","This is unrelated to your change, but I believe ForceMzml is usually and the log files we have checked in all have the .mzML file extension in them. I don't think anyone would notice if this whole block of code were removed.",.cs,0,1,1
"@@ -3185,6 +3185,8 @@ namespace pwiz.Skyline.Model
                 var result = Document.Settings.GetIonMobilityFilter(nodePep, nodeTranGroup, nodeTran, null, null, 1.2);
                 if (result.HasIonMobilityValue)
                     ionMobility = result.IonMobility.Mobility.Value;
+                if (result.IonMobilityExtractionWindowWidth.HasValue)
+                    windowIM = result.IonMobilityExtractionWindowWidth.Value;
             }
             if (!ionMobility.HasValue)
                 _missingIonMobility.Add(nodeTranGroup.GetLibKey(Document.Settings, nodePep));","Assuming that we want the same window size used in chromatogram extraction ion mobility filtering, this seems correct. I don't know enough about this code are to say if that's a valid assumption, though,",.cs,1,1,1
"@@ -77,7 +77,7 @@ namespace NLog.Config
         /// Initializes a new instance of the <see cref=""XmlLoggingConfiguration"" /> class.
         /// </summary>
         /// <param name=""fileName"">Configuration file to be read.</param>
-        public XmlLoggingConfiguration([CanBeNull] string fileName)
+        public XmlLoggingConfiguration([NotNull] string fileName)
             : this(fileName, LogManager.LogFactory)
         { }
 ",looks like a change which is not suitable for a path version? (breaking behavior change),.cs,1,1,1
"@@ -13,7 +13,7 @@ namespace Datadog.Trace
 
         private readonly DateTimeOffset _utcStart = DateTimeOffset.UtcNow;
         private readonly long _timestamp = Stopwatch.GetTimestamp();
-        private readonly List<Span> _spans = new List<Span>();
+        private List<Span> _spans = new List<Span>();
 
         private int _openSpans;
         private SamplingPriority? _samplingPriority;",Doesn't look like we needed to remove the `readonly`.,.cs,1,0,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -16,5 +16,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http
         Options,
 
         Custom,
+
+        Unknown = byte.MaxValue
     }
 }","It's best practice to make Unknown/None the zero value, the default for uninitialized fields.",.cs,1,1,1
"@@ -15,9 +15,10 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
     {
         protected bool _isReadOnly;
         protected Dictionary<string, StringValues> MaybeUnknown;
-
         protected Dictionary<string, StringValues> Unknown => MaybeUnknown ?? (MaybeUnknown = new Dictionary<string, StringValues>(StringComparer.OrdinalIgnoreCase));
 
+        public long? ContentLength { get; set; }
+
         StringValues IHeaderDictionary.this[string key]
         {
             get","We should have a custom setter, so we can throw immediately if this is set to a negative value or _isReadOnly is true.",.cs,1,1,1
"@@ -62,7 +62,7 @@ namespace Microsoft.DotNet.Build.Tasks.Packaging
                 return false;
             }
 
-            if (PackageIndexes != null || PackageIndexes.Length > 0)
+            if (PackageIndexes != null && PackageIndexes.Length > 0)
             {
                 PackageIndex.Current.Merge(PackageIndexes.Select(pi => pi.GetMetadata(""FullPath"")));
             }",Can you instead change this to &&,.cs,1,1,0
"@@ -96,8 +96,8 @@ namespace Examples.Console
                 catch (ArgumentOutOfRangeException e)
                 {
                     // Set status upon error
-                    activity.AddTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
-                    activity.AddTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
+                    activity.SetTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
+                    activity.SetTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
                 }
 
                 // Annotate our activity to capture metadata about our operation",Should we consider changing the return type of `SpanHelper.GetCachedCanonicalCodeString` to int?,.cs,1,1,0
"@@ -629,12 +629,13 @@ namespace pwiz.Skyline.Util.Extensions
             }
             for (int i = 0; i < fields.Length; ++i)
             {
-                FieldNames.Add(fields[i].Trim());
-                FieldDict[fields[i]] = i;
+                var trimmed = fields[i].Trim();
+                FieldNames.Add(trimmed);
+                FieldDict[trimmed] = i;
                 // Check to see if the given column name is actually a synonym for the internal canonical (no spaces, serialized) name
                 if (headerSynonyms != null)
                 {
-                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, fields[i], StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
+                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, trimmed, StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
                     if (!string.IsNullOrEmpty(key))
                     {
                         var syn = headerSynonyms[key];","I would name this variable ""fieldName"" instead of ""trimmed"".",.cs,1,1,0
"@@ -0,0 +1,17 @@
+﻿// Licensed to the .NET Foundation under one or more agreements.
+// The .NET Foundation licenses this file to you under the MIT license.
+// See the LICENSE file in the project root for more information.
+
+using System;
+using System.Net;
+
+namespace Microsoft.DotNet.VersionTools.Automation.GitHubApi
+{
+    public partial class GitHubClient : IGitHubClient, IDisposable
+    {
+        static GitHubClient()
+        {
+            ServicePointManager.SecurityProtocol |= SecurityProtocolType.Tls12;
+        }
+    }
+}","@davidsh When targeting 4.5(.0) is this the right answer, or can/should it be assigned to 0?",.cs,0,1,1
"@@ -594,6 +594,19 @@ namespace MvvmCross.Droid.Views
             return false;
         }
 
+        protected virtual bool CloseFragments()
+        {
+            try
+            {
+                CurrentFragmentManager.PopBackStackImmediate();
+            }
+            catch (System.Exception ex)
+            {
+                MvxTrace.Trace(""Cannot close any fragments"", ex);
+            }
+            return true;
+        }
+
         protected virtual bool CloseFragment(IMvxViewModel viewModel, MvxFragmentPresentationAttribute attribute)
         {
             // try to close nested fragment first",Same here about running the code without try/catch,.cs,0,1,1
"@@ -208,6 +208,8 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2
                     return ProcessRstStreamFrameAsync();
                 case Http2FrameType.SETTINGS:
                     return ProcessSettingsFrameAsync();
+                case Http2FrameType.PUSH_PROMISE:
+                    throw new Http2ConnectionErrorException(Http2ErrorCode.PROTOCOL_ERROR);
                 case Http2FrameType.PING:
                     return ProcessPingFrameAsync();
                 case Http2FrameType.GOAWAY:",Why doesn't this switch have a default?,.cs,1,1,1
"@@ -28,7 +28,10 @@ namespace Nethermind.Serialization.Rlp
         Storage = 4,
         Eip658Receipts = 8,
         AllowUnsigned = 16,
-        ForTreeRoot = 32,
-        All = AllowExtraData | ForSealing | Storage | Eip658Receipts | AllowUnsigned | ForTreeRoot
+        SkipTypedWrapping = 32, // introduced after typed transactions. In the network (devp2p) transaction has additional wrapping
+                                // when we're calculating tx hash or sending raw transaction we should skip this wrapping
+                                // with additional wrapping for typed transactions we're decoding Uint8Array([TransactionType, TransactionPayload]
+                                // without wrapping we're decoding (TransactionType || TransactionPayload)
+        All = AllowExtraData | ForSealing | Storage | Eip658Receipts | AllowUnsigned | SkipTypedWrapping
     }
 }","Can we have 2 flags there with same value? SkipTypedWrapping = 32 and ForTreeRoot = 32 yes they are the same, but intention differs... Not sure if good idea.",.cs,1,1,1
"@@ -81,6 +81,7 @@ namespace pwiz.SkylineTestFunctional
             VerifyStringLocalization(""{0:SEttings}"", ""{0:SEttings}"");
 
             var unlocalizedMessageTypes = GetUnlocalizedMessageTypes();
+            var errMsgs = new List<string>();
             if (unlocalizedMessageTypes.Any())
                 Assert.Fail(""The following properties are unlocalized:\n"" + string.Join(""\n"", unlocalizedMessageTypes));
 ",How can adding an empty list as the only change to this file be useful?,.cs,1,1,1
"@@ -1302,7 +1302,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.FunctionalTests
                 await appFuncCompleted.Task.DefaultTimeout();
             }
 
-            mockKestrelTrace.Verify(t => t.ConnectionStop(It.IsAny<string>()), Times.Once());
+            mockKestrelTrace.Verify(t => t.ConnectionStop(It.IsAny<string>()), Times.AtMostOnce());
         }
 
         [Theory]",Is there a point in checking these at all if we allow 0 and 1? Maybe we should just remove them entirely. I suppose we are making sure ConnectionStop is never called more than once still.,.cs,1,1,1
"@@ -0,0 +1,14 @@
+// Copyright (c) .NET Foundation. All rights reserved.
+// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
+
+using System;
+
+namespace Microsoft.AspNetCore.Protocols
+{
+    [Flags]
+    public enum TransferFormat
+    {
+        Binary = 0x01,
+        Text = 0x02
+    }
+}","Binary literal? :). I don't really care either way, mostly just trolling.",.cs,1,1,0
"@@ -150,6 +150,7 @@ namespace Datadog.Trace
                 span.SetTag(Tags.AzureAppServicesInstanceName, AzureAppServices.Metadata.InstanceName);
                 span.SetTag(Tags.AzureAppServicesOperatingSystem, AzureAppServices.Metadata.OperatingSystem);
                 span.SetTag(Tags.AzureAppServicesRuntime, AzureAppServices.Metadata.Runtime);
+                span.SetTag(Tags.AzureAppServicesExtensionVersion, AzureAppServices.Metadata.SiteExtensionVersion);
             }
 
             // set the origin tag to the root span of each trace/subtrace","Can this be `null` (e.g. if it's an older version of the extension installed)? If so, is there any value in recording that as a key without a value? This is a more general question of course, for my own understanding  ",.cs,1,1,1
"@@ -23,7 +23,7 @@ namespace OpenTelemetry.Exporter.Prometheus
     /// </summary>
     internal static partial class PrometheusSerializer
     {
-        private static readonly string[] MetricTypes = new string[] { ""untyped"", ""counter"", ""gauge"", ""histogram"", ""summary"" };
+        private static readonly string[] MetricTypes = new string[] { ""untyped"", ""counter"", ""gauge"", ""untyped"", ""histogram"", ""histogram"", ""histogram"", ""histogram"", ""summary"" };
 
         public static int WriteMetric(byte[] buffer, int cursor, Metric metric)
         {",minor: rewrap this line.,.cs,1,1,1
"@@ -151,7 +151,7 @@ namespace Datadog.Trace.DuckTyping
                     }
 
                     // Create a valid type name that can be used as a member of a class. (BenchmarkDotNet fails if is an invalid name)
-                    string proxyTypeName = $""{assembly}.{targetType.FullName.Replace(""."", ""_"").Replace(""+"", ""__"")}.{proxyDefinitionType.FullName.Replace(""."", ""_"").Replace(""+"", ""__"")}"";
+                    string proxyTypeName = $""{assembly}.{targetType.FullName.Replace(""."", ""_"").Replace(""+"", ""__"")}.{proxyDefinitionType.FullName.Replace(""."", ""_"").Replace(""+"", ""__"")}_{++_typeCount}"";
 
                     // Create Type
                     TypeBuilder proxyTypeBuilder = _moduleBuilder.DefineType(",Don't require `Interlocked` because the CreateProxyType method is called only once from a Concurrent Lazy pattern.,.cs,1,1,1
"@@ -98,12 +98,13 @@ namespace Datadog.Trace.Security.IntegrationTests
         [Trait(""Category"", ""EndToEnd"")]
         [Trait(""RunOnWindows"", ""True"")]
         [Trait(""LoadFromGAC"", ""True"")]
-        [Fact]
-        public Task TestSecurity()
+        [Theory]
+        [InlineData(""/Health/test&[$slice]"")]
+        public Task TestSecurity(string url = DefaultAttackUrl)
         {
             // if blocking is enabled, request stops before reaching asp net mvc integrations intercepting before action methods, so no more spans are generated
             // NOTE: by integrating the latest version of the WAF, blocking was disabled, as it does not support blocking yet
-            return TestBlockedRequestAsync(_iisFixture.Agent, _enableSecurity, _enableSecurity && _blockingEnabled ? HttpStatusCode.OK : HttpStatusCode.OK, _enableSecurity && _blockingEnabled ? 10 : 10, new Action<TestHelpers.MockTracerAgent.Span>[]
+            return TestBlockedRequestAsync(_iisFixture.Agent, _enableSecurity, _enableSecurity && _blockingEnabled ? HttpStatusCode.OK : HttpStatusCode.OK, _enableSecurity && _blockingEnabled ? 10 : 10, url: url, assertOnSpans: new Action<TestHelpers.MockTracerAgent.Span>[]
              {
                  s => Assert.Matches(""aspnet(-mvc)?.request"", s.Name),
                  s => Assert.Equal(""sample"", s.Service),","Would it be good test with the old url as well, as you've moved the Theory attribute, it should be good to do.",.cs,1,1,1
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -206,7 +206,10 @@ namespace Microsoft.Cci.Writers.CSharp
                 Write(""throw new "");
                 if (_forCompilationIncludeGlobalprefix)
                     Write(""global::"");
-                Write(""System.PlatformNotSupportedException(); "");
+                if(_platformNotSupportedExceptionMessage == null)
+                    Write(""System.PlatformNotSupportedException();"");
+                else
+                    Write($""System.PlatformNotSupportedException(\""{_platformNotSupportedExceptionMessage}\""); "");
             }
             else if (method.ContainingTypeDefinition.IsValueType && method.IsConstructor)
             {","Can you also provide some syntax pattern for folks specify a resource string? For example, if _platformNotSupportedExceptionMessage starts with some character like `:` or `@` treat the rest of it as code so that folks can do something like `:SR.MyLocalizedResourceMessage`",.cs,1,1,1
"@@ -26,6 +26,7 @@ namespace Datadog.Trace.ClrProfiler.IntegrationTests
 #if DEFAULT_SAMPLES
                 new object[] { string.Empty },
 #else
+#if NETFRAMEWORK
                 new object[] { ""2.0.0"" },
                 new object[] { ""2.0.1"" },
                 new object[] { ""2.0.2"" },","The changes to `MinVersionNetCore` take effect here, where we do not run the XUnit test cases for package versions that are lower than the specified `MinVersionNetCore`",.cs,1,1,1
"@@ -52,10 +52,15 @@ namespace MvvmCross.Forms.Platform.Uap.Core
         {
             get
             {
+                if (!Xamarin.Forms.Forms.IsInitialized)
+                    Xamarin.Forms.Forms.Init(ActivationArguments, GetViewAssemblies());
+
                 if (_formsApplication == null)
                 {
-                    Xamarin.Forms.Forms.Init(ActivationArguments, GetViewAssemblies());
-                    _formsApplication = _formsApplication ?? CreateFormsApplication();
+                    _formsApplication = CreateFormsApplication();
+                }
+                if(Application.Current != _formsApplication) {
+                    Application.Current = _formsApplication;
                 }
                 return _formsApplication;
             }",`{` should be placed in a new line,.cs,1,1,1
"@@ -39,6 +39,17 @@ namespace OpenTelemetry.Instrumentation.SqlClient
         private static readonly Regex DataSourceRegex = new Regex(""^(.*?)\\s*(?:[\\\\,]|$)\\s*(.*?)\\s*(?:,|$)\\s*(.*)$"", RegexOptions.Compiled);
         private static readonly ConcurrentDictionary<string, SqlConnectionDetails> ConnectionDetailCache = new ConcurrentDictionary<string, SqlConnectionDetails>(StringComparer.OrdinalIgnoreCase);
 
+        // .NET Framework implementation uses SqlEventSource from which we can't reliably distinguish
+        // StoredProcedures from regular Text sql commands.
+#if NETFRAMEWORK
+
+        /// <summary>
+        /// Gets or sets a value indicating whether or not the <see cref=""SqlClientInstrumentation""/> should
+        /// add the text of the executed Sql commands as the <see cref=""SemanticConventions.AttributeDbStatement""/> tag.
+        /// Default value: True.
+        /// </summary>
+        public bool SetStatementText { get; set; } = true;
+#else
         /// <summary>
         /// Gets or sets a value indicating whether or not the <see cref=""SqlClientInstrumentation""/> should add the names of <see cref=""CommandType.StoredProcedure""/> commands as the <see cref=""SemanticConventions.AttributeDbStatement""/> tag. Default value: True.
         /// </summary>",Lets keep the default `false`. Its a bit risky to collect full sql statement by default.,.cs,1,1,1
"@@ -2119,6 +2119,10 @@ namespace Nethermind.Evm
                         {
                             _state.UpdateStorageRoot(contractAddress, Keccak.EmptyTreeHash);
                         }
+                        else if (_state.IsDeadAccount(contractAddress))
+                        {
+                            _storage.RecreateStorage(contractAddress);
+                        }
 
                         _state.SubtractFromBalance(env.ExecutingAccount, value, spec);
                         ExecutionEnvironment callEnv = new ExecutionEnvironment();",Are we sure this won't create consensus issues on different transactions and blocks?,.cs,1,1,1
"@@ -85,6 +85,6 @@ namespace NLog.Targets
         /// Gets or sets the type of the property.
         /// </summary>
         [DefaultValue(typeof(string))]
-        public Type PropertyType { get; set; } = typeof(string);
+        public Type ParameterType { get; set; } = typeof(string);
     }
 }","I think propertyType is better? It's a target with properties, and not parameters?",.cs,1,1,1
"@@ -6,9 +6,13 @@ using System.Collections.Generic;
 using System.IO;
 using System.Linq;
 using System.Text;
+using System.Threading;
 using System.Threading.Tasks;
+using Microsoft.AspNet.Server.Kestrel.Infrastructure;
 using Microsoft.Framework.Logging;
 using Microsoft.Framework.Primitives;
+using System.Numerics;
+using Microsoft.AspNet.Hosting.Builder;
 
 // ReSharper disable AccessToModifiedClosure
 ",Sort these usings,.cs,1,1,1
"@@ -9,14 +9,14 @@ using Android.Content;
 using Android.Runtime;
 using Android.Util;
 using MvvmCross.Binding.Attributes;
-using MvvmCross.Droid.Support.V7.RecyclerView.AttributeHelpers;
-using MvvmCross.Droid.Support.V7.RecyclerView.ItemTemplates;
+using MvvmCross.DroidX.RecyclerView.AttributeHelpers;
+using MvvmCross.DroidX.RecyclerView.ItemTemplates;
 using MvvmCross.Platforms.Android.Binding.Views;
 
-namespace MvvmCross.Droid.Support.V7.RecyclerView
+namespace MvvmCross.DroidX.RecyclerView
 {
-    [Register(""mvvmcross.droid.support.v7.recyclerview.MvxRecyclerView"")]
-    public class MvxRecyclerView : Android.Support.V7.Widget.RecyclerView
+    [Register(""mvvmcross.DroidX.recyclerview.MvxRecyclerView"")]
+    public class MvxRecyclerView : AndroidX.RecyclerView.Widget.RecyclerView
     {
         public MvxRecyclerView(Context context, IAttributeSet attrs) :
             this(context, attrs, 0, new MvxRecyclerAdapter())",Another register needs lowercasing,.cs,1,1,1
"@@ -40,7 +40,7 @@ namespace System.Text.RegularExpressions.Tests
     }
 
     /// <summary>Performance tests adapted from https://github.com/mariomka/regex-benchmark</summary>
-    [BenchmarkCategory(Categories.Libraries, Categories.NoWASM)]
+    [BenchmarkCategory(Categories.Libraries, Categories.Regex, Categories.NoWASM)]
     public class Perf_Regex_Industry_Mariomkas
     {
         [Params(","You will need the Regex category for all of the test classes, unless you don't want them included",.cs,1,1,1
"@@ -29,7 +29,7 @@ namespace Nethermind.Network.Benchmarks
         [GlobalSetup]
         public void Setup()
         {
-            _node = new Node(new PublicKey(""0x000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f""), ""127.0.0.1"", 1234);
+            _node = new Node(new PublicKey(""0x000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f000102030405060708090a0b0c0d0e0f""), ""127.0.0.1"", 1234, false);
         }
         
         [Benchmark]",a lot of default 'false' for isStatic cluttering the PR,.cs,0,1,1
"@@ -17,7 +17,7 @@ namespace Datadog.Trace.ClrProfiler
                 DefinitionsId = ""FFAFA5168C4F4718B40CA8788875C2DA"",
 
                 // Autogenerated definitions array
-                Definitions = GetDefinitionsArray(),
+                Definitions = GetDefinitionsList().ToArray(),
             };
         }
 ",@tonyredondo for visibility,.cs,0,1,0
"@@ -17,7 +17,7 @@ namespace Microsoft.CodeAnalysis.Sarif
         internal const string DEFAULT_POLICY_NAME = ""default"";
 
         public PropertyBagDictionary() : base() { }
-
+        //CA1026 Not sure how to fix
         public PropertyBagDictionary(
             PropertyBagDictionary initializer = null,
             IEqualityComparer<string> comparer = null)",Setting constructor null default arguments below this section. Unsure of how to fix EDIT: Will attempt fix according to prior notation,.cs,1,1,1
"@@ -5,12 +5,12 @@
 //
 // Project Lead - Stuart Lodge, @slodge, me@slodge.com
 
+using System;
 using System.Windows.Input;
 
 namespace MvvmCross.Core.ViewModels
 {
-    public interface IMvxCommand
-        : ICommand
+    public interface IMvxCommand : ICommand
     {
         void RaiseCanExecuteChanged();
 ",Should this not inherit `IMvxCommand` instead of `ICommand`?,.cs,1,1,1
"@@ -219,6 +219,13 @@ namespace MvvmCross.Droid.FullFragging.Caching
 			{
 				(fragInfo.CachedFragment as Fragment).Arguments.Clear();
 				(fragInfo.CachedFragment as Fragment).Arguments.PutAll(bundle);
+
+                var childViewModelCache = Mvx.GetSingleton<IMvxChildViewModelCache>();
+                if (childViewModelCache.Exists(fragInfo.CachedFragment.ViewModel.GetType()))
+                {
+                    fragInfo.CachedFragment.ViewModel = childViewModelCache.Get(fragInfo.CachedFragment.ViewModel.GetType());
+                    childViewModelCache.Remove(fragInfo.CachedFragment.ViewModel.GetType());
+                }
 			}
 			else
 			{",Again: evaluate `fragInfo.CachedFragment.ViewModel.GetType()` once.,.cs,1,1,0
"@@ -689,7 +689,15 @@ namespace pwiz.SkylineTestUtil
                     {
                         // Grab some details in case of eventual failure
                         var formCloseClassName = System.ComponentModel.TypeDescriptor.GetClassName(formClose);
-                        var formCloseText = formClose.Text;
+                        string formCloseText;
+                        try
+                        {
+                            formCloseText = formClose.Text;
+                        }
+                        catch
+                        {
+                            formCloseText = ""@@ERROR@@"";
+                        }
                         formDetail = string.Format(""(form class={0}, form text=\""{1}\"")"", 
                             string.IsNullOrEmpty(formCloseClassName) ? @""?"" : formCloseClassName,
                             string.IsNullOrEmpty(formCloseText) ? @""?"" : formCloseText);","Seems a bit dramatic? Maybe just ""@@(could not retrieve form text)@@""",.cs,1,1,1
"@@ -75,7 +75,7 @@ func TestUnary(t *testing.T) {
                         sent := &testpb.TestMessage{Value: ""echo""}
                         received, err := client.Unary(ctx, sent)
                         require.NoError(t, err)
-                        assert.Equal(t, sent, received)
+                        assert.Equal(t, sent.Value, received.Value)
                 })
         }
 }",Why did you need to change this test?,go,1,1,0
"@@ -34,7 +34,7 @@ func TestConvertAWSMachine(t *testing.T) {
 				Spec: infrav1alpha3.AWSMachineSpec{
 					CloudInit: infrav1alpha3.CloudInit{
 						InsecureSkipSecretsManager: true,
-						SecretARN:                  ""something"",
+						SecretPrefix:               ""something/"",
 					},
 				},
 			}",Any particular reason for adding the `/` here? Should this be something we automatically do in the naming (adding a separator between the secret prefix and the chunk number)?,go,1,1,1
"@@ -75,7 +75,10 @@ func Setup(ctx context.Context, config *config.Node, proxy proxy.Proxy) error {
 
 	endpoint, _ := client.CoreV1().Endpoints(""default"").Get(ctx, ""kubernetes"", metav1.GetOptions{})
 	if endpoint != nil {
-		proxy.Update(getAddresses(endpoint))
+		addresses := getAddresses(endpoint)
+		if len(addresses) > 0 {
+			proxy.Update(getAddresses(endpoint))
+		}
 	}
 
 	disconnect := map[string]context.CancelFunc{}","Does the `proxy.Update` implementation fail for a zero-length and/or nil slice of addresses? If so, we should fix it there. My only other guess is you needed to set a breakpoint while debugging.",go,1,1,1
"@@ -87,10 +87,19 @@ var creatablesMigration = []string{
 	`ALTER TABLE assetcreators ADD COLUMN ctype INTEGER DEFAULT 0`,
 }
 
+var createOnlineAccountIndex = []string{
+	`ALTER TABLE accountbase
+		ADD COLUMN normalizedonlinebalance INTEGER`,
+	`CREATE INDEX IF NOT EXISTS onlineaccountbals
+		ON accountbase ( normalizedonlinebalance, address, data )
+		WHERE normalizedonlinebalance>0`,
+}
+
 var accountsResetExprs = []string{
 	`DROP TABLE IF EXISTS acctrounds`,
 	`DROP TABLE IF EXISTS accounttotals`,
 	`DROP TABLE IF EXISTS accountbase`,
+	`DROP TABLE IF EXISTS onlineaccountbase`,
 	`DROP TABLE IF EXISTS assetcreators`,
 	`DROP TABLE IF EXISTS storedcatchpoints`,
 	`DROP TABLE IF EXISTS catchpointstate`,","this line can be dropped, right ?",go,1,1,0
"@@ -0,0 +1,3 @@
+package filesystem_mock
+
+//go:generate mockgen -source ../../../../pkg/agent/plugin/workloadattestor/k8s/filesystem.go -destination filesystem.go -package filesystem_mock",what's the motivation to have custom package name? it would be good to keep the names consistent (most of the others here have the default package name),go,1,1,1
"@@ -1,6 +1,7 @@
 package libflux
 
-// #include ""influxdata/flux.h""
+// #cgo CFLAGS: -I${SRCDIR}/../../include/influxdata
+// #include <flux.h>
 // #include <stdlib.h>
 import ""C""
 ","For some reason, `/`s inside of `include` don't work, but `/`s inside of `cgo CFLAGS` _do_ work.",go,1,1,1
"@@ -166,10 +166,11 @@ type CertificateSpec struct {
 	// revisions will not be garbage collected. Default value is `nil`.
 	RevisionHistoryLimit *int32
 
-	// AdditionalOutputFormats allows for requests of additional output formats
-	// of the private key and the certificate to be written to the secret.
-	// This is an Alpha Feature and should be enabled with --feature-gates option.
-	AdditionalOutputFormats []AdditionalOutputFormat
+	// AdditionalOutputFormats defines extra output formats of the private key
+	// and signed certificate chain to be written to this Certificate's target
+	// Secret. This is an Alpha Feature and is only enabled with the
+	// `--feature-gates=AdditionalCertificateOutputFormats=true` option.
+	AdditionalOutputFormats []CertificateAdditionalOutputFormat `json:""additionalOutputFormats,omitempty""`
 }
 
 // CertificatePrivateKey contains configuration options for private keys",Internal type shouldn't have json tags,go,1,1,1
"@@ -2,10 +2,10 @@ package app
 
 import (
 	""fmt""
+	""github.com/kubeedge/kubeedge/pkg/util""
 	""os""
 
 	""github.com/spf13/cobra""
-	utilerrors ""k8s.io/apimachinery/pkg/util/errors""
 	""k8s.io/apiserver/pkg/util/term""
 	cliflag ""k8s.io/component-base/cli/flag""
 	""k8s.io/component-base/cli/globalflag""",Move this line to the category of kubeedge below L14 :),go,1,1,1
"@@ -260,9 +260,9 @@ func (d decoder) MapLen() (int, bool) {
 	return len(d.av.M), true
 }
 
-func (d decoder) DecodeMap(f func(key string, vd driver.Decoder) bool) {
+func (d decoder) DecodeMap(f func(key string, vd driver.Decoder, exactMatch bool) bool) {
 	for k, av := range d.av.M {
-		if !f(k, decoder{av}) {
+		if !f(k, decoder{av}, true) {
 			break
 		}
 	}",why not use `exactMatch` here?,go,1,1,0
"@@ -155,11 +155,11 @@ func (r *DeliveryReporter) reportEventProcessingTime(ctx context.Context, end ti
 }
 
 func filterTypeValue(v string) string {
-	if v != """" {
-		return v
+	if v == """" {
+		// the default value if the filter attributes are empty.
+		return unspecifiedFilterType
 	}
-	// the default value if the filter attributes are empty.
-	return ""any""
+	return EventTypeMetricValue(v)
 }
 
 func (r *DeliveryReporter) AddTags(ctx context.Context) (context.Context, error) {",It shouldn't be necessary to transform the filter type since the cardinality is already limited by the cardinality of triggers.,go,1,1,1
"@@ -62,6 +62,11 @@ func (t TraceID) MarshalJSON() ([]byte, error) {
 	return json.Marshal(hex.EncodeToString(t[:]))
 }
 
+// Stringer Implementation of String() returns the string form of a TraceID
+func (t TraceID) String() string {
+	return string(t[:])
+}
+
 // SpanID is a unique identify of a span in a trace.
 type SpanID [8]byte
 ",please use hex.EncodeToString() here as well.,go,1,1,1
"@@ -130,14 +130,14 @@ func TestAttestorTestSuite(t *testing.T) {
 }
 
 func (s *AttestorTestSuite) linkAgentSVIDPath() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/agent_svid.der""),
                 s.config.SVIDCachePath)
         s.Require().NoError(err)
 }
 
 func (s *AttestorTestSuite) linkBundle() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/bundle.der""),
                 s.config.BundleCachePath)
         s.Require().NoError(err)",Did you run into a problem with this?,go,1,1,0
"@@ -33,6 +33,7 @@ type Header struct {
 	Type         protocol.PacketType
 	IsLongHeader bool
 	KeyPhase     int
+	PayloadLen   protocol.ByteCount
 
 	// only needed for logging
 	isPublicHeader bool",Maybe it's worth splitting the long header and short header? Or have a substruct with only the long header / short header specific fields?,go,1,1,1
"@@ -236,6 +236,10 @@ func ReadConfigFiles(filenames []string, profiles []string) (*Configuration, err
 		config.Sandbox.Tool = config.Build.PleaseSandboxTool
 	}
 
+	if config.Sandbox.Namespace == """" && (config.Sandbox.Build || config.Sandbox.Test) {
+		config.Sandbox.Namespace = ""true""
+	}
+
 	// We can only verify options by reflection (we need struct tags) so run them quickly through this.
 	return config, config.ApplyOverrides(map[string]string{
 		""build.hashfunction"": config.Build.HashFunction,","This is kinda lame. We need 3 state logic: Not set, set to false, set to true. Will probably change this up: ""always"", ""sandbox"", ""never"" where it defaults to ""never"" to work with the default `please_sandbox` tool.",go,1,1,1
"@@ -101,9 +101,9 @@ func TestWebAppStatus_Describe(t *testing.T) {
 			},
 			mockcwSvc: func(m *mocks.MockalarmStatusGetter) {
 				m.EXPECT().GetAlarmsWithTags(map[string]string{
-					""ecs-project"":     ""mockProject"",
-					""ecs-environment"": ""mockEnv"",
-					""ecs-application"": ""mockApp"",
+					""copilot-application"": ""mockProject"",
+					""copilot-environment"": ""mockEnv"",
+					""copilot-service"":     ""mockApp"",
 				}).Return(nil, mockError)
 			},
 			mockWebAppDescriber: func(m *mocks.MockserviceArnGetter) {","Can we change all the mockApp stuff to mockService, and the mockProject text to mockApp?",go,1,1,1
"@@ -154,6 +154,8 @@ func (manager *connectionManager) startConnection(consumerID identity.Identity,
 		return err
 	}
 
+	cancel = append(cancel, func() { session.RequestSessionDestroy(dialog, sessionID) })
+
 	// set the session info for future use
 	manager.sessionInfo = SessionInfo{
 		SessionID:  sessionID,","Since we're not handling the errors here, we'd either need to add logging to the function itself, or handle errors here properly. Things might start failing and we would not know about it.",go,1,1,1
"@@ -903,6 +903,10 @@ receivers:
 		return errors.Wrap(err, ""base config from Secret could not be parsed"")
 	}
 
+	if err := checkAlertmanagerRootConfig(ctx, baseConfig); err != nil {
+		return errors.Wrap(err, ""base config check failed"")
+	}
+
 	amVersion := operator.StringValOrDefault(am.Spec.Version, operator.DefaultAlertmanagerVersion)
 	version, err := semver.ParseTolerant(amVersion)
 	if err != nil {",could be delegated to `loadCfg` (which would be good to have renamed BTW)?,go,1,1,1
"@@ -800,6 +800,8 @@ func (k *k8sOrchestrator) createControllerDeployment(volProProfile volProfile.Vo
 		return nil, err
 	}
 
+	pvc := vol.Labels.K8sPersistentVolumeClaim
+
 	if clusterIP == """" {
 		return nil, fmt.Errorf(""Volume cluster IP is required to create controller for volume 'name: %s'"", vsm)
 	}",Why do we need this change for the replica deployment?,go,1,1,1
"@@ -22,6 +22,7 @@ import (
 type Provider interface {
         Type() string
         // RunQuery runs the given query against the log provider,
-        // and then checks if there is at least one error log..
-        RunQuery(ctx context.Context, query string) (result bool, err error)
+        // and then checks if there is at least one error log.
+        // Returns the result reason if non-error occurred.
+        RunQuery(ctx context.Context, query string) (result bool, reason string, err error)
 }",Looks like now it should be `Evaluate` instead of `RunQuery`. But that is not in this PR scope.,go,0,1,1
"@@ -1584,14 +1584,13 @@ func (s *matchingEngineSuite) TestTaskExpiryAndCompletion() {
         s.matchingEngine.config.MaxTaskDeleteBatchSize = dynamicconfig.GetIntPropertyFilteredByTaskQueueInfo(2)
         // set idle timer check to a really small value to assert that we don't accidentally drop tasks while blocking
         // on enqueuing a task to task buffer
-        s.matchingEngine.config.IdleTaskqueueCheckInterval = dynamicconfig.GetDurationPropertyFnFilteredByTaskQueueInfo(time.Microsecond)
+        s.matchingEngine.config.IdleTaskqueueCheckInterval = dynamicconfig.GetDurationPropertyFnFilteredByTaskQueueInfo(time.Millisecond)
 
         testCases := []struct {
-                batchSize          int
                 maxTimeBtwnDeletes time.Duration
         }{
-                {2, time.Minute},       // test taskGC deleting due to size threshold
-                {100, time.Nanosecond}, // test taskGC deleting due to time condition
+                {time.Minute},     // test taskGC deleting due to size threshold
+                {time.Nanosecond}, // test taskGC deleting due to time condition
         }
 
         for _, tc := range testCases {",S -> ms? just check this is intentional?,go,1,0,1
"@@ -1,8 +1,15 @@
 package net
 
 import (
+        ""context""
+        ""fmt""
+        ""sort""
+
         ma ""gx/ipfs/QmNTCey11oxhb1AxDnQBRHtdhap6Ctud872NjAYPYYXPuc/go-multiaddr""
         ""gx/ipfs/QmTu65MVbemtUxJEWgsTtzv9Zv9P8rvmqNA4eG9TrTRGYc/go-libp2p-peer""
+        ""gx/ipfs/QmU7iTrsNaJfu1Rf5DrvaJLH9wJtQwmP4Dj8oPduprAU68/go-libp2p-swarm""
+        ""gx/ipfs/QmVmDhyTTUcQXFD1rRQ64fGLMSAoaQvNH3hwuaCFAPq2hy/errors""
+        routing ""gx/ipfs/QmWaDSNoSdSXU9b6udyaq9T8y6LkzMwqWxECznFqvtcTsk/go-libp2p-routing""
         ""gx/ipfs/QmZZseAa9xcK6tT3YpaShNUAEpyRAoWmUL5ojH3uGNepAc/go-libp2p-metrics""
         ""gx/ipfs/QmcNGX5RaxPPCYwa6yGXM1EcUbrreTTinixLcYGmMwf1sx/go-libp2p/p2p/protocol/ping""
         ""gx/ipfs/Qmd52WKRSwrBK5gUaJKawryZQ5by6UbNB8KVW2Zy6JtbyW/go-libp2p-host""","Blocking: hey @anorth, this works for me but you blocked this when I first did it so wanted to run it by you to make sure you are on board.",go,0,1,0
"@@ -198,6 +198,7 @@ func (node *Node) cancelBlockSubscription() {
 // Stop initiates the shutdown of the node.
 func (node *Node) Stop() {
 	node.cancelBlockSubscription()
+	node.ChainMgr.BestBlockPubSub.Shutdown()
 
 	if err := node.Host.Close(); err != nil {
 		fmt.Printf(""error closing host: %s\n"", err)","Seems like the chainmgr should shut itself down, rather than the node reaching inside of it. So maybe just have a shutdown or similar on the chainmgr?",go,1,1,1
"@@ -389,7 +389,7 @@ func (w *worker) reader(offset, end int64, closeOpen bool) (io.ReadCloser, error
 	r := w.rc
 	if w.rc == nil {
 		r, err = w.r.cacheFs().openRateLimited(func() (io.ReadCloser, error) {
-			return w.r.cachedObject.Object.Open(&fs.SeekOption{Offset: offset}, &fs.RangeOption{Start: offset, End: end})
+			return w.r.cachedObject.Object.Open(&fs.RangeOption{Start: offset, End: end - 1})
 		})
 		if err != nil {
 			return nil, err",why a -1 here? @ncw,go,0,1,0
"@@ -47,7 +47,7 @@ func GetProjectID(mgce domain.MetadataGCEInterface, projectFlag string) (string,
 
 func populateScratchBucketGcsPath(scratchBucketGcsPath *string, zone string, mgce domain.MetadataGCEInterface,
 	scratchBucketCreator domain.ScratchBucketCreatorInterface, file string, project *string,
-	storageClient domain.StorageClientInterface) (string, error) {
+	storageClient domain.StorageClientInterface, cleanupSharedScratch bool) (string, error) {
 
 	scratchBucketRegion := """"
 	if *scratchBucketGcsPath == """" {","cleanupSharedScratch sounds like the whole scratch bucket is deleted. It also sounds like no other criteria is used to perform this operation, while in reality current project has to be a mismatch for scratch bucket project. Maybe: cleanupFileOnMismatchedProject?",go,1,1,1
"@@ -589,9 +589,6 @@ func (b *bucket) ErrorAs(err error, i interface{}) bool {
 }
 
 func (b *bucket) ErrorCode(err error) gcerrors.ErrorCode {
-        if code := gcerrors.Code(err); code != gcerrors.Unknown {
-                return code
-        }
         serr, ok := err.(azblob.StorageError)
         switch {
         case !ok:","Note: I moved this to the concrete class (blob.go). If the driver produces an error that already has an error code, we should always just use it.",go,0,1,0
"@@ -22,7 +22,7 @@ import (
 
 func injectFoo() Foo {
 	// This non-call statement makes this an invalid injector.
-	 _ = 42
+	_ = 42
 	panic(wire.Build(provideFoo))
 }
 ","Note to reviewers: sorry, this is a random change from running `gofmt`.",go,0,1,0
"@@ -18,6 +18,7 @@ import (
 	""context""
 	""errors""
 	""fmt""
+	""github.com/GoogleCloudPlatform/compute-image-tools/daisy""
 	""strconv""
 	""testing""
 ",Separate this import from the std imports,go,1,1,1
"@@ -92,13 +92,13 @@ type Image struct {
 // ImageWithHealthcheck represents a container image with health check.
 type ImageWithHealthcheck struct {
 	Image       `yaml:"",inline""`
-	HealthCheck *ContainerHealthCheck `yaml:""healthcheck""`
+	HealthCheck *ContainerHealthCheck `yaml:""healthcheck""` // This is used as a pointer so that we can use `{{- if .ContainerHealthCheck}}` for manifest rendering.
 }
 
 // ImageWithPortAndHealthcheck represents a container image with an exposed port and health check.
 type ImageWithPortAndHealthcheck struct {
 	ImageWithPort `yaml:"",inline""`
-	HealthCheck   *ContainerHealthCheck `yaml:""healthcheck""`
+	HealthCheck   *ContainerHealthCheck `yaml:""healthcheck""` // This is used as a pointer so that we can use `{{- if .ContainerHealthCheck}}` for manifest rendering.
 }
 
 // ImageWithPort represents a container image with an exposed port.",Can we do `{{- if not .ImageConfig.HealthCheck.IsEmpty}}` instead?,go,1,1,1
"@@ -16,8 +16,11 @@
 package engine
 
 import (
+	""encoding/json""
+	""fmt""
 	""io/ioutil""
 	""path/filepath""
+	""runtime""
 	""strings""
 	""testing""
 	""time""","nit: can you group the imports to be similar to what they were before: misc packages, empty line, ""github.com/aws/amazon-ecs-agent/xxx"" packages, empty line, ""github.com/other/xxx"" packages",go,1,1,1
"@@ -60,8 +60,8 @@ var (
         Default = Config{
                 NodeType: FullNodeType,
                 Network: Network{
-                        Host:                                ""127.0.0.1"",
-                        Port:                                4689,
+                        Host: ""127.0.0.1"",
+                        Port: 4689,
                         MsgLogsCleaningInterval:             2 * time.Second,
                         MsgLogRetention:                     5 * time.Second,
                         HealthCheckInterval:                 time.Second,",File is not `goimports`-ed,go,0,1,1
"@@ -0,0 +1,17 @@
+package webhook
+
+import (
+	""k8s.io/apimachinery/pkg/runtime""
+
+	""github.com/jetstack/cert-manager/pkg/apis/certmanager/v1alpha1""
+	""github.com/jetstack/cert-manager/pkg/internal/apis/certmanager/install""
+)
+
+var (
+	Scheme = runtime.NewScheme()
+)
+
+func init() {
+	v1alpha1.AddToScheme(Scheme)
+	install.Install(Scheme)
+}",I've introduced a dedicated scheme for the webhook instead of `pkg/api` - this scheme has the internal API group registered as well as defaulting and conversion functions registered against `v1alpha1` via `github.com/jetstack/cert-manager/pkg/internal/apis/certmanager/install`,go,1,1,1
"@@ -78,7 +78,7 @@ func (collector *Metrics) Describe(d chan<- *prometheus.Desc) {
 
 func (collector *Metrics) descsByDevice(d chan<- *prometheus.Desc, device *wgtypes.Device) {
         if device == nil {
-                collector.logCtx.Error(""BUG: called descsByDevice with nil device"")
+                collector.logCtx.Debug(""BUG: called descsByDevice with nil device"")
                 return
         }
 ",This one seems like a real error to me,go,0,1,1
"@@ -33,6 +33,7 @@ var (
 	// This variable is set at build time using -ldflags parameters.
 	// See: https://stackoverflow.com/a/11355611
 	gitSha1 string
+	options *compileopts.Options
 )
 
 // commandError is an error type to wrap os/exec.Command errors. This provides",Globals are a bad idea. Can you pass this options object manually to all `executeCommand` calls? You can usually use `config.Options` for that.,go,1,1,1
"@@ -233,7 +233,15 @@ func (oc *OCSPMonitor) run() {
         quitCh := s.quitCh
         s.mu.Unlock()
 
-        defer s.grWG.Done()
+        var doShutdown bool
+        defer func() {
+                // Need to decrement before shuting down, otherwise shutdown
+                // would be stuck waiting on grWG to go down to 0.
+                s.grWG.Done()
+                if doShutdown {
+                        s.Shutdown()
+                }
+        }()
 
         oc.mu.Lock()
         shutdownOnRevoke := oc.shutdownOnRevoke","@wallyqs @variadico Could you please review this part: what was happening is that when run() decides to call s.Shutdown(), this go routine would be blocked because Shutdown() would be waiting on grWG.Wait() that would never be done because this go routine itself had not yet called s.grWG.Done(). Can you think of if this would have been user-visible? And if so, what would be the symptoms? If not user-visible, this is just a fix that will help make sure that there are not left-over go routines when a test completes.",go,0,0,1
"@@ -41,8 +41,8 @@ func (s *Symlink) Attr(ctx context.Context, a *fuse.Attr) (err error) {
 		return err
 	}
 
-	s.parent.folder.fillAttrWithUIDAndWritePerm(ctx, &de, a)
-	a.Mode = os.ModeSymlink | 0777
+	s.parent.folder.fillAttrWithUIDAndWritePerm(ctx, s.parent.node, &de, a)
+	a.Mode = os.ModeSymlink | a.Mode | 0400
 	return nil
 }
 ",Did you intend to clear the execution bit as well?,go,1,1,1
"@@ -69,7 +69,7 @@ var (
 		completeJobCompleted: 9,
 	}
 
-	cancelC chan struct{}
+	cancelC = make(chan struct{})
 )
 
 func initPatch(ctx context.Context) {",why is this change needed?,go,1,1,0
"@@ -464,10 +464,12 @@ func (target *BuildTarget) AllURLs(state *BuildState) []string {
 // resolveDependencies matches up all declared dependencies to the actual build targets.
 // TODO(peterebden,tatskaari): Work out if we really want to have this and how the suite of *Dependencies functions
 //                             below should behave (preferably nicely).
-// TODO(tatskaari): Work out if we can use a channel instead of a callback.
 func (target *BuildTarget) resolveDependencies(graph *BuildGraph, callback func(*BuildTarget) error) error {
 	var g errgroup.Group
-	target.mutex.RLock()
+
+	target.mutex.Lock()
+	defer target.mutex.Unlock()
+
 	for i := range target.dependencies {
 		dep := &target.dependencies[i]
 		if len(dep.deps) > 0 {",Did manage to do this but it wasn't much better because we have to pass the error group back to the caller. Don't think it's really worth changing now.,go,1,1,1
"@@ -27,4 +27,7 @@ type Response struct {
 	Headers transport.Headers
 
 	// TODO Response context?
+
+	// TODO Allow users to specify that this JSON response contains an
+	// application error.
 }",Perhaps indicated through a header or status code... prefer 200 w header :),go,1,0,1
"@@ -35,6 +35,8 @@ var cipherMap = map[string]uint16{
 
 func defaultCipherSuites() []uint16 {
 	return []uint16{
+		tls.TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,
+		tls.TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
 		tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,",I think we should put ECDSA first..,go,1,1,0
"@@ -16,6 +16,7 @@ type BlockProposer interface {
 	SendHello(ci *block.ChainInfo) error
 	SendOwnBlock(ci *block.ChainInfo) error
 	SendGossipBlock(ci *block.ChainInfo) error
+	WaitForTarget(ci *block.ChainInfo) func()
 }
 
 // Manager sync the chain.","I think `WaiterForTarget` would be slightly better, since this call doesn't block.",go,1,1,1
"@@ -9,9 +9,9 @@ import (
         ""io/ioutil""
         ""strings""
 
-        ""gopkg.in/editorconfig/editorconfig-core-go.v1""
         ""gopkg.in/macaron.v1""
 
+        ""github.com/editorconfig/editorconfig-core-go/v2""
         ""github.com/gogs/git-module""
 
         ""gogs.io/gogs/internal/db""",This import grouping should be changed.,go,1,1,0
"@@ -24,10 +24,12 @@ type Cleaner struct {
 
 // SessionStorage keeps sessions and allows removing them by proposal id
 type SessionStorage interface {
-	RemoveForService(serviceId string)
+	RemoveForService(serviceID string)
 }
 
 // Cleanup removes sessions of stopped service
-func (cleaner *Cleaner) Cleanup(instance *Instance) {
-	cleaner.SessionStorage.RemoveForService(string(instance.id))
+func (cleaner *Cleaner) Cleanup(event EventPayload) {
+	if event.Status == string(NotRunning) {
+		cleaner.SessionStorage.RemoveForService(event.ID)
+	}
 }","Its probably not a `Cleanup` then, since imho its should be called only once and we don't care about event's state.",go,1,1,1
"@@ -158,6 +158,9 @@ type NetworkPolicy struct {
         // Priority represents the relative priority of this Network Policy as compared to
         // other Network Policies. Priority will be unset (nil) for K8s Network Policy.
         Priority *float64
+        // TierPriority represents the priority of the Tier associated with this Network
+        // Policy. The TierPriority will remain nil for K8s NetworkPolicy.
+        TierPriority *uint32
 }
 
 // Direction defines traffic direction of NetworkPolicyRule.","NetworkPolicy is a word, and should be in one line?",go,1,1,1
"@@ -503,12 +503,14 @@ type TaskConfig struct {
 }
 
 // TaskPlatform returns the platform for the service.
-func (t *TaskConfig) TaskPlatform() (*string, error) {
-	if t.Platform.PlatformString == nil {
-		return nil, nil
+func (t *TaskConfig) TaskPlatform() *string {
+	if t.Platform.IsEmpty() {
+		return nil
+	}
+	if t.IsWindows() {
+		return aws.String(platformString(OSWindows, t.Platform.Arch()))
 	}
-	val := string(*t.Platform.PlatformString)
-	return &val, nil
+	return aws.String(platformString(t.Platform.OS(), t.Platform.Arch()))
 }
 
 // IsWindows returns whether or not the service is building with a Windows OS.",what if `Arch` is empty? should we instead just return `OSWindows`?,go,1,1,1
"@@ -45,8 +45,8 @@ import (
 const (
 	// heartbeatTimeout is the maximum time to wait between heartbeats
 	// without disconnecting
-	heartbeatTimeout = 5 * time.Minute
-	heartbeatJitter  = 3 * time.Minute
+	heartbeatTimeout = 1 * time.Minute
+	heartbeatJitter  = 1 * time.Minute
 
 	inactiveInstanceReconnectDelay = 1 * time.Hour
 ",Why was the jitter removed?,go,1,1,0
"@@ -325,7 +325,7 @@ func (task *Task) initializeVolumes(cfg *config.Config, dockerClient dockerapi.D
 // able to handle such an occurrence appropriately (e.g. behave idempotently).
 func (task *Task) PostUnmarshalTask(cfg *config.Config,
 	credentialsManager credentials.Manager, resourceFields *taskresource.ResourceFields,
-	dockerClient dockerapi.DockerClient, ctx context.Context) error {
+	dockerClient dockerapi.DockerClient, ctx context.Context, options ...Option) error {
 	// TODO, add rudimentary plugin support and call any plugins that want to
 	// hook into this
 	task.adjustForPlatform(cfg)","I like the idea, but call to `PostUnmarshalTask` might become cumbersome with too many options",go,1,1,1
"@@ -7,9 +7,13 @@ package api
 import (
         ""bytes""
         ""errors""
+        ""fmt""
+        ""github.com/ethersphere/bee/pkg/tags""
         ""io""
         ""io/ioutil""
         ""net/http""
+        ""strings""
+        ""time""
 
         ""github.com/ethersphere/bee/pkg/jsonhttp""
         ""github.com/ethersphere/bee/pkg/storage""","Somehow this import is among the stdlib's packages. Not so important, but it would be nice to have it a few lines below within the bee imports. Also noticed in some other places in this pr...",go,0,1,1
"@@ -97,7 +97,12 @@ func MakeTypedExport(actor exec.ExecutableActor, method string) exec.ExportedFun
                 outErr, ok := out[len(out)-1].Interface().(error)
                 if ok {
                         if !(errors.ShouldRevert(outErr) || errors.IsFault(outErr)) {
-                                panic(""you are a bad person: error must be either a reverterror or a fault"")
+                                var paramStr []string
+                                for _, param := range params {
+                                        paramStr = append(paramStr, param.String())
+                                }
+                                msg := fmt.Sprintf(""actor: %#+v, method: %s, args: %v, error: %s"", actor, method, paramStr, outErr.Error())
+                                panic(fmt.Sprintf(""you are a bad person: error must be either a reverterror or a fault: %v"", msg))
                         }
 
                         return nil, exitCode, outErr",@phritz are we ok losing the insult in this error message? I know it's meant for programmers but until we have a model for change or more than best effort infra users will run into this.,go,0,1,1
"@@ -57,7 +57,7 @@ func newTestServer(t *testing.T, o testServerOptions) *testServer {
 	settlement := swapmock.New(o.SettlementOpts...)
 	chequebook := chequebookmock.NewChequebook(o.ChequebookOpts...)
 	swapserv := swapmock.NewApiInterface(o.SwapOpts...)
-	s := debugapi.New(o.Overlay, o.PublicKey, o.PSSPublicKey, o.EthereumAddress, o.P2P, o.Pingpong, topologyDriver, o.Storer, logging.New(ioutil.Discard, 0), nil, o.Tags, acc, settlement, true, swapserv, chequebook)
+	s := debugapi.New(o.Overlay, o.PublicKey, o.PSSPublicKey, o.EthereumAddress, o.P2P, o.Pingpong, topologyDriver, o.Storer, logging.New(ioutil.Discard, 0), nil, o.Tags, acc, settlement, true, swapserv, chequebook, api.Options{})
 	ts := httptest.NewServer(s)
 	t.Cleanup(ts.Close)
 ",referencing the wrong package. should be `debugapi.Options`,go,1,1,1
"@@ -53,7 +53,7 @@ func (m NoopMetricsClient) RecordDistribution(scope int, timer int, d int) {}
 func (m NoopMetricsClient) UpdateGauge(scope int, gauge int, value float64) {}
 
 func (m NoopMetricsClient) Scope(scope int, tags ...Tag) Scope {
-	return &metricsScope{
+	return &tallyScope{
 		scope:     tally.NoopScope,
 		rootScope: tally.NoopScope,
 	}",It would be great to remove `tally` dependency here. There is `NoopScope` already but it depends on `tally` too. So you will need to create real no-op implementation.,go,1,1,1
"@@ -698,12 +698,15 @@ func (o *Consumer) sendAckReply(subj string) {
 func (o *Consumer) processAck(_ *subscription, _ *client, subject, reply string, msg []byte) {
 	sseq, dseq, dcount, _ := o.ReplyInfo(subject)
 
+	var skipAckReply bool
+
 	switch {
 	case len(msg) == 0, bytes.Equal(msg, AckAck), bytes.Equal(msg, AckOK):
 		o.ackMsg(sseq, dseq, dcount)
 	case bytes.Equal(msg, AckNext):
 		o.ackMsg(sseq, dseq, dcount)
 		o.processNextMsgReq(nil, nil, subject, reply, nil)
+		skipAckReply = true
 	case bytes.Equal(msg, AckNak):
 		o.processNak(sseq, dseq)
 	case bytes.Equal(msg, AckProgress):","I think we should send ack if no new messages can be sent, otherwise just send new message.",go,1,1,1
"@@ -0,0 +1,5 @@
+package xds
+
+type RTDSConfig struct {
+        layerName string
+}",I'm not sure if there's much value in having this be in its own file,go,1,1,1
"@@ -45,8 +45,10 @@ type NetworkPolicySpec struct {
 	// Priority specfies the order of the NetworkPolicy relative to other
 	// NetworkPolicies.
 	Priority float64 `json:""priority""`
-	// Select workloads on which the rules will be applied to.
-	AppliedTo []NetworkPolicyPeer `json:""appliedTo""`
+	// Select workloads on which the rules will be applied to. Cannot be set in
+	// conjunction with AppliedTo in each rule.
+	// +optional
+	AppliedTo []NetworkPolicyPeer `json:""appliedTo,omitempty""`
 	// Set of ingress rules evaluated based on the order in which they are set.
 	// Currently Ingress rule supports setting the `From` field but not the `To`
 	// field within a Rule.",@tnqn do you know of any backwards-compatibility concern when adding `omitempty` to an existing field? I would imagine there isn't one.,go,0,1,1
"@@ -22,7 +22,7 @@ type Dispatcher interface {
 
 // ScheduleFunc is a function that represents work to do.
 // The throughput is the maximum number of messages to process for this scheduling.
-type ScheduleFunc func(throughput int)
+type ScheduleFunc func(ctx context.Context, throughput int)
 
 // poolDispatcher implements Dispatcher using a pool of goroutines.
 type poolDispatcher struct {","For transformations, we carry out the work with this dispatcher which in my understanding is pretty much similar to the executor service we have in Java. When we start to work on a transformation, a span needs to be created to trace this operation. This needs access to the `context.Context` which helps to track the hierarchical structure of the spans.",go,1,1,1
"@@ -60,6 +60,15 @@ func New(st storage.StateStorer, unreserveFunc unreserveFn) (postage.Storer, err
 	return &store{st, cs, rs, unreserveFunc}, nil
 }
 
+func (s *store) GetReserveState() *postage.Reservestate {
+	return &postage.Reservestate{
+		Radius:    s.rs.Radius,
+		Available: s.rs.Available,
+		Outer:     new(big.Int).Set(s.rs.Outer),
+		Inner:     new(big.Int).Set(s.rs.Inner),
+	}
+}
+
 // Get returns a batch from the batchstore with the given ID.
 func (s *store) Get(id []byte) (*postage.Batch, error) {
 	b := &postage.Batch{}",bear in mind you're leaking the package internals here: `Outer` and `Inner` are pointers. It would be prudent to create a copy of them.,go,1,1,1
"@@ -31,7 +31,7 @@ type restBackend struct {
 }
 
 // Open opens the REST backend with the given config.
-func Open(cfg Config, rt http.RoundTripper) (restic.Backend, error) {
+func Open(cfg Config, rt http.RoundTripper) (*restBackend, error) {
 	client := &http.Client{Transport: rt}
 
 	sem, err := backend.NewSemaphore(cfg.Connections)","exported func Open returns unexported type *rest.restBackend, which can be annoying to use",go,1,1,1
"@@ -23,6 +23,8 @@ var requestReplacer = strings.NewReplacer(
 	""\n"", ""\\n"",
 )
 
+var now = time.Now
+
 // Replacer is a type which can replace placeholder
 // substrings in a string with actual values from a
 // http.Request and ResponseRecorder. Always use",This is a very elegant way to make time testable. :+1:,go,1,1,0
"@@ -72,7 +72,7 @@ var opts struct {
 
 	FeatureFlags struct {
 		NoUpdate           bool    `long:""noupdate"" description:""Disable Please attempting to auto-update itself.""`
-		NoCache            bool    `long:""nocache"" description:""Disable caches (NB. not incrementality)""`
+		NoCache            bool    `long:""nocache"" description:""Deprecated, use plz build --rebuild or plz test --rerun flags instead.""`
 		NoHashVerification bool    `long:""nohash_verification"" description:""Hash verification errors are nonfatal.""`
 		NoLock             bool    `long:""nolock"" description:""Don't attempt to lock the repo exclusively. Use with care.""`
 		KeepWorkdirs       bool    `long:""keep_workdirs"" description:""Don't clean directories in plz-out/tmp after successfully building targets.""`",This is confusingly named. Feature flags are what I'm calling the things that gate breaking changes between releases. Might want to revisit this.,go,1,1,1
"@@ -36,7 +36,7 @@ type Cgroup struct {
 type Resources struct {
 	// If this is true allow access to any kind of device within the container.  If false, allow access only to devices explicitly listed in the allowed_devices list.
 	// Deprecated
-	AllowAllDevices bool `json:""allow_all_devices,omitempty""`
+	AllowAllDevices *bool `json:""allow_all_devices,omitempty""`
 	// Deprecated
 	AllowedDevices []*Device `json:""allowed_devices,omitempty""`
 	// Deprecated",Why did you drop the `omitempty` tag? That is meant to qualify if a field is optional or not.,go,1,1,1
"@@ -320,7 +320,7 @@ func (s *Server) isClientAuthorized(c *client) bool {
 				var ok bool
 				user, ok = s.users[u]
 				if !ok {
-					c.Debugf(""User in cert [%q], not found"", euser)
+					c.Debugf(""User in cert [%q], not found"", u)
 					return false
 				}
 				euser = u","I'd rephrase this a bit, `User [%q] not found in cert`.",go,1,1,1
"@@ -32,14 +32,15 @@ func requireGrowChain(ctx context.Context, t *testing.T, blockSource *th.TestFet
 	link := requireHeadTipset(t, chainStore)
 
 	signer, ki := types.NewMockSignersAndKeyInfo(1)
-	mockSignerPubKey := ki[0].PublicKey()
+	minerOwner, err := ki[0].Address()
+	require.NoError(t, err)
 
 	for i := uint(0); i < numBlocks; i++ {
 		fakeChildParams := th.FakeChildParams{
 			Parent:      link,
 			GenesisCid:  dstP.genCid,
 			Signer:      signer,
-			MinerPubKey: mockSignerPubKey,
+			MinerWorker: minerOwner,
 			StateRoot:   dstP.genStateRoot,
 		}
 		linkBlock := th.RequireMkFakeChild(t, fakeChildParams)",Name this `minerWorker` for consistency with the same lines below (or change the others to match this).,go,1,1,1
"@@ -787,7 +787,11 @@ func (a *FakeWebAPI) DisableStaticAdmin(ctx context.Context, req *webservice.Dis
 	return nil, status.Error(codes.Unimplemented, """")
 }
 
-func (a *FakeWebAPI) UpdateProjectSingleSignOn(ctx context.Context, req *webservice.UpdateProjectSingleSignOnRequest) (*webservice.UpdateProjectSingleSignOnResponse, error) {
+func (a *FakeWebAPI) UpdateProjectSSOConfig(ctx context.Context, req *webservice.UpdateProjectSSOConfigRequest) (*webservice.UpdateProjectSSOConfigResponse, error) {
+	return nil, status.Error(codes.Unimplemented, """")
+}
+
+func (a *FakeWebAPI) UpdateProjectRBACConfig(ctx context.Context, req *webservice.UpdateProjectRBACConfigRequest) (*webservice.UpdateProjectRBACConfigResponse, error) {
 	return nil, status.Error(codes.Unimplemented, """")
 }
 ",`ctx` is unused in UpdateProjectSSOConfig,go,1,1,1
"@@ -563,6 +563,7 @@ func makeStatefulSetSpec(p monitoringv1.Prometheus, c *Config, ruleConfigMapName
 		},
 	}
 
+	promVolumeMounts = append(promVolumeMounts, p.Spec.VolumeMounts...)
 	for _, name := range ruleConfigMapNames {
 		promVolumeMounts = append(promVolumeMounts, v1.VolumeMount{
 			Name:      name,",I am guessing this won't interfere with the merge patch we do?,go,0,1,1
"@@ -30,7 +30,13 @@ import (
 	""go.uber.org/zap/zapcore""
 )
 
-const _error = ""error""
+const (
+	_error              = ""error""
+	_successfulInbound  = ""Handled inbound request.""
+	_successfulOutbound = ""Made outbound call.""
+	_errorInbound       = ""Error handling inbound request.""
+	_errorOutbound      = ""Error making outbound call.""
+)
 
 // A call represents a single RPC along an edge.
 //","Are we using this constant anywhere? It was introduced in this commit, but I don't see it used here.",go,1,1,1
"@@ -49,6 +49,8 @@ const (
 	DeviceETUpdatedSuffix = ""/updated""
 	// DeviceETStateUpdateSuffix the topic suffix for device state update event
 	DeviceETStateUpdateSuffix = ""/state/update""
+	// DeviceETStateUpdateResultSuffix the topic suffix for device state update result event
+	DeviceETStateUpdateResultSuffix = ""/state/update/result""
 	// DeviceETStateGetSuffix the topic suffix for device state get event
 	DeviceETStateGetSuffix = ""/state/get""
 ","there're some codes that also can be replaced by this new topic in edge/test/integration/device/device_test.go, we can modify those also.",go,1,1,1
"@@ -88,6 +88,16 @@ type BareRootMetadataV3 struct {
 	// of writing to the given folder.
 	FinalizedInfo *tlf.HandleExtension `codec:""fi,omitempty""`
 
+	// The sequence number of the global Keybase Merkle tree at the
+	// time this update was created (from the writer's perspective).
+	// This field was added to V3 after it was live for a while, and
+	// older clients that don't know about this field yet might copy
+	// it into new updates via the unknown fields copier. Which means
+	// new MD updates might end up referring to older Merkle roots.
+	// That's ok since this is just a hint anyway, and shouldn't be
+	// fully trusted when checking MD updates against the Merkle tree.
+	KBMerkleSeqNo MerkleSeqNo `codec:""msn,omitempty""`
+
 	codec.UnknownFieldSetHandler
 }
 ",What are the implication of this once we start checking merkle tree in KBFS clients? Does this make verification more expensive?,go,1,1,1
"@@ -18,7 +18,7 @@ import (
 	""net/http""
 	""time""
 
-	""istio.io/fortio/log""
+	""fortio.org/fortio/log""
 	""istio.io/tools/isotope/convert/pkg/graph/svc""
 	""istio.io/tools/isotope/convert/pkg/graph/svctype""
 	""istio.io/tools/isotope/service/pkg/srv/prometheus""",File is not `goimports`-ed (from `goimports`),go,0,1,1
"@@ -65,6 +65,10 @@ type Harness interface {
         // MaxBatchSizes returns the maximum size of SendBatch/Send(Na|A)cks, or 0
         // if there's no max.
         MaxBatchSizes() (int, int)
+
+        // SupportsMultipleSubscriptions returns true iff the provider supports
+        // multiple subscriptions for the same topic.
+        SupportsMultipleSubscriptions() bool
 }
 
 // HarnessMaker describes functions that construct a harness for running tests.",s/returns true iff/reports whether/,go,1,0,1
"@@ -262,7 +262,7 @@ func acceptedEncodings(r *http.Request) []string {
                 return []string{}
         }
 
-        var prefs []encodingPreference
+        prefs := []encodingPreference{}
 
         for _, accepted := range strings.Split(acceptEncHeader, "","") {
                 parts := strings.Split(accepted, "";"")","_sniff_ Is this the smell of... bikeshedding? :laughing: Or is this an actual lint warning? If so, why? (Personally I prefer the `var` syntax to explicitly make the definition a zero initialization)",go,1,1,1
"@@ -109,6 +109,16 @@ func (r *Resource) String() string {
 	return r.attrs.Encoded(attribute.DefaultEncoder())
 }
 
+func (r *Resource) MarshalLog() interface{} {
+	return struct {
+		Attributes []attribute.KeyValue
+		SchemaURL  string
+	}{
+		Attributes: r.attrs.ToSlice(),
+		SchemaURL:  r.schemaURL,
+	}
+}
+
 // Attributes returns a copy of attributes from the resource in a sorted order.
 // To avoid allocating a new slice, use an iterator.
 func (r *Resource) Attributes() []attribute.KeyValue {",How well does this render? Do we need to add marshaling instructions to the `attribute.KeyValue` type?,go,1,1,1
"@@ -607,7 +607,7 @@ func (sm *Miner) submitPoSt(start, end *types.BlockHeight, inputs []generatePost
 		return
 	}
 	if len(faults) != 0 {
-		log.Errorf(""some faults when generating PoSt: %v"", faults)
+		log.Warningf(""some faults when generating PoSt: %v"", faults)
 		// TODO: proper fault handling
 	}
 ",As per the CONTRIBUTING.md doc: > Error: a truly unexpected condition that should not happen in Real Life and that a dev should go look at I don't think that a PoSt fault should cause a developer to go scrambling. I think you made the right choice to change this log entry to be a warning.,go,1,1,1
"@@ -19,6 +19,7 @@ import (
 
 // mspPlumbing is the subset of the plumbing.API that MinerSetPrice uses.
 type mspPlumbing interface {
+	MessagePreview(ctx context.Context, from, to address.Address, method string, params ...interface{}) (types.GasUnits, error)
 	MessageSend(ctx context.Context, from, to address.Address, value *types.AttoFIL, gasPrice types.AttoFIL, gasLimit types.GasUnits, method string, params ...interface{}) (cid.Cid, error)
 	MessageWait(ctx context.Context, msgCid cid.Cid, cb func(*types.Block, *types.SignedMessage, *types.MessageReceipt) error) error
 	ConfigSet(dottedKey string, jsonString string) error",`PreviewMinerSetPrice` should define its own plumbing that replaces `MessageSend` with `MessagePreview`.,go,1,1,1
"@@ -67,14 +67,14 @@ TLS certificates from various issuing sources.
 It will ensure certificates are valid and up to date periodically, and attempt
 to renew certificates at an appropriate time before expiry.`,
 
-		// TODO: Refactor this function from this package
-		Run: func(cmd *cobra.Command, args []string) {
+		RunE: func(cmd *cobra.Command, args []string) error {
 			if err := o.Validate(args); err != nil {
-				logf.Log.Error(err, ""error validating options"")
+				return fmt.Errorf(""error validating options: %s"", err)
 			}
 
 			logf.Log.Info(""starting controller"", ""version"", util.AppVersion, ""git-commit"", util.AppGitCommit)
 			o.RunCertManagerController(stopCh)
+			return nil
 		},
 	}
 ","How does RunE handle displaying errors to users? Would we be better to use `Run` as before so that we can control the output format? Don't think it's a big deal, but I'm just uncertain how RunE actually works  ",go,1,1,1
"@@ -111,8 +111,9 @@ func (m *manager) updatePodStatus() {
 		err := m.metaClient.PodStatus(pod.Namespace).Update(pod.Name, edgeapi.PodStatusRequest{UID: pod.UID, Name: pod.Name, Status: s})
 		if err != nil {
 			klog.Errorf(""Update pod status failed err :%v"", err)
+			return
 		}
-		klog.Infof(""Status for pod %s updated successfully: %+v"", pod.Name, podStatus)
+		klog.V(4).Infof(""Status for pod %s updated successfully"", pod.Name)
 		m.apiStatusVersions[pod.UID] = podStatus.DeepCopy()
 	}
 }",We should return here instead of adding the else. :),go,1,1,1
"@@ -267,6 +267,13 @@ func (c *{{ .API.StructName }}) {{ .ExportedName }}Request(` +
 	{{- end }}
 
 	{{- if .EndpointDiscovery }}
+		
+		// if a custom endpoint is provided for the request, 
+        // we skip endpoint discovery workflow
+		if req.Config.Endpoint != nil {
+			return
+		}
+
 		{{- if not .EndpointDiscovery.Required }}
 			if aws.BoolValue(req.Config.EnableEndpointDiscovery) {
 		{{- end }}","Nit spacing. also this if statement should wrap the endpoint discovery generated logic, instead of exit early.",go,1,1,1
"@@ -29,6 +29,13 @@ import (
 	""sigs.k8s.io/controller-runtime/pkg/client""
 )
 
+const (
+	// AnnotationCleanFinalizer key
+	AnnotationCleanFinalizer = `chaos-mesh/cleanFinalizer`
+	// AnnotationCleanFinalizerForced value
+	AnnotationCleanFinalizerForced = `forced`
+)
+
 // Reconciler for common chaos
 type Reconciler struct {
 	reconciler.InnerReconciler",It seems we should define the annotation key prefix for chaos-mesh. What about `chaosmesh.pingcap.com/` @zhouqiang-cl @cwen0,go,0,1,1
"@@ -35,3 +35,7 @@ func (s *stub) ChangedLines() (map[string][]int, error) {
 func (s *stub) Checkout(revision string) error {
         return fmt.Errorf(""Unknown SCM, can't checkout"")
 }
+
+func (s *stub) CurrentRevDate(format string) string {
+        return ""<unknown>""
+}",Don't strongly mind which but let's pick one of either `<unknown>` or `UNKNOWN` (as in the git impl when it can't be determined),go,1,1,1
"@@ -453,7 +453,8 @@ var buildFunctions = map[string]func() bool{
                                         config.Cache.RPCURL = """"
                                         config.Cache.HTTPURL = """"
                                 }
-                                clean.Clean(config, newCache(config), !opts.Clean.NoBackground)
+                                state := core.NewBuildState(1, nil, 4, config)
+                                clean.Clean(config, newCache(state), !opts.Clean.NoBackground)
                                 return true
                         }
                         opts.Clean.Args.Targets = core.WholeGraph",This feels a bit odd too - what are these magic numbers?,go,1,1,1
"@@ -347,6 +347,8 @@ func Main() int {
 		}
 	}
 
+	// todo - I wonder can these go away because of
+	// https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#admission-webhook-metrics
 	validationTriggeredCounter := prometheus.NewCounter(prometheus.CounterOpts{
 		Name: ""prometheus_operator_rule_validation_triggered_total"",
 		Help: ""Number of times a prometheusRule object triggered validation"",","It would be worth checking. Reading the docs, I'm not sure how the metrics look like when `failurePolicy` is `None`.",go,1,1,1
"@@ -17,3 +17,5 @@ var (
         GenerateCommonBinPrefixes = generateCommonBinPrefixes
         PeerPingPollTime          = &peerPingPollTime
 )
+
+type PeerFilterFunc = peerFilterFunc",is this used anywhere?,go,1,1,0
"@@ -107,6 +107,7 @@ func (b *bucket) Attributes(ctx context.Context, key string) (driver.Attributes,
 	}
 	return driver.Attributes{
 		ContentType: xa.ContentType,
+		Metadata:    xa.Metadata,
 		ModTime:     info.ModTime(),
 		Size:        info.Size(),
 	}, nil",This is missing a pass to lowercase all the keys.,go,1,1,1
"@@ -57,7 +57,7 @@ func (c *Controller) CreateStoragePool(spcGot *apis.StoragePoolClaim, reSync boo
 		glog.Errorf(""Could not acquire lease on spc object:%v"", err)
 		return err
 	}
-	glog.Info(""Lease acquired successfully on storagepoolclaim %s "", spcGot.Name)
+	glog.Infof(""Lease acquired successfully on storagepoolclaim %s "", spcGot.Name)
 
 	defer newSpcLease.Release()
 ","Formatting directive present, `glog.Infof` should be used instead.",go,1,1,1
"@@ -701,6 +701,8 @@ func (r *ReconcileClusterDeployment) startNewProvision(
                 }
         }
 
+        extraEnvVars := getInstallLogEnvVars(cd.Name)
+
         podSpec, err := install.InstallerPodSpec(
                 cd,
                 provisionName,",Are we retiring the PVC creating code right above here as part of this PR?,go,0,1,1
"@@ -23,6 +23,8 @@ import (
 // NOTE: json tags are required.  Any new fields you add must have json tags for the fields to be serialized.
 
 // +kubebuilder:object:root=true
+// +kubebuilder:printcolumn:name=""action"",type=string,JSONPath=`.spec.action`
+// +kubebuilder:printcolumn:name=""duration"",type=string,JSONPath=`.spec.duration`
 // +kubebuilder:subresource:status
 // +chaos-mesh:base
 // +chaos-mesh:webhook:enableUpdate","ditto, We do not need add this feature for PodXXXChaos",go,0,1,1
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -242,7 +242,7 @@ returns a spiffeid->registration entries map
 This map is used generated CSR for non-base SVIDs and update the agent cache entries
 */
 func (a *Agent) attest() (map[string]*common.RegistrationEntry, error) {
-        a.config.Log.Info(""Preparing to attest against %s"", a.config.ServerAddress.String())
+        a.config.Log.Info(""Preparing to attest against"", a.config.ServerAddress.String())
 
         plugins := a.Catalog.NodeAttestors()
         if len(plugins) != 1 {",Do we need a space at the end like the one below?,go,1,1,1
"@@ -35,6 +35,10 @@ type ConfigRunner struct {
 
 	// Must not be nil if using default subnets.
 	VPCGetter VPCGetter
+
+	// Platform configuration
+	OS   string
+	Arch string
 }
 
 // Run runs tasks given subnets, security groups and the cluster, and returns the tasks.",Is `Arch` used anywhere? (Same for env_runner.go),go,1,1,1
"@@ -649,6 +649,8 @@ func (k *KeybaseServiceBase) GetTLFCryptKeys(ctx context.Context,
 		return keybase1.GetTLFCryptKeysRes{}, err
 	}
 
+	ctx = context.WithValue(ctx, CtxNoAddToFavoriteKey{}, true)
+
 	tlfHandle, err := k.getHandleFromFolderName(ctx, query.TlfName, false)
 	if err != nil {
 		return res, err","`true` seems weird, since setting it to `false` doesn't do the opposite. Maybe just set it to `struct{}{}`?",go,1,1,1
"@@ -161,12 +161,9 @@ func (a *ACME) Sign(ctx context.Context, cr *v1alpha2.CertificateRequest, issuer
 
         // If the acme order has failed then so too does the CertificateRequest meet the same fate.
         if acme.IsFailureState(order.Status.State) {
-                message := fmt.Sprintf(""Failed to wait for order resource %s/%s to become ready"",
-                        expectedOrder.Namespace, expectedOrder.Name)
-                err := fmt.Errorf(""order is in %q state"", order.Status.State)
-
+                message := fmt.Sprintf(""Failed to wait for order resource %q to become ready"", expectedOrder.Name)
+                err := fmt.Errorf(""order is in %q state: %s"", order.Status.State, order.Status.Reason)
                 a.reporter.Failed(cr, err, ""OrderFailed"", message)
-
                 return nil, nil
         }
 ","In the PR description you say that this extra event information will also show up in `kubectl describe certificate`, but I only the error message being associated with a `cr` resource...a `CertificateRequest` Or does the reporter also find the associated Certificate and Order resources and add events for those too?",go,1,0,1
"@@ -1276,6 +1276,7 @@ func (api *Server) getLogsInBlock(filter *LogFilter, start, count uint64) ([]*io
 	return logs, nil
 }
 
+// TODO: Since GasConsumed on the receipt may not be enough for the gas limit, we use binary search for the gas estimate. Need a better way to address it later.
 func (api *Server) estimateActionGasConsumptionForExecution(exec *iotextypes.Execution, sender string) (*iotexapi.EstimateActionGasConsumptionResponse, error) {
 	sc := &action.Execution{}
 	if err := sc.LoadProto(exec); err != nil {",line is 160 characters (from `lll`),go,1,1,0
"@@ -106,6 +106,8 @@ type ServerConfig struct {
 	AlertsFilterDeleter alerts.FilterDeleter
 	// StoragePolicy Manager
 	StoragePolicy policy.PolicyManager
+	// StoragePoolServer is the interface to manage storage pools in the cluster
+	StoragePoolServer api.OpenStoragePoolServer
 	// Security configuration
 	Security *SecurityConfig
 	// ServerExtensions allows you to extend the SDK gRPC server","There should be a 'fake' in-memory pool server handler added to OpenStorage so that it can be served in the mock-sdk-server. If this is too difficult, then the server must handler a `nil` pool server handler.",go,1,1,1
"@@ -4,6 +4,7 @@ import (
 	""github.com/rancher/k3s/pkg/version""
 	""github.com/rancher/spur/cli""
 	""github.com/rancher/spur/cli/altsrc""
+	""time""
 )
 
 const (",Can you move this to where the stdlib imports are?,go,1,1,1
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -28,12 +28,12 @@ import (
 // marshalling. See the following issue for details:
 // https://github.com/prometheus/alertmanager/issues/1985
 type alertmanagerConfig struct {
-	Global            *globalConfig      `yaml:""global,omitempty"" json:""global,omitempty""`
-	Route             *route             `yaml:""route,omitempty"" json:""route,omitempty""`
-	InhibitRules      []*inhibitRule     `yaml:""inhibit_rules,omitempty"" json:""inhibit_rules,omitempty""`
-	Receivers         []*receiver        `yaml:""receivers,omitempty"" json:""receivers,omitempty""`
-	MuteTimeIntervals []muteTimeInterval `yaml:""mute_time_intervals,omitempty"" json:""mute_time_intervals,omitempty""`
-	Templates         []string           `yaml:""templates"" json:""templates""`
+	Global            *globalConfig       `yaml:""global,omitempty"" json:""global,omitempty""`
+	Route             *route              `yaml:""route,omitempty"" json:""route,omitempty""`
+	InhibitRules      []*inhibitRule      `yaml:""inhibit_rules,omitempty"" json:""inhibit_rules,omitempty""`
+	Receivers         []*receiver         `yaml:""receivers,omitempty"" json:""receivers,omitempty""`
+	MuteTimeIntervals []*muteTimeInterval `yaml:""mute_time_intervals,omitempty"" json:""mute_time_intervals,omitempty""`
+	Templates         []string            `yaml:""templates"" json:""templates""`
 }
 
 type globalConfig struct {",Why changing to a slice of pointers?,go,1,1,0
"@@ -452,11 +452,12 @@ func (c *Controller) addNodeRoute(nodeName string, node *v1.Node) error {
 	}
 	peerGatewayIP := ip.NextIP(peerPodCIDRAddr)
 
+	ipsecTunOFPort := int32(0)
 	if c.networkConfig.EnableIPSecTunnel {
 		// Create a separate tunnel port for the Node, as OVS IPSec monitor needs to
 		// read PSK and remote IP from the Node's tunnel interface to create IPSec
 		// security policies.
-		if err = c.createIPSecTunnelPort(nodeName, peerNodeIP); err != nil {
+		if ipsecTunOFPort, err = c.createIPSecTunnelPort(nodeName, peerNodeIP); err != nil {
 			return err
 		}
 	}",you use an `int32` here but it seems that the rest of the code uses `uint32` pretty consistently (at least the OF client code does)?,go,1,1,1
"@@ -49,10 +49,11 @@ const (
 	rootURL           = ""https://www.jottacloud.com/jfs/""
 	apiURL            = ""https://api.jottacloud.com/""
 	baseURL           = ""https://www.jottacloud.com/""
-	tokenURL          = ""https://id.jottacloud.com/auth/realms/jottacloud/protocol/openid-connect/token""
+	defaultTokenURL   = ""https://id.jottacloud.com/auth/realms/jottacloud/protocol/openid-connect/token""
 	cachePrefix       = ""rclone-jcmd5-""
 	configDevice      = ""device""
 	configMountpoint  = ""mountpoint""
+	configTokenURL    = ""tokenURL""
 	configVersion     = 1
 )
 ",`configAuthURL` is unused (from `deadcode`),go,1,1,1
"@@ -74,8 +74,14 @@ type cpuUsage struct {
 	User   uint64   `json:""user""`
 }
 
+type cfs struct {
+	Period uint64 `json:""period,omitempty""`
+	Quota  int64  `json:""quota,omitempty""`
+}
+
 type cpu struct {
 	Usage      cpuUsage   `json:""usage,omitempty""`
+	CFS        cfs        `json:""cfs,omitempty""`
 	Throttling throttling `json:""throttling,omitempty""`
 }
 ","Do we want to make that stats output and this the same? You have `Scheduling` field, `cfs` tag, and `CpuCfs`, `cpu_cfs` in the two different places. I think we should pick one and stick with it",go,1,1,1
"@@ -374,6 +374,13 @@ COMMIT;
 		COMMIT;
 		`,
 		// v11 database entry, in which index was added to federated_registration_entries registered_entry_id field
+		`
+		BEGIN TRANSACTION;
+		CREATE TABLE IF NOT EXISTS ""attested_node_entries"" (""id"" integer primary key autoincrement,""created_at"" datetime,""updated_at"" datetime,""spiffe_id"" varchar(255),""data_type"" varchar(255),""serial_number"" varchar(255),""expires_at"" datetime );
+		INSERT INTO attested_node_entries VALUES(1,'2018-12-19 14:26:58.227869-07:00','2018-12-19 14:26:58.227869-07:00','spiffe://example.org/host','test','111','2018-12-19 15:26:58-07:00');
+		COMMIT;
+		`,
+		// v12 database entry, in which the table 'attested_node_entries' gained two columns: 'prepared_serial_number' and 'prepared_expires_at'
 	}
 )
 ",This should be a copy of the database before it receives the migration. The migration test should ensure that the migration test has taken place.,go,1,1,1
"@@ -349,6 +349,17 @@ func (f *Folder) isWriter(ctx context.Context) (bool, error) {
 	}
 	f.handleMu.RLock()
 	defer f.handleMu.RUnlock()
+	if f.h.Type() == tlf.SingleTeam {
+		tid, err := f.h.FirstResolvedWriter().AsTeam()
+		if err != nil {
+			return false, err
+		}
+		isWriter, err := f.fs.config.KBPKI().IsTeamWriter(ctx, tid, session.UID)
+		if err != nil {
+			return false, err
+		}
+		return isWriter, nil
+	}
 	return f.h.IsWriter(session.UID), nil
 }
 ",It seems this will be called pretty often. Do we need a short TTL cache in `libkbfs`?,go,1,1,1
"@@ -448,8 +448,14 @@ func (node *Node) setupMining(ctx context.Context) error {
 	}
 	node.SectorStore = sstore
 
+	// configure the underlying sector store, defaulting to the non-test version
+	sectorStoreType := proofs.Live
+	if os.Getenv(""FIL_USE_SMALL_SECTORS"") == ""true"" {
+		sectorStoreType = proofs.ProofTest
+	}
+
 	// initialize a sector builder
-	sectorBuilder, err := initSectorBuilderForNode(ctx, node)
+	sectorBuilder, err := initSectorBuilderForNode(ctx, node, sectorStoreType)
 	if err != nil {
 		return errors.Wrap(err, ""failed to initialize sector builder"")
 	}",Is this a change in default behavior? eg is the nightly cluster going to start taking much longer to seal? cc @gmasgras @frrist We should ensure the test/nightly cluster has the kind of sectors we want. I think we want it to seal quickly. Follow up with frrist/gmasgras?,go,0,1,1
"@@ -75,7 +75,7 @@ func (o *Operator) createOrUpdateRuleConfigMaps(t *monitoringv1.ThanosRuler) ([]
 		level.Debug(o.logger).Log(
 			""msg"", ""no PrometheusRule changes"",
 			""namespace"", t.Namespace,
-			""prometheus"", t.Name,
+			""thanos"", t.Name,
 		)
 		currentConfigMapNames := []string{}
 		for _, cm := range currentConfigMaps {","Not sure, but which one is better `thanos` or `thanos ruler`?",go,1,1,1
"@@ -69,6 +69,7 @@ const ECPrM uint64 = 100
 // TODO: If the following PR is merged - and the network doesn't define a
 // largest sector size - this constant will need to be reconsidered.
 // https://github.com/filecoin-project/specs/pull/318
+// NOTE(anorth): This height is excessive, but safe, with the Rational PoSt construction.
 const AncestorRoundsNeeded = miner.LargestSectorSizeProvingPeriodBlocks + miner.PoStChallengeWindowBlocks
 
 // A Processor processes all the messages in a block or tip set.",yup should be `miner.PoStChallengeWindowBlocks`,go,1,0,0
"@@ -72,6 +72,9 @@ func (f MigrateRepo) ParseRemoteAddr(user *db.User) (string, error) {
 		if len(f.AuthUsername)+len(f.AuthPassword) > 0 {
 			u.User = url.UserPassword(f.AuthUsername, f.AuthPassword)
 		}
+		if u.Scheme == ""git"" && u.Port() != """" && (strings.Contains(remoteAddr, ""%0d"") || strings.Contains(remoteAddr, ""%0a"")) {
+			return """", db.ErrInvalidCloneAddr{IsURLError: true}
+		}
 		remoteAddr = u.String()
 	} else if !user.CanImportLocal() {
 		return """", db.ErrInvalidCloneAddr{IsPermissionDenied: true}",Why is checking `u.Scheme` and `u.Port()` necessary? Shouldn't we disallow malicious chars in all cases?,go,1,1,1
"@@ -208,7 +208,7 @@ func (arch *Archiver) loadSubtree(ctx context.Context, node *restic.Node) *resti
 
 // SaveDir stores a directory in the repo and returns the node. snPath is the
 // path within the current snapshot.
-func (arch *Archiver) SaveDir(ctx context.Context, snPath string, fi os.FileInfo, dir string, previous *restic.Tree) (d FutureTree, err error) {
+func (arch *Archiver) SaveDir(ctx context.Context, snPath string, fi os.FileInfo, dir string, previous *restic.Tree, complete CompleteFunc) (d FutureTree, err error) {
 	debug.Log(""%v %v"", snPath, dir)
 
 	treeNode, err := arch.nodeFromFileInfo(dir, fi)",Could the callback be a field on the Archiver instead?,go,1,1,1
"@@ -894,12 +894,17 @@ var (
         RollupGasPriceOracleAddressFlag = cli.StringFlag{
                 Name:   ""rollup.gaspriceoracleaddress"",
                 Usage:  ""Address of the rollup gas price oracle"",
-                Value:  ""0x"",
+                Value:  ""0x0000000000000000000000000000000000000000"",
                 EnvVar: ""ROLLUP_GAS_PRICE_ORACLE_ADDRESS"",
         }
         RollupEnableL2GasPollingFlag = cli.BoolFlag{
                 Name:   ""rollup.enablel2gaspolling"",
-                Usage:  """",
+                Usage:  ""Poll for the L2 gas price from the L2 state"",
+                EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
+        }
+        RollupEnforceFeesFlag = cli.BoolFlag{
+                Name:   ""rollup.enforcefeesflag"",
+                Usage:  ""Disable transactions with 0 gas price"",
                 EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
         }
 )",Fix this env var,go,1,0,0
"@@ -75,6 +75,7 @@ func UnsafeKindToResource(k string) string {
 	}
 	unusualKindToResource := map[string]string{
 		""Endpoints"": ""endpoints"",
+		""Gateway"":   ""gateways"",
 	}
 	if v, isUnusual := unusualKindToResource[k]; isUnusual {
 		return v","Where's the type `Gateway` from? If it's a type of crd, I think we can't list all types here.",go,1,1,1
"@@ -53,6 +53,16 @@ func mustSpanIDFromHex(s string) (t trace.SpanID) {
 	return
 }
 
+func TestBytesMapCarrier(t *testing.T) {
+	carrier := make(propagation.BytesMapCarrier)
+	carrier.Set(""foo"", ""bar"")
+	carrier.Set(""baz"", ""qux"")
+
+	assert.Equal(t, carrier.Get(""foo""), ""bar"")
+	assert.Equal(t, carrier.Get(""baz""), ""qux"")
+	assert.Equal(t, carrier.Keys(), []string{""foo"", ""baz""})
+}
+
 type outOfThinAirPropagator struct {
 	t *testing.T
 }","Map iteration order isn't guaranteed, so the result will need to be sorted or another set of checks devised. You could assert it's length 2 and contains both ""foo"" and ""bar"".",go,1,1,1
"@@ -389,6 +389,17 @@ func (c *client) parse(buf []byte) error {
 				if err := c.processPub(arg); err != nil {
 					return err
 				}
+				// Check if we have and account mappings or tees or filters.
+				// FIXME(dlc) - Probably better way to do this.
+				// Could add in cache but will be tricky since results based on pub subject are dynamic
+				// due to wildcard matching and weight sets.
+				if c.kind == CLIENT && c.in.flags.isSet(hasMappings) {
+					old := c.pa.subject
+					changed := c.selectMappedSubject()
+					if trace && changed {
+						c.traceInOp(""MAPPING"", []byte(fmt.Sprintf(""%s -> %s"", old, c.pa.subject)))
+					}
+				}
 				c.drop, c.as, c.state = 0, i+1, MSG_PAYLOAD
 				// If we don't have a saved buffer then jump ahead with
 				// the index. If this overruns what is left we fall out",other way would be for selectMappedSubject() to return a boolean to indicate that an actual mapping took place.,go,1,1,1
"@@ -3176,10 +3176,10 @@ func (m *MockpipelineStatusDescriber) EXPECT() *MockpipelineStatusDescriberMockR
 }
 
 // Describe mocks base method
-func (m *MockpipelineStatusDescriber) Describe() (*describe.PipelineStatusDesc, error) {
+func (m *MockpipelineStatusDescriber) Describe() (*describe.PipelineStatus, error) {
 	m.ctrl.T.Helper()
 	ret := m.ctrl.Call(m, ""Describe"")
-	ret0, _ := ret[0].(*describe.PipelineStatusDesc)
+	ret0, _ := ret[0].(*describe.PipelineStatus)
 	ret1, _ := ret[1].(error)
 	return ret0, ret1
 }",You'll need to regenerate the mocks to get rid of this now that you've removed the interfaces from `cli/interfaces.go`,go,1,1,1
"@@ -274,6 +274,12 @@ func (k *K8sClient) GetKCS() *kubernetes.Clientset {
 	return k.cs
 }
 
+// GetUCS is a getter method for fetching upgrade clientset as
+// the upgrade clientset is not exported.
+func (k *K8sClient) GetUCS() *upgrade.Clientset {
+	return k.upgradecs
+}
+
 // scOps is a utility function that provides a instance capable of
 // executing various K8s StorageClass related operations
 func (k *K8sClient) storageV1SCOps() typed_storage_v1.StorageClassInterface {",This package should not be used. This is old package.,go,1,1,1
"@@ -683,6 +683,11 @@ func loadConfigFromDatastore(
 		Name:      ""node."" + hostname,
 		Namespace: """",
 	}, """")
+	n, err := client.Get(ctx, model.ResourceKey{
+		Kind:      apiv2.KindNode,
+		Name:      hostname,
+		Namespace: """",
+	}, """")
 	if _, ok := err.(errors2.ErrorResourceDoesNotExist); err != nil && !ok {
 		return
 	}",Should be checking for error here,go,1,1,1
"@@ -14,4 +14,5 @@ type Address = swarm.Address
 // Interface can resolve an URL into an associated Ethereum address.
 type Interface interface {
 	Resolve(url string) (Address, error)
+	Close()
 }",Use io.Closer even the error is always nil by current implementations.,go,1,1,1
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -38,7 +38,8 @@ func (p *diskInspectionProcessor) process(pd persistentDisk,
 
         ir, err := p.inspectDisk(pd.uri)
         if err != nil {
-                return pd, err
+                // Don't directly return err to avoid terminating the import.
+                return pd, nil
         }
 
         isDualBoot := ir.UEFIBootable && ir.BIOSBootableWithHybridMBROrProtectiveMBR",Log the error?,go,1,1,0
"@@ -2937,7 +2937,8 @@ func (dr *DirAccResolver) Start(s *Server) error {
 		}
 	}
 	const accountPackRequest = ""$SYS.ACCOUNT.CLAIMS.PACK""
-	const accountLookupRequest = ""$SYS.ACCOUNT.*.CLAIMS.LOOKUP""
+	const accountLookupRequest = ""$SYS.REQ.ACCOUNT.*.CLAIMS.LOOKUP""
+	const accountLookupTokens = 6
 	packRespIb := s.newRespInbox()
 	// subscribe to account jwt update requests
 	if _, err := s.sysSubscribe(fmt.Sprintf(accUpdateEventSubj, ""*""), func(_ *subscription, _ *client, subj, resp string, msg []byte) {","Originally this was used only in this function, but now I wonder if we should move then to events.go (where you have defined number of tokens and index of account). Also, we could make it a subject with the `%s` token, like `const accountLookupRequest = ""$SYS.REQ.ACCOUNT.%s.CLAIMS.LOOKUP""`. Here, to subscribe you would sprintf with this constant and pass ""*"" for the ""%s"".",go,1,1,1
"@@ -61,8 +61,7 @@ runs on edge nodes and manages containerized applications.`,
 			gis.Start(beehiveContext.Done())
 			registerModules(config)
 			// start all modules
-			core.StartModules()
-			core.GracefulShutdown()
+			core.Run()
 		},
 	}
 	fs := cmd.Flags()",It might be clearer to split it into two calls? I'm not sure.,go,1,1,1
"@@ -37,8 +37,8 @@ type bootableDiskProcessor struct {
 	OS              string
 }
 
-func (b bootableDiskProcessor) process(ctx context.Context) (err error) {
-	err = b.workflow.RunWithModifiers(ctx, b.preValidateFunc(), b.postValidateFunc())
+func (b *bootableDiskProcessor) process(ctx context.Context) (err error) {
+	err = b.workflow.RunWithModifiers(context.Background(), b.preValidateFunc(), b.postValidateFunc())
 	if err != nil {
 		daisy_utils.PostProcessDErrorForNetworkFlag(""image import"", err, b.network, b.workflow)
 		err = customizeErrorToDetectionResults(b.OS,",what's the motivation to make the receiver a pointer? Usually I reserve that for modifications to the receiver.,go,1,1,1
"@@ -86,6 +86,7 @@ func (d *RDWebServiceDescriber) Describe() (HumanJSONStringer, error) {
 			Port:        service.Port,
 			CPU:         service.CPU,
 			Memory:      service.Memory,
+			Platform:    ""LINUX/X86_64"",
 		})
 
 		for _, v := range service.EnvironmentVariables {","An alternative to defaulting a platform string would be to not show the column at all if we do not have the information   For RD web service, I feel like user wouldn't be interested in the platform information anyway since they should have known that the only valid platform is ""linux/x86_64"" if they have tried to use any other platform for the service.",go,1,1,1
"@@ -138,7 +138,7 @@ func TestPaymentChannelRedeemSuccess(t *testing.T) {
 func TestPaymentChannelReclaimSuccess(t *testing.T) {
 	payer := &address.TestAddress
 	target := &address.TestAddress2
-	eol := types.NewBlockHeight(5)
+	eol := types.NewBlockHeight(20)
 	amt := types.NewTokenAmount(10000)
 
 	daemonTestWithPaymentChannel(t, payer, target, amt, eol, func(d *TestDaemon, channelID *types.ChannelID) {",This is suuuper ghetto. We're going to have to think about how to write this kind of test now that `mine once` means (and I think we want it to continue to mean) _mine until you get a block_. @acruikshank,go,0,1,1
"@@ -108,11 +108,11 @@ func (c *controller) Run(workers int, stopCh <-chan struct{}) error {
 	var wg sync.WaitGroup
 	for i := 0; i < workers; i++ {
 		wg.Add(1)
-		// TODO (@munnerz): make time.Second duration configurable
-		go wait.Until(func() {
+		go func() {
 			defer wg.Done()
-			c.worker(ctx)
-		}, time.Second, stopCh)
+			// TODO (@munnerz): make time.Second duration configurable
+			wait.Until(func() { c.worker(ctx) }, time.Second, stopCh)
+		}()
 	}
 
 	for _, f := range c.runFirstFuncs {",Can we remove this `TODO`? I can't think of a use case that would justify to make this configurable. The 1 second here is just the delay before re-launching the worker after it has (mysteriously) stopped.,go,1,1,1
"@@ -16,6 +16,9 @@
 package config
 
 import (
+	""fmt""
+	""github.com/aws/amazon-ecs-agent/agent/statemanager/dependencies""
+	""github.com/pkg/errors""
 	""os""
 	""strings""
 	""syscall""",nit: imports should be grouped. please run `go imports` and/or see other files to check import formatting.,go,1,1,1
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -18,10 +18,11 @@ type Window struct {
 // and normalizes the offset to a small positive duration.
 // It also validates that the durations are valid when
 // used within a window.
-func NewWindow(every, period, offset Duration) (Window, error) {
-	// Normalize the offset to a small positive duration
-	offset = offset.Normalize(every)
-
+func NewWindow(every, period, offset Duration, months bool) (Window, error) {
+	if !months {
+		// Normalize nanosecond offsets to a small positive duration
+		offset = offset.Normalize(every)
+	}
 	w := Window{
 		Every:  every,
 		Period: period,",@jlapacik we need to know if we're working with nanoseconds or not so that we can know whether to scale durations here or not.,go,0,1,1
"@@ -15,6 +15,7 @@ type Datastore interface {
 	// can either force it, or just do hopeful type checks. Not all datastores
 	// implement every feature.
 	datastore.Batching
+	Close() error
 }
 
 // Repo is a representation of all persistent data in a filecoin node.","If we are adding the `Close` method, we should probably be also calling it when shutting down the node",go,1,1,1
"@@ -256,6 +256,17 @@ type CloudBackupCreateRequest struct {
 	Full bool
 }
 
+type CloudBackupGroupCreateRequest struct {
+	// GroupID indicates backup request for a volumegroup with this group id
+	GroupID string
+	// Labels indicates backup request for a volume group with these labels
+	Labels map[string]string
+	// CredentialUUID is cloud credential to be used for backup
+	CredentialUUID string
+	// Full indicates if full backup is desired even though incremental is possible
+	Full bool
+}
+
 type CloudBackupRestoreRequest struct {
 	// ID is the backup ID being restored
 	ID string",This is either GroupID or Labels. What happens if they are both set?,go,1,1,1
"@@ -138,12 +138,10 @@ func environmentCheck() error {
 	}
 
 	for _, process := range processes {
-		// if kubelet is running, return error
-		if process.Executable() == ""kubelet"" {
+		switch process.Executable() {
+		case ""kubelet"": // if kubelet is running, return error
 			return errors.New(""kubelet should not running on edge node when running edgecore"")
-		}
-		// if kube-proxy is running, return error
-		if process.Executable() == ""kube-proxy"" {
+		case ""kube-proxy"": // if kube-proxy is running, return error
 			return errors.New(""kube-proxy should not running on edge node when running edgecore"")
 		}
 	}","There are only these two situations, I think there is no need to use `switch` to extend the judgment.",go,1,1,1
"@@ -45,3 +45,9 @@ func SetDefaultTaskListKind(f *enumspb.TaskListKind) {
 		*f = enumspb.TASK_LIST_KIND_NORMAL
 	}
 }
+
+func SetDefaultParentClosePolicy(f *enumspb.ParentClosePolicy) {
+	if *f == enumspb.PARENT_CLOSE_POLICY_UNSPECIFIED {
+		*f = enumspb.PARENT_CLOSE_POLICY_ABANDON
+	}
+}",The default should be TERMINATE. How do I determine default looking at the proto definition?,go,1,1,1
"@@ -81,6 +81,10 @@ const (
 	// IsRelay when set causes the the daemon to provide libp2p relay
 	// services allowing other filecoin nodes behind NATs to talk directly.
 	IsRelay = ""is-relay""
+
+	// CatchupSyncTestMode places the daemon in a spcial catchup mode for testing
+	// TODO remove this when we stop using test daemon.
+	CatchupSyncTestMode = ""catchup-sync-test-mode""
 )
 
 // command object for the local cli","nit: special, also file an issue and add that issue number to the TODO",go,1,1,1
"@@ -87,7 +87,8 @@ func (m *mounter) Unmount() (err error) {
 			_, err = exec.Command(
 				""/usr/sbin/diskutil"", ""unmountDisk"", ""force"", dir).Output()
 		case ""linux"":
-			_, err = exec.Command(""fusermount"", ""-ul"", dir).Output()
+			// Lazy unmount; will unmount when KBFS is no longer in use
+			_, err = exec.Command(""fusermount"", ""-u"", ""-z"", dir).Output()
 		default:
 			err = errors.New(""Forced unmount is not supported on this platform yet"")
 		}","@taruti is this ok? my fusermount(1) shows the option is `-z`, which is pretty confusing since `umount` uses `-l`. hopefully it isn't os-dependent",go,0,1,1
"@@ -358,7 +358,12 @@ func (r *replacer) getSubstitution(key string) string {
 		if r.responseRecorder == nil {
 			return r.emptyValue
 		}
-		return roundDuration(time.Since(r.responseRecorder.start)).String()
+		elapsedDuration := time.Since(r.responseRecorder.start)
+
+		if elapsedDuration == 0 {
+			return ""0ms""
+		}
+		return roundDuration(elapsedDuration).String()
 	case ""{latency_ms}"":
 		if r.responseRecorder == nil {
 			return r.emptyValue","time.Since returns a duration value, which has accuracy to the nanosecond, I believe. So while 0ms is technically true in that case, the likelihood of getting an actual value of 0 is extremely low, I think. Is there a test that exhibits this behavior?",go,1,1,1
"@@ -142,6 +142,17 @@ ORDER BY task_id LIMIT $5`
 	deleteVisibilityTaskQuery      = `DELETE FROM visibility_tasks WHERE shard_id = $1 AND task_id = $2`
 	rangeDeleteVisibilityTaskQuery = `DELETE FROM visibility_tasks WHERE shard_id = $1 AND task_id > $2 AND task_id <= $3`
 
+	createTieredStorageTasksQuery = `INSERT INTO tiered_storage_tasks(shard_id, task_id, data, data_encoding) 
+ VALUES(:shard_id, :task_id, :data, :data_encoding)`
+
+	getTieredStorageTaskQuery = `SELECT task_id, data, data_encoding 
+ FROM tiered_storage_tasks WHERE shard_id = $1 AND task_id = $2`
+	getTieredStorageTasksQuery = `SELECT task_id, data, data_encoding 
+ FROM tiered_storage_tasks WHERE shard_id = $1 AND task_id > $2 AND task_id <= $3 ORDER BY shard_id, task_id`
+
+	deleteTieredStorageTaskQuery      = `DELETE FROM tiered_storage_tasks WHERE shard_id = $1 AND task_id = $2`
+	rangeDeleteTieredStorageTaskQuery = `DELETE FROM tiered_storage_tasks WHERE shard_id = $1 AND task_id > $2 AND task_id <= $3`
+
 	bufferedEventsColumns     = `shard_id, namespace_id, workflow_id, run_id, data, data_encoding`
 	createBufferedEventsQuery = `INSERT INTO buffered_events(` + bufferedEventsColumns + `)
 VALUES (:shard_id, :namespace_id, :workflow_id, :run_id, :data, :data_encoding)`","`ORDER BY shard_id, task_id` -> `ORDER BY task_id` plz also change line 93 & 140",go,1,1,1
"@@ -167,6 +167,10 @@ func (m *UnifiedManager) Destroy() error {
 	if m.Cgroups.Paths != nil {
 		return nil
 	}
+	dirPath, err := m.GetUnifiedPath()
+	if err != nil {
+		return err
+	}
 	m.mu.Lock()
 	defer m.mu.Unlock()
 ","@kolyshkin I think we may not need `StopUnit` method. Because if the init process has been exited, the cgroup path will be deleted by systemd automatically. WDYT",go,0,1,1
"@@ -132,6 +132,12 @@ func run(o *Options) error {
 	if err != nil {
 		return fmt.Errorf(""error creating API server: %v"", err)
 	}
+
+	err = apiserver.CleanupDeprecatedAPIServices(aggregatorClient)
+	if err != nil {
+		return fmt.Errorf(""failed to clean up the deprecated APIServices: %v"", err)
+	}
+
 	// Set up signal capture: the first SIGTERM / SIGINT signal is handled gracefully and will
 	// cause the stopCh channel to be closed; if another signal is received before the program
 	// exits, we will force exit.",I didn't think of it too much but does the order matter here? should we remove deprecated APIServices before installing the new ones?,go,1,1,1
"@@ -20,10 +20,17 @@ import (
 
 	""github.com/aws/aws-sdk-go/aws/credentials""
 	""github.com/aws/aws-sdk-go/aws/signer/v4""
+	""github.com/cihub/seelog""
+	""github.com/pkg/errors""
 )
 
 // SignHTTPRequest signs an http.Request struct with authv4 using the given region, service, and credentials.
-func SignHTTPRequest(req *http.Request, region, service string, creds *credentials.Credentials, body io.ReadSeeker) {
+func SignHTTPRequest(req *http.Request, region, service string, creds *credentials.Credentials, body io.ReadSeeker) error {
 	signer := v4.NewSigner(creds)
-	signer.Sign(req, body, service, region, time.Now())
+	_, err := signer.Sign(req, body, service, region, time.Now())
+	if err != nil {
+		seelog.Warnf(""Signing HTTP request failed: %v"", err)
+		return errors.Wrap(err, ""aws sdk http signer: failed to sign http request"")
+	}
+	return nil
 }",nit: `errors.Wrap()` should suffice here.,go,1,1,1
"@@ -461,6 +461,7 @@ func (c *linuxContainer) commandTemplate(p *Process, childPipe *os.File) (*exec.
 	if cmd.SysProcAttr == nil {
 		cmd.SysProcAttr = &syscall.SysProcAttr{}
 	}
+	cmd.Env = append(cmd.Env, fmt.Sprintf(""GOMAXPROCS=%s"", os.Getenv(""GOMAXPROCS"")))
 	cmd.ExtraFiles = append(cmd.ExtraFiles, p.ExtraFiles...)
 	if p.ConsoleSocket != nil {
 		cmd.ExtraFiles = append(cmd.ExtraFiles, p.ConsoleSocket)",Won't this result in `GOMAXPROCS=` in the normal case of `runc` was called without `GOMAXPROCS` set?,go,1,1,1
"@@ -142,12 +142,15 @@ func (v *Vault) Sign(csrPEM []byte, duration time.Duration) (cert []byte, ca []b
 		return nil, nil, fmt.Errorf(""unable to convert certificate bundle to PEM bundle: %s"", err.Error())
 	}
 
-	var caPem []byte = nil
+	var caPem []byte
 	if len(bundle.CAChain) > 0 {
-		caPem = []byte(bundle.CAChain[0])
+		caPem = []byte(bundle.CAChain[len(bundle.CAChain)-1])
 	}
 
-	return []byte(bundle.ToPEMBundle()), caPem, nil
+	crtPems := []string{bundle.Certificate}
+	crtPems = append(crtPems, bundle.CAChain[0:len(bundle.CAChain)-1]...)
+
+	return []byte(strings.Join(crtPems, ""\n"")), caPem, nil
 }
 
 func (v *Vault) setToken(client Client) error {","Can `bundle.CAChain` ever have a length of 0? If so, this will cause a panic  ",go,1,1,1
"@@ -29,6 +29,7 @@ const (
 
 // OptionsDiscovery describes possible parameters of discovery configuration
 type OptionsDiscovery struct {
-	Type    DiscoveryType
-	Address string
+	Type                    DiscoveryType
+	Address                 string
+	DisableProposalsFetcher bool
 }",-> `ProposalFetcherEnabled` 1. It should be consistent with other bool flags 2. It is easier to understand options without negation,go,1,1,1
"@@ -397,6 +397,16 @@ func dealsExpensesPerHour(addr common.Address, deals []*sonm.DWHDeal) (*sonm.Big
 	return sonm.NewBigInt(inAsks), sonm.NewBigInt(inBids)
 }
 
+func dealType(deal *sonm.Deal, addr common.Address) string {
+	if deal.GetSupplierID().Unwrap() == addr || deal.GetMasterID().Unwrap() == addr {
+		return ""SELL""
+	}
+	if deal.GetConsumerID().Unwrap() == addr {
+		return ""BUY""
+	}
+	return """"
+}
+
 func printDealsList(cmd *cobra.Command, addr common.Address, deals []*sonm.DWHDeal) {
 	asks, bids := dealsExpensesPerHour(addr, deals)
 ",What if BOTH conditions are true?,go,1,1,0
"@@ -9,7 +9,10 @@ package state
 import (
 	""math/big""
 
+	""github.com/golang/protobuf/proto""
+
 	""github.com/iotexproject/iotex-core/pkg/hash""
+	""github.com/iotexproject/iotex-core/proto""
 )
 
 // Account is the canonical representation of an account.",File is not `goimports`-ed,go,0,1,1
"@@ -59,11 +59,10 @@ func (b3 B3) Inject(ctx context.Context, supplier propagation.HTTPSupplier) {
 	if b3.SingleHeader {
 		sampled := sc.TraceFlags & core.TraceFlagsSampled
 		supplier.Set(B3SingleHeader,
-			fmt.Sprintf(""%s-%.16x-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
+			fmt.Sprintf(""%s-%s-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
 	} else {
 		supplier.Set(B3TraceIDHeader, sc.TraceIDString())
-		supplier.Set(B3SpanIDHeader,
-			fmt.Sprintf(""%.16x"", sc.SpanID))
+		supplier.Set(B3SpanIDHeader, sc.SpanID.String())
 
 		var sampled string
 		if sc.IsSampled() {",Is TraceIDString now duplicative?,go,1,1,0
"@@ -47,7 +47,7 @@ func (t *Tracer) Start(ctx context.Context, name string, opts ...trace.SpanOptio
 		tracer:     t,
 		startTime:  startTime,
 		attributes: make(map[label.Key]label.Value),
-		links:      make(map[trace.SpanContext][]label.KeyValue),
+		links:      make([]trace.Link, 0),
 		spanKind:   c.SpanKind,
 	}
 ",nit: can this be `nil` or `[]trace.Link{}` instead of a `make()` statement?,go,1,1,1
"@@ -464,12 +464,11 @@ func (target *BuildTarget) AllURLs(state *BuildState) []string {
 // resolveDependencies matches up all declared dependencies to the actual build targets.
 // TODO(peterebden,tatskaari): Work out if we really want to have this and how the suite of *Dependencies functions
 //                             below should behave (preferably nicely).
-// TODO(tatskaari): Work out if we can use a channel instead of a callback.
 func (target *BuildTarget) resolveDependencies(graph *BuildGraph, callback func(*BuildTarget) error) error {
 	var g errgroup.Group
-	target.mutex.RLock()
+
 	for i := range target.dependencies {
-		dep := &target.dependencies[i]
+		dep := &target.dependencies[i] // avoid using a loop variable here as it mutates each iteration
 		if len(dep.deps) > 0 {
 			continue // already done
 		}","Think we should keep this in as a Lock / Unlock (since we're iterating over the slice itself which is shared, but the work on it happens within the waitgroup)",go,1,1,1
"@@ -18,6 +18,8 @@ import (
 	""encoding/json""
 	""testing""
 	""time""
+	""github.com/jmcvetta/randutil""
+	""reflect""
 )
 
 func TestSleepCommand_UnmarshalJSON(t *testing.T) {",File is not `gofmt`-ed with `-s` (from `gofmt`),go,0,1,1
"@@ -39,6 +39,8 @@ func defaultCipherSuites() []uint16 {
 		tls.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
 		tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
 		tls.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,
+		tls.TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,
+		tls.TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,
 	}
 }
 ","What is default for 1.8 if not configured at all? I think they put ChaCha first because of its performance gains, even over AES..",go,1,1,1
"@@ -129,6 +129,7 @@ func (r *runtime) evalHandle(ctx context.Context, h *libflux.ASTPkg, opts ...Sco
 	// Execute the interpreter over the package.
 	itrp := interpreter.NewInterpreter(nil)
 	sideEffects, err := itrp.Eval(ctx, semPkg, scope, importer)
+	semPkg.Free()
 	if err != nil {
 		return nil, nil, err
 	}","I think `defer semPkg.Free()` would be appropriate here: if there is a panic somewhere during evaluation, we still want the free to happen. Deferred function calls will still happen if a panic occurs.",go,1,1,1
"@@ -36,14 +36,14 @@ import (
 
 // pullBaggage pulls the context headers from the given transport.Headers,
 // deleting them from the original headers map.
-func pullBaggage(headers transport.Headers) transport.Headers {
-	ctxHeaders := make(transport.Headers)
+func pullBaggage(headers transport.Headers) map[string]string {
+	ctxHeaders := make(map[string]string)
 	prefix := strings.ToLower(BaggageHeaderPrefix)
 	prefixLen := len(prefix)
-	for k, v := range headers {
+	for k, v := range headers.Items() {
 		if strings.HasPrefix(k, prefix) {
 			key := k[prefixLen:]
-			ctxHeaders.Set(key, v)
+			ctxHeaders[key] = v
 			headers.Del(k)
 		}
 	}",Can you explain why you're using `map[string]string` here (and in several other places) instead of a defined type?,go,1,1,1
"@@ -25,7 +25,13 @@ import (
         ""github.com/labstack/echo/v4""
 )
 
+// URLAuthPrefix is the echo formatted url/path param which can be used for supplying an API token.
+const URLAuthPrefix = ""/urlAuth/:"" + TokenPathParam
 const urlAuthFormatter = ""/urlAuth/%s""
+// InvalidTokenMessage is the message set when an invalid / missing token is found.
+const InvalidTokenMessage = ""Invalid API Token""
+// TokenPathParam is the name of the path parameter used by URLAuthPrefix
+const TokenPathParam = ""token""
 
 // AuthMiddleware provides some data to the handler.
 type AuthMiddleware struct {",It took me a moment to realize this works because the Go compiler is smart; I was expecting to need this declared before it's used a few lines above.,go,1,1,1
"@@ -155,8 +155,7 @@ func add(mgr manager.Manager, r reconcile.Reconciler) error {
 
         // Monitor changes to DaemonSets:
         err = c.Watch(&source.Kind{Type: &appsv1.DaemonSet{}}, &handler.EnqueueRequestForOwner{
-                IsController: true,
-                OwnerType:    &hivev1.HiveConfig{},
+                OwnerType: &hivev1.HiveConfig{},
         })
         if err != nil {
                 return err",These IsController fields were incorrect I take it?,go,1,1,1
"@@ -263,9 +263,10 @@ type EventName string
 // Define names for the various events
 const (
 	StartupEvent         EventName = ""startup""
-	ShutdownEvent        EventName = ""shutdown""
-	CertRenewEvent       EventName = ""certrenew""
-	InstanceStartupEvent EventName = ""instancestartup""
+	ShutdownEvent                  = ""shutdown""
+	CertRenewEvent                 = ""certrenew""
+	InstanceStartupEvent           = ""instancestartup""
+	InstanceRestartEvent           = ""instancerestart""
 )
 
 // EventHook is a type which holds information about a startup hook plugin.","Can we make the string consistent with the name? ""instancerestart""?",go,1,1,1
"@@ -1,4 +1,4 @@
-// Copyright (c) 2016-2017 Tigera, Inc. All rights reserved.
+// Copyright (c) 2016-2018 Tigera, Inc. All rights reserved.
 //
 // Licensed under the Apache License, Version 2.0 (the ""License"");
 // you may not use this file except in compliance with the License.",What criteria do we use to bump the copyright years? An update to the module?,go,1,1,1
"@@ -38,14 +38,14 @@ import (
 func setupAWS(ctx context.Context, flags *cliFlags) (*application, func(), error) {
 	// This will be filled in by Wire with providers from the provider sets in
 	// wire.Build.
-
-	panic(wire.Build(
+	wire.Build(
 		awscloud.AWS,
 		applicationSet,
 		awsBucket,
 		awsMOTDVar,
 		awsSQLParams,
-	))
+	)
+	return nil, func() {}, nil
 }
 
 // awsBucket is a Wire provider function that returns the S3 bucket based on the",All of these can be `nil` (here and below).,go,1,1,1
"@@ -32,7 +32,7 @@ func ValidateValue(valueType string, value string) error {
 			return errors.New(""the bool value must be true or false"")
 		}
 		return nil
-	case ""deleted"":
+	case TypeDeleted:
 		return nil
 	default:
 		return errors.New(""the value type is not allowed"")","Why only add the `TypeDeleted` here? :) And the original code is also confusing, the operation type mixed with value type...",go,1,1,1
"@@ -952,7 +952,14 @@ func (s *Server) jsStreamInfoRequest(sub *subscription, c *client, subject, repl
 		s.sendAPIResponse(c, subject, reply, string(msg), s.jsonResponse(&resp))
 		return
 	}
-	resp.StreamInfo = &StreamInfo{Created: mset.Created(), State: mset.State(), Config: mset.Config()}
+	config := mset.Config()
+	// MQTT streams are created without subject, but ""nats"" tooling would then
+	// fail to display them since it uses validation and expect the config's
+	// Subjects to not be empty.
+	if strings.HasPrefix(name, mqttStreamNamePrefix) && len(config.Subjects) == 0 {
+		config.Subjects = []string{"">""}
+	}
+	resp.StreamInfo = &StreamInfo{Created: mset.Created(), State: mset.State(), Config: config}
 	s.sendAPIResponse(c, subject, reply, string(msg), s.jsonResponse(resp))
 }
 ","technically the nats utility is wrong, since the server accepts it and it then defaults to stream name. I could allow it but at the time decided it would be better to be explicit",go,1,1,1
"@@ -61,13 +61,13 @@ var once sync.Once
 var CloudhubHandler *MessageHandle
 
 // InitHandler create a handler for websocket and quic servers
-func InitHandler(config *hubconfig.Configure, eventq *channelq.ChannelMessageQueue) {
+func InitHandler(eventq *channelq.ChannelMessageQueue) {
 	once.Do(func() {
 		CloudhubHandler = &MessageHandle{
-			KeepaliveInterval: config.KeepaliveInterval,
-			WriteTimeout:      config.WriteTimeout,
+			KeepaliveInterval: int(hubconfig.Get().KeepaliveInterval),
+			WriteTimeout:      int(hubconfig.Get().WriteTimeout),
 			MessageQueue:      eventq,
-			NodeLimit:         config.NodeLimit,
+			NodeLimit:         int(hubconfig.Get().NodeLimit),
 		}
 
 		CloudhubHandler.KeepaliveChannel = make(map[string]chan struct{})",Why need the type conversion here?,go,1,1,0
"@@ -0,0 +1,19 @@
+// +build !linux
+
+package landlock
+
+import (
+	""errors""
+
+	""github.com/opencontainers/runc/libcontainer/configs""
+)
+
+var ErrLandlockNotSupported = errors.New(""land: config provided but Landlock not supported"")
+
+// InitLandlock does nothing because Landlock is not supported.
+func InitSLandlock(config *configs.Landlock) error {
+	if config != nil {
+		return ErrLandlockNotSupported
+	}
+	return nil
+}","runc is linux-only, I guess you can drop this entirely (as well as `_linux` suffix from all the other files).",go,1,1,1
"@@ -224,7 +224,7 @@ var _ fs.Node = (*Root)(nil)
 
 // Attr implements the fs.Node interface for Root.
 func (*Root) Attr(ctx context.Context, a *fuse.Attr) error {
-	a.Mode = os.ModeDir | 0755
+	a.Mode = os.ModeDir | 0555
 	return nil
 }
 ","`FolderList.Attr` should be fixed in the same way, I think, right?",go,1,1,1
"@@ -112,7 +112,5 @@ func (l *Logger) Debugf(format string, v ...interface{}) {
 }
 
 func (l *Logger) Tracef(format string, v ...interface{}) {
-	if l.trace == true {
-		l.logger.Printf(l.traceLabel+format, v...)
-	}
+	l.logger.Printf(l.traceLabel+format, v...)
 }","I believe this check is safe to remove since AFAICT all of the calls to this already assume tracing is enabled, either globally or per-client.",go,1,1,1
"@@ -28,6 +28,7 @@ import (
 	""strings""
 
 	""kythe.io/kythe/go/platform/kzip""
+	apb ""kythe.io/kythe/proto/analysis_go_proto""
 
 	""bitbucket.org/creachadair/stringset""
 )",Conventionally we group protobuf imports separately below the others.,go,1,1,1
"@@ -38,7 +38,8 @@ type containerState interface {
 }
 
 func destroy(c *linuxContainer) error {
-	if !c.config.Namespaces.Contains(configs.NEWPID) {
+	if !c.config.Namespaces.Contains(configs.NEWPID) ||
+		c.config.Namespaces.PathOf(configs.NEWPID) != """" {
 		if err := signalAllProcesses(c.cgroupManager, unix.SIGKILL); err != nil {
 			logrus.Warn(err)
 		}",Killing PID 1 in a PID namespace kills the other processes in the PID namespace.,go,1,1,1
"@@ -71,13 +71,13 @@ import (
 	""github.com/algorand/go-algorand/daemon/algod/api/server/lib/middlewares""
 	""github.com/algorand/go-algorand/daemon/algod/api/server/v1/routes""
 	""github.com/algorand/go-algorand/daemon/algod/api/server/v2""
-	""github.com/algorand/go-algorand/daemon/algod/api/server/v2/generated""
 	""github.com/algorand/go-algorand/logging""
 	""github.com/algorand/go-algorand/node""
+	""github.com/algorand/go-algorand/util/tokens""
 )
 
 const (
-	apiV1Tag = ""v1""
+	apiV1Tag = ""/v1""
 )
 
 // wrapCtx passes a common context to each request without a global variable.",It's a bit weird that the tag has a `/` in it,go,1,1,1
"@@ -73,8 +73,8 @@ func New(impl Interface, opts ...<$thrift>.RegisterOption) []<$transport>.Regist
 	h := handler{impl}
 	service := <$thrift>.Service{
 		Name: ""<.Service.Name>"",
-		Methods: map[string]<$thrift>.Handler{
-			<range .Service.Functions>""<.ThriftName>"": <$thrift>.HandlerFunc(h.<.Name>),
+		Methods: map[string]<$thrift>.UnaryHandler{
+			<range .Service.Functions><if not .OneWay>""<.ThriftName>"": <$thrift>.UnaryHandlerFunc(h.<.Name>),<end>
 		<end>},
 	}
 	return <$thrift>.BuildRegistrants(service, opts...)",Technically an unrelated change but it should be fine. Make sure that the glide.yaml depends on thriftrw 0.4 otherwise this won't work.,go,1,1,1
"@@ -93,7 +93,10 @@ func (m *memKVStore) Batch() KVStoreBatch {
 	return NewMemKVStoreBatch(&m.data)
 }
 
-const fileMode = 0600
+const (
+	fileMode = 0600
+	quota    = 3
+)
 
 // boltDB is KVStore implementation based bolt DB
 type boltDB struct {",quota -> numRetries And can we make it configurable?,go,1,1,1
"@@ -20,11 +20,13 @@ import (
 	""context""
 	""encoding/json""
 	""fmt""
-	""github.com/jetstack/cert-manager/pkg/acme""
 	""hash/fnv""
 
+	""github.com/jetstack/cert-manager/pkg/api/util""
+
 	metav1 ""k8s.io/apimachinery/pkg/apis/meta/v1""
 
+	""github.com/jetstack/cert-manager/pkg/acme""
 	acmecl ""github.com/jetstack/cert-manager/pkg/acme/client""
 	cmacme ""github.com/jetstack/cert-manager/pkg/apis/acme/v1""
 	cmapi ""github.com/jetstack/cert-manager/pkg/apis/certmanager/v1""",nit: This import should be grouped with the other cert-manager imports,go,1,1,1
"@@ -37,7 +37,7 @@ func Bootstrap() {
 	)
 
 	market.RegisterPaymentMethodUnserializer(
-		pingpong.DefaultPaymentMethod.Type,
+		pingpong.NewPaymentMethod(0, 0).Type,
 		func(rawDefinition *json.RawMessage) (market.PaymentMethod, error) {
 			var method pingpong.PaymentMethod
 			err := json.Unmarshal(*rawDefinition, &method)",Type constant should be here,go,1,1,1
"@@ -108,10 +108,6 @@ func NewAccounting(
 		return nil, fmt.Errorf(""tolerance plus threshold too big: %w"", ErrOverflow)
 	}
 
-	if PaymentTolerance > PaymentThreshold/2 {
-		return nil, ErrInvalidPaymentTolerance
-	}
-
 	return &Accounting{
 		accountingPeers:  make(map[string]*accountingPeer),
 		paymentThreshold: PaymentThreshold,",is this error still used somewhere else? If not should probably remove it on top,go,1,1,1
"@@ -85,6 +85,7 @@ var (
 		PetersburgBlock:     big.NewInt(7_280_000),
 		IstanbulBlock:       big.NewInt(9_069_000),
 		MuirGlacierBlock:    big.NewInt(9_200_000),
+		RamanujanBlock:      big.NewInt(0),
 		BerlinBlock:         big.NewInt(12_244_000),
 		LondonBlock:         big.NewInt(12_965_000),
 		ArrowGlacierBlock:   big.NewInt(13_773_000),",This should probably left as `nil` and not zero (which would mean the this fork is activated straight away),go,1,1,1
"@@ -30,7 +30,8 @@ const seewayLogXmlConfig = `
 </seelog>
 `
 
-func init() {
+// Bootstrap loads seelog package into the overall system
+func Bootstrap() {
 	newLogger, err := seelog.LoggerFromConfigAsString(seewayLogXmlConfig)
 	if err != nil {
 		seelog.Warn(""Error parsing seelog configuration"", err)",why explicit Bootstrap calling is better when previous init() way? Init is guaranteed to be called only once per whole program. Bootstrap can be called in multiple places by different packages - and introduce very interesting side effects if not carefully used.,go,1,1,1
"@@ -20,6 +20,12 @@ import (
 // Topic is the network pubsub topic identifier on which new messages are announced.
 const Topic = ""/fil/msgs""
 
+// Abstracts over a store of blockchain state.
+type chainState interface {
+	// LatestState returns the latest chain state.
+	LatestState(ctx context.Context) (state.Tree, error)
+}
+
 // PublishFunc is a function the Sender calls to publish a message to the network.
 type PublishFunc func(topic string, data []byte) error
 ",@acruikshank in a follow-up I suggest removing the blocktimer from message pool in favour of this one. While the chain store ends up providing both `chainState` and `core.blockTimer` it's very useful in testing that they're separate interfaces here.,go,0,1,1
"@@ -3,9 +3,16 @@
 package selector
 
 import (
+	""fmt""
+	""strings""
+
 	""github.com/spiffe/spire/proto/spire/common""
 )
 
+// Type and Value are delimited by a colon (:)
+// e.g. ""unix:uid:1000""
+const Delimiter = "":""
+
 type Selector struct {
 	Type  string
 	Value string","After this PR is merged, I will create another PR to use this constant in the SPIRE code.",go,0,1,1
"@@ -587,10 +587,6 @@ func (c *Checker) checkTree(id restic.ID, tree *restic.Tree) (errs []error) {
 	for _, node := range tree.Nodes {
 		switch node.Type {
 		case ""file"":
-			if node.Content == nil {
-				errs = append(errs, Error{TreeID: id, Err: errors.Errorf(""file %q has nil blob list"", node.Name)})
-			}
-
 			for b, blobID := range node.Content {
 				if blobID.IsNull() {
 					errs = append(errs, Error{TreeID: id, Err: errors.Errorf(""file %q blob %d has null ID"", node.Name, b)})","This check was introduced to recognize an error condition where the archiver won't properly save a list of blobs, but rather leave the `.Content` set to `nil`. I would have left the check, even if it seems redundant.",go,1,1,1
"@@ -72,7 +72,7 @@ func deploy(ctx context.Context, pctx *processContext, biome, dockerImage string
 
 	// Run ""biome apply"".
 	if apply {
-		if err := biomeApply(ctx, pctx, biome, true); err != nil {
+		if err := biomeApply(ctx, pctx, biome, nil); err != nil {
 			return err
 		}
 	}","Note that this changes the value for `Input` from `true` to `false` -- this means that if you run `gocdk deploy` and Terraform has questions for you, it will fail; I think that's OK but let me know what you think. Our normal workflow in the tool doesn't use Terraform variables, so it's unlikely to happen (the user would have to manually add a variable). We could also turn this into a flag.",go,1,1,1
"@@ -47,6 +47,7 @@ type serverConfig struct {
 	BindPort            int                `hcl:""bind_port""`
 	CASubject           *caSubjectConfig   `hcl:""ca_subject""`
 	CATTL               string             `hcl:""ca_ttl""`
+	JWTIssuer           string             `hcl:""jwt_issuer""`
 	DataDir             string             `hcl:""data_dir""`
 	Experimental        experimentalConfig `hcl:""experimental""`
 	LogFile             string             `hcl:""log_file""`",nit: alphabetical ordering?,go,1,1,1
"@@ -37,6 +37,18 @@ func (f *CreateRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) bin
         return validate(errs, ctx.Data, f, ctx.Locale)
 }
 
+type ConvertRepoForm struct {
+        Uid         int64  `binding:""Required""`
+        RepoId      int64  `binding:""Required""`
+        RepoName    string `binding:""Required;AlphaDashDot;MaxSize(100)""`
+        Private     bool
+        Description string `binding:""MaxSize(255)""`
+}
+
+func (f *ConvertRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) binding.Errors {
+        return validate(errs, ctx.Data, f, ctx.Locale)
+}
+
 type MigrateRepoForm struct {
         CloneAddr    string `json:""clone_addr"" binding:""Required""`
         AuthUsername string `json:""auth_username""`",Why do you need this?,go,1,1,0
"@@ -152,6 +152,12 @@ func (v *Venafi) Sign(csrPEM []byte, duration time.Duration, customFields []inte
 
 func newVRequest(cert *x509.Certificate) *certificate.Request {
 	req := certificate.NewRequest(cert)
+
+	if len(cert.Subject.Organization) == 0 {
+		// Venafi TPP errors on an empty DN
+		// this applies the pre-0.15 default again if no other DN field is set
+		cert.Subject.Organization = []string{""cert-manager""}
+	}
 	// overwrite entire Subject block
 	req.Subject = cert.Subject
 	return req","Hm, how does Venafi like it if we specify `cert.Subject.Organization[0] = """"` (i.e. a slice with length '1' but the first element has length '0')?",go,1,1,1
"@@ -38,6 +38,10 @@ const (
 
 	v1CredentialsEndpointRelativeURIFormat = ""%s?"" + CredentialsIDQueryParameterName + ""=%s""
 	v2CredentialsEndpointRelativeURIFormat = ""%s/%s""
+
+	// The role types specified in the credentials payload msg from the backend
+	ApplicationRoleType = ""TaskApplication""
+	ExecutionRoleType   = ""TaskExecution""
 )
 
 // IAMRoleCredentials is used to save credentials sent by ACS","should be `""// ApplicationRoleType specifies ...""`",go,1,1,1
"@@ -574,7 +574,7 @@ spec:
     Calculate the replica count
     Add as many poolUid to resources as there is replica count
     */}}
-    {{- $poolUids := keys .ListItems.cvolPoolList.pools }}
+    {{- $poolUids := keys .ListItems.cvolPoolList.pools | randomize }}
     {{- $replicaCount := .Config.ReplicaCount.value | int64 -}}
     repeatWith:
       resources:",Can we make sure that we take only `Healthy` replicas ? We might not want to take those pools which are not `Healthy`?,go,1,1,1
"@@ -28,7 +28,7 @@ import (
 // TODO(#866) Delete hard-coded brokercell once we can dynamically assign brokercell to brokers.
 const DefaultBrokerCellName = ""default""
 
-func CreateBrokerCell(b *v1beta1.Broker) *inteventsv1alpha1.BrokerCell {
+func CreateBrokerCell(_ *v1beta1.Broker) *inteventsv1alpha1.BrokerCell {
 	// TODO(#866) Get brokercell from the label (or annotation) from the broker.
 	return &inteventsv1alpha1.BrokerCell{
 		ObjectMeta: metav1.ObjectMeta{","This might be unexpectedly complex, but should we also change this to sth like: `CreateBrokerCell(_ *CellTenant)`, just in case in the future we want multiple brokercell support.?",go,1,1,1
"@@ -0,0 +1,11 @@
+package common
+
+// DefaultRetrySettings indicates what the ""default"" retry settings
+// are if it is not specified on an Activity or for any unset fields
+// if a policy is explicitly set on a workflow
+type DefaultRetrySettings struct {
+	InitialIntervalInSeconds   int32
+	MaximumIntervalCoefficient float64
+	BackoffCoefficient         float64
+	MaximumAttempts            int32
+}",Why is it called `MaximumIntervalCoefficient`? I think we should just call it `MaximumInterval` and use Duration as type.,go,1,1,1
"@@ -111,7 +111,12 @@ be 2, 1 hour would be 120, and 1 day would be 2880.
 		cmdkit.StringArg(""ask"", true, false, ""ID of ask for which to propose a deal""),
 		cmdkit.StringArg(""duration"", true, false, ""Time in blocks (about 30 seconds per block) to store data""),
 	},
+	Options: []cmdkit.Option{
+		cmdkit.BoolOption(""allow-duplicates"", ""allows duplicate proposals to be created""),
+	},
 	Run: func(req *cmds.Request, re cmds.ResponseEmitter, env cmds.Environment) error {
+		allowDuplicates, _ := req.Options[""allow-duplicates""].(bool)
+
 		miner, err := address.NewFromString(req.Arguments[0])
 		if err != nil {
 			return err","can you add some more description here? eg ""unless this flag is set you will not be able to make a deal for the same piece with the same miner. this protection forces the client to be aware of duplicate deals with the same miner""",go,1,1,1
"@@ -391,9 +391,8 @@ func (m *DWH) watchMarketEvents() error {
 			}
 			m.processBlockBoundary(event)
 			dispatcher.Add(event)
-			if eventsCount < m.cfg.NumWorkers {
-				eventsCount++
-			} else {
+			eventsCount++
+			if eventsCount >= m.cfg.NumWorkers {
 				m.processEvents(dispatcher)
 				eventsCount, dispatcher = 0, newEventDispatcher(m.logger)
 			}","With this change exactly `m.cfg.NumWorkers` events can be processed in parallel (not `m.cfg.NumWorkers + 1`, as in the old version).",go,1,1,1
"@@ -2317,7 +2317,9 @@ func (e *historyEngineImpl) ResetWorkflowExecution(
 		request.GetWorkflowTaskFinishEventId() >= baseMutableState.GetNextEventID() {
 		return nil, serviceerror.NewInvalidArgument(""Workflow task finish ID must be > 1 && <= workflow next event ID."")
 	}
-
+	if baseRunID == """" {
+		baseRunID = baseMutableState.GetExecutionInfo().RunID
+	}
 	// also load the current run of the workflow, it can be different from the base runID
 	resp, err := e.executionManager.GetCurrentExecution(&persistence.GetCurrentExecutionRequest{
 		NamespaceID: namespaceID,",Why do we need this when the code that follows already loads the runID?,go,1,1,1
"@@ -62,6 +62,8 @@ func (f *Filter) toMap() map[string]interface{} {
 	return fMap
 }
 
+const zeroTime = ""0001-01-01 00:00:00""
+
 func (f *Filter) ConstructQueryArgs() (string, []interface{}) {
 	fMap, query, args := f.toMap(), make([]string, 0), make([]interface{}, 0)
 ",do we need to use this to initialize `Start` and `End` in `Filter`?,go,1,1,1
"@@ -13,4 +13,5 @@
 
 package model
 
-//go:generate go run ../../gogenerate/awssdk.go -typesOnly=false
+// codegen tag required by AWS SDK generators
+//go:generate go run -tags codegen ../../gogenerate/awssdk.go -typesOnly=false",Where is the `codegen` tag being used?,go,1,1,1
"@@ -48,6 +48,7 @@ func MakeTopic(args *TopicArgs) *pubsubv1alpha1.Topic {
 		Spec: pubsubv1alpha1.TopicSpec{
 			IdentitySpec: duckv1alpha1.IdentitySpec{
 				GoogleServiceAccount: args.Spec.IdentitySpec.GoogleServiceAccount,
+				ServiceAccountName:   args.Spec.IdentitySpec.ServiceAccountName,
 			},
 			Secret:            args.Spec.Secret,
 			Project:           args.Spec.Project,",Same change in `pkg/reconciler/intevents/resources/topic.go`.,go,1,1,1
"@@ -378,8 +378,12 @@ func TestImageWithSameNameAndDifferentID(t *testing.T) {
 	imageState2.PulledAt = imageState2.PulledAt.Add(-19 * time.Minute)
 	imageState3.PulledAt = imageState3.PulledAt.Add(-18 * time.Minute)
 
-	// Verify Task is stopped
-	verifyTaskIsStopped(taskEvents, task1, task2, task3)
+	go discardEvents(taskEvents)
+	// Wait for task to be stopped
+	waitForTaskStoppedByCheckStatus(task1)
+	waitForTaskStoppedByCheckStatus(task2)
+	waitForTaskStoppedByCheckStatus(task3)
+
 	task1.SetSentStatus(api.TaskStopped)
 	task2.SetSentStatus(api.TaskStopped)
 	task3.SetSentStatus(api.TaskStopped)","Can we do this everywhere? Basically, get rid of `verifyTaskIsStopped()` altogether?",go,1,1,1
"@@ -8,11 +8,11 @@ package account
 
 import (
 	""fmt""
-	""syscall""
+
+	""github.com/iotexproject/iotex-core/cli/ioctl/util""
 
 	""github.com/spf13/cobra""
 	""go.uber.org/zap""
-	""golang.org/x/crypto/ssh/terminal""
 
 	""github.com/iotexproject/iotex-core/cli/ioctl/cmd/alias""
 	""github.com/iotexproject/iotex-core/pkg/log""",wrong import group,go,1,1,0
"@@ -34,6 +34,12 @@ import (
 	""github.com/jetstack/cert-manager/pkg/util/pki""
 )
 
+// The amount of time after the LastFailureTime of a Certificate
+// before the request should be retried.
+// In future this should be replaced with a more dynamic exponential
+// back-off algorithm.
+const RetryAfterLastFailure = time.Hour
+
 // PrivateKeyMatchesSpec returns an error if the private key bit size
 // doesn't match the provided spec. RSA, Ed25519 and ECDSA are supported.
 // If any error is returned, a list of violations will also be returned.",We should look at having the Certificate duration being a variable to the backoff function. A failed 1 hour cert will always have downtime here.,go,1,1,1
"@@ -29,11 +29,11 @@ const (
 )
 
 var (
-	validArgs       = []string{""endpoint"", ""wallet"", ""explorer"", ""defaultacc""}
-	validGetArgs    = []string{""endpoint"", ""wallet"", ""explorer"", ""defaultacc"", ""all""}
-	validExpl       = []string{""iotexscan"", ""iotxplorer""}
-	urlCompile      = regexp.MustCompile(urlPattern)
-	endpointCompile = regexp.MustCompile(""^"" + endpointPattern + ""$"")
+	supportedLanguage = []string{""English"", ""Chinese""}
+	validArgs         = []string{""endpoint"", ""wallet"", ""explorer"", ""defaultacc"", ""language""}
+	validGetArgs      = []string{""endpoint"", ""wallet"", ""explorer"", ""defaultacc"", ""language"", ""all""}
+	validExpl         = []string{""iotexscan"", ""iotxplorer""}
+	endpointCompile   = regexp.MustCompile(""^"" + endpointPattern + ""$"")
 )
 
 // configGetCmd represents the config get command","` supportedLanguage = []string{""English"", """"}`",go,1,1,1
"@@ -235,9 +235,11 @@ func TestProtocol_ClaimReward(t *testing.T) {
                 unclaimedBalance, _, err := p.UnclaimedBalance(ctx, sm, claimActionCtx.Caller)
                 require.NoError(t, err)
                 assert.Equal(t, big.NewInt(5), unclaimedBalance)
+                claimActionCtx.Caller = identityset.Address(28)
+
                 primAcc, err := accountutil.LoadAccount(sm, hash.BytesToHash160(claimActionCtx.Caller.Bytes()))
                 require.NoError(t, err)
-                assert.Equal(t, big.NewInt(1000005), primAcc.Balance)
+                assert.Equal(t, big.NewInt(980), primAcc.Balance)
 
                 // Claim negative amount of token will fail
                 _, err = p.Claim(claimCtx, sm, big.NewInt(-5))","i think we need to find out the root-cause? as mentioned in #2521, this test can pass in `make test`, but only fails when running as a separate test. must be sth like testConfig() or a local variable used by earlier test but changes when running separately. the proper fix is to understand why it happened that way and find out the exact root-cause",go,0,1,1
"@@ -170,6 +170,13 @@ const (
 	// {{ .Volume.isRestoreVol }}
 	IsRestoreVolumePropertyVTP VolumeTLPProperty = ""isRestoreVol""
 
+	// IsPatchVolumePropertyVTP indicates if the volume is being
+	// created with patch enabled.
+	//NOTE:
+	// The Corresponding value will be accessed as
+	// {{ .Volume.isPatch }}
+	IsPatchVolumePropertyVTP VolumeTLPProperty = ""isPatch""
+
 	// StorageClassVTP is the StorageClass of the volume
 	//
 	// NOTE:",Please avoid changing this file. Remove this constant.,go,1,1,1
"@@ -24,7 +24,12 @@ import (
 	""github.com/iotexproject/iotex-core/state/factory""
 )
 
-const testnetActionPath = ""testnet_actions.yaml""
+const (
+	testnetActionPath = ""testnet_actions.yaml""
+	// TODO: Gensis block producer's keypair should be a config. Note genesis block producer is not the creator
+	genesisProducerPublicKey  = ""0444b7ac782c60e90b1aa263fe4d61dbe73bf8260d3e773ce9f4f0dbc181e8e5f2e3b6f6d4cf47f1d53af95cf24b88b92037125c7bf6f63b55bebbb8579b3a9b24""
+	genesisProducerPrivateKey = ""bace9b2435db45b119e1570b4ea9c57993b2311e0c408d743d87cd22838ae892""
+)
 
 // Genesis defines the Genesis default settings
 type Genesis struct {",line is 161 characters (from `lll`),go,1,1,0
"@@ -169,6 +169,7 @@ type Transaction struct {
 	// To add another one, create a struct with XXXTransactionType and embed it here.
 	// To prevent extraneous fields, all must have the ""omitempty"" tag.
 	Payment *PaymentTransactionType `json:""payment,omitempty""`
+	Keyreg  *KeyregTransactionType  `json:""keyreg,omitempty""`
 
 	// FromRewards is the amount of pending rewards applied to the From
 	// account as part of this transaction.","While we're at it, can you swagger annotate both the `Payment` and `Keyreg` fields with a description, and `required: false`?",go,1,1,1
"@@ -149,15 +149,6 @@ func setLogCode(s *scope, name string, f func(format string, args ...interface{}
 // new objects to the build graph.
 func buildRule(s *scope, args []pyObject) pyObject {
         s.NAssert(s.pkg == nil, ""Cannot create new build rules in this context"")
-        // We need to set various defaults from config here; it is useful to put it on the rule but not often so
-        // because most rules pass them through anyway.
-        // TODO(peterebden): when we get rid of the old parser, put these defaults on all the build rules and
-        //                   get rid of this.
-        args[11] = defaultFromConfig(s.config, args[11], ""DEFAULT_VISIBILITY"")
-        args[15] = defaultFromConfig(s.config, args[15], ""DEFAULT_TESTONLY"")
-        args[30] = defaultFromConfig(s.config, args[30], ""DEFAULT_LICENCES"")
-        args[20] = defaultFromConfig(s.config, args[20], ""BUILD_SANDBOX"")
-        args[21] = defaultFromConfig(s.config, args[21], ""TEST_SANDBOX"")
         target := createTarget(s, args)
         s.Assert(s.pkg.Target(target.Label.Name) == nil, ""Duplicate build target in %s: %s"", s.pkg.Name, target.Label.Name)
         populateTarget(s, target, args)",you sure this is safe? did we put the defaults in everywhere they're needed?,go,1,0,1
"@@ -0,0 +1,18 @@
+// +build windows
+
+// Copyright 2014-2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.
+//
+// Licensed under the Apache License, Version 2.0 (the ""License""). You may
+// not use this file except in compliance with the License. A copy of the
+// License is located at
+//
+//	http://aws.amazon.com/apache2.0/
+//
+// or in the ""license"" file accompanying this file. This file is distributed
+// on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
+// express or implied. See the License for the specific language governing
+// permissions and limitations under the License.
+
+package api
+
+const OSType = ""windows""",Is this mainly used for task annotation purposes ?,go,1,1,1
"@@ -7,12 +7,17 @@ import (
 
 	""github.com/ethereum/go-ethereum/crypto""
 	""github.com/sonm-io/core/blockchain""
+	""github.com/sonm-io/core/blockchain/market""
 	""github.com/sonm-io/core/proto""
 	""github.com/sonm-io/core/util""
 )
 
+var (
+	HexKey = ""a5dd45e0810ca83e21f1063e6bf055bd13544398f280701cbfda1346bcf3ae64""
+)
+
 func main() {
-	prv, err := crypto.GenerateKey()
+	prv, err := crypto.HexToECDSA(HexKey)
 	if err != nil {
 		log.Fatalln(err)
 		return",why not use const? why is this variable exportable?,go,1,1,1
"@@ -3,6 +3,7 @@ package execute
 import (
 	""errors""
 	""fmt""
+	""github.com/google/go-cmp/cmp""
 	""sort""
 	""sync/atomic""
 ","nit, can you move this import down with the non stdlib imports.",go,1,1,1
"@@ -1379,3 +1379,8 @@ func (k *SimpleFS) SimpleFSFolderEditHistory(
 	// Now get the edit history.
 	return k.config.KBFSOps().GetEditHistory(ctx, node.GetFolderBranch())
 }
+
+func (k *SimpleFS) SimpleFSSuppressNotifications(ctx context.Context, nextSuppressIn int) error {
+	k.config.Reporter().SuppressNotifications(ctx, time.Second*time.Duration(nextSuppressIn))
+	return nil
+}","I don't understand this formula. If `nextSuppressIn` is supposed to be in seconds, shouldn't this be just `time.Second*nextSuppressIn`?",go,1,1,1
"@@ -30,7 +30,7 @@ import (
 	""github.com/hashicorp/vault/sdk/helper/certutil""
 	corelisters ""k8s.io/client-go/listers/core/v1""
 
-	""github.com/jetstack/cert-manager/pkg/apis/certmanager/v1""
+	v1 ""github.com/jetstack/cert-manager/pkg/apis/certmanager/v1""
 	""github.com/jetstack/cert-manager/pkg/util/pki""
 )
 ",we should rename this to `cmapi` if you mind changing that in the rest of the code too?,go,1,1,1
"@@ -3129,6 +3129,14 @@ func (s *Server) jsConsumerCreate(sub *subscription, c *client, a *Account, subj
 	// Make sure we have sane defaults.
 	setConsumerConfigDefaults(&req.Config)
 
+	// Check if we have a BackOff defined that MaxDeliver is within range etc.
+	if lbo := len(req.Config.BackOff); lbo > 0 && req.Config.MaxDeliver <= lbo {
+		err := errors.New(""max deliver required to be > length backoff values"")
+		resp.Error = NewJSConsumerCreateError(err, Unless(err))
+		s.sendAPIErrResponse(ci, acc, subject, reply, string(msg), s.jsonResponse(&resp))
+		return
+	}
+
 	// Determine if we should proceed here when we are in clustered mode.
 	if s.JetStreamIsClustered() {
 		if req.Config.Direct {","Remove this, and then have `resp.Error = NewJS...` that you will get adding the new error.",go,1,1,1
"@@ -637,11 +637,14 @@ func (t *tierValidator) deleteValidate(oldObj interface{}, userInfo authenticati
 }
 
 // validateAntreaGroupSelectors ensures that an IPBlock is not set along with namespaceSelector and/or a
-// podSelector.
+// podSelector. Similarly, ExternalEntitySelector cannot be set with PodSelector.
 func validateAntreaGroupSelectors(s corev1a2.GroupSpec) (string, bool) {
-	podSelector, serviceRef, ipBlock := 0, 0, 0
-	if s.NamespaceSelector != nil || s.PodSelector != nil {
-		podSelector = 1
+	selector, serviceRef, ipBlock := 0, 0, 0
+	if s.NamespaceSelector != nil || s.ExternalEntitySelector != nil || s.PodSelector != nil {
+		selector = 1
+	}
+	if s.PodSelector != nil && s.ExternalEntitySelector != nil {
+		selector = 2
 	}
 	if s.IPBlock != nil {
 		ipBlock = 1",nit: make it first cond and return early?,go,1,1,1
"@@ -152,14 +152,10 @@ func (c *Client) buildTestCommand(target *core.BuildTarget) (*pb.Command, error)
 // getCommand returns the appropriate command to use for a target.
 func (c *Client) getCommand(target *core.BuildTarget) string {
         if target.IsRemoteFile {
-                // TODO(peterebden): we should handle this using the Remote Fetch API once that's available.
-                urls := make([]string, len(target.Sources))
-                for i, s := range target.Sources {
-                        urls[i] = ""curl -fsSLo $OUT "" + s.String()
-                }
-                cmd := strings.Join(urls, "" || "")
+                // This isn't a real command, but it suits us to construct a pseudo-version of one.
+                cmd := ""fetch "" + strings.Join(target.AllURLs(c.state.Config), "" "") + "" & verify "" + strings.Join(target.Hashes, "" "")
                 if target.IsBinary {
-                        return ""("" + cmd + "") && chmod +x $OUT""
+                        return cmd + "" binary""
                 }
                 return cmd
         }",How does this work?,go,1,1,0
"@@ -65,7 +65,12 @@ func (e *encoder) EncodeMap(n int) driver.Encoder {
 	return &mapEncoder{m: m}
 }
 
-var typeOfGoTime = reflect.TypeOf(time.Time{})
+var (
+	typeOfGoTime    = reflect.TypeOf(time.Time{})
+	typeOfBinarySet = reflect.TypeOf([][]byte{})
+	typeOfStringSet = reflect.TypeOf([]string{})
+	typeOfNumberSet = reflect.TypeOf([]float64{})
+)
 
 // EncodeSpecial encodes time.Time specially.
 func (e *encoder) EncodeSpecial(v reflect.Value) (bool, error) {","I think we said that _decoding_ any of the set types would fail, but I think we should support _encoding_ of `[]int`, `[]string` and `[][]byte` as arrays. I don't think there's any risk of data loss or corruption if we do that.",go,1,1,1
"@@ -110,8 +110,14 @@ type CASTemplateSpec struct {
 	// Defaults are a list of default configurations that may be applied
 	// during provisioning of a CAS volume
 	Defaults []Config `json:""defaultConfig""`
+	// TaskNamespace is the namespace where the tasks
+	// are expected to be found
+	TaskNamespace string `json:""taskNamespace""`
 	// RunTasks refers to a set of tasks to be run
 	RunTasks RunTasks `json:""run""`
+	// OutputTask is the task that has the CAS template result's output
+	// format
+	OutputTask string `json:""output""`
 }
 
 // CASUpdateSpec is the specification to update a CAS volume","would it be ever possible that the all runtasks don't run in the same namespace? If yes, then we should probably make namespace updatable by having it in runtask also.",go,1,1,1
"@@ -21,6 +21,7 @@ import (
 
 	go_dockerclient ""github.com/fsouza/go-dockerclient""
 	gomock ""github.com/golang/mock/gomock""
+	""github.com/aws/amazon-ecs-agent/agent/api""
 )
 
 // Mock of Manager interface","I think the convention is to order import statements as: 1) native go packages, 2) packages from the same repo, 3) other packages, with an empty line between each group. So this new line should be in 21?",go,1,1,1
"@@ -17,5 +17,5 @@ type ContainerDependency struct {
 	SatisfiedStatus ContainerStatus `json:""SatisfiedStatus""`
 	// DependentStatus defines the status that cannot be reached until the
 	// resource satisfies the dependency
-	DependentStatus ContainerStatus `json:""DependentStatus""`
+	DependentStatus ContainerStatus `json:""DependentStatus,omitempty""`
 }",Is adding `omitempty` absolutely necessary here? Are there conditions in which it could break the JSON marshaling/unmarshaling logic? I'd rather not add this if it's only giving us marginal gains.,go,1,1,1
"@@ -15,4 +15,5 @@ type execVars struct {
 	taskID           string
 	containerName    string
 	skipConfirmation bool
+	yes              *bool
 }","I wonder if we should make this flag more descriptive, like `ssmPlugin` or `updateSSM` or something?",go,1,1,1
"@@ -191,7 +191,11 @@ func MakeOfflineNode(t *testing.T) *Node {
 // DefaultTestingConfig returns default configuration for testing
 func DefaultTestingConfig() []ConfigOpt {
         return []ConfigOpt{
-                VerifierConfigOption(verification.NewFakeVerifier(true, nil)),
+                VerifierConfigOption(verification.NewFakeVerifier(verification.FakeVerifierConfig{
+                        VerifyPoStValid:                true,
+                        VerifyPieceInclusionProofValid: true,
+                        VerifySealValid:                true,
+                })),
         }
 }
 ","In my branch, the tests pass with this option removed. I believe we're only using this config for testing init and message propagation (which shouldn't touch proofs). Is this necessary?",go,1,1,1
"@@ -191,7 +191,7 @@ func makeErrorCookie(value string) *http.Cookie {
 		MaxAge:   defaultErrorCookieMaxAge,
 		Path:     rootPath,
 		Secure:   true,
-		HttpOnly: true,
+		HttpOnly: false,
 		SameSite: http.SameSiteLaxMode,
 	}
 }",I changed this value to read the error message from JavaScript.,go,1,1,1
"@@ -218,6 +218,19 @@ func validateAlertManagerRoutes(r *monitoringv1alpha1.Route, receivers map[strin
 		return errors.Errorf(""receiver %q not found"", r.Receiver)
 	}
 
+	if groupLen := len(r.GroupBy); groupLen > 0 {
+		groupedBy := make(map[string]struct{}, groupLen)
+		for _, str := range r.GroupBy {
+			if _, found := groupedBy[str]; found {
+				return errors.Errorf(""duplicate values not permitted in route 'groupBy': %v"", r.GroupBy)
+			}
+			groupedBy[str] = struct{}{}
+		}
+		if _, found := groupedBy[""...""]; found && groupLen > 1 {
+			return errors.Errorf(""'...' must be a sole value in route 'groupBy': %v"", r.GroupBy)
+		}
+	}
+
 	children, err := r.ChildRoutes()
 	if err != nil {
 		return err","For my understanding, what is the reason for using both the OpenAPI validation and implementing our own operator-side validation?",go,1,1,1
"@@ -1332,7 +1332,7 @@ func getWorkflowStatus(statusStr string) executionpb.WorkflowExecutionStatus {
 }
 
 func getWorkflowIDReusePolicy(value int) commonpb.WorkflowIdReusePolicy {
-	if value >= 0 && value <= len(commonpb.WorkflowIdReusePolicy_value) {
+	if value > 0 && value < len(commonpb.WorkflowIdReusePolicy_value) {
 		return commonpb.WorkflowIdReusePolicy(value)
 	}
 	// At this point, the policy should return if the value is valid","Gah, we force customers to pass integer here - WIll log issue",go,1,1,1
"@@ -18,9 +18,14 @@
 package cmd
 
 import (
+        ""encoding/json""
         ""path/filepath""
         ""time""
 
+        ""github.com/mysteriumnetwork/node/nat/traversal/config""
+
+        ""github.com/mysteriumnetwork/node/nat/traversal""
+
         ""github.com/asaskevich/EventBus""
         log ""github.com/cihub/seelog""
         ""github.com/ethereum/go-ethereum/accounts/keystore""",Something wrong with import blocks.,go,1,0,0
"@@ -104,7 +104,12 @@ func (o *initAppOpts) Validate() error {
 
 // Ask prompts the user for any required arguments that they didn't provide.
 func (o *initAppOpts) Ask() error {
-	if ok, _ := o.isSessionFromEnvVars(); ok { // Ignore the error, we do not want to crash for a warning.
+	ok, err := o.isSessionFromEnvVars()
+	if err != nil {
+		return err
+	}
+
+	if ok {
 		log.Warningln(`Looks like you're creating an application using credentials set by environment variables.
 Copilot will store your application metadata in this account.
 We recommend using credentials from named profiles. To learn more:",awesome find! (and sorry for the bug :disappear:),go,1,1,0
"@@ -28,10 +28,10 @@ const defaultEnvironmentName = ""test""
 // InitAppOpts holds the fields to bootstrap a new application.
 type InitAppOpts struct {
 	// User provided fields
-	Project string `survey:""project""` // namespace that this application belongs to.
-	Name    string `survey:""name""`    // unique identifier to logically group AWS resources together.
-	Type    string `survey:""Type""`    // type of application you're trying to build (LoadBalanced, Backend, etc.)
-
+	Project          string `survey:""project""` // namespace that this application belongs to.
+	Name             string `survey:""name""`    // unique identifier to logically group AWS resources together.
+	Type             string `survey:""Type""`    // type of application you're trying to build (LoadBalanced, Backend, etc.)
+	SkipDeploy       bool   // whether to skip asking if we should deploy a test environment.
 	existingProjects []string
 
 	projStore archer.ProjectStore","Will there be other places where non-interactive prompt is needed? If that's the case, maybe we should have a consistent ""--non-interactive"" flag instead?",go,1,1,1
"@@ -47,7 +47,7 @@ func TestCreateNewChunkOnFirstWrite(t *testing.T) {
 
 	data := []byte(""This is a sample data to write"")
 
-	buf := NewBufferedWriter(ctx, bufferSize, workerNum, mockGcsClient, oauth, prefix, bkt, obj)
+	buf := NewBufferedWriter(ctx, bufferSize, workerNum, mockGcsClient, oauth, prefix, bkt, obj, ""GCEExport"")
 	_, err := buf.Write(data)
 	assert.Nil(t, err)
 	assert.Equal(t, 1, buf.part)","The overview mentioned that you're changing the prefix: ""Fixed by allowing setting proper err log prefix."", but here it looks like it's still `GCEExport`. Which prefix were you hoping to use?",go,1,1,1
"@@ -25,6 +25,16 @@ import (
 	""github.com/mysteriumnetwork/node/session""
 )
 
+// SessionStatus represents list of possible session statuses
+type SessionStatus int
+
+const (
+	// SessionStatusNew means that newly created session object is written to storage
+	SessionStatusNew = SessionStatus(0)
+	// SessionStatusCompleted means that session object is updated on connection disconnect event
+	SessionStatusCompleted = SessionStatus(1)
+)
+
 // Session holds structure for saving session history
 type Session struct {
 	SessionID       session.ID `storm:""id""`","If it updated on disconnect event, maybe we should call it `Finished`?",go,1,1,1
"@@ -11,9 +11,11 @@ import (
 
 	""github.com/ethersphere/bee/pkg/logging""
 	""github.com/ethersphere/bee/pkg/statestore/leveldb""
-	""github.com/ethersphere/bee/pkg/statestore/mock""
 	""github.com/ethersphere/bee/pkg/storage""
 	""github.com/ethersphere/bee/pkg/swarm""
+
+	ldb ""github.com/syndtr/goleveldb/leveldb""
+	ldbs ""github.com/syndtr/goleveldb/leveldb/storage""
 )
 
 // InitStateStore will initialize the stateStore with the given path to the",is it not possible to move this whole block into the `statestore/leveldb` implementation?,go,1,1,1
"@@ -19,13 +19,14 @@ func TestTruncate(t *testing.T) {
 		{""foo"", 0, """"},
 		{""foo"", -1, """"},
 		{""Löwen"", 4, ""Löwe""},
-		{""あああああああああ/data"", 10, ""あああああ""},
-		{""あああああああああ/data"", 11, ""あああああ""},
+		{""あああああ/data"", 7, ""あああ""},
+		{""あああああ/data"", 10, ""あああああ""},
+		{""あああああ/data"", 11, ""あああああ/""},
 	}
 
 	for _, test := range tests {
 		t.Run("""", func(t *testing.T) {
-			out := truncate(test.input, test.width)
+			out := Truncate(test.input, test.width)
 			if out != test.output {
 				t.Fatalf(""wrong output for input %v, width %d: want %q, got %q"",
 					test.input, test.width, test.output, out)","I think we should also keep this test, which checks that a unicode character is not split in half.",go,1,1,1
"@@ -402,9 +402,10 @@ func printTaskStart(cmd *cobra.Command, start *pb.StartTaskReply) {
 func printBalanceInfo(cmd *cobra.Command, reply *pb.BalanceReply) {
 	side := reply.GetSideBalance().ToPriceString()
 	live := reply.GetLiveBalance().ToPriceString()
+	eth := reply.GetLiveEthBalance().ToPriceString()
 
 	if isSimpleFormat() {
-		cmd.Printf(""On Ethereum: %s SNM\n"", live)
+		cmd.Printf(""On Ethereum: %s SNM | %s Eth\n"", live, eth)
 		cmd.Printf(""On SONM:     %s SNM\n"", side)
 	} else {
 		showJSON(cmd, map[string]map[string]string{""balance"": {",I'd rather named it as `ethLive`. Just for clarity.,go,1,1,1
"@@ -804,9 +804,7 @@ func TestConnectionIsClosedOnIdle(t *testing.T) {
 		_heartbeatJitter:     10 * time.Millisecond,
 	}
 	go func() {
-		timer := newDisconnectionTimer(mockWsClient, acsSession.heartbeatTimeout(), acsSession.heartbeatJitter())
-		defer timer.Stop()
-		acsSession.startACSSession(mockWsClient, timer)
+		acsSession.startACSSession(mockWsClient)
 	}()
 
 	// Wait for connection to be closed. If the connection is not closed",nit: remove the function wrapper `go acsSession.startACSSession(mockWsClient)`,go,1,1,1
"@@ -21,7 +21,10 @@ func setupGetAncestorTests(require *require.Assertions) (context.Context, *th.Te
 // requireGrowChain grows the given store numBlocks single block tipsets from
 // its head.
 func requireGrowChain(ctx context.Context, require *require.Assertions, blockSource *th.TestFetcher, chainStore chain.Store, numBlocks int) {
-	link := chainStore.Head()
+	head := chainStore.GetHead()
+	headTipSetAndState, err := chainStore.GetTipSetAndState(ctx, head)
+	require.NoError(err)
+	link := headTipSetAndState.TipSet
 
 	signer, ki := types.NewMockSignersAndKeyInfo(1)
 	mockSignerPubKey := ki[0].PublicKey()",these three lines are repeated a zillion times if you want to make a helper out of 'em. up to you.,go,1,1,1
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -307,7 +307,7 @@ func newProp(name string, units interface{}) systemdDbus.Property {
 func getUnitName(c *configs.Cgroup) string {
 	// by default, we create a scope unless the user explicitly asks for a slice.
 	if !strings.HasSuffix(c.Name, "".slice"") {
-		return fmt.Sprintf(""%s-%s.scope"", c.ScopePrefix, c.Name)
+		return c.ScopePrefix + ""-"" + c.Name + "".scope""
 	}
 	return c.Name
 }",You lost the `.scope` part; I guess CI failures are because if this,go,1,1,1
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -14,7 +14,7 @@ func init() {
 
 // Block is a block in the blockchain.
 type Block struct {
-	Parent *cid.Cid `json:""parent""`
+	Parents SortedCidSet `json:""parents""`
 
 	// Height is the chain height of this block.
 	Height uint64 `json:""height""`","Shouldn't this be `*SortedCidSet`, or is there a specific reason you are using the value here?",go,1,1,1
"@@ -69,11 +69,14 @@ type demux struct {
 // makeDemux initializes the goroutines needed to process external events, setting up the appropriate channels.
 //
 // It must be called before other methods are called.
-func makeDemux(net Network, ledger LedgerReader, validator BlockValidator, voteVerifier *AsyncVoteVerifier, processingMonitor EventsProcessingMonitor, log logging.Logger) (d *demux) {
+func makeDemux(net Network, ledger LedgerReader, validator BlockValidator, voteVerifier *AsyncVoteVerifier, processingMonitor EventsProcessingMonitor, log logging.Logger, monitor *coserviceMonitor) (d *demux) {
 	d = new(demux)
 	d.crypto = makeCryptoVerifier(ledger, validator, voteVerifier, log)
 	d.log = log
 	d.ledger = ledger
+	d.monitor = monitor
+	d.queue = make([]<-chan externalEvent, 0)
+	d.processingMonitor = processingMonitor
 
 	tokenizerCtx, cancelTokenizers := context.WithCancel(context.Background())
 	d.rawVotes = d.tokenizeMessages(tokenizerCtx, net, protocol.AgreementVoteTag, decodeVote)",how about moving all the params to demuxParams struct ?,go,1,1,1
"@@ -305,16 +305,11 @@ func (s *syncInstrument) RecordOne(ctx context.Context, number api.Number, kvs [
 // processor will call Collect() when it receives a request to scrape
 // current metric values.  A push-based processor should configure its
 // own periodic collection.
-func NewAccumulator(processor export.Processor, opts ...Option) *Accumulator {
-	c := &Config{}
-	for _, opt := range opts {
-		opt.Apply(c)
-	}
-
+func NewAccumulator(processor export.Processor, resource *resource.Resource) *Accumulator {
 	return &Accumulator{
 		processor:        processor,
 		asyncInstruments: internal.NewAsyncInstrumentState(),
-		resource:         c.Resource,
+		resource:         resource,
 	}
 }
 ","In the tracing SDK the resource is associated at the Provider level. Is the idea that this will come from the provider, but allows this to be configured for testing?",go,1,1,1
"@@ -328,11 +328,13 @@ func (r *Base) GetOrCreateReceiveAdapter(ctx context.Context, desired *appsv1.De
 	existing, err := r.getReceiveAdapter(ctx, ps)
 	if err != nil && !apierrors.IsNotFound(err) {
 		logging.FromContext(ctx).Desugar().Error(""Unable to get an existing Receive Adapter"", zap.Error(err))
+		ps.Status.MarkDeployedUnknown(""Error getting an existing Receive Adapter"", err.Error())
 		return nil, err
 	}
 	if existing == nil {
 		existing, err = r.KubeClientSet.AppsV1().Deployments(ps.Namespace).Create(desired)
 		if err != nil {
+			ps.Status.MarkDeployedFailed(""Error creating an Receive Adapter"", err.Error())
 			logging.FromContext(ctx).Desugar().Error(""Error creating Receive Adapter"", zap.Error(err))
 			return nil, err
 		}","nit: ""Error create the Receive Adapter""",go,1,1,1
"@@ -28,6 +28,8 @@ var statesaver statemanager.Saver = statemanager.NewNoopStateManager()
 
 func HandleEngineEvents(taskEngine engine.TaskEngine, client api.ECSClient, saver statemanager.Saver) {
 	statesaver = saver
+	handler := NewTaskHandler()
+
 	for {
 		taskEvents, containerEvents := taskEngine.TaskEvents()
 ",It looks like now you have two separate `taskHandler`s: one here and one in `agent/acs/handler/payload_handler.go`. Is that intentional?,go,1,1,1
"@@ -2,6 +2,9 @@
 // Use of this source code is governed by a BSD-style
 // license that can be found in the LICENSE file.
 
+// Package debugapi exposes the debug API used to
+// control and analyze low-level features and functionalities
+// of Bee.
 package debugapi
 
 import (","Not just low-level, I would say the runtime state.",go,1,1,1
"@@ -409,10 +409,11 @@ func TestStopContainerTimeout(t *testing.T) {
 	mockDocker, client, testTime, done := dockerclientSetup(t)
 	defer done()
 
+	dockerStopTimeout := client.config.DockerStopTimeoutSeconds
 	wait := &sync.WaitGroup{}
 	wait.Add(1)
-	mockDocker.EXPECT().StopContainer(""id"", uint(dockerStopTimeoutSeconds)).Do(func(x, y interface{}) {
-		testTime.Warp(stopContainerTimeout)
+	mockDocker.EXPECT().StopContainer(""id"", uint(dockerStopTimeout)).Do(func(x, y interface{}) {
+		testTime.Warp(stopContainerAPITimeout + time.Duration(dockerStopTimeout)*time.Second)
 		wait.Wait()
 		// Don't return, verify timeout happens
 	})",I think you want this to be `client.config.DockerStopTimeoutSeconds + stopContainerAPITimeout`.,go,1,1,1
"@@ -27,10 +27,11 @@ type Interface interface {
 }
 
 type ipset struct {
+	refCount
 }
 
 func New() Interface {
-	return &ipset{}
+	return &ipset{refCount: newRefCount()}
 }
 
 func (i *ipset) Create(ipsetName Name, ipsetType Type) error {",Is it possible for `Destroy` to be called twice with the same `ipsetName`?,go,1,1,1
"@@ -14,7 +14,7 @@ import (
 	""strconv""
 
 	""github.com/golang/protobuf/proto""
-	grpc_prometheus ""github.com/grpc-ecosystem/go-grpc-prometheus""
+	""github.com/grpc-ecosystem/go-grpc-prometheus""
 	""github.com/pkg/errors""
 	""go.uber.org/zap""
 	""google.golang.org/grpc""",File is not `goimports`-ed (from `goimports`),go,1,1,1
"@@ -55,7 +55,7 @@ func ensureOrCreateDir(dir string) error {
         err := ensureDirExists(dir)
         if os.IsNotExist(err) {
                 log.Info(""[Directory config checker] "", ""Directory: "", dir, "" does not exit. Creating new one"")
-                return os.MkdirAll(dir, 0600)
+                return os.MkdirAll(dir, 0700)
         }
         return err
 }",Was is a debugged place??,go,0,0,0
"@@ -90,8 +90,7 @@ func TestFormatWithCommentsParens(t *testing.T) {
 		t.Fatal(err)
 	}
 
-	if want := `
-// comment\n(1 * 1)`; want != got {
+	if want := `// comment\n(1 * 1)`; want != got {
 		t.Errorf(""unexpected formatted file -want/+got:\n\t- %q\n\t+ %q"", want, got)
 	}
 }",Is this a change that was added to the formatter or just a go format change?,go,1,1,1
"@@ -16,6 +16,7 @@ type Connection interface {
 	BreakTie(Connection) ConnectionTieBreak
 	RemoteTCPAddr() string
 	Established() bool
+	Outbound() bool
 	Shutdown(error)
 	Log(args ...interface{})
 }","Suggested order: Local, Remote, RemoteTCPAddr, Outbound, Established, BreakTie, Shutdown, Log.",go,1,1,1
"@@ -106,6 +106,13 @@ func TestValidateSecurityWithMaskPaths(t *testing.T) {
 				{Type: configs.NEWNS},
 			},
 		),
+		// Required to pass mount validation.
+		Mounts: []*configs.Mount{
+			{Destination: ""/proc""},
+			{Destination: ""/sys""},
+			{Destination: ""/dev/shm""},
+			{Destination: ""/dev/pts""},
+		},
 	}
 
 	validator := validate.New()",One more test to make it failed with invalid mount info?,go,1,1,1
"@@ -37,8 +37,8 @@ const (
 	Streaming
 )
 
-// HandlerSpec holds either a UnaryTransportHandler or StreamTransportHandler.
-type HandlerSpec struct {
+// TransportHandlerSpec holds either a UnaryTransportHandler or StreamTransportHandler.
+type TransportHandlerSpec struct {
 	t Type
 
 	unaryHandler  UnaryTransportHandler","Let's avoid interleaving types and methods. With few exceptions, a type declaration should be followed by all of its methods. It might even be okay to rename this to transport.go and add encoding.go or similar with the mirror world types and methods.",go,1,1,1
"@@ -40,6 +40,18 @@ func (z ChannelID) MarshalJSON() ([]byte, error) {
 	return json.Marshal(z.val)
 }
 
+// MarshalBinary converts a ChannelID to bytes
+func (z *ChannelID) MarshalBinary() ([]byte, error) {
+	return z.Bytes(), nil
+}
+
+// UnmarshalBinary converts bytes to a ChannelID
+func (z *ChannelID) UnmarshalBinary(b []byte) error {
+	chID := NewChannelIDFromBytes(b)
+	*z = *chID
+	return nil
+}
+
 // An ChannelID is a signed multi-precision integer.
 type ChannelID struct{ val *big.Int }
 ",the idea was for this structures to implement `Encode/Decode` which can be then use with multiple encoders.,go,1,1,1
"@@ -230,7 +230,7 @@ var TxnTypeNames = []string{
 }
 
 // map TxnTypeName to its enum index, for `txn TypeEnum`
-var txnTypeIndexes map[string]int
+var txnTypeIndexes map[string]uint64
 
 // map symbolic name to uint64 for assembleInt
 var txnTypeConstToUint64 map[string]uint64","why uint64? these are indexes in an array, and no plans to have 2^64 long arrays",go,1,1,1
"@@ -17,12 +17,18 @@ limitations under the License.
 package main
 
 import (
-	""github.com/google/knative-gcp/pkg/broker/ingress""
 	""go.uber.org/zap""
+
+	""github.com/google/knative-gcp/pkg/broker/ingress""
 	""knative.dev/pkg/logging""
 	""knative.dev/pkg/signals""
 )
 
+// main creates and starts an ingress handler using default options.
+// 1. It listens on port 8080
+// 2. It reads ""GOOGLE_CLOUD_PROJECT"" env var for pubsub project. If the env var is empty, it retrieves project ID from
+//    GCE metadata.
+// 3. It expects broker configmap mounted at ""/var/run/cloud-run-events/broker/targets""
 func main() {
 	// Since we pass nil, a default config with no error will be returned.
 	cfg, _ := logging.NewConfigFromMap(nil)",We've previously used `PROJECT_ID` for this env var in other receive adapters. We should be consistent here.,go,1,1,1
"@@ -1103,6 +1103,7 @@ func TransferOwnership(u *User, newOwnerName string, repo *Repository) error {
 
 	wikiPath := WikiPath(owner.Name, repo.Name)
 	if com.IsExist(wikiPath) {
+		RemoveAllWithNotice(""Delete repository wiki local copy"", repo.LocalWikiPath())
 		if err = os.Rename(wikiPath, WikiPath(newOwner.Name, repo.Name)); err != nil {
 			return fmt.Errorf(""rename repository wiki: %v"", err)
 		}",~~All part from line 1104 to 1110 could be replaced by the newly added line.~~,go,1,1,1
"@@ -403,7 +403,15 @@ func (b *bucket) ListPaged(ctx context.Context, opts *driver.ListOptions) (*driv
 func (b *bucket) As(i interface{}) bool { return false }
 
 // As implements driver.ErrorAs.
-func (b *bucket) ErrorAs(err error, i interface{}) bool { return false }
+func (b *bucket) ErrorAs(err error, i interface{}) bool {
+	if perr, ok := err.(*os.PathError); ok {
+		if p, ok := i.(**os.PathError); ok {
+			*p = perr
+			return true
+		}
+	}
+	return false
+}
 
 // Attributes implements driver.Attributes.
 func (b *bucket) Attributes(ctx context.Context, key string) (driver.Attributes, error) {",Please also update the package godoc for As.,go,1,1,1
"@@ -13,9 +13,9 @@ import (
 	""sync""
 	""time""
 
+	""github.com/iotexproject/go-fsm""
 	""github.com/pkg/errors""
 	""github.com/prometheus/client_golang/prometheus""
-	""github.com/zjshen14/go-fsm""
 	""go.uber.org/zap""
 
 	""github.com/iotexproject/iotex-core/crypto""",File is not `goimports`-ed (from `goimports`),go,0,1,1
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -42,10 +42,11 @@ var (
 		""sles-12-byol"":        ""suse/translate_sles_12_byol.wf.json"",
 		""sles-15-byol"":        ""suse/translate_sles_15_byol.wf.json"",
 		""rhel-6"":              ""enterprise_linux/translate_rhel_6_licensed.wf.json"",
-		""rhel-6-byol"":         ""enterprise_linux/translate_rhel_6_byol.wf.json"",
 		""rhel-7"":              ""enterprise_linux/translate_rhel_7_licensed.wf.json"",
 		""rhel-8"":              ""enterprise_linux/translate_rhel_8_licensed.wf.json"",
+		""rhel-6-byol"":         ""enterprise_linux/translate_rhel_6_byol.wf.json"",
 		""rhel-7-byol"":         ""enterprise_linux/translate_rhel_7_byol.wf.json"",
+		""rhel-8-byol"":         ""enterprise_linux/translate_rhel_8_byol.wf.json"",
 		""ubuntu-1404"":         ""ubuntu/translate_ubuntu_1404.wf.json"",
 		""ubuntu-1604"":         ""ubuntu/translate_ubuntu_1604.wf.json"",
 		""ubuntu-1804"":         ""ubuntu/translate_ubuntu_1804.wf.json"",",@zmarano -- Any thoughts on the name of the user-facing OS name? (`rhel-8-byol` vs `rhel-8-byos`),go,0,1,1
"@@ -57,9 +57,9 @@ type Actor struct{}
 type State struct {
 	Miners cid.Cid `refmt:"",omitempty""`
 
-	// TotalCommitedStorage is the number of sectors that are currently committed
-	// in the whole network.
-	TotalCommittedStorage *big.Int
+	// TODO: Determine correct unit of measure. Could be denominated in the
+	// smallest sector size supported by the network.
+	TotalCommittedStorage *types.BytesAmount
 
 	ProofsMode types.ProofsMode
 }","Would you mind linking an existing github issue in this TODO, or making a new one and linking it if one does not already exist?",go,1,1,1
"@@ -25,13 +25,15 @@ func TestTotal(t *testing.T) {
 
 	ctx := context.Background()
 
-	power := uint64(19)
-	bs, _, st := requireMinerWithPower(ctx, t, power)
+	numCommittedSectors := uint64(19)
+	bs, _, st := requireMinerWithPower(ctx, t, numCommittedSectors)
 
 	actual, err := (&consensus.MarketView{}).Total(ctx, st, bs)
 	require.NoError(t, err)
 
-	assert.Equal(t, power, actual)
+	expected := types.OneKiBSectorSize.Mul(types.NewBytesAmount(numCommittedSectors))
+
+	assert.Equal(t, expected.Uint64(), actual.Uint64())
 }
 
 func TestMiner(t *testing.T) {",This function name is now a bit misleading about the uint value.,go,1,1,1
"@@ -143,3 +143,7 @@ type wsProjectManager interface {
 type artifactPutter interface {
 	PutArtifact(bucket, fileName string, data io.Reader) (string, error)
 }
+
+type port interface {
+	Set(number int) error
+}",Is this interface used anywhere?,go,1,1,0
"@@ -55,6 +55,16 @@ func nodeStatus(node *node.AlgorandFullNode) (res v1.NodeStatus, err error) {
 	}, nil
 }
 
+func txEncode(tx transactions.Transaction, ad transactions.ApplyData) (res v1.Transaction, err error) {
+	if tx.Type == protocol.PaymentTx {
+		return paymentTxEncode(tx, ad), nil
+	}
+	if tx.Type == protocol.KeyRegistrationTx {
+		return keyregTxEncode(tx, ad), nil
+	}
+	return v1.Transaction{}, errors.New(errUnknownTransactionType)
+}
+
 func paymentTxEncode(tx transactions.Transaction, ad transactions.ApplyData) v1.Transaction {
 	payment := v1.PaymentTransactionType{
 		To:           tx.Receiver.String(),",Use a case statement here to switch between the different transaction types.,go,1,1,1
"@@ -1182,7 +1182,7 @@ func TestGetHostPublicIPv4AddressFromEC2MetadataFailWithError(t *testing.T) {
 	assert.Empty(t, agent.getHostPublicIPv4AddressFromEC2Metadata())
 }
 
-func TestSpotTerminationTimeCheck_Yes(t *testing.T) {
+func TestSpotInstanceActionCheck_Terminate(t *testing.T) {
 	ctrl := gomock.NewController(t)
 	defer ctrl.Finish()
 ",all these unit tests could be made table-driven.,go,1,1,1
"@@ -1,8 +1,13 @@
 package plugin
 
-import ""github.com/sirupsen/logrus""
+import (
+	""io/ioutil""
 
-// Log provides a plugin logger to version shim implementations.
-type Log struct {
-	logrus.FieldLogger
+	""github.com/sirupsen/logrus""
+)
+
+func NullLogger() logrus.FieldLogger {
+	logger := logrus.New()
+	logger.Out = ioutil.Discard
+	return logger
 }",I think we should be able to use `io.Discard` now that we are on Go 1.16.,go,1,1,1
"@@ -14,14 +14,13 @@ import (
 	""github.com/aws/copilot-cli/internal/pkg/aws/aas""
 	""github.com/aws/copilot-cli/internal/pkg/aws/cloudwatch""
 	""github.com/aws/copilot-cli/internal/pkg/aws/ecs""
-	rg ""github.com/aws/copilot-cli/internal/pkg/aws/resourcegroups""
 	""github.com/aws/copilot-cli/internal/pkg/aws/sessions""
 	""github.com/aws/copilot-cli/internal/pkg/deploy""
+	copiEcs ""github.com/aws/copilot-cli/internal/pkg/ecs""
 	""github.com/aws/copilot-cli/internal/pkg/term/color""
 )
 
 const (
-	ecsServiceResourceType    = ""ecs:service""
 	maxAlarmStatusColumnWidth = 30
 )
 ","nit: I'd instead rename the `aws/ecs` to `awsECS`. Reading ""copiEcs"" is kinda odd :P",go,1,1,1
"@@ -25,7 +25,13 @@ type ScheduleItem struct {
 	Workflow *WorkflowSpec `json:""workflow,omitempty""`
 }
 
-func (in EmbedChaos) Validate(chaosType string) field.ErrorList {
+func (in EmbedChaos) Validate(path *field.Path, chaosType string) field.ErrorList {
+	var allErrors field.ErrorList
 	gw.Default(&in)
-	return gw.Validate(&in)
+	root, err := in.SpawnNewObject(TemplateType(chaosType))
+	if err != nil {
+		allErrors = append(allErrors, field.Invalid(path, in, err.Error()))
+		return allErrors
+	}
+	return gw.Validate(root)
 }","The `Default` also has a `root` parameter, which could cause potential error.",go,1,1,1
"@@ -53,15 +53,13 @@ func fastcgiParse(c *caddy.Controller) ([]Rule, error) {
 	var rules []Rule
 
 	for c.Next() {
-		var rule Rule
-
 		args := c.RemainingArgs()
 
 		if len(args) < 2 || len(args) > 3 {
 			return rules, c.ArgErr()
 		}
 
-		rule.Path = args[0]
+		rule := Rule{Path: args[0], ReadTimeout: 60 * time.Second}
 		upstreams := []string{args[1]}
 
 		if len(args) == 3 {",I know that 60 seconds is a lot of time but this change can actually break existing configurations. I'm not really sure what value should be used as default. Suggestions @mholt ?,go,0,1,1
"@@ -43,8 +43,9 @@ const (
 	ServiceHeaderKey = ""$rpc$-service""
 	// ApplicationErrorNameHeaderKey is the response header key for the application error name.
 	ApplicationErrorNameHeaderKey = ""$rpc$-application-error-name""
-	// ApplicationErrorMessageHeaderKey is the response header key for the application error messages.
-	ApplicationErrorMessageHeaderKey = ""$rpc$-application-error-message""
+	// ApplicationErrorDetailsHeaderKey is the response header key for the
+	// application error details string.
+	ApplicationErrorDetailsHeaderKey = ""$rpc$-application-error-details""
 	// ApplicationErrorCodeHeaderKey is the response header key for the application error code.
 	ApplicationErrorCodeHeaderKey = ""$rpc$-application-error-code""
 )","Same as above, what is the implication of this change? this is a public method, are you sure that nobody is using this?",go,1,1,1
"@@ -1573,12 +1573,8 @@ func (e *mutableStateBuilder) IsWorkflowExecutionRunning() bool {
 	}
 }
 
-func (e *mutableStateBuilder) IsCancelRequested() (bool, string) {
-	if e.executionInfo.CancelRequested {
-		return e.executionInfo.CancelRequested, e.executionState.CreateRequestId
-	}
-
-	return false, """"
+func (e *mutableStateBuilder) IsCancelRequested() bool {
+	return e.executionInfo.CancelRequested
 }
 
 func (e *mutableStateBuilder) IsSignalRequested(",Why were we using `CreateRequestId` as `CancelRequestID`?,go,1,1,1
"@@ -16,6 +16,15 @@ import (
 )
 
 func SpawnHashStateStage(s *StageState, db ethdb.Database, tmpdir string, quit <-chan struct{}) error {
+	
+	go func() {
+		// we block until we can read something from the channel and then we reset hash state
+		<-quit
+		if err := ResetHashState(db); err != nil {
+			fmt.Errorf(""Unable to reset hashstate %v"", err)
+		}
+	}()
+
 	to, err := s.ExecutionAt(db)
 	if err != nil {
 		return err",%w is used for formatting errors,go,1,1,1
"@@ -74,6 +74,9 @@ func (s *CloudBackupServer) Create(
 		Labels:         req.GetLabels(),
 	})
 	if err != nil {
+		if err == volume.ErrInvalidName {
+			return nil, status.Errorf(codes.AlreadyExists, ""Failed to create backup: %v"", err)
+		}
 		return nil, status.Errorf(codes.Internal, ""Failed to create backup: %v"", err)
 	}
 ","Instead of using the same message, it should be something like ""Backup already exists or invalid name""...",go,1,1,1
"@@ -982,6 +982,10 @@ func (fbm *folderBlockManager) isQRNecessary(
 		fbm.log.CWarningf(ctx, ""Couldn't get the current session: %+v"", err)
 		return false
 	}
+	// It's ok to treat both MDs written by this process on this
+	// device, and MDs written by other processes (e.g., kbgit) in the
+	// same way.  Other processes are likely to be short-lived, and
+	// probably won't do their own QR, so a conflict is unlikely here.
 	selfWroteHead := session.VerifyingKey == head.LastModifyingWriterVerifyingKey()
 
 	// Don't do reclamation if the head isn't old enough and it wasn't","If the unlikely happen, does it just mean a more expensive operation, but not affect correctness?",go,1,1,1
"@@ -978,7 +978,7 @@ func (mset *Stream) Snapshot(deadline time.Duration, checkMsgs, includeConsumers
 		o.writeState()
 	}
 
-	return store.Snapshot(deadline, checkMsgs, includeConsumers)
+	return store.Snapshot(deadline, includeConsumers, checkMsgs)
 }
 
 const snapsDir = ""__snapshots__""","argument order in stream.Snapshot is different from store.Snapshot, I left as is and just fixed the bug but can fix - probably should",go,1,1,1
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -351,6 +351,7 @@ func (brq *blockRetrievalQueue) Request(ctx context.Context,
 			}
 		}
 		br.reqMtx.Lock()
+		defer br.reqMtx.Unlock()
 		br.requests = append(br.requests, &blockRetrievalRequest{
 			block:  block,
 			doneCh: ch,",I needed to move this so that the assignment of `br.priority` below is protected by the lock.,go,1,1,1
"@@ -12,13 +12,16 @@ import (
 	""google.golang.org/protobuf/encoding/protojson""
 
 	topologyv1 ""github.com/lyft/clutch/backend/api/topology/v1""
+	""github.com/lyft/clutch/backend/service""
 )
 
 const topologyCacheLockId = ""topology:cache""
 
 // Performs leader election by acquiring a postgres advisory lock.
 // Once the lock is acquired topology caching is started.
-func (c *client) acquireTopologyCacheLock(ctx context.Context) {
+func (c *client) acquireTopologyCacheLock() {
+	ctx, ctxCancelFunc := context.WithCancel(context.Background())
+
 	// We create our own connection to use for acquiring the advisory lock
 	// If the connection is severed for any reason the advisory lock will automatically unlock
 	conn, err := c.db.Conn(ctx)","I need to find a better way of handling / canceling the context here, open to any suggestions.",go,1,1,1
"@@ -28,6 +28,8 @@ public enum FireBirdFieldType {
         TIME(13, Types.TIME, DBPDataKind.DATETIME, ""TIME""),
         CHAR(14, Types.CHAR, DBPDataKind.STRING, ""CHAR""),
         BIGINT(16, Types.BIGINT, DBPDataKind.NUMERIC, ""BIGINT""),
+    NUMERIC(16, Types.NUMERIC, DBPDataKind.NUMERIC, ""NUMERIC""), // Equal id, but another subtype - 1
+    DECIMAL(16, Types.DECIMAL, DBPDataKind.NUMERIC, ""DECIMAL""), // Equal id, but another subtype - 2
     BOOLEAN(23, Types.BOOLEAN, DBPDataKind.BOOLEAN, ""BOOLEAN""),
         DOUBLE_PRECISION(27, Types.DOUBLE, DBPDataKind.NUMERIC, ""DOUBLE PRECISION""),
         TIMESTAMP(35, Types.TIMESTAMP, DBPDataKind.DATETIME, ""TIMESTAMP""),","Mixed tabs and spaces, you can reformat this file entirely",java,1,1,1
"@@ -495,14 +495,7 @@ namespace AutoRest.Ruby.Model
         {
             IndentedStringBuilder builder = new IndentedStringBuilder("""");
             builder.AppendLine(""response = {0}_async({1}).value!"", Name, MethodParameterInvocation);
-            if (ReturnType.Body != null)
-            {
-                builder.AppendLine(""response.body unless response.nil?"");
-            }
-            else
-            {
-                builder.AppendLine(""nil"");
-            }
+            builder.AppendLine(""response.body unless response.nil?"");
             return builder.ToString();
         }
 ","@sarangan12 in the previous code, if body wasn't null, then we would return response.body (unless response was null), otherwise we'd return nil, since body was null. With the updated code I see that we're updating the resulting source code, does it change the resulting value? if response.body is null, what do we return? and if it's not, it looks like we're returning the same thing as before. What am I missing? Is there an example that would help see this in action?",java,0,0,1
"@@ -124,9 +124,11 @@ public abstract class FlatteningConfig {
     // flattening.
     Map<String, FlatteningConfig> flatteningConfigs = new LinkedHashMap<>();
 
-    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
-    // Let flattenings from proto annotations override flattenings from GAPIC config.
+    // Let flattenings from GAPIC config override flattenings from proto annotations.
     flatteningConfigs.putAll(flatteningConfigsFromProtoFile);
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
+
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
 
     return ImmutableList.copyOf(flatteningConfigs.values());
   }",Why duplicate this on line 131?,java,1,1,0
"@@ -1056,4 +1056,8 @@ public class SystemConfig {
 	public boolean directUploadEnabled(Dataset dataset) {
     	return Boolean.getBoolean(""dataverse.files."" + dataset.getDataverseContext().getEffectiveStorageDriverId() + "".upload-redirect"");
 	}
+	
+	public String getUserIpAddressSourceHeaderField() {
+        return System.getProperty(""dataverse.useripaddresssourceheader"", null);
+    }
 }","null is the default default so I think you can use System.getProperty(""dataverse.useripaddresssourceheader"");",java,1,1,1
"@@ -19,7 +19,7 @@ import net.sourceforge.pmd.lang.java.qname.JavaTypeQualifiedName;
  *
  * </pre>
  */
-public class ASTEnumConstant extends AbstractJavaNode implements JavaQualifiableNode {
+public class ASTEnumConstant extends AbstractJavaTypeNode implements JavaQualifiableNode {
 
     private JavaTypeQualifiedName qualifiedName;
 ","I'm not sure how this interacts with pmd 7 - I think enum constants have the type of their enum type (not an anonymous class), but the AnonymousClass node, if any, will have a different type... Something to keep in mind when merging into pmd 7",java,1,1,1
"@@ -58,6 +58,8 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private static final String AZKABAN_FAILURE_MESSAGE =
       ""azkaban.failure.message"";
   private static final long serialVersionUID = -1;
+
+  protected String passwordPlaceholder;
   private AzkabanServer application;
   private String name;
   private String label;",Why passwordPlaceholder is added in AbstractAzkabanServlet instead of LoginAbstractAzkabanServlet?,java,1,1,0
"@@ -73,6 +73,9 @@ final class FilterComparator implements Comparator<Filter>, Serializable {
                 filterToOrder.put(
                         ""org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter"",
                                 order.next());
+                filterToOrder.put(
+                                ""org.springframework.security.saml2.provider.service.servlet.filter.SamlServiceProviderMetadataFilter"",
+                                order.next());
                 filterToOrder.put(
                                 ""org.springframework.security.saml2.provider.service.servlet.filter.Saml2WebSsoAuthenticationRequestFilter"",
                                 order.next());",I think this needs to be changed to match the changes made to `Saml2MetadataFilter`'s name and location.,java,1,1,1
"@@ -485,10 +485,16 @@ public class Transaction implements org.hyperledger.besu.plugin.data.Transaction
     }
 
     final BigInteger recId = BigInteger.valueOf(signature.getRecId());
-    if (chainId.isEmpty()) {
-      return recId.add(REPLAY_UNPROTECTED_V_BASE);
+
+    if (transactionType != null && transactionType != TransactionType.FRONTIER) {
+      // EIP-2718 typed transaction, return yParity:
+      return recId;
     } else {
-      return recId.add(REPLAY_PROTECTED_V_BASE).add(TWO.multiply(chainId.get()));
+      if (chainId.isEmpty()) {
+        return recId.add(REPLAY_UNPROTECTED_V_BASE);
+      } else {
+        return recId.add(REPLAY_PROTECTED_V_BASE).add(TWO.multiply(chainId.get()));
+      }
     }
   }
 ",Is it really transaction envelope or EIP1559 transactions ?,java,1,1,1
"@@ -113,6 +113,7 @@ abstract class Bucket<T> implements Transform<T, Integer> {
             predicate.op(), name, apply(predicate.literal().value()));
 //      case IN:
 //        return Expressions.predicate();
+      case STARTS_WITH:
       default:
         // comparison predicates can't be projected, notEq can't be projected
         // TODO: small ranges can be projected.","I am not sure if a `startsWith` predicate makes sense in case of `Bucket` transforms. Hence, leaving it to be handled by the `default` case. WDYT?",java,1,1,1
"@@ -26,6 +26,7 @@ public class NodeJSSampleTypeNameConverter implements SampleTypeNameConverter {
   /** A map from primitive types in proto to NodeJS counterparts. */
   private static final ImmutableMap<Field.Kind, String> PRIMITIVE_TYPE_MAP =
       ImmutableMap.<Field.Kind, String>builder()
+          .put(Field.Kind.TYPE_UNKNOWN, ""Object"")
           .put(Field.Kind.TYPE_BOOL, ""boolean"")
           .put(Field.Kind.TYPE_INT32, ""number"")
           .put(Field.Kind.TYPE_INT64, ""number"")","Currently PRIMITIVE_TYPE_MAP is used by getTypeNameForElementType, but IIUC this is only used by getTypeName, which I think uses it incorrectly, since Javascript arrays are untyped. I'm thinking neither PRIMITIVE_TYPE_MAP nor getTypeNameForElementType may be necessary.",java,1,1,1
"@@ -132,7 +132,7 @@ public final class DumpVisitor implements VoidVisitor<Object> {
 		}
 
 		public void printLn() {
-			buf.append(""\n"");
+			buf.append(System.getProperty(""line.separator""));
 			indented = false;
 		}
 ","Looks good, Java 7 has System.lineSeparator but I think it is the best we can do with our JDK 6 constraint",java,1,1,1
"@@ -120,7 +120,7 @@ public class ShortcutManager {
     public void uninstallFromShortcut(ShortcutDTO shortcutDTO, Consumer<Exception> errorCallback) {
         final InteractiveScriptSession interactiveScriptSession = scriptInterpreter.createInteractiveSession();
 
-        interactiveScriptSession.eval(""include(\""engines.wine.shortcuts.reader\"");"",
+        interactiveScriptSession.eval(""const ShortcutReader = include(\""engines.wine.shortcuts.reader\"");"",
                 ignored -> interactiveScriptSession.eval(""new ShortcutReader()"", output -> {
                     final Value shortcutReader = (Value) output;
                     shortcutReader.invokeMember(""of"", shortcutDTO);","Not really related to this PR but: do we have the engine ID in the places where currently ""wine"" is hard coded?",java,0,1,1
"@@ -145,6 +145,10 @@ public class TemporaryFilesystem {
   }
 
   public boolean deleteBaseDir() {
-    return baseDir.delete();
+    boolean wasDeleted = baseDir.delete();
+    if (wasDeleted) {
+      Runtime.getRuntime().removeShutdownHook(shutdownHook);
+    }
+    return wasDeleted;
   }
 }","I don't think we need to necessarily check if that returned true or not, we should just remove the shutdown hook. Since nothing would check or do anything with this flag anyways.",java,1,1,1
"@@ -246,7 +246,11 @@ public class IcebergPigInputFormat<T> extends InputFormat<Void, T> {
     private Object convertPartitionValue(Type type, Object value) {
       if (type.typeId() == Types.BinaryType.get().typeId()) {
         ByteBuffer buffer = (ByteBuffer) value;
-        return new DataByteArray(buffer.get(new byte[buffer.remaining()]).array());
+        byte[] bytes = new byte[buffer.remaining()];
+        buffer.get(bytes);
+        // Return the input buffer back to its original position.
+        buffer.position(buffer.position() - bytes.length);
+        return new DataByteArray(bytes);
       }
 
       return value;","I updated this one as you requested @rdblue, however I wasn't sure if I should return the input `value` to its original position (vs consuming the remainder of the byte buffer and moving the position to the end).",java,0,1,0
"@@ -216,10 +216,14 @@ public class AddTextFragment extends BaseEditFragment implements TextWatcher, Fo
     public void onShow() {
         activity.changeMode(EditImageActivity.MODE_TEXT);
         activity.mainImage.setImageBitmap(activity.mainBitmap);
+        activity.addTextFragment.getmTextStickerView().mainImage = activity.mainImage;
+        activity.addTextFragment.getmTextStickerView().mainBitmap = activity.mainBitmap;
         mTextStickerView.setVisibility(View.VISIBLE);
         mInputText.clearFocus();
     }
 
+    public TextStickerView getmTextStickerView(){return mTextStickerView;}
+
     public void applyTextImage() {
         if (mSaveTask != null) {
             mSaveTask.cancel(true);",Can this be made static?,java,1,1,0
"@@ -245,12 +245,12 @@ public class ManifestEvaluator {
     }
 
     @Override
-    public <T> Boolean in(BoundReference<T> ref, Literal<T> lit) {
+    public <T> Boolean in(BoundReference<T> ref, LiteralSet<T> literalSet) {
       return ROWS_MIGHT_MATCH;
     }
 
     @Override
-    public <T> Boolean notIn(BoundReference<T> ref, Literal<T> lit) {
+    public <T> Boolean notIn(BoundReference<T> ref, LiteralSet<T> literalSet) {
       return ROWS_MIGHT_MATCH;
     }
   }","Since we can translate an `in` predicate to equality predicates or'ed together, this should call `eq` and or the results together.",java,1,1,1
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -45,6 +45,7 @@ public class Constants {
   public static final int MEMORY_CHECK_RETRY_LIMIT = 720;
   public static final int DEFAULT_PORT_NUMBER = 8081;
   public static final int DEFAULT_SSL_PORT_NUMBER = 8443;
+  public static final int DEFAULT_THREAD_NUMBER = 20;
 
   public static class ConfigurationKeys {
     // These properties are configurable through azkaban.properties",Can we make the name more explicit? It seems too general to me.,java,1,1,1
"@@ -57,12 +57,13 @@ public class FastDownloaderFactory {
 
     final Path fastSyncDataDirectory = dataDirectory.resolve(FAST_SYNC_FOLDER);
     final FastSyncStateStorage fastSyncStateStorage =
-        new FastSyncStateStorage(fastSyncDataDirectory);
+        new FastSyncStateStorage(fastSyncDataDirectory, protocolSchedule);
 
     if (syncConfig.getSyncMode() != SyncMode.FAST) {
       if (fastSyncStateStorage.isFastSyncInProgress()) {
         throw new IllegalStateException(
-            ""Unable to change the sync mode when fast sync is incomplete, please restart with fast sync mode"");
+            ""Unable to change the sync mode when fast sync is incomplete, please restart with fast""
+                + "" sync mode"");
       } else {
         return Optional.empty();
       }",Is it necessary to split these strings into 120 column bits? It increases the line count in an already large PR.,java,1,1,1
"@@ -97,12 +97,7 @@ public class ExecutorHealthChecker {
       final Optional<Executor> executorOption = entry.getKey();
       if (!executorOption.isPresent()) {
         final String finalizeReason = ""Executor id of this execution doesn't exist."";
-        for (final ExecutableFlow flow : entry.getValue()) {
-          logger.warn(
-              String.format(""Finalizing execution %s, %s"", flow.getExecutionId(), finalizeReason));
-          ExecutionControllerUtils
-              .finalizeFlow(this.executorLoader, this.alerterHolder, flow, finalizeReason, null);
-        }
+        finalizeFlows(entry.getValue(), finalizeReason);
         continue;
       }
 ",I feel the function renaming is long overdue: finalizeFlowsIfExecutorIsUnhealthy() will better reflect what the function does. Also - midway in this function there is a ToDo from Jamie requesting a metric for Http response times? Do you know what is that for?,java,1,1,1
"@@ -223,8 +223,9 @@ public class JDBCStream extends TupleStream implements Expressible {
     for(int columnIdx = 0; columnIdx < metadata.getColumnCount(); ++columnIdx){
       
       final int columnNumber = columnIdx + 1; // cause it starts at 1        
-      final String columnName = metadata.getColumnName(columnNumber);
+      final String columnName = metadata.getColumnLabel(columnNumber);
       String className = metadata.getColumnClassName(columnNumber);
+      String typeName = metadata.getColumnTypeName(columnNumber);
             
       if(directSupportedTypes.contains(className)){
         valueSelectors[columnIdx] = new ResultSetValueSelector() {",This makes sure to use the `AS` value instead of just the original column name.,java,1,1,1
"@@ -28,7 +28,9 @@ import org.springframework.util.StringUtils;
 public class MicroserviceConfigLoader extends YAMLConfigLoader {
   private static final Logger LOGGER = LoggerFactory.getLogger(MicroserviceConfigLoader.class);
 
-  private static final String ADDITIONAL_CONFIG_URL = ""cse.configurationSource.additionalUrls"";
+  private static final String ADDITIONAL_CONFIG_URL = ""servicecomb.configurationSource.additionalUrls"";
+
+  private static final String DEFAULT_FILE_NAME = ""servicecomb.configurationSource.defaultFileName"";
 
   /**
    * Default configuration file name to be used by default constructor. This file should","not compatible? because we only copy config items in configuration source, not in system.property?",java,1,1,1
"@@ -16,9 +16,4 @@ package com.google.api.codegen.transformer.nodejs;
 
 import com.google.api.codegen.transformer.FeatureConfig;
 
-public class NodeJSFeatureConfig extends FeatureConfig {
-  @Override
-  public boolean enableGrpcStreaming() {
-    return true;
-  }
-}
+public class NodeJSFeatureConfig extends FeatureConfig {}",We can rename `FeatureConfig` to `DefaultFeatureConfig` so the languages use default values will not need to create an empty subclass.,java,1,1,1
"@@ -4,12 +4,11 @@
 
 package net.sourceforge.pmd.lang.plsql.ast;
 
-import net.sourceforge.pmd.lang.ast.Node;
-import net.sourceforge.pmd.lang.ast.NodeStream;
+import net.sourceforge.pmd.lang.ast.impl.javacc.JjtreeNode;
 import net.sourceforge.pmd.lang.symboltable.Scope;
 import net.sourceforge.pmd.lang.symboltable.ScopedNode;
 
-public interface PLSQLNode extends Node, ScopedNode {
+public interface PLSQLNode extends ScopedNode, JjtreeNode<PLSQLNode> {
 
     /** Accept the visitor. **/
     Object jjtAccept(PLSQLParserVisitor visitor, Object data);","hm...yes, these methods are not ideal, too generic like ""getImage"". but this time on plsql...",java,1,1,0
"@@ -8,16 +8,13 @@ import org.apache.commons.lang3.mutable.MutableInt;
 
 import net.sourceforge.pmd.lang.java.ast.ASTAnyTypeDeclaration;
 import net.sourceforge.pmd.lang.java.ast.ASTMethodOrConstructorDeclaration;
-import net.sourceforge.pmd.lang.java.oom.AbstractMetric;
+import net.sourceforge.pmd.lang.java.ast.JavaParserVisitor;
 import net.sourceforge.pmd.lang.java.oom.Metrics;
-import net.sourceforge.pmd.lang.java.oom.api.ClassMetric;
 import net.sourceforge.pmd.lang.java.oom.api.MetricVersion;
-import net.sourceforge.pmd.lang.java.oom.api.OperationMetric;
 import net.sourceforge.pmd.lang.java.oom.api.OperationMetricKey;
 import net.sourceforge.pmd.lang.java.oom.api.ResultOption;
-import net.sourceforge.pmd.lang.java.oom.metrics.cyclo.CycloPathUnawareOperationVisitor;
-import net.sourceforge.pmd.lang.java.oom.metrics.cyclo.CycloVisitor;
-import net.sourceforge.pmd.lang.java.oom.metrics.cyclo.StandardCycloVisitor;
+import net.sourceforge.pmd.lang.java.oom.metrics.visitors.CycloPathUnawareOperationVisitor;
+import net.sourceforge.pmd.lang.java.oom.metrics.visitors.StandardCycloVisitor;
 
 /**
  * McCabe's Cyclomatic Complexity. Number of independent paths through a block of code [1, 2]. Formally, given that the","Since the version is a enum, we can compare here using `==` directly.",java,1,1,1
"@@ -29,13 +29,13 @@ import java.util.Map;
  * Iteration order is not specified.
  * @lucene.internal
  */
-final class Multiset<T> extends AbstractCollection<T> {
+public final class Multiset<T> extends AbstractCollection<T> {
 
   private final Map<T, Integer> map = new HashMap<>();
   private int size;
 
   /** Create an empty {@link Multiset}. */
-  Multiset() {
+  public Multiset() {
     super();
   }
 ",This is used in o.a.l.sandbox.search.CoveringQuery.,java,1,1,0
"@@ -6,7 +6,7 @@ package net.sourceforge.pmd.lang.java.typeresolution;
 
 import static net.sourceforge.pmd.lang.java.typeresolution.MethodTypeResolution.getApplicableMethods;
 import static net.sourceforge.pmd.lang.java.typeresolution.MethodTypeResolution.getBestMethodReturnType;
-import static net.sourceforge.pmd.lang.java.typeresolution.MethodTypeResolution.getMethodExplicitTypeArugments;
+import static net.sourceforge.pmd.lang.java.typeresolution.MethodTypeResolution.getMethodExplicitTypeArguments;
 import static net.sourceforge.pmd.lang.java.typeresolution.MethodTypeResolution.isMemberVisibleFromClass;
 import static net.sourceforge.pmd.lang.java.typeresolution.typedefinition.TypeDefinitionType.LOWER_WILDCARD;
 import static net.sourceforge.pmd.lang.java.typeresolution.typedefinition.TypeDefinitionType.UPPER_BOUND;",Please don't edit anything in this package and subpackages. Everything is deprecated and will be removed in #2689. The base branch for that pr (the grammar development branch) also edits these files to make them compilable with the new grammar. It's not worth the merge conflicts,java,0,1,1
"@@ -170,6 +170,6 @@ public class TableProperties {
   public static final String MERGE_MODE = ""write.merge.mode"";
   public static final String MERGE_MODE_DEFAULT = ""copy-on-write"";
 
-  public static final String MERGE_WRITE_CARDINALITY_CHECK = ""write.merge.cardinality-check.enabled"";
-  public static final boolean MERGE_WRITE_CARDINALITY_CHECK_DEFAULT = true;
+  public static final String MERGE_CARDINALITY_CHECK_ENABLED = ""write.merge.cardinality-check.enabled"";
+  public static final boolean MERGE_CARDINALITY_CHECK_ENABLED_DEFAULT = true;
 }",To match the property name above.,java,0,1,0
"@@ -25,6 +25,7 @@ public class BaselineErrorProneExtension {
             // Baseline checks
             ""AssertjPrimitiveComparison"",
             ""CatchBlockLogException"",
+            ""ExceptionSpecificity"",
             ""ExecutorSubmitRunnableFutureIgnored"",
             ""FinalClass"",
             ""LambdaMethodReference"",",gotta break this out into the new CatchSpecificity and ThrowSpecificity (also changelog tweak),java,1,1,1
"@@ -24,7 +24,6 @@ import org.apache.http.protocol.HttpContext;
 import org.camunda.bpm.client.impl.EngineClientLogger;
 import org.camunda.bpm.client.impl.ExternalTaskClientLogger;
 import org.camunda.bpm.client.interceptor.ClientRequestInterceptor;
-
 import java.io.IOException;
 import java.util.List;
 import java.util.Map;","I think you can revert all changes of this class, so the commit for the PR is clean in the end.",java,1,1,1
"@@ -197,11 +197,16 @@ public class Nutriments implements Serializable {
     private boolean containsMinerals;
 
     public Nutriment get(String nutrimentName){
-        if (!additionalProperties.containsKey(nutrimentName)) {
+        if (nutrimentName.isEmpty() || !additionalProperties.containsKey(nutrimentName)) {
             return null;
         }
 
-        return new Nutriment(additionalProperties.get(nutrimentName).toString(), get100g(nutrimentName), getServing(nutrimentName), getUnit(nutrimentName));
+        try{
+            return new Nutriment(additionalProperties.get(nutrimentName).toString(), get100g(nutrimentName), getServing(nutrimentName), getUnit(nutrimentName));
+        }catch (NullPointerException e){
+        // In case one of the getters was unable to get data as string
+        }
+        return null;
     }
 
     public String getUnit(String nutrimentName){",You should print something to the log here for troubleshooting issues. Even `e.printStackTrace()` would be fine.,java,1,1,1
"@@ -322,14 +322,14 @@ public class GraphiteReporter extends ScheduledReporter {
     }
 
     private void sendIfEnabled(MetricAttribute type, String name, double value, long timestamp) throws IOException {
-        if (getDisabledMetricAttributes().contains(type)){
+        if (isMetricAttributeDisabled(type)){
             return;
         }
         graphite.send(prefix(name, type.getCode()), format(value), timestamp);
     }
 
     private void sendIfEnabled(MetricAttribute type, String name, long value, long timestamp) throws IOException {
-        if (getDisabledMetricAttributes().contains(type)){
+        if (isMetricAttributeDisabled(type)){
             return;
         }
         graphite.send(prefix(name, type.getCode()), format(value), timestamp);",Let's avoid changes in the classes not directly targeted by this pull request.,java,1,1,1
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -107,6 +107,13 @@ import javax.ws.rs.WebApplicationException;
 import javax.ws.rs.core.Response;
 import static javax.ws.rs.core.Response.Status.BAD_REQUEST;
 import javax.ws.rs.core.StreamingOutput;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
 
 /*
     Custom API exceptions [NOT YET IMPLEMENTED]",Looks like glassfish went a bit nuts doing a refactor,java,1,0,0
"@@ -23,6 +23,8 @@ import javax.annotation.Nullable;
  */
 @AutoValue
 public abstract class InitFieldConfig {
+  private static String randomValueToken = ""$RANDOM"";
+
   public abstract String fieldPath();
 
   @Nullable",Should this be final?,java,1,1,0
"@@ -264,6 +264,15 @@ public class AccountSettings {
         s.put(""trashFolderSelection"", Settings.versions(
                 new V(54, new EnumSetting<>(SpecialFolderSelection.class, SpecialFolderSelection.AUTOMATIC))
         ));
+        s.put(""resize_image_enabled"", Settings.versions(
+                new V(56, new BooleanSetting(Account.DEFAULT_RESIZE_IMAGE_ENABLED))
+        ));
+        s.put(""resize_image_circumference"", Settings.versions(
+                new V(56, new StringSetting(Integer.toString(Account.DEFAULT_RESIZE_IMAGE_CIRCUMFERENCE)))
+        ));
+        s.put(""resize_image_quality"", Settings.versions(
+                new V(56, new StringSetting(Integer.toString(Account.DEFAULT_RESIZE_IMAGE_QUALITY)))
+        ));
         // note that there is no setting for openPgpProvider, because this will have to be set up together
         // with the actual provider after import anyways.
 ",All other settings are camelCased. Please don't deviate.,java,1,1,1
"@@ -1497,7 +1497,8 @@ public class MessageCompose extends K9Activity implements OnClickListener,
                 message.setUid(mMessageReference.getUid());
             }
 
-            boolean saveRemotely = recipientPresenter.isAllowSavingDraftRemotely();
+            // TODO more appropriate logic here? not sure
+            boolean saveRemotely = !recipientPresenter.getCurrentCryptoStatus().shouldUsePgpMessageBuilder();
             new SaveMessageTask(getApplicationContext(), mAccount, mContacts, mHandler,
                     message, mDraftId, saveRemotely).execute();
             if (mFinishAfterDraftSaved) {","Maybe CryptoStatus can have a 'willBeEncrypted()'? That's what you're really after, right?",java,1,1,1
"@@ -63,16 +63,13 @@ public class GleanMetricsService {
         initialized = true;
 
         final boolean telemetryEnabled = SettingsStore.getInstance(aContext).isTelemetryEnabled();
-        if (telemetryEnabled) {
-            GleanMetricsService.start();
-        } else {
-            GleanMetricsService.stop();
-        }
         Configuration config = new Configuration(
                 ConceptFetchHttpUploader.fromClient(client),
                 Configuration.DEFAULT_TELEMETRY_ENDPOINT,
                 BuildConfig.BUILD_TYPE);
-        Glean.INSTANCE.initialize(aContext, true, config);
+
+        Glean.INSTANCE.initialize(aContext, telemetryEnabled, config);
+        setStartupMetrics();
     }
 
     // It would be called when users turn on/off the setting of telemetry.","You should retain this as well: if user toggle telemetry of and then on again, the metrics will be cleared and you'll need to set them again.",java,1,1,1
"@@ -138,8 +138,8 @@ public class ManifestFiles {
     return open(manifest, io, null);
   }
 
-  static ManifestReader<?> open(ManifestFile manifest, FileIO io,
-                                Map<Integer, PartitionSpec> specsById) {
+  public static ManifestReader<?> open(
+      ManifestFile manifest, FileIO io, Map<Integer, PartitionSpec> specsById) {
     switch (manifest.content()) {
       case DATA:
         return ManifestFiles.read(manifest, io, specsById);",nit: this can actually fit on one line,java,1,1,1
"@@ -162,9 +162,15 @@ public class InitCodeTransformer {
       }
     }
     if (context.getMethodConfig().isPageStreaming()) {
+      // Initialize one resource element if it is page-streaming.
       PageStreamingConfig config = context.getMethodConfig().getPageStreaming();
       fields.add(config.getResourcesField().getSimpleName() + ""[0]"");
     }
+    if (context.getMethodConfig().isBundling()) {
+      // Initialize one bundling element if it is bundling.
+      fields.add(
+          context.getMethodConfig().getBundling().getSubresponseField().getSimpleName() + ""[0]"");
+    }
     Map<String, Object> initFieldStructure =
         FieldStructureParser.parseFields(fields, createInitValueMap(context));
     return initFieldStructure;","Why don't we just initialize the whole object tree, and including at least one element of every list?",java,1,1,1
"@@ -90,6 +90,14 @@ public class PageStreamingTransformer {
 
     desc.requestTokenSetFunction(
         namer.getFieldSetFunctionName(pageStreaming.getRequestTokenField()));
+    desc.requestPageSizeSetFunction(
+        pageStreaming.hasPageSizeField()
+            ? namer.getFieldSetFunctionName(pageStreaming.getPageSizeField())
+            : null);
+    desc.requestPageSizeGetFunction(
+        pageStreaming.hasPageSizeField()
+            ? namer.getFieldGetFunctionName(pageStreaming.getPageSizeField())
+            : null);
     desc.responseTokenGetFunction(
         namer.getFieldGetFunctionName(pageStreaming.getResponseTokenField()));
     desc.resourcesFieldGetFunction(",It would be more readable if you do: if (pageStreaming.hasPageSizeField()) { desc.requestPageSizeSetFunction(namer.getFieldSetFunctionName(pageStreaming.getPageSizeField()) },java,1,1,1
"@@ -64,7 +64,7 @@ abstract class MergingSnapshotProducer<ThisT> extends SnapshotProducer<ThisT> {
   private static final Set<String> VALIDATE_DATA_FILES_EXIST_SKIP_DELETE_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.REPLACE);
   // delete files can be added in ""overwrite"" or ""delete"" operations
-  private static final Set<String> VALIDATE_REPLACED_DATA_FILES_OPERATIONS =
+  private static final Set<String> VALIDATE_ADDED_DELETE_FILES_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.DELETE);
 
   private final String tableName;",I renamed it to match `VALIDATE_ADDED_FILES_OPERATIONS `.,java,1,1,0
"@@ -185,11 +185,11 @@ public class SyncManager {
 	 * @param sync
 	 */
 	public void runSync(final SyncState sync) {
+		updateSync(sync, SyncState.Status.RUNNING, 0, -1 /* don't change */);
 		threadPool.execute(new Runnable() {
 			@Override
 			public void run() {
 				try {
-					updateSync(sync, SyncState.Status.RUNNING, 0, -1 /* don't change */);
 					switch(sync.getType()) {
 					case syncDown: syncDown(sync); break;
 					case syncUp:   syncUp(sync); break;","The first running update is done on the main thread - otherwise, you would see a status of NEW after starting a sync.",java,1,1,1
"@@ -1698,7 +1698,9 @@ public class MessageList extends K9Activity implements MessageListFragmentListen
 
         List<String> folderServerIds = search.getFolderServerIds();
         singleFolderMode = singleAccountMode && folderServerIds.size() == 1;
-        if (singleFolderMode) {
+        if (drawer == null) {
+            return;
+        } else if (singleFolderMode) {
             drawer.selectFolder(folderServerIds.get(0));
         } else if (search.getId().equals(SearchAccount.UNIFIED_INBOX)) {
             drawer.selectUnifiedInbox();",This skips the last line of the method that seems unrelated to the drawer. My suggestion is to extract the drawer-related code to a separate method and do the `null` check there.,java,1,1,1
"@@ -43,6 +43,7 @@ import java.util.concurrent.ThreadFactory;
  */
 public class DBWriter {
     private static final String TAG = ""DBWriter"";
+    private static final String PREF_QUEUE_ADD_TO_FRONT = ""prefQueueAddToFront"";
 
     private static final ExecutorService dbExec;
 ",Wouldn't this be better off in PreferenceController.java?,java,1,1,1
"@@ -33,6 +33,18 @@ public class TransactionPoolOptions
   private static final String ETH65_TX_ANNOUNCED_BUFFERING_PERIOD_FLAG =
       ""--Xeth65-tx-announced-buffering-period-milliseconds"";
 
+  private static final String STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG =
+      ""--strict-tx-replay-protection-enabled"";
+
+  @CommandLine.Option(
+      names = {STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG},
+      paramLabel = ""<Boolean>"",
+      description =
+          ""Require transactions submitted via JSON-RPC to use replay protection in accordance with EIP-155 (default: ${DEFAULT-VALUE})"",
+      fallbackValue = ""true"",
+      arity = ""0..1"")
+  private Boolean strictTxReplayProtectionEnabled = false;
+
   @CommandLine.Option(
       names = {TX_MESSAGE_KEEP_ALIVE_SEC_FLAG},
       paramLabel = ""<INTEGER>"",","Ah, so it IS unstable already. Cool, lets prefix with X.",java,1,0,0
"@@ -1367,6 +1367,19 @@ public class JsonRpcHttpServiceTest extends JsonRpcHttpServiceTestBase {
     }
   }
 
+  @Test
+  public void emptyJson_shouldHandleNPE() throws Exception {
+    final RequestBody body = RequestBody.create(JSON, """");
+
+    try (final Response resp = client.newCall(buildPostRequest(body)).execute()) {
+      assertThat(resp.code()).isEqualTo(400);
+      final JsonObject json = new JsonObject(resp.body().string());
+      final JsonRpcError expectedError = JsonRpcError.PARSE_ERROR;
+      testHelper.assertValidJsonRpcError(
+          json, null, expectedError.getCode(), expectedError.getMessage());
+    }
+  }
+
   @Test
   public void requestWithWrongVersionShouldSucceed() throws Exception {
     final String id = ""234"";",Is the original issue caused by an empty body? Does having no content-length in the request headers mean request body is empty?,java,1,1,1
"@@ -229,7 +229,7 @@ public class VectorPropertyTest {
                 Seq<Tuple2<Seq<Object>, Vector<Object>>> history = Array.empty();
 
                 if (percent(random) < 20) {
-                    expected = Array.ofAll(Vector(randomValues(random, 100)).filter(v -> v instanceof Integer));
+                    expected = Array.ofAll(Vector(randomValues(random, 100)).filter(v -> ((Object) v) instanceof Integer));
                     actual = (percent(random) < 30) ? Vector.narrow(Vector.ofAll(ArrayType.<int[]> asPrimitives(int.class, expected))) : Vector.ofAll(expected);
                     assertAreEqual(expected, actual);
                     history = history.append(Tuple(expected, actual));",did not compile (any more!?) without that cast,java,1,0,1
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -32,6 +32,12 @@ import azkaban.utils.JSONUtils;
 import azkaban.utils.Pair;
 import azkaban.utils.Props;
 import com.google.common.collect.Lists;
+import org.apache.commons.lang.StringUtils;
+import org.apache.log4j.Logger;
+import org.joda.time.DateTime;
+
+import javax.inject.Inject;
+import javax.inject.Singleton;
 import java.io.File;
 import java.io.IOException;
 import java.lang.Thread.State;",Is it possible to gradually move away from joda time to java8's time apis?,java,1,1,1
"@@ -89,6 +89,8 @@ public abstract class StaticLangApiMethodView implements ApiMethodView {
   @Nullable
   public abstract LongRunningOperationDetailView operationMethod();
 
+  public abstract String releaseAnnotation();
+
   public abstract Builder toBuilder();
 
   public static Builder newBuilder() {",I think `releaseLevelAnnotation` would be clearer.,java,1,1,1
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -72,6 +72,7 @@ public class TestMineBlocks implements JsonRpcMethod {
             Functions.identity(),
             context.getEthHashSolver(),
             Wei.ZERO,
+            0.0,
             blockchain.getChainHeadHeader());
     final Block block = blockCreator.createBlock(retesethClock.instant().getEpochSecond());
 ",Is the ratio at 0 normal in this case?,java,1,1,1
"@@ -837,7 +837,18 @@ class WebDriver(object):
             del png
         return True
 
-    save_screenshot = get_screenshot_as_file
+    def save_screenshot(self, filename):
+        """"""
+        Gets the screenshot of the current window. Returns False if there is
+           any IOError, else returns True. Use full paths in your filename.
+
+        :Args:
+         - filename: The full path you wish to save your screenshot to.
+
+        :Usage:
+            driver.save_screenshot('/Screenshots/foo.png')
+        """"""
+        return self.get_screenshot_as_file(self, filename)
 
     def get_screenshot_as_png(self):
         """"""",This needs to be just return self.get_screenshot_as_file(filename),java,1,1,1
"@@ -203,7 +203,7 @@ public class PasscodeActivity extends Activity implements OnEditorActionListener
     public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
         Log.i(""onEditorAction"", ""view="" + v + "" actionId="" + actionId + "" event="" + event);
         // Processing the editor action only on key up to avoid sending events like pass code manager unlock twice.
-        if (event != null && event.getAction() == KeyEvent.ACTION_UP) {
+        if ((event != null && event.getAction() == KeyEvent.ACTION_UP) || event == null) {
             String pc = entry.getText().toString();
             if (pc.length() > 0 && pc.length() < getMinPasscodeLength()) {
                 error.setText(getMinLengthInstructions(getMinPasscodeLength()));","`event` should never be `null` here, and if it is, it should fall in the `else` block like it does now.",java,1,1,1
"@@ -37,6 +37,12 @@ module Selenium
         def bridge_class
           Bridge
         end
+
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
       end # Driver
     end # Firefox
   end # WebDriver",Same here. and all others.,java,0,1,0
"@@ -486,10 +486,10 @@ public class BlockchainQueries {
    */
   public List<LogWithMetadata> matchingLogs(
       final long fromBlockNumber, final long toBlockNumber, final LogsQuery query) {
-    return LongStream.rangeClosed(fromBlockNumber, toBlockNumber)
-        .mapToObj(blockchain::getBlockHashByNumber)
-        .takeWhile(Optional::isPresent)
-        .flatMap(Optional::stream)
+    return LongStream.rangeClosed(fromBlockNumber, Math.min(toBlockNumber, headBlockNumber()))
+        .mapToObj(blockchain::getBlockHeader)
+        .filter(header -> header.isPresent() && query.couldMatch(header.get().getLogsBloom()))
+        .map(header -> header.get().getHash())
         .flatMap(hash -> matchingLogs(hash, query).stream())
         .collect(Collectors.toList());
   }","Interesting interaction here, if we use a `takeWhile` instead of the `Math.min`, we can actually return more logs in the case where a new block was added while the processing of the rpc call is happening because Java Streams are pull based. I lean towards the `takeWhile` approach because if the user asks for a block that's slightly too high, this could make the difference between them seeing most of what they wanted and everything they wanted (in the case where a block is stored in time for the end of the stream to be reached).",java,1,0,1
"@@ -1990,6 +1990,19 @@ class CSharpGenerator : public BaseGenerator {
           ""Newtonsoft.Json.Formatting.Indented);\n"";
       code += ""  }\n"";
     }
+    if (parser_.root_struct_def_ == &struct_def) {
+      code += ""  public static "" + class_name +
+              "" DeserializeFromFlatBuffers(byte[] fbBuffer) {\n"";
+      code += ""    return "" + struct_def.name + "".GetRootAs"" + struct_def.name +
+              ""(new ByteBuffer(fbBuffer)).UnPack();\n"";
+      code += ""  }\n"";
+      code += ""  public byte[] SerializeToFlatBuffers() {\n"";
+      code += ""    var fbb = new FlatBufferBuilder(1);\n"";
+      code +=
+          ""    fbb.Finish("" + struct_def.name + "".Pack(fbb, this).Value);\n"";
+      code += ""    return fbb.DataBuffer.ToSizedArray();\n"";
+      code += ""  }\n"";
+    }
     code += ""}\n\n"";
   }
 ","1 byte is a really bad default size, it is going to spend a lot of time re-allocating buffers this way. Probably anywhere from 4 to 64 K would be entirely reasonable given that this is very temporary.",java,1,1,1
"@@ -21,9 +21,9 @@ import org.apache.tuweni.bytes.Bytes32;
 
 public class StorageEntriesCollector<V> implements TrieIterator.LeafHandler<V> {
 
-  private final Bytes32 startKeyHash;
-  private final int limit;
-  private final Map<Bytes32, V> values = new TreeMap<>();
+  protected final Bytes32 startKeyHash;
+  protected int limit = 0;
+  protected final Map<Bytes32, V> values = new TreeMap<>();
 
   public StorageEntriesCollector(final Bytes32 startKeyHash, final int limit) {
     this.startKeyHash = startKeyHash;",Why initialize and remove final?,java,1,1,1
"@@ -57,7 +57,7 @@ final class ElasticsearchAutocompleteTags implements AutocompleteTags {
     if (indices.isEmpty()) return Call.emptyList();
 
     SearchRequest.Filters filters =
-      new SearchRequest.Filters().addTerm(""tagKey"", key.toLowerCase(Locale.ROOT));
+      new SearchRequest.Filters().addTerm(""tagKey"", key);
 
     SearchRequest request = SearchRequest.create(indices)
       .filters(filters)","Why do we no longer want to normalize (lowercase) the input? Does the change to `keyword` make it a case insensitive search? Or if we want to be case sensitive, we should probably have a test for that.",java,1,1,1
"@@ -122,6 +122,9 @@ public class MockExecutorLoader implements ExecutorLoader {
   @Override
   public void updateExecutableNode(ExecutableNode node)
       throws ExecutorManagerException {
+    if (!nodes.containsKey(node.getId())) {
+      uploadExecutableNode(node, new Props());
+    }
     ExecutableNode foundNode = nodes.get(node.getId());
     foundNode.setEndTime(node.getEndTime());
     foundNode.setStartTime(node.getStartTime());","After updating latest changes from `master`, the test was failing here because the node wasn't found in the map. That could be just concurrency issue, because here `nodes` is just a regular `HashMap` without thread safety.. Or then there's an actual change in behaviour that makes an update before initial upload. I wonder if that would be a problem when running against the actual DB layer..",java,1,1,1
"@@ -76,5 +76,9 @@ public class QueryRequest extends SolrRequest<QueryResponse> {
     return query;
   }
 
+  @Override
+  public String getRequestType() {
+    return SolrRequestType.QUERY.toString();
+  }
 }
 ","Something about this that I think bothers me is that we don't make a differentiation between distinct handlers, so we can't use this to build QoS levels. Like I can't say that RTG should always go through while `/select` might be acceptable to throttle and `/spellcheck` is even lower priority.",java,1,1,1
"@@ -0,0 +1,10 @@
+package com.github.javaparser.ast.nodeTypes;
+
+import com.github.javaparser.ast.Node;
+import com.github.javaparser.ast.expr.Expression;
+
+public interface NodeWithExpression<N extends Node> {
+    Expression getExpression();
+
+    N setExpression(Expression expression);
+}",What are those nodes with Expressions? Are Expressions wrapping other expressions? Any sort of node containing one single expression?,java,1,1,1
"@@ -172,6 +172,16 @@ public class MessageList extends K9Activity implements MessageListFragmentListen
         context.startActivity(intent);
     }
 
+    public static void launch(Context context, Account account) {
+        launch(context);
+
+        long folderId = DI.get(DefaultFolderProvider.class).getDefaultFolder(account);
+
+        LocalSearch search = new LocalSearch();
+        search.addAllowedFolder(folderId);
+        search.addAccountUuid(account.getUuid());
+        actionDisplaySearch(context, search, false, false);
+    }
 
     private enum DisplayMode {
         MESSAGE_LIST,",This line should probably be removed. Otherwise `startActivity()` will be called twice.,java,1,1,1
"@@ -31,6 +31,14 @@ import org.apache.iceberg.io.OutputFile;
  */
 public interface EncryptedOutputFile {
 
+  /**
+   * Use flat filestream encryption (default) or pushdown to native format encryption
+   */
+  default boolean useNativeEncryption() {
+    return false;
+  }
+
+
   /**
    * An OutputFile instance that encrypts the bytes that are written to its output streams.
    */",Nit: an extra empty line,java,1,1,1
"@@ -234,6 +234,8 @@ class ModifyingSuggester {
   }
 
   private void tryRemovingChar(String word) {
+    if (word.length() == 1) return;
+
     for (int i = 0; i < word.length(); i++) {
       trySuggestion(word.substring(0, i) + word.substring(i + 1));
     }",We don't accept empty words for lookup anymore,java,1,1,1
"@@ -210,7 +210,6 @@ public final class BaselineErrorProne implements Plugin<Project> {
             // Errorprone 2.3.4 isn't officially compatible with Java13 either
             // https://github.com/google/error-prone/issues/1106
             errorProneOptions.check(""TypeParameterUnusedInFormals"", CheckSeverity.OFF);
-            errorProneOptions.check(""PreferCollectionConstructors"", CheckSeverity.OFF);
         }
 
         if (javaCompile.equals(compileRefaster)) {",calling out that I re-enabled this because it uses the safe qualify method now.,java,1,1,1
"@@ -19,7 +19,10 @@ package org.openqa.selenium.grid.graphql;
 
 import graphql.schema.DataFetcher;
 import graphql.schema.DataFetchingEnvironment;
+
+import org.openqa.selenium.SessionNotCreatedException;
 import org.openqa.selenium.grid.distributor.Distributor;
+import org.openqa.selenium.grid.sessionmap.SessionMap;
 import org.openqa.selenium.internal.Require;
 
 import java.net.URI;",You can safely revert changes to this file.,java,1,1,0
"@@ -64,7 +64,8 @@ public class RlpBlockImporter {
    * @throws IOException On Failure
    */
   public <C> RlpBlockImporter.ImportResult importBlockchain(
-      final Path blocks, final BesuController<C> besuController) throws IOException {
+      final Path blocks, final BesuController<C> besuController, final boolean skipPowValidation)
+      throws IOException {
     final ProtocolSchedule<C> protocolSchedule = besuController.getProtocolSchedule();
     final ProtocolContext<C> context = besuController.getProtocolContext();
     final MutableBlockchain blockchain = context.getBlockchain();",Do you think it's worth it to just have this take a `HeaderValidationMode` instead of the boolean? Same number of args but with a lot more flexibility.,java,1,1,1
"@@ -42,7 +42,7 @@ public class StructProjection implements StructLike {
    */
   public static StructProjection create(Schema schema, Set<Integer> ids) {
     StructType structType = schema.asStruct();
-    return new StructProjection(structType, TypeUtil.select(structType, ids));
+    return new StructProjection(structType, TypeUtil.project(structType, ids));
   }
 
   /**","Looks like there aren't any uses of this call, which is good. I agree that we probably want this to use `project` instead of `select`.",java,1,1,1
"@@ -18,9 +18,9 @@ import net.sourceforge.pmd.lang.java.ast.ASTMemberValuePair;
 import net.sourceforge.pmd.lang.java.ast.ASTMethodDeclaration;
 import net.sourceforge.pmd.lang.java.ast.ASTName;
 import net.sourceforge.pmd.lang.java.ast.ASTResultType;
-import net.sourceforge.pmd.lang.java.rule.AbstractLombokAwareRule;
+import net.sourceforge.pmd.lang.java.rule.AbstractJavaRule;
 
-public class UseUtilityClassRule extends AbstractLombokAwareRule {
+public class UseUtilityClassRule extends AbstractJavaRule {
 
     @Override
     public Object visit(ASTClassOrInterfaceBody decl, Object data) {",shouldn't we just extend `AbstractIgnoredAnnotationRule` and default it to `lombok.NoArgsConstructor`?,java,1,1,1
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -77,7 +77,7 @@ public class SignatureDeclareThrowsExceptionRule extends AbstractJavaRule {
             }
         }
         if (node.jjtGetNumChildren() != 0 && node.jjtGetChild(0) instanceof ASTExtendsList) {
-            ASTClassOrInterfaceType type = (ASTClassOrInterfaceType) node.jjtGetChild(0).jjtGetChild(0);
+            ASTClassOrInterfaceType type = node.jjtGetChild(0).getFirstChildOfType(ASTClassOrInterfaceType.class);
             if (isJUnitTest(type)) {
                 junitImported = true;
                 return super.visit(node, data);",This block and the one checking the interfaces (above) could be simplified using the methods `getSuperInterfacesTypeNodes` and `getSuperClassTypeNode` of `ASTClassOrInterfaceDeclaration`,java,1,1,1
"@@ -40,6 +40,10 @@ public abstract class DateTimeUtils {
     }
   }
 
+  public static String withTimezone(Date date) {
+      return DATE_FORMAT_WITH_TIMEZONE.format(date);
+  }
+
   public static Date updateTime(Date now, Date newTime) {
     Calendar c = Calendar.getInstance();
     c.setTime(now);","I would also call this method in the `return` statement of the `withTimezone(String dateString)` method above (line 37), so we don't have duplicate methods.",java,1,1,1
"@@ -17,7 +17,9 @@
 
 package org.apache.servicecomb.common.rest.codec.param;
 
+import java.io.UnsupportedEncodingException;
 import java.lang.reflect.Type;
+import java.net.URLDecoder;
 import java.util.Map;
 
 import javax.servlet.http.HttpServletRequest;",remove unused import,java,1,1,1
"@@ -49,8 +49,10 @@ public class IndexKey extends Key {
     for (int i = 0; i < indexColumns.size(); i++) {
       TiIndexColumn col = indexColumns.get(i);
       DataType colTp = tableInfo.getColumn(col.getOffset()).getType();
+      // using convertToTiDBType implicitly since the get method does not convert
+      Object convertedValue = colTp.convertToTiDBType(row.get(col.getOffset(), colTp));
       // truncate index's if necessary
-      Key key = TypedKey.toTypedKey(row.get(col.getOffset(), colTp), colTp, (int) col.getLength());
+      Key key = TypedKey.toTypedKey(convertedValue, colTp, (int) col.getLength());
       keys[i] = key;
     }
     return keys;","I feel like conversion should be done at the upper level. At this stage, row is already converted. Please correct me if my understanding is not quite right.",java,1,1,1
"@@ -121,6 +121,15 @@ public class SparkSessionCatalog<T extends TableCatalog & SupportsNamespaces>
     }
   }
 
+  @Override
+  public void invalidateTable(Identifier ident) {
+    if (icebergCatalog.tableExists(ident)) {
+      icebergCatalog.invalidateTable(ident);
+    } else {
+      getSessionCatalog().invalidateTable(ident);
+    }
+  }
+
   @Override
   public Table createTable(Identifier ident, StructType schema, Transform[] partitions,
                            Map<String, String> properties)",Do you need to check for Identififer cases whether is null or is it done by TableExists?,java,1,1,1
"@@ -3773,11 +3773,7 @@ public class MessagingController {
             return false;
         }
 
-        if (account.isNotifyContactsMailOnly() && !contacts.isAnyInContacts(message.getFrom())) {
-            return false;
-        }
-
-        return true;
+        return !account.isNotifyContactsMailOnly() || contacts.isAnyInContacts(message.getFrom());
     }
 
     public void deleteAccount(Account account) {",I find the old way makes this easier to read.,java,1,1,1
"@@ -1,4 +1,4 @@
-/* Copyright 2018 Google LLC
+/* Copyright 2016 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the ""License"");
  * you may not use this file except in compliance with the License.",Why is the year changing here?,java,1,1,1
"@@ -128,11 +128,13 @@ class GenericReaders {
     }
 
     @Override
+    @SuppressWarnings(""checkstyle:hiddenField"")
     protected Object get(Record struct, int pos) {
       return struct.get(pos);
     }
 
     @Override
+    @SuppressWarnings(""checkstyle:hiddenField"")
     protected void set(Record struct, int pos, Object value) {
       struct.set(pos, value);
     }","I know this rule is a bit controversial but I think it is better to follow it everywhere or ignore it globally. In this particular case, it seems appropriate to follow and, maybe, give another name to the field. It is not really clear the difference between the field and passed object.",java,1,1,1
"@@ -31,6 +31,11 @@ public class NodeSmartContractPermissioningConditions {
     return new WaitForTrueResponse(transactions.isNodeAllowed(address, node));
   }
 
+  public Condition enodeURLIsAllowed(
+      final String address, final String enodeURL, final Node executorNode) {
+    return new WaitForTrueResponse(transactions.isEnodeURLAllowed(address, enodeURL, executorNode));
+  }
+
   public Condition nodeIsForbidden(final String address, final Node node) {
     return new WaitForFalseResponse(transactions.isNodeAllowed(address, node));
   }",s/URL/Url for consistency,java,1,1,1
"@@ -102,11 +102,10 @@ public class SecurityActivity extends ThemedActivity {
                         swActiveSecurity.setChecked(true);
                         SP.putBoolean(getString(R.string.preference_use_password), true);
                         toggleEnabledChild(true);
-                    }
-                    else
-                    setPasswordDialog();
-                }
-                else {
+                        Snackbar.make(findViewById(android.R.id.content), ""Password Set"", Snackbar.LENGTH_SHORT)
+                                .show();
+                    } else setPasswordDialog();
+                } else {
                     editor.putBoolean(getString(R.string.preference_use_password), false);
                     editor.commit();
                     toggleEnabledChild(false);","Cant you use SanckBar Handler here as it is used throughout the code. Also put ""password set"" string into strings.xml instead of hardcoding",java,1,1,1
"@@ -395,6 +395,12 @@ public abstract class AbstractRule extends AbstractPropertySource implements Rul
                 this, node, message, args);
     }
 
+    public void addViolationWithAutoFixerClass(Object data, Node node, String message, Class autoFixerClass) {
+        final RuleContext ruleContext = (RuleContext) data;
+        ruleContext.getLanguageVersion().getLanguageVersionHandler().getRuleViolationFactory()
+                .addViolationWithAutoFixer(ruleContext, this, node, message, autoFixerClass);
+    }
+
     /**
      * Rules are equal if:
      * <ol>",why use raw types?,java,1,1,1
"@@ -40,6 +40,12 @@ public abstract class MethodDescriptorView {
 
   public abstract List<HeaderRequestParamView> headerRequestParams();
 
+  @Nullable
+  public abstract String requestFormatterName();
+
+  @Nullable
+  public abstract String responseFormatterName();
+
   public boolean hasHeaderRequestParams() {
     return headerRequestParams() != null && !headerRequestParams().isEmpty();
   }","These names aren't needed any more, right?",java,1,1,0
"@@ -74,6 +74,8 @@ public class Dictionary {
 
   static final char[] NOFLAGS = new char[0];
 
+  private static final char HIDDEN_FLAG = (char) 65511; // called 'ONLYUPCASEFLAG' in Hunspell
+
   private static final String ALIAS_KEY = ""AF"";
   private static final String MORPH_ALIAS_KEY = ""AM"";
   private static final String PREFIX_KEY = ""PFX"";",I think you could use an explicit char here? '\uFFE7'? Not sure though because this isn't valid unicode so some validation tools may complain later on... Let's leave it.,java,1,1,1
"@@ -62,11 +62,6 @@ public class BinPacking {
     private final Function<T, Long> weightFunc;
     private final boolean largestBinFirst;
 
-    public PackingIterable(Iterable<T> iterable, long targetWeight, int lookback,
-                           Function<T, Long> weightFunc) {
-      this(iterable, targetWeight, lookback, weightFunc, false);
-    }
-
     public PackingIterable(Iterable<T> iterable, long targetWeight, int lookback,
                            Function<T, Long> weightFunc, boolean largestBinFirst) {
       Preconditions.checkArgument(lookback > 0,","Please revert this change. Even if this isn't used, the class is public and we don't need to make unnecessary breaking changes.",java,1,1,1
"@@ -161,8 +161,8 @@ public class ModelTypeTable implements ModelTypeFormatter {
    * If the given type is not implicitly imported, the add it to the import set, then return the
    * zero value for that type.
    */
-  public String getZeroValueAndSaveNicknameFor(TypeRef type) {
-    return typeNameConverter.getZeroValue(type).getValueAndSaveTypeNicknameIn(typeTable);
+  public String getZeroValueAndSaveNicknameFor(TypeRef type, ZeroValuePurpose purpose) {
+    return typeNameConverter.getZeroValue(type, purpose).getValueAndSaveTypeNicknameIn(typeTable);
   }
 
   /** Returns the imports accumulated so far. */",I think I would prefer to introduce a new function instead of an enum for supporting the distinction you want. Something like `getParamZeroValue`. For my understanding: why is this distinction necessary?,java,1,1,1
"@@ -113,7 +113,7 @@ public abstract class SyncTargetManager {
   protected abstract CompletableFuture<Optional<EthPeer>> selectBestAvailableSyncTarget();
 
   private CompletableFuture<SyncTarget> waitForPeerAndThenSetSyncTarget() {
-    return waitForNewPeer().handle((r, t) -> r).thenCompose((r) -> selectNewSyncTarget());
+    return waitForNewPeer().thenCompose(__ -> selectNewSyncTarget());
   }
 
   private CompletableFuture<?> waitForNewPeer() {",So this is the main change? the rest are all style adjustments?,java,1,1,1
"@@ -159,4 +159,17 @@ public interface ClaimAccessor {
 		}
 		return convertedValue;
 	}
+
+	/**
+	 * Returns the claim value as a {@code T} type.
+	 * It assumes that the given claim has already been converted to type {@code T}.
+	 *
+	 * @param claim the name of the claim
+	 * @param <T> the type of the claim
+	 * @return the claim value
+	 */
+	@SuppressWarnings(""unchecked"")
+	default <T> T getClaim(String claim) {
+		return (T) this.getClaims().get(claim);
+	}
 }",Please move this method just below `getClaims()`,java,1,1,1
"@@ -69,6 +69,6 @@ public final class PreconditionsConstantMessage extends BugChecker implements Bu
         }
 
         return buildDescription(tree).setMessage(
-                ""Preconditions.checkX() statement uses a non-constant message"").build();
+                ""Preconditions.checkX() statement uses a non-constant message. Consider using a template string"").build();
     }
 }",`Consider using a template string with '%s'.`,java,1,1,1
"@@ -36,7 +36,7 @@ public class AzDBTestUtility {
 
     public EmbeddedH2BasicDataSource() {
       super();
-      final String url = ""jdbc:h2:mem:test"";
+      final String url = ""jdbc:h2:mem:test;IGNORECASE=TRUE"";
       setDriverClassName(""org.h2.Driver"");
       setUrl(url);
     }",Does H2 DB not use the DB schema definition files?,java,1,1,1
"@@ -2382,6 +2382,11 @@ CheckedError Parser::DoParse(const char *source, const char **include_paths,
     } else if (IsIdent(""include"") || (opts.proto_mode && IsIdent(""import""))) {
       NEXT();
       if (opts.proto_mode && attribute_ == ""public"") NEXT();
+#ifdef FLATBUFFERS_PLATFORM_NO_FILE_SUPPORT
+      auto name = attribute_;
+      // Early return if platform has no file support
+      return Error(""unable to load include file: "" + name);
+#endif  // FLATBUFFERS_PLATFORM_NO_FILE_SUPPORT
       auto name = flatbuffers::PosixPath(attribute_.c_str());
       EXPECT(kTokenStringConstant);
       // Look for the file in include_paths.",why is this named differently from the define above?,java,1,1,1
"@@ -709,7 +709,7 @@ public final class BlockTreeTermsWriter extends FieldsConsumer {
 
           PendingTerm term = (PendingTerm) ent;
 
-          assert StringHelper.startsWith(term.termBytes, prefix): ""term.term="" + term.termBytes + "" prefix="" + prefix;
+          assert StringHelper.startsWith(term.termBytes, prefix): term + "" prefix="" + prefix;
           BlockTermState state = term.state;
           final int suffix = term.termBytes.length - prefixLength;
           //if (DEBUG2) {",that 'term' class (PendingTerm) actually has a perfectly fine toString method... why not just remove termBytes and let it do its job?,java,1,1,1
"@@ -54,6 +54,8 @@ public class JobTypeManager {
   private final Props globalProperties;
   private final ClusterRouter clusterRouter;
   private JobTypePluginSet pluginSet;
+  // Only used to load keyStore.
+  private Props keyStoreLoadProps = null;
 
   @VisibleForTesting
   public JobTypeManager(final String jobtypePluginDir, final Props globalProperties,",No need to assign null.,java,1,1,1
"@@ -72,10 +72,15 @@ public class SnapshotUtil {
    */
   public static Snapshot oldestSnapshot(Table table) {
     Snapshot current = table.currentSnapshot();
+    Snapshot parent;
     while (current != null && current.parentId() != null) {
-      current = table.snapshot(current.parentId());
+      parent = table.snapshot(current.parentId());
+      if (parent != null) {
+        current = parent;
+      } else {
+        return current;
+      }
     }
-
     return current;
   }
 ",Please remove non-functional changes like this that will cause commit conflicts.,java,1,1,1
"@@ -60,6 +60,19 @@ public class TestStaticTable extends HadoopTableTestBase {
         () -> staticTable.newDelete().deleteFile(FILE_A).commit());
   }
 
+  @Test
+  public void testCannotDoIncrementalScanOnMetadataTable() {
+    table.newAppend().appendFile(FILE_A).commit();
+
+    for (MetadataTableType type : MetadataTableType.values()) {
+      Table staticTable = getStaticTable(type);
+      AssertHelpers.assertThrows(""Static tables do not currently support incremental scans"",
+          UnsupportedOperationException.class,
+          String.format(""Incremental scan is not supported for %s scan of table %s"", type, table.name()),
+          () -> staticTable.newScan().appendsAfter(1));
+    }
+  }
+
   @Test
   public void testHasSameProperties() {
     table.newAppend().appendFile(FILE_A).commit();","I think that a better place for this test is now `TestMetadataTableScans` since it supports all metadata tables. Also, the context message still says ""Static tables . . .""",java,1,1,1
"@@ -148,6 +148,16 @@ public class ParquetDictionaryRowGroupFilter {
       return ROWS_MIGHT_MATCH;
     }
 
+    @Override
+    public <T> Boolean isNaN(BoundReference<T> ref) {
+      return ROWS_MIGHT_MATCH;
+    }
+
+    @Override
+    public <T> Boolean notNaN(BoundReference<T> ref) {
+      return ROWS_MIGHT_MATCH;
+    }
+
     @Override
     public <T> Boolean lt(BoundReference<T> ref, Literal<T> lit) {
       int id = ref.fieldId();","If there is a NaN value, then it would be in the Parquet dictionary. I think that we can implement this for Parquet.",java,1,1,1
"@@ -32,7 +32,6 @@ namespace AutoRest.Extensions.Azure
         public const string AzureResourceExtension = ""x-ms-azure-resource"";
         public const string ODataExtension = ""x-ms-odata"";
         public const string ClientRequestIdExtension = ""x-ms-client-request-id"";
-        public const string ExternalExtension = ""x-ms-external"";
 
         //TODO: Ideally this would be the same extension as the ClientRequestIdExtension and have it specified on the response headers,
         //TODO: But the response headers aren't currently used at all so we put an extension on the operation for now",Nothing else was using this?,java,0,1,0
"@@ -266,6 +266,16 @@ public class FilterManager extends AbstractVerticle {
     return logs;
   }
 
+  public BlockParameter getToBlock(final String filterId) {
+    final LogFilter filter = filterRepository.getFilter(filterId, LogFilter.class).orElse(null);
+    if (filter == null) {
+      return null;
+    } else {
+      filter.resetExpireTime();
+      return filter.getToBlock();
+    }
+  }
+
   public List<LogWithMetadata> logs(final String filterId) {
     final LogFilter filter = filterRepository.getFilter(filterId, LogFilter.class).orElse(null);
     if (filter == null) {",Why do we need to reset the expire time here?,java,1,1,1
"@@ -72,6 +72,12 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private String label;
   private String color;
 
+  /*
+   * The variable switchToPanelPage is in charge of switching on retired schedulePanelDeprecated.vm (old UI)
+   * or the new schedulePanel.vm (new UI). We can configure it in conf for this binary change.
+   */
+  private String switchToPanelPage;
+
   private List<ViewerPlugin> viewerPlugins;
   private List<TriggerPlugin> triggerPlugins;
 ","Rename to ""SchedulePanelPageName"" ? Even better, make it ""enableNewSchedulerUi"" and make it a boolean type?",java,1,1,1
"@@ -327,6 +327,16 @@ class FirefoxProfile(object):
                     rc.append(node.data)
             return ''.join(rc).strip()
 
+        def parse_manifest_json(content):
+            """"""Extracts the details from the contents of a WebExtensions `manifest.json` file.""""""
+            manifest = json.loads(content)
+            return {
+                'id': manifest['applications']['gecko']['id'],
+                'version': manifest['version'],
+                'name': manifest['version'],
+                'unpack': False,
+            }
+
         if not os.path.exists(addon_path):
             raise IOError('Add-on path does not exist: %s' % addon_path)
 ",The id is not mandatory for web extensions. Could you update this to support a web extension without an id?,java,1,1,1
"@@ -719,6 +719,7 @@ public class CoreContainer {
     createHandler(ZK_PATH, ZookeeperInfoHandler.class.getName(), ZookeeperInfoHandler.class);
     createHandler(ZK_STATUS_PATH, ZookeeperStatusHandler.class.getName(), ZookeeperStatusHandler.class);
     collectionsHandler = createHandler(COLLECTIONS_HANDLER_PATH, cfg.getCollectionsHandlerClass(), CollectionsHandler.class);
+    healthCheckHandler = loader.newInstance(cfg.getHealthCheckHandlerClass(), HealthCheckHandler.class, null, new Class<?>[]{CoreContainer.class}, new Object[]{this});
     infoHandler = createHandler(INFO_HANDLER_PATH, cfg.getInfoHandlerClass(), InfoHandler.class);
     coreAdminHandler = createHandler(CORES_HANDLER_PATH, cfg.getCoreAdminHandlerClass(), CoreAdminHandler.class);
     configSetsHandler = createHandler(CONFIGSETS_HANDLER_PATH, cfg.getConfigSetsHandlerClass(), ConfigSetsHandler.class);",why are we calling loader.newInstance directly instead of createHandler?,java,1,1,1
"@@ -318,7 +318,14 @@ public class ExecutionControllerUtils {
       jobLinkUrl = url.toString();
     } else {
       // If RM job link is invalid or has expired, fetch the job link from JHS or SHS.
-      if (exFlow.getExecutableNode(jobId).getType().equals(SPARK_JOB_TYPE)) {
+      final ExecutableNode node = exFlow.getExecutableNodePath(jobId);
+      if (node == null) {
+        logger.error(
+            ""Invalid job link. Job "" + jobId + "" doesn't exist in "" + exFlow.getExecutionId());
+        return null;
+      }
+
+      if (node.getType().equals(SPARK_JOB_TYPE)) {
         jobLinkUrl =
             azkProps.get(ConfigurationKeys.SPARK_HISTORY_SERVER_JOB_URL).replace
                 (APPLICATION_ID, applicationId);",In which scenario this is a possibility?,java,1,1,0
"@@ -36,9 +36,12 @@ interface LockManager extends AutoCloseable {
 
   /**
    * Release a lock
+   *
+   * @apiNote exception must not be thrown for this method.
+   *
    * @param entityId ID of the entity to lock
    * @param ownerId ID of the owner if the lock
-   * @return if the lock for the entity of the owner is released
+   * @return if the owner held the lock and successfully released it.
    */
   boolean release(String entityId, String ownerId);
 ","Key? I think you might still mean ""lock""?",java,1,0,1
"@@ -20,15 +20,19 @@ import java.io.IOException;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Collections;
+import java.util.HashMap;
 import java.util.List;
 import java.util.Locale;
+import java.util.Map;
 import java.util.Map.Entry;
 import java.util.Optional;
+import java.util.Set;
 import java.util.stream.Collectors;
 
 import org.apache.solr.client.solrj.SolrRequest;
 import org.apache.solr.client.solrj.impl.CloudSolrClient;
 import org.apache.solr.client.solrj.impl.CloudSolrClient.Builder;
+import org.apache.solr.client.solrj.impl.ClusterStateProvider;
 import org.apache.solr.client.solrj.io.SolrClientCache;
 import org.apache.solr.client.solrj.io.Tuple;
 import org.apache.solr.client.solrj.io.comp.ComparatorOrder;","This source file did not adhere to the community code format so I reformatted it. It's bad practice in general, but since my PR was getting dinged for format issues, I chose to fix globally in this file vs. piecemeal.",java,1,1,1
"@@ -73,7 +73,7 @@ public interface RuneLiteConfig extends Config
 	)
 	default boolean enablePlugins()
 	{
-		return true;
+		return false;
 	}
 
 	@ConfigItem(","Not needed, just make hide externals by default in plugin sorter.",java,1,1,1
"@@ -57,7 +57,8 @@ public class BaselineErrorProneExtension {
             ""ArrayEquals"",
             ""MissingOverride"",
             ""UnnecessaryParentheses"",
-            ""PreferJavaTimeOverload"");
+            ""PreferJavaTimeOverload"",
+            ""UnnecessaryLambda"");
 
     private final ListProperty<String> patchChecks;
 ","I recall this creating code that didn't compile, might want to test it on something large and internal (or atlas) first",java,1,1,1
"@@ -103,6 +103,10 @@ public class UserNotificationServiceBean {
     }
 
     public void sendNotification(AuthenticatedUser dataverseUser, Timestamp sendDate, Type type, Long objectId, String comment, AuthenticatedUser requestor, boolean isHtmlContent) {
+        if (dataverseUser.isDisabled()) {
+            logger.info(""An attempt was made to send a "" + type + "" notification to a disabled user: "" + dataverseUser);
+            return;
+        }
         UserNotification userNotification = new UserNotification();
         userNotification.setUser(dataverseUser);
         userNotification.setSendDate(sendDate);",I don't think we need this: disabled users will have no roles. Let's save a few lines of code.,java,1,1,1
"@@ -117,13 +117,16 @@ public class ImageVersion extends BaseModel {
    * table. DEPRECATED - An image type version which is no longer in use is marked as DEPRECATED
    * TEST - This is to represent a TEST version of the image and once the version is tested it can
    * be marked as NEW.
+   * STABLE - When an image version is marked as ACTIVE, the other ACTIVE version(s) are marked as
+   * STABLE as there can be only 1 ACTIVE version at a time.
    */
   public enum State {
     NEW(""new""),
     ACTIVE(""active""),
     UNSTABLE(""unstable""),
     DEPRECATED(""deprecated""),
-    TEST(""test"");
+    TEST(""test""),
+    STABLE(""stable"");
     private final String stateValue;
 
     private State(final String stateValue) {",Let's see if we can use better name for this.,java,1,1,1
"@@ -26,6 +26,7 @@ import org.fossasia.phimpme.R;
 
 import java.lang.reflect.Field;
 import java.lang.reflect.Method;
+
 import java.util.ArrayList;
 
 /**",Un needed one as it's from the java package,java,1,0,1
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -77,6 +77,12 @@ public class ExecutorUtil {
     awaitTermination(pool);
   }
 
+  public static void shutdownNowAndAwaitTermination(ExecutorService pool) {
+    if(pool == null) return;
+    pool.shutdownNow(); // Disable new tasks from being submitted; interrupt existing tasks
+    awaitTermination(pool);
+  }
+
   public static void awaitTermination(ExecutorService pool) {
     boolean shutdown = false;
     while (!shutdown) {",missing space after `if`,java,1,1,1
"@@ -89,9 +89,11 @@ public enum Kind {
   TS_CONFIG(""ts_config"", LanguageClass.TYPESCRIPT, RuleType.BINARY),
   DART_PROTO_LIBRARY(""dart_proto_library"", LanguageClass.DART, RuleType.LIBRARY),
   DART_LIBRARY(""_dart_library"", LanguageClass.DART, RuleType.LIBRARY),
-  KOTLIN_LIBRARY(""kotlin_library"", LanguageClass.KOTLIN, RuleType.LIBRARY),
-  KOTLIN_BINARY(""kotlin_binary"", LanguageClass.KOTLIN, RuleType.BINARY),
-  KOTLIN_TEST(""kotlin_test"", LanguageClass.KOTLIN, RuleType.TEST),
+  KT_JVM_LIBRARY(""kt_jvm_library"", LanguageClass.KOTLIN, RuleType.LIBRARY),
+  KT_JVM_BINARY(""kt_jvm_binary"", LanguageClass.KOTLIN, RuleType.BINARY),
+  KT_JVM_TEST(""kt_jvm_test"", LanguageClass.KOTLIN, RuleType.TEST),
+  KT_JVM_IMPORT(""kt_jvm_import"", LanguageClass.KOTLIN, RuleType.UNKNOWN),
+  KOTLIN_STDLIB(""kotlin_stdlib"", LanguageClass.KOTLIN, RuleType.UNKNOWN),
 
   // any rule exposing java_common.provider which isn't specifically recognized
   GENERIC_JAVA_PROVIDER(""generic_java"", LanguageClass.JAVA, RuleType.UNKNOWN),",Why not `RuleType.LIBRARY`?,java,1,1,1
"@@ -76,7 +76,10 @@ public class FieldStructureParser {
               .get(fieldConfig.fieldPath())
               .withInitialCollectionValue(fieldConfig.entityName(), fieldConfig.value());
     } else if (fieldConfig.hasSimpleInitValue()) {
-      valueConfig = InitValueConfig.createWithValue(stripQuotes(fieldConfig.value()));
+      InitValue initValue = fieldConfig.value();
+      valueConfig =
+          InitValueConfig.createWithValue(
+              InitValue.create(stripQuotes(initValue.getValue()), initValue.getType()));
     } else if (initValueConfigMap.containsKey(fieldConfig.fieldPath())) {
       valueConfig = initValueConfigMap.get(fieldConfig.fieldPath());
     }",would it make sense for InitValue to do the quote stripping?,java,1,1,1
"@@ -121,9 +121,12 @@ public class OptimizeManager extends AbstractManager {
     checkIsAuthorizedToReadHistoryAndTenants();
 
     String[] operationTypes = new String[]{
-      UserOperationLogEntry.OPERATION_TYPE_ASSIGN,
-      UserOperationLogEntry.OPERATION_TYPE_CLAIM,
-      UserOperationLogEntry.OPERATION_TYPE_COMPLETE};
+      UserOperationLogEntry.OPERATION_TYPE_SUSPEND_JOB,
+      UserOperationLogEntry.OPERATION_TYPE_ACTIVATE_JOB,
+      UserOperationLogEntry.OPERATION_TYPE_SUSPEND_PROCESS_DEFINITION,
+      UserOperationLogEntry.OPERATION_TYPE_ACTIVATE_PROCESS_DEFINITION,
+      UserOperationLogEntry.OPERATION_TYPE_SUSPEND,
+      UserOperationLogEntry.OPERATION_TYPE_ACTIVATE};
     Map<String, Object> params = new HashMap<>();
     params.put(""occurredAfter"", occurredAfter);
     params.put(""occurredAt"", occurredAt);","There's also the operation type `UserOperationLogEntry.OPERATION_TYPE_SUSPEND_JOB_DEFINITION`. When suspending a job definition, a user can also choose to include all jobs of that definition. Should these operations be exported to Optimize as well?",java,1,1,1
"@@ -64,8 +64,6 @@ public class ExtendedBolus implements Interval, DataPointWithLabelInterface {
 
     @DatabaseField
     public int insulinInterfaceID = InsulinInterface.OREF_RAPID_ACTING;
-    @DatabaseField
-    public double dia = Constants.defaultDIA;
 
     @Deprecated
     public ExtendedBolus() {",well changing database fields has lof of sideffects it should be done along with increasing buildnumber and leads to braking backward compatibility,java,1,1,1
"@@ -48,10 +48,15 @@ public class ApexDocRule extends AbstractApexRule {
             booleanProperty(""reportMissingDescription"")
                 .desc(""Report missing @description"").defaultValue(true).build();
 
+    private static final PropertyDescriptor<Boolean> REPORT_MISSING_PROPERTY_DESCRIPTOR =
+            booleanProperty(""reportMissingProperty"")
+                .desc(""Report missing properties"").defaultValue(true).build();
+
     public ApexDocRule() {
         definePropertyDescriptor(REPORT_PRIVATE_DESCRIPTOR);
         definePropertyDescriptor(REPORT_PROTECTED_DESCRIPTOR);
         definePropertyDescriptor(REPORT_MISSING_DESCRIPTION_DESCRIPTOR);
+        definePropertyDescriptor(REPORT_MISSING_PROPERTY_DESCRIPTOR);
 
         addRuleChainVisit(ASTUserClass.class);
         addRuleChainVisit(ASTUserInterface.class);","I'll rename this property to be ""reportProperty"" - to be more aligned with ""reportPrivate"" and ""reportProtected"". I first thought it is similar like ""reportMissingDescription"" - but it is not...",java,1,1,1
"@@ -64,7 +64,7 @@ public enum RpcMethod {
   PRIV_GET_FILTER_LOGS(""priv_getFilterLogs""),
   PRIV_SUBSCRIBE(""priv_subscribe""),
   PRIV_UNSUBSCRIBE(""priv_unsubscribe""),
-  PRIVX_FIND_PRIVACY_GROUP(""privx_findOnChainPrivacyGroup""),
+  PRIVX_FIND_PRIVACY_GROUP(""privx_findFlexiblePrivacyGroup""),
   EEA_SEND_RAW_TRANSACTION(""eea_sendRawTransaction""),
   ETH_ACCOUNTS(""eth_accounts""),
   ETH_BLOCK_NUMBER(""eth_blockNumber""),",this is a breaking change. We would need to support both for a time.,java,1,1,1
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -164,6 +164,7 @@ public class SalesforceSDKManager {
     private boolean browserLoginEnabled;
     private boolean idpLoginFlowEnabled;
     private String idpAppURIScheme;
+    private boolean idpAppLoginFlowActive;
 
     /**
      * PasscodeManager object lock.",Flag to indicate if IDP login flow is active that helps components decide whether to switch user or not.,java,1,1,1
"@@ -112,7 +112,7 @@ public final class OidcIdTokenValidator implements OAuth2TokenValidator<Jwt> {
 		// that it is the same value as the one that was sent in the Authentication Request.
 		// The Client SHOULD check the nonce value for replay attacks.
 		// The precise method for detecting replay attacks is Client specific.
-		// TODO Depends on gh-4442
+		// gh-4442 implemented elsewhere
 
 		if (!invalidClaims.isEmpty()) {
 			return OAuth2TokenValidatorResult.failure(invalidIdToken(invalidClaims));",Let's remove the notes on `nonce`,java,1,1,1
"@@ -109,7 +109,7 @@ public interface CatalogLoader extends Serializable {
 
     @Override
     public Catalog loadCatalog() {
-      return new HiveCatalog(catalogName, uri, warehouse, clientPoolSize, hadoopConf.get(), properties);
+      return CatalogUtil.loadCatalog(HiveCatalog.class.getName(), catalogName, properties, hadoopConf.get());
     }
 
     @Override",Question: Shall we use a constant in `CatalogUtil` for this? What way should we promote? Static import for the constant may make the line a bit shorter.,java,1,1,1
"@@ -114,6 +114,10 @@ public class HiveIcebergMetaHook implements HiveMetaHook {
       hmsTable.getParameters().put(InputFormatConfig.EXTERNAL_TABLE_PURGE, ""TRUE"");
     }
 
+    // For a table created by Hive DDL to be readable by Impala, we need the Input and OutputFormat set explicitly
+    hmsTable.getSd().setInputFormat(HiveIcebergInputFormat.class.getCanonicalName());
+    hmsTable.getSd().setOutputFormat(HiveIcebergOutputFormat.class.getCanonicalName());
+
     // If the table is not managed by Hive catalog then the location should be set
     if (!Catalogs.hiveCatalog(conf)) {
       Preconditions.checkArgument(hmsTable.getSd() != null && hmsTable.getSd().getLocation() != null,","These are going to be overwritten by `HiveTableOperations` depending on whether Hive is enabled. I think the right fix is to set the property to enable Hive on the table when creating an Iceberg table with the meta hook. @pvary, what do you think?",java,0,1,1
"@@ -335,11 +335,11 @@ public class TestLoadBalanceHandler2 {
     ServiceCombServer server2 = server;
     loadBalancer = handler.getOrCreateLoadBalancer(invocation);
     server = loadBalancer.chooseServer(invocation);
-    Assert.assertEquals(server.getEndpoint().getEndpoint(), ""rest://localhost:9090"");
+    Assert.assertEquals(server.getEndpoint().getEndpoint(), ""rest://localhost:9091"");
     ServiceCombLoadBalancerStats.INSTANCE.markSuccess(server2);
     loadBalancer = handler.getOrCreateLoadBalancer(invocation);
     server = loadBalancer.chooseServer(invocation);
-    Assert.assertEquals(server.getEndpoint().getEndpoint(), ""rest://localhost:9090"");
+    Assert.assertEquals(server.getEndpoint().getEndpoint(), ""rest://localhost:9091"");
     TimeUnit.MILLISECONDS.sleep(20);
     loadBalancer = handler.getOrCreateLoadBalancer(invocation);
     server = loadBalancer.chooseServer(invocation);",1.expected value should be the first parameter,java,1,1,1
"@@ -50,14 +50,16 @@ public class GrpcMetadataProviderFactory {
             new JavaPackageMetadataTransformer(
                 ImmutableMap.of(
                     ""LICENSE.snip"", ""LICENSE"",
-                    ""metadatagen/java/grpc/build_grpc.gradle.snip"", ""build.gradle""),
+                    ""metadatagen/java/grpc/build_grpc.gradle.snip"", ""build.gradle"",
+                    ""metadatagen/java/grpc/pom_grpc.xml.snip"", ""pom.xml""),
                 artifactType));
       case PROTOBUF:
         return new JavaGrpcMetadataProvider(
             new JavaPackageMetadataTransformer(
                 ImmutableMap.of(
                     ""LICENSE.snip"", ""LICENSE"",
-                    ""metadatagen/java/grpc/build_protobuf.gradle.snip"", ""build.gradle""),
+                    ""metadatagen/java/grpc/build_protobuf.gradle.snip"", ""build.gradle"",
+                    ""metadatagen/java/grpc/pom_protobuf.xml.snip"", ""pom.xml""),
                 artifactType));
     }
 ",Why generate both gradle and maven files?,java,1,1,1
"@@ -36,6 +36,7 @@ public class UserAuthority implements Authority {
     private static final Logger LOG = LoggerFactory.getLogger(UserAuthority.class);
     static final String ATHENZ_PROP_PAM_SERVICE_NAME = ""athenz.auth.user.pam_service_name"";
 
+    final String userDomain = System.getProperty(""athenz.user_domain"", ""user"");
     final String serviceName = System.getProperty(ATHENZ_PROP_PAM_SERVICE_NAME, ""login"");
     private PAM pam = null;
     ",Not sure what is the reason for this? Is there is a reason why you want to configure the domain name? Most likely you need to define your own authority as oppose to changing the default user authority.,java,1,1,1
"@@ -0,0 +1,10 @@
+package org.hyperledger.besu.crypto;
+
+public class EllipticCurveSignatureFactory {
+
+    private static final EllipticCurveSignature instance = new SECP256K1();
+
+    public static EllipticCurveSignature getInstance() {
+        return instance;
+    }
+}",I'm presuming this is a placeholder for future work to add `secp256r1`. How will the choice of curve be determined?,java,1,1,1
"@@ -148,11 +148,11 @@ public class UiSetupWizardImplementation implements SetupWizard {
     @Override
     public Void presentation(String programName, String programEditor, String applicationHomepage,
             String scriptorName) {
-        final String htmlToShow = ""<body>"" + tr(""This wizard will help you install {0} on your computer"", programName)
-                + "".<br><br>"" + tr(""This program was created by: {0}"", programEditor) + ""<br><br>""
+        final String htmlToShow = ""<body>"" + tr(""Installation Wizard for {0}"", programName)
+                + "".<br><br>"" + tr(""Installation Script by {0}"", programEditor) + ""<br><br>""
                 + tr(""For more information about this program, visit:"")
                 + String.format(""<br><a href=\""%1$s\"">%1$s</a><br><br>"", applicationHomepage)
-                + tr(""This installation program is provided by: {0}"", scriptorName) + ""<br><br>"" + ""<br><br>""
+                + tr(""Installation Script by {0}"", scriptorName) + ""<br><br>"" + ""<br><br>""
                 + tr(""{0} will be installed in: {1}"", programName, applicationUserRoot) + ""<br><br>""
                 + tr(""{0} is not responsible for anything that might happen as a result of using these scripts."",
                         applicationName)",Why uppercase wizard and script?,java,1,1,1
"@@ -200,4 +200,17 @@ public interface ProjectLoader {
       throws ProjectManagerException;
 
   void updateProjectSettings(Project project) throws ProjectManagerException;
+
+  /**
+   * Uploads flow file.
+   */
+  void uploadFlowFile(int projectId, int projectVersion, int flowVersion, File flowFile)
+      throws ProjectManagerException;
+
+  /**
+   * Gets flow file that's uploaded.
+   */
+  File getUploadedFlowFile(int projectId, int projectVersion, int flowVersion, String flowName)
+      throws ProjectManagerException;
+
 }",same here about the argument order.,java,1,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -25,6 +25,7 @@ import org.jasig.cas.client.util.CommonUtils;
 
 import org.springframework.beans.factory.InitializingBean;
 import org.springframework.security.cas.ServiceProperties;
+import org.springframework.security.cas.authentication.TriggerCasGatewayException;
 import org.springframework.security.core.AuthenticationException;
 import org.springframework.security.web.AuthenticationEntryPoint;
 import org.springframework.util.Assert;","Among other tangles, this introduces a tangle between between `org.springframework.security.cas.authentication` and `org.springframework.security.cas.web`. In general, authentication package should not rely on web.",java,1,1,1
"@@ -156,7 +156,7 @@ public class UiSetupWizardImplementation implements SetupWizard {
                 + tr(""{0} will be installed in: {1}"", programName, applicationUserRoot) + ""<br><br>""
                 + tr(""{0} is not responsible for anything that might happen as a result of using these scripts."",
                         applicationName)
-                + ""<br><br>"" + tr(""Click \""Next\"" to start."") + ""</body>"";
+                + ""<br><br>"" + tr(""Click Next to start."") + ""</body>"";
         return messageSender.runAndWait(message -> setupUi.showHtmlPresentationStep(message, htmlToShow));
     }
 ","Why did you remove the """" here?",java,1,1,1
"@@ -115,7 +115,10 @@ class RemoveSnapshots implements ExpireSnapshots {
         .onlyRetryOn(CommitFailedException.class)
         .run(item -> {
           TableMetadata updated = internalApply();
-          ops.commit(base, updated);
+          // only commit the updated metadata if at least one snapshot was removed
+          if (updated.snapshots().size() != base.snapshots().size()) {
+            ops.commit(base, updated);
+          }
         });
 
     LOG.info(""Committed snapshot changes; cleaning up expired manifests and data files."");",Would it be more precise to check for `if (updated.snapshots().size() < base.snapshots().size())`?,java,1,1,1
"@@ -34,6 +34,8 @@ public class CommonMetrics {
   private final MetricsManager metricsManager;
   private Meter dbConnectionMeter;
   private Meter flowFailMeter;
+  private Meter dispatchFailMeter;
+  private Meter dispatchSuccessMeter;
 
   @Inject
   public CommonMetrics(final MetricsManager metricsManager) {","I think we should have a better way of organizing metrics. Keeping all metrics together in one class seems like putting apples and oranges in one basket. Also, such organization of metrics hints that metrics events can be declared from anywhere else in the code. However, dispatch fail / success should only be controlled by the `ExecutorManager`. Thoughts?",java,1,1,1
"@@ -60,13 +60,10 @@ public class MetricsManager {
   }
 
   /**
-   * A {@link Meter} measures the rate of events over time (e.g., “requests per second”). Here we
-   * track 1-minute moving averages.
+   * A {@link Meter} measures the rate of events over time (e.g., “requests per second”).
    */
   public Meter addMeter(final String name) {
-    final Meter curr = this.registry.meter(name);
-    this.registry.register(name + ""-gauge"", (Gauge<Double>) curr::getOneMinuteRate);
-    return curr;
+    return this.registry.meter(name);
   }
 
   /**",Removing duplicated info: 1 minute rate values are already emitted by the meter,java,1,1,1
"@@ -46,8 +46,7 @@ import zipkin2.storage.StorageComponent;
 import zipkin2.storage.Traces;
 
 import static com.linecorp.armeria.common.HttpMethod.GET;
-import static zipkin2.elasticsearch.ElasticsearchVersion.V7_0;
-import static zipkin2.elasticsearch.ElasticsearchVersion.V7_8;
+import static zipkin2.elasticsearch.ElasticsearchVersion.*;
 import static zipkin2.elasticsearch.EnsureIndexTemplate.ensureIndexTemplate;
 import static zipkin2.elasticsearch.VersionSpecificTemplates.TYPE_AUTOCOMPLETE;
 import static zipkin2.elasticsearch.VersionSpecificTemplates.TYPE_DEPENDENCY;",nit say no to wildcards :D,java,1,0,1
"@@ -1007,6 +1007,14 @@ public class ParsingFieldUpdateProcessorsTest extends UpdateProcessorTestBase {
     assertParsedDate(""Friday Oct 7 13:14:15 2005"", Date.from(inst20051007131415()), ""parse-date-patterns-default-config"");
   }
 
+  public void testRfc2616() throws Exception {
+    assertParsedDate(""Fri Oct 7 13:14:15 2005"" , Date.from(inst20051007131415()), ""parse-date-patterns-default-config"");
+  }
+
+  public void testRfc2616Leniency() throws Exception {
+    assertParsedDate(""Fri Oct 07 13:14:15 2005"" , Date.from(inst20051007131415()), ""parse-date-patterns-default-config"");
+  }
+
   public void testParseQuotedDate() throws IOException {
     // also using 2 digit day
     assertParsedDate(""'Fri, 14 Oct 2005 13:14:15 GMT'"",","Should be named testAsctime since that's the format of this input you are testing. When I mentioned RFC2616, that is a spec that in turn refers to multiple formats (including asctime). Also, like I pointed out, need to test with 2 spaces left of a single digit day.",java,1,1,1
"@@ -188,6 +188,11 @@ public class LocalServiceRegistryClientImpl implements ServiceRegistryClient {
     return microserviceIdMap.get(microserviceId);
   }
 
+  @Override
+  public Microservice getAggregatedMicroservice(String microserviceId) {
+    return microserviceIdMap.get(microserviceId);
+  }
+
   @Override
   public String registerMicroserviceInstance(MicroserviceInstance instance) {
     Map<String, MicroserviceInstance> instanceMap = microserviceInstanceMap.get(instance.getServiceId());",do not copy code just invoke getMicroservice,java,1,1,1
"@@ -249,7 +249,9 @@ public class ExecutionControllerUtils {
       exFlow.setEndTime(time);
     }
 
-    exFlow.setStatus(Status.FAILED);
+    if (exFlow.getStatus() != Status.POD_FAILED) {
+      exFlow.setStatus(Status.FAILED);
+    }
   }
 
   /**",Perhaps make this check more generic and switch the status to FAILED if the previous status is already a final one ? Something like `if (!isStatusFinised(exFlow.getStatus())`,java,1,1,1
"@@ -93,7 +93,7 @@ public class Docker {
       throw new WebDriverException(""Unable to pull container: "" + name);
     }
 
-    LOG.info(String.format(""Pull of %s:%s complete"", name, tag));
+    LOG.fine(String.format(""Pull of %s:%s complete"", name, tag));
 
     return findImage(new ImageNamePredicate(name, tag))
         .orElseThrow(() -> new DockerException(",Waiting for the pull takes a long time. This message informs the user that at least one of the images being pulled is available. Please leave.,java,1,1,1
"@@ -86,8 +86,14 @@ public class InitCodeTransformer {
 
   private final ImportSectionTransformer importSectionTransformer;
 
-  // Whether the initialization code should include user-facing comments like TODOs. This should be
-  // false if the initialization code is being used to generate tests, rather than code samples.
+  // Whether the initialization code should include hardcoded comments like TODOs. This
+  // should only be true when generating incode samples.
+  //
+  // This field should be set to false when generating tests because tests do not need to include
+  // user facing comments.
+  //
+  // This field should be set to false when generating standalone samples because comments in
+  // standalone samples are derived from user configurations, not hardcoded.
   private final boolean generateUserFacingComments;
 
   public InitCodeTransformer() {","nits here and below: ""hard-coded"" ""in-code""",java,1,1,0
"@@ -150,4 +150,9 @@ public interface HistoricIncident {
 
   /** The time the historic incident will be removed. */
   Date getRemovalTime();
+
+  /**
+   * Returns the id of the activity on which the last exception occurred.
+   */
+  String getLastFailingActivityId();
 }","Why is named ""Last....""? Isn't it so that an incident is created because of exactly one exception? Hence there will be exactly one activityId, and hence there will be no ""first"" or ""last"" one.",java,1,1,1
"@@ -349,11 +349,7 @@ public interface Future<T> extends Value<T> {
      * @throws NullPointerException if unit is null.
      */
     static Future<Void> run(CheckedRunnable unit) {
-        Objects.requireNonNull(unit, ""unit is null"");
-        return Future.of(DEFAULT_EXECUTOR_SERVICE, () -> {
-            unit.run();
-            return null;
-        });
+        return run(DEFAULT_EXECUTOR_SERVICE, unit);
     }
 
     /**",only deleted code is good code :-),java,1,0,0
"@@ -108,7 +108,7 @@ public class SolrDispatchFilter extends BaseSolrFilter {
   
   private boolean isV2Enabled = !""true"".equals(System.getProperty(""disable.v2.api"", ""false""));
 
-  private final String metricTag = Integer.toHexString(hashCode());
+  private final String metricTag = getClass().getSimpleName() + ""@"" + Integer.toHexString(hashCode());
   private SolrMetricManager metricManager;
   private String registryName;
   private volatile boolean closeOnDestroy = true;",Should use the new method from `SolrMetricProducer`.,java,1,1,1
"@@ -59,7 +59,7 @@ public class GoImportSectionTransformer implements ImportSectionTransformer {
   private boolean isStandardImport(String importPath) {
     // TODO(pongad): Some packages in standard library have slashes,
     // we might have to special case them.
-    if (importPath.equals(""net/http"")) {
+    if (importPath.equals(""net/http"") || importPath.equals(""net/url"")) {
       return true;
     }
     return !importPath.contains(""/"");","I think I found a better way to detect this. We can probably look for a ""."" in the path, so that we'll catch ""github.com/foo/bar"", but not stdlib.",java,1,1,1
"@@ -0,0 +1,13 @@
+package de.danoeh.antennapod.core.sync;
+
+public interface SynchronizationSharedPreferenceKeys {
+    String SELECTED_SYNC_PROVIDER = ""selected_sync_provider"";
+    String IS_SYNC_PROVIDER_CONNECTED = ""provider_is_connected"";
+    String LAST_SUBSCRIPTION_SYNC_TIMESTAMP = ""last_sync_timestamp"";
+    String LAST_EPISODE_ACTIONS_SYNC_TIMESTAMP = ""last_episode_actions_sync_timestamp"";
+    String QUEUED_FEEDS_ADDED = ""sync_added"";
+    String QUEUED_FEEDS_REMOVED = ""sync_removed"";
+    String QUEUED_EPISODE_ACTIONS = ""sync_queued_episode_actions"";
+    String LAST_SYNC_ATTEMPT_TIMESTAMP = ""last_sync_attempt_timestamp"";
+    String LAST_SYNC_ATTEMPT_SUCCESS = ""last_sync_attempt_success"";
+}","Now that you have dedicated classes for getting/setting the preferences, the constants don't need to be accessed from outside these classes, don't they? They can be moved to the classes and made private, then.",java,1,1,1
"@@ -49,8 +49,8 @@ public class TestSelect extends SparkCatalogTestBase {
 
   @Before
   public void createTables() {
-    sql(""CREATE TABLE %s (id bigint, data string, float float) USING iceberg"", tableName);
-    sql(""INSERT INTO %s VALUES (1, 'a', 1.0), (2, 'b', 2.0), (3, 'c', float('NaN'))"", tableName);
+    sql(""CREATE TABLE %s (id bigint, data string, float float, binary binary) USING iceberg"", tableName);
+    sql(""INSERT INTO %s VALUES (1, 'a', 1.0, X''), (2, 'b', 2.0, X'11'), (3, 'c', float('NaN'), X'1111')"", tableName);
 
     this.scanEventCount = 0;
     this.lastScanEvent = null;","Rather than repurposing old test cases, can you create new ones? We want to avoid mixing tests together in confusing ways that look like other failures.",java,1,1,1
"@@ -250,7 +250,8 @@ public class PythonGapicContext extends GapicContext {
 
     // parameter types
     contentBuilder.append(""Args:\n"");
-    for (Field field : this.messages().flattenedFields(method.getInputType())) {
+    for (Field field :
+        removePageTokenFromFields(this.messages().flattenedFields(method.getInputType()), config)) {
       String name = pythonCommon.wrapIfKeywordOrBuiltIn(field.getSimpleName());
       if (config.isPageStreaming()
           && field.equals((config.getPageStreaming().getPageSizeField()))) {",I don't think the call to flattenedFields is necessary here,java,1,1,1
"@@ -25,7 +25,8 @@ namespace Microsoft.Rest.Generator.CSharp.Azure
 
         public AzureCSharpCodeGenerator(Settings settings) : base(settings)
         {
-            _namer = new AzureCSharpCodeNamer();
+
+            _namer = new AzureCSharpCodeNamer(settings);
             IsSingleFileGenerationSupported = true;
             pageClasses = new Dictionary<KeyValuePair<string, string>, string>();
         }",Why an empty line,java,1,1,0
"@@ -56,7 +56,7 @@ public class CloudUtil {
   public static final int DEFAULT_TIMEOUT = 90;
 
   /**
-   * See if coreNodeName has been taken over by another baseUrl and unload core
+   * See if replicaName has been taken over by another baseUrl and unload core
    * + throw exception if it has been.
    */
   public static void checkSharedFSFailoverReplaced(CoreContainer cc, CoreDescriptor desc) {","Update the log on line 80, and the variable name ""cnn"" as well",java,1,1,1
"@@ -92,10 +92,10 @@ public class SolrCoreMetricManager implements Closeable {
    * are carried over and will be used under the new core name.
    * This method also reloads reporters so that they use the new core name.
    */
-  public void afterCoreSetName() {
+  public void afterCoreRename() {
+    assert core.getCoreDescriptor().getCloudDescriptor() == null;
     String oldRegistryName = solrMetricsContext.getRegistryName();
     String oldLeaderRegistryName = leaderRegistryName;
-    initCloudMode();
     String newRegistryName = createRegistryName(cloudMode, collectionName, shardName, replicaName, core.getName());
     leaderRegistryName = createLeaderRegistryName(cloudMode, collectionName, shardName);
     if (oldRegistryName.equals(newRegistryName)) {",Should it call apiAssumeStandalone()?,java,1,1,1
"@@ -186,6 +186,9 @@ public class TestHiveShell {
     // Tez configuration
     hiveConf.setBoolean(""tez.local.mode"", true);
 
+    // Disable vectorization for HiveIcebergInputFormat
+    hiveConf.setBoolVar(HiveConf.ConfVars.HIVE_VECTORIZATION_ENABLED, false);
+
     return hiveConf;
   }
 }","I think this is fine, but I'm curious: do we plan to add vectorized writes? Or is this not something that we think is important?",java,1,1,1
"@@ -14,4 +14,6 @@ public interface User extends RoleAssignee, Serializable {
 
     public boolean isSuperuser();
 
+    public boolean isDisabled();
+
 }","fyi, it is now possible to add a default implementation of the method and so not have to override in subclasses if they use the default.",java,1,1,1
"@@ -59,6 +59,7 @@ public class JdbcExecutorLoaderTest {
   private static final String user = ""azkaban"";
   private static final String password = ""azkaban"";
   private static final int numConnections = 10;
+  private static final long recentlyFinishedLifetimeMs = 5000;
 
   @BeforeClass
   public static void setupDB() {",upper case. also using duration might be helpful,java,1,1,1
"@@ -37,9 +37,7 @@ public class MaxScoreCollector extends SimpleCollector {
 
   @Override
   public ScoreMode scoreMode() {
-    // Should be TOP_SCORES but this would wrap the scorer unnecessarily since
-    // this collector is only used in a MultiCollector.
-    return ScoreMode.COMPLETE;
+    return ScoreMode.TOP_SCORES;
   }
 
   @Override",why can we make this change?,java,1,1,0
"@@ -196,7 +196,6 @@ public abstract class SyncTarget {
                 smartStore.beginTransaction();
                 for (int i = 0; i < records.length(); i++) {
                     JSONObject record = new JSONObject(records.getJSONObject(i).toString());
-                    cleanRecord(record);
                     cleanAndSaveInSmartStore(syncManager.getSmartStore(), soupName, record, false);
                 }
                 smartStore.setTransactionSuccessful();",The next method called (cleanAndSaveInSmartStore) does a cleanRecord,java,1,1,0
"@@ -8,14 +8,15 @@ import org.mozilla.vrbrowser.BuildConfig;
 
 public class DeviceType {
     // These values need to match those in Device.h
-    @IntDef(value = { Unknown, OculusGo, OculusQuest, ViveFocusPlus, PicoNeo2, PicoG2 })
+    @IntDef(value = { Unknown, OculusGo, OculusQuest, ViveFocus, ViveFocusPlus, PicoNeo2, PicoG2 })
     public @interface Type {}
     public static final int Unknown = 0;
     public static final int OculusGo = 1;
     public static final int OculusQuest = 2;
-    public static final int ViveFocusPlus = 3;
-    public static final int PicoNeo2 = 4;
-    public static final int PicoG2 = 5;
+    public static final int ViveFocus = 3;
+    public static final int ViveFocusPlus = 4;
+    public static final int PicoNeo2 = 6;
+    public static final int PicoG2 = 7;
 
     private static @Type int mType = Unknown;
 ",Looks like PicoNeo2 should be 6 and PicoGaze should be 5?,java,1,1,1
"@@ -9,8 +9,8 @@ import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.lang.annotation.Target;
 
-import net.sourceforge.pmd.lang.ast.AbstractNode;
 import net.sourceforge.pmd.lang.ast.Node;
+import net.sourceforge.pmd.lang.ast.impl.AbstractNode;
 
 /**
  * Filters out some methods from the XPath attributes of a node.","In theory, AbstractNode should be irrelevant in this context - AbstractNode should only help to implement the Node API, but should not add to the API... (so no additional methods). Maybe we don't need the NoAttrScope at all? If a intermediate (abstract) class adds a public method, it is public API... so why not expose it as XPath attribute?",java,1,1,1
"@@ -31,7 +31,7 @@ import org.apache.tuweni.bytes.MutableBytes;
  *
  * <h3>Message structure</h3>
  *
- * The following describes the message structure:
+ * <p>The following describes the message structure:
  *
  * <pre>
  *   authRecipient -&gt; E(remote-pubk,","Seems unrelated, but ok.",java,1,1,0
"@@ -56,6 +56,8 @@ public class TestNamespaceSQL extends SparkCatalogTestBase {
 
   @Test
   public void testCreateNamespace() {
+    // Nessie namespaces are explicit and do not need to be explicitly managed
+    Assume.assumeFalse(catalogName.endsWith(""testnessie""));
     Assert.assertFalse(""Namespace should not already exist"", validationNamespaceCatalog.namespaceExists(NS));
 
     sql(""CREATE NAMESPACE %s"", fullNamespace);",The concept of a namespace is implicit in Nessie and are therefore not managed through the normal `SupportsNamespaces` interface. We skip tests of this interface when the catalog is a `NessieCatalog`.,java,1,1,1
"@@ -32,10 +32,10 @@ import org.openqa.selenium.remote.tracing.HttpTracing;
 import org.openqa.selenium.remote.tracing.Tracer;
 
 import java.net.URL;
+import java.util.Objects;
 import java.util.UUID;
 import java.util.logging.Logger;
 
-import static org.openqa.selenium.net.Urls.fromUri;
 import static org.openqa.selenium.remote.http.Contents.asJson;
 import static org.openqa.selenium.remote.http.HttpMethod.DELETE;
 import static org.openqa.selenium.remote.http.HttpMethod.GET;",We can get rid of this import then.,java,1,1,1
"@@ -349,9 +349,13 @@ public class Camera2 extends android.support.v4.app.Fragment {
                 		Camera.Parameters parameters = preview.mCamera.getParameters();
                 		switch (HDR_STATE){
                     			case HDR_OFF:
-                        			HDR_STATE = HDR_ON;
-                        			camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
-                        			parameters.setSceneMode(SCENE_MODE_HDR);
+                        			if (preview.getSupportSceneModes().contains(SCENE_MODE_HDR)) {
+                                        HDR_STATE = HDR_ON;
+                                        camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
+                                        parameters.setSceneMode(SCENE_MODE_HDR);
+                                    }else {
+                                        Toast.makeText(ctx, R.string.hdr_unsupported_error,Toast.LENGTH_SHORT).show();
+                                    }
                         			break;
                     			case HDR_ON:
                         			HDR_STATE = HDR_OFF;",Properly intend the code pls.,java,1,1,0
"@@ -71,9 +71,9 @@ public class IDPRequestHandler {
         this.spConfig = spConfig;
         this.userAccount = userAccount;
         basicValidation();
-        loginUrl = spConfig.getLoginUrl();
+        loginUrl = userAccount.getLoginServer();
         if (TextUtils.isEmpty(loginUrl)) {
-            loginUrl = userAccount.getLoginServer();
+            loginUrl = spConfig.getLoginUrl();
         }
         buildRestClient();
     }",This one fixes a corner case bug when you swizzle out to the IDP and then decide to change login hosts.,java,1,1,1
"@@ -143,4 +143,8 @@ public class EVM {
       return operation;
     }
   }
+
+  public OperationRegistry getOperations() {
+    return operations;
+  }
 }",Exposed so it can be spied upon.,java,1,1,1
"@@ -36,7 +36,7 @@ import io.prometheus.client.exporter.HTTPServer;
 
 @Component
 public class MetricsPublisher implements ApplicationListener<ApplicationEvent> {
-  private static final Logger LOGGER = LoggerFactory.getLogger(MetricsPublisher.class);
+  private static final Logger logger = LoggerFactory.getLogger(MetricsPublisher.class);
 
   private static final String METRICS_PROMETHEUS_PORT = ""servicecomb.metrics.prometheus.port"";
 ","why changed to logger? for static final varibles, use upper case, see this code below(METRICS_PROMETHEUS_PORT).",java,1,1,1
"@@ -38,6 +38,7 @@ public class PrettyPrinterConfiguration {
     private String indent = ""    "";
     private String endOfLineCharacter = EOL;
     private Function<PrettyPrinterConfiguration, PrettyPrintVisitor> visitorFactory = PrettyPrintVisitor::new;
+    private int maxEnumConstantsToAlignHorizontally = 5;
 
     public String getIndent() {
         return indent;",We could add a public static constant named `DEFAULT_MAX_ENUM_CONSTANTS_TO_ALIGN_HORIZONTALLY-,java,1,1,1
"@@ -44,7 +44,7 @@ public class NodeStatus {
   public NodeStatus(
       NodeId nodeId,
       URI externalUri,
-      int maxSessionCount,
+      Integer maxSessionCount,
       Set<Slot> slots,
       Availability availability) {
     this.nodeId = Require.nonNull(""Node id"", nodeId);",This change shouldn't be necessary for this PR. Please remove it.,java,1,1,1
"@@ -494,11 +494,10 @@ public final class HashSet<T> implements Set<T>, Serializable {
             final HashSet<T> set = (HashSet<T>) elements;
             return set;
         }
-        final HashArrayMappedTrie<T, T> that = addAll(tree, elements);
-        if (that.size() == tree.size()) {
+        if (Collections.isEmpty(elements) || this.equals(elements)){
             return this;
         } else {
-            return new HashSet<>(that);
+            return new HashSet<>(addAll(tree, elements));
         }
     }
 ",The new way is only better when this HashSet and the elements are equal but it adds an overhead for all other cases. Please restore the previous version.,java,1,1,1
"@@ -154,6 +154,17 @@ public final class BaselineErrorProne implements Plugin<Project> {
                                 errorProneOptions.check(""PreferSafeLoggingPreconditions"", CheckSeverity.OFF);
                                 errorProneOptions.check(""PreconditionsConstantMessage"", CheckSeverity.OFF);
                             }));
+
+            project.getTasks().withType(JavaCompile.class).configureEach(javaCompile -> {
+                ((ExtensionAware) javaCompile.getOptions())
+                        .getExtensions()
+                        .configure(ErrorProneOptions.class, errorProneOptions -> {
+                            // Relax some checks for test code
+                            if (errorProneOptions.isCompilingTestOnlyCode()) {
+                                errorProneOptions.check(""UnnecessaryLambda"", CheckSeverity.OFF);
+                            }
+                        });
+            });
         });
 
         // In case of java 8 we need to add errorprone javac compiler to bootstrap classpath of tasks that perform","is this intentionally only disabled for people that use `java-gradle-plugin`? It feels a little odd to disable it in such a specific case. If we think this UnnecessaryLambda is genuinely not great signal, why not just turn it off for all test code?",java,1,1,1
"@@ -370,7 +370,7 @@ public class TestIcebergInputFormats {
     testInputFormat.create(builder.conf()).validate(expectedRecords);
   }
 
-  private abstract static class TestInputFormat<T> {
+  public abstract static class TestInputFormat<T> {
 
     private final List<IcebergSplit> splits;
     private final List<T> records;",Why was this changed to `public`?,java,1,1,1
"@@ -44,12 +44,10 @@ import org.tikv.kvproto.Metapb.Store;
 public class Snapshot {
   private final TiTimestamp timestamp;
   private final TiSession session;
-  private final TiConfiguration conf;
 
   public Snapshot(TiTimestamp timestamp, TiSession session) {
     this.timestamp = timestamp;
     this.session = session;
-    this.conf = session.getConf();
   }
 
   public TiSession getSession() {",why delete this conf?,java,1,1,0
"@@ -95,6 +95,8 @@ class visibility_of(object):
 
 
 def _element_if_visible(element, visibility=True):
+    if isinstance(element, str) or isinstance(element, dict):
+           raise StaleElementReferenceException(""Invalid locator"")
     return element if element.is_displayed() == visibility else False
 
 ",This is not the right exception class. There is an InvalidSelectorException class that covers bad locators.,java,1,1,1
"@@ -39,7 +39,7 @@ public class Java14PreviewValidator extends Java14Validator {
         {
             // first preview within Java 14 - https://openjdk.java.net/jeps/359
             remove(noRecordDeclaration);
-            add(recordAsTypeIdentifierNotAllowed);
+            add(recordAsClassAndInterfaceIdentifierNotAllowed);
             add(recordDeclarationValidator);
         }
 ",Please revert this back to `TypeIdentifier` - `record` is not permitted e.g. as an enum`s identifier either.,java,1,1,1
"@@ -361,7 +361,9 @@ public class FunctionQParser extends QParser {
         ((FunctionQParser)subParser).setParseMultipleSources(true);
       }
       Query subQuery = subParser.getQuery();
-      if (subQuery instanceof FunctionQuery) {
+      if (subQuery == null) {
+        valueSource = new DoubleConstValueSource(0.0f);
+      } else if (subQuery instanceof FunctionQuery) {
         valueSource = ((FunctionQuery) subQuery).getValueSource();
       } else {
         valueSource = new QueryValueSource(subQuery, 0.0f);",Why a Double?,java,1,1,0
"@@ -311,4 +311,13 @@ public class Constants {
     public static final String START_TIME = ""startTime"";
     public static final String TRIGGER_INSTANCE_ID = ""triggerInstanceId"";
   }
+
+
+  public static class DefaultValue {
+
+    public static final int PROJECT_DIR_CLEANUP_START_THRESHOLD = 90;
+    public static final int PROJECT_DIR_CLEANUP_STOP_THRESHOLD = 60;
+    //128G
+    public static final long PROJECT_DIR_MAX_SIZE = 12800;
+  }
 }",Is it in MB? Should it be 128_000 then?,java,1,1,1
"@@ -142,12 +142,9 @@ namespace AutoRest.Core.Model
         /// <returns>true if the specified object is functionally equal to this object; otherwise, false.</returns>
         public virtual bool StructurallyEquals(IModelType other)
         {
-            if (ReferenceEquals(other, null))
-            {
-                return false;
-            }
-
-            return GetType() == other.GetType() && Name.Equals(other.Name);
+            var ta = JsonConvert.SerializeObject(this);
+            var tb = JsonConvert.SerializeObject(other);
+            return ta == tb;
         }
 
         /// <summary>","Ouch! Some considerations: - this uses the default serialization rules where circular references will throw an exception. We overcome this in the `CodeModel` stuff by generating `$id` and `$ref` fields to allow multiple references to the same object to resolve correctly. - even if you used the serializer settings, two structurally identical objects may not be literally identical, if dictionaries are involved, and the references aren't generated in exactly the same order (since, the first reference shows the entire object, and the second will get a `$ref` to the `$id` of the first.)",java,1,0,1
"@@ -91,11 +91,7 @@ class MetricsHttpService implements MetricsService {
     router.route(""/"").method(HttpMethod.GET).handler(this::handleEmptyRequest);
 
     // Endpoint for Prometheus metrics monitoring.
-    router
-        .route(""/metrics"")
-        .method(HttpMethod.GET)
-        .produces(TextFormat.CONTENT_TYPE_004)
-        .handler(this::metricsRequest);
+    router.route(""/metrics"").method(HttpMethod.GET).handler(this::metricsRequest);
 
     final CompletableFuture<?> resultFuture = new CompletableFuture<>();
     httpServer","Maybe just check for `""text/plain""` instead of completely dropping Prometheus' very specific version?",java,1,1,1
"@@ -952,5 +952,19 @@ public abstract class TestExpireSnapshotsAction extends SparkTestBase {
 
     checkExpirationResults(1, 1, 1, result);
   }
+
+  @Test
+  public void testExpireOnEmptyTable() {
+
+    Set<String> deletedFiles = Sets.newHashSet();
+
+    // table has no data, testing ExpireSnapshots should not fail with no snapshot
+    ExpireSnapshotsActionResult result = Actions.forTable(table).expireSnapshots()
+            .expireOlderThan(System.currentTimeMillis())
+            .deleteWith(deletedFiles::add)
+            .execute();
+
+    checkExpirationResults(0, 0, 0, result);
+  }
 }
 ",nit: let's remove this extra empty line at the beginning,java,1,1,1
"@@ -539,7 +539,10 @@ class WebElement(object):
     @property
     def rect(self):
         """"""A dictionary with the size and location of the element.""""""
-        return self._execute(Command.GET_ELEMENT_RECT)['value']
+        if self._w3c:
+            return self._execute(Command.GET_ELEMENT_RECT)['value']
+        else:
+            return self.size, self.location
 
     @property
     def screenshot_as_base64(self):",This would return a tuple of two dictionaries. You need to combine them and return a dictionary,java,1,1,1
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -122,6 +122,8 @@ public class TestSetChainParams implements JsonRpcMethod {
     maybeMoveToNumber(params, ""istanbulForkBlock"", config, ""istanbulBlock"");
     maybeMoveToNumber(params, ""muirGlacierForkBlock"", config, ""muirGlacierBlock"");
     maybeMoveToNumber(params, ""berlinForkBlock"", config, ""berlinBlock"");
+    maybeMoveToNumber(params, ""londonForkBlock"", config, ""londonBlock"");
+    maybeMoveToNumber(params, ""muirGlacierForkBlock"", config, ""muirGlacierBlock"");
     maybeMoveToNumber(params, ""chainID"", config, ""chainId"", 1);
 
     maybeMove(genesis, ""author"", chainParamsJson, ""coinbase"");",this needs to be arrowGlacier.,java,1,1,1
"@@ -47,6 +47,7 @@ public class SnapshotSummary {
   public static final String PUBLISHED_WAP_ID_PROP = ""published-wap-id"";
   public static final String SOURCE_SNAPSHOT_ID_PROP = ""source-snapshot-id"";
   public static final String REPLACE_PARTITIONS_PROP = ""replace-partitions"";
+  public static final String EXTRA_METADATA_PREFIX = ""extra-metadata."";
 
   private SnapshotSummary() {
   }",happy to change if a different prefix string would be more suitable,java,1,1,1
"@@ -589,6 +589,8 @@ public class JsonRpcHttpService {
               token,
               user -> handleJsonBatchRequest(routingContext, array, user));
         }
+      } catch (final NullPointerException ex) {
+        handleJsonRpcError(routingContext, null, JsonRpcError.PARSE_ERROR);
       } catch (final DecodeException ex) {
         handleJsonRpcError(routingContext, null, JsonRpcError.PARSE_ERROR);
       }",Is there a more appropriate error we can give that's related to incorrect request header?,java,1,1,1
"@@ -1341,7 +1341,7 @@ public class CharSeqTest {
 
     @Test
     public void shouldStartsNilOfNilWithOffsetCalculate() {
-        assertThat(empty().startsWith(empty(), 1)).isFalse();
+        assertThat(empty().startsWith(empty(), 1)).isTrue();
     }
 
     @Test","I think this test was wrong before, other `seq`s have the value `true` here",java,1,1,1
"@@ -98,9 +98,9 @@ final class ClassStats implements ClassMirror {
     @Override
     public boolean hasMatchingOpSig(String name, JavaOperationSigMask mask) {
         // Indexing on signatures optimises this type of request
-        for (JavaOperationSignature sig : operations.keySet()) {
-            if (mask.covers(sig)) {
-                if (operations.get(sig).contains(name)) {
+        for (Entry<JavaOperationSignature, Set<String>> entry : operations.entrySet()) {
+            if (mask.covers(entry.getKey())) {
+                if (operations.get(entry.getKey()).contains(name)) {
                     return true;
                 }
             }","This is wrong, should be `entry.getValue()`",java,1,1,1
"@@ -191,11 +191,11 @@ public class OpenTelemetryAcceptanceTest extends AcceptanceTestBase {
   @Test
   public void traceReportingWithTraceId() {
 
+    OkHttpClient okClient = new OkHttpClient();
     WaitUtils.waitFor(
         30,
         () -> {
           // call the json RPC endpoint to generate a trace - with trace metadata of our own
-          OkHttpClient okClient = new OkHttpClient();
           Configuration config =
               new Configuration(""okhttp"")
                   .withSampler(",moved this outside the wait so the connection gets reused,java,1,1,1
"@@ -60,7 +60,7 @@ public class PhpSurfaceNamer extends SurfaceNamer {
 
   @Override
   public String getClientConfigPath(Interface service) {
-    return ""./resources/""
+    return ""/resources/""
         + Name.upperCamel(service.getSimpleName()).join(""client_config"").toLowerUnderscore()
         + "".json"";
   }",I would prefer this to not have the leading slash so that it doesn't imply an absolute path.,java,1,1,1
"@@ -37,6 +37,7 @@ import org.apache.http.impl.client.HttpClients;
 import org.apache.http.message.BasicHeader;
 import org.apache.http.util.EntityUtils;
 import org.camunda.bpm.client.interceptor.impl.RequestInterceptorHandler;
+import org.camunda.bpm.client.listener.ClientInteractionListener;
 import org.camunda.commons.utils.IoUtil;
 
 import com.fasterxml.jackson.core.JsonParseException;","This is not needed here anymore, right?",java,1,1,1
"@@ -69,8 +69,14 @@ public class LinkedHashMapTest extends AbstractMapTest {
 
     @Test
     public void shouldKeepOrder() {
-        CharSeq actual = LinkedHashMap.<Integer, Character> empty().put(3, 'a').put(2, 'b').put(1, 'c').foldLeft(CharSeq.empty(), (s, t) -> s.append(t._2));
-        assertThat(actual).isEqualTo(CharSeq.of(""abc""));
+        List<Character> actual = LinkedHashMap.<Integer, Character> empty().put(3, 'a').put(2, 'b').put(1, 'c').foldLeft(List.empty(), (s, t) -> s.append(t._2));
+        Assertions.assertThat(actual).isEqualTo(List.of('a', 'b', 'c'));
+    }
+
+    @Test
+    public void shouldKeepValuesOrder() {
+        List<Character> actual = LinkedHashMap.<Integer, Character> empty().put(3, 'a').put(2, 'b').put(1, 'c').values().foldLeft(List.empty(), List::append);
+        Assertions.assertThat(actual).isEqualTo(List.of('a', 'b', 'c'));
     }
 
     // -- static narrow","It was a big mistake to override `assers*` methods. They don't check ordering of iterables. It is sufficient for `Map`, but very dangerous for other cases.",java,1,1,1
"@@ -162,7 +162,7 @@ public class CloneVisitor implements GenericVisitor<Visitable, Object> {
 	public Visitable visit(AnnotationMemberDeclaration _n, Object _arg) {
 		NodeList<AnnotationExpr> annotations = cloneList(_n.getAnnotations(), _arg);
 		Type<?> type_ = cloneNode(_n.getType(), _arg);
-		Expression defaultValue = cloneNode(_n.getDefaultValue(), _arg);
+		Expression defaultValue = cloneNode(_n.getDefaultValue().orElse(null), _arg);
 		Comment comment = cloneNode(_n.getComment(), _arg);
 
 		AnnotationMemberDeclaration r = new AnnotationMemberDeclaration(","Consider making an optional-specific ""cloneNode"" for this",java,1,1,1
"@@ -113,7 +113,7 @@ public class UserAccount {
 	 * @param thumbnailUrl Thumbnail URL.
 	 * @param additionalOauthValues Additional OAuth values.
 	 */
-	public UserAccount(String authToken, String refreshToken,
+	UserAccount(String authToken, String refreshToken,
 					   String loginServer, String idUrl, String instanceServer,
 					   String orgId, String userId, String username, String accountName,
 					   String communityId, String communityUrl, String firstName, String lastName,",Package level access to ensure consumers use the `Builder` going forward.,java,1,1,1
"@@ -29,8 +29,11 @@ import org.apache.solr.common.params.CommonParams;
 import org.apache.solr.common.params.ModifiableSolrParams;
 import org.apache.solr.common.util.NamedList;
 import org.apache.solr.SolrTestCaseJ4.SuppressPointFields;
+import org.junit.Assert;
 import org.junit.Test;
 
+import static org.hamcrest.CoreMatchers.containsString;
+
 /**
  * TODO? perhaps use:
  *  http://docs.codehaus.org/display/JETTY/ServletTester",I think we don't need this import. All test cases extend `Assert`,java,1,1,1
"@@ -114,7 +114,7 @@ public class CorePushPull {
      * @param newMetadataSuffix suffix of the new core.metadata file to be created as part of this push
      */
     public BlobCoreMetadata pushToBlobStore(String currentMetadataSuffix, String newMetadataSuffix) throws Exception {
-      long startTimeMs = System.nanoTime();
+      long startTimeMs = System.nanoTime() / 1000000;
       SolrCore solrCore = container.getCore(pushPullData.getCoreName());
       if (solrCore == null) {
         throw new Exception(""Can't find core "" + pushPullData.getCoreName());",I'd consider making System.nanoTime() / 1000000 a util method in BlobStoreUtils,java,1,1,1
"@@ -23,12 +23,18 @@ import com.google.api.codegen.discovery.Schema.Format;
 import com.google.api.codegen.discovery.Schema.Type;
 import com.google.api.codegen.transformer.ImportTypeTable;
 import com.google.api.codegen.util.Name;
+import com.google.api.codegen.util.SymbolTable;
 import com.google.api.codegen.util.TypeName;
 import com.google.api.tools.framework.model.Oneof;
 import com.google.api.tools.framework.model.TypeRef.Cardinality;
 import com.google.common.base.Preconditions;
+import com.google.common.base.Strings;
 import com.google.common.collect.ImmutableList;
+import java.util.AbstractMap;
+import java.util.Comparator;
 import java.util.List;
+import java.util.Map;
+import java.util.TreeMap;
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 import javax.annotation.Nullable;",Shouldn't this be unique per-package (namespace)?,java,1,1,1
"@@ -85,7 +85,15 @@ final public class Automata {
     a.finishState();
     return a;
   }
-  
+
+  /**
+   * Returns a new (deterministic) automaton that accepts all binary terms except
+   * the empty string.
+   */
+  public static Automaton makeAnyBinaryExceptEmpty() {
+    return makeCharRange(0, 255);
+  }
+
   /**
    * Returns a new (deterministic) automaton that accepts any single codepoint.
    */",I don't think this is right since this only accepts strings of length 1.,java,1,1,1
"@@ -67,7 +67,6 @@ import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
 import java.util.Map;
-import java.util.Optional;
 import java.util.Set;
 import java.util.stream.Collectors;
 ",There is no need to change this file since it is a test. Please revert this change.,java,1,1,1
"@@ -263,6 +263,7 @@ public abstract class AbstractServiceRegistry implements ServiceRegistry {
 
   @Override
   // TODO: this is for 3rd party invocation, and a better way can be provided
+  // TODO:  microserviceManager.getVersionsByName() can not be used, will delete this in SCB-1949
   public void registerMicroserviceMapping(String microserviceName, String version,
       List<MicroserviceInstance> instances, Class<?> schemaIntfCls) {
     MicroserviceNameParser parser = new MicroserviceNameParser(microservice.getAppId(), microserviceName);",3rd party is a good mechanism must not delete it.,java,1,1,1
"@@ -883,6 +883,17 @@ public class ExecutorServlet extends LoginAbstractAzkabanServlet {
     final String projectName = getParam(req, ""project"");
     final String flowId = getParam(req, ""flow"");
 
+    // check proxy
+    final  Map<String,String> props = getParamGroup(req, ""flowOverride"");
+    if (props != null){
+      for (String key : props.keySet()){
+         if (""user.to.proxy"".equals(key) && !userManager.validateProxyUser(props.get(key), user)){
+              ret.put(""error"", String.format(""User %s can not act as proxy for %s"", user.getUserId(), props.get(key)));
+              return;
+            }
+          }
+    }
+
     final Project project =
         getProjectAjaxByPermission(ret, projectName, user, Type.EXECUTE);
     if (project == null) {","Hi @sthbig , I believe we have this check when job starts to run. What's the advantage having this check here?",java,0,1,1
"@@ -40,6 +40,10 @@ public class RestTemplateCopyHeaderFilter implements HttpClientFilter {
 
     httpHeaders.forEach((key, values) -> {
       for (String value : values) {
+        // null args should not be set to requestEx to avoid NullPointerException in Netty.
+        if (null == value) {
+          continue;
+        }
         requestEx.addHeader(key, value);
       }
     });",Please do some debug log to help the user tracing the setting issue.,java,1,1,1
"@@ -66,7 +66,6 @@ public class VariableSpeedDialog {
                 Log.e(TAG, Log.getStackTraceString(e));
             }
         });
-        builder.forceStacking(true);
         MaterialDialog dialog = builder.show();
         if (Build.VERSION.SDK_INT < 16) {
             View pos = dialog.getActionButton(DialogAction.POSITIVE);",This method was removed by newer lib,java,1,1,1
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -25,7 +25,6 @@ import com.google.common.collect.ImmutableList;
 import com.google.common.collect.ImmutableSet;
 import com.google.common.collect.Range;
 import com.google.protobuf.ByteString;
-import com.pingcap.tikv.codec.KeyUtils;
 import com.pingcap.tikv.expression.ColumnRef;
 import com.pingcap.tikv.expression.Constant;
 import com.pingcap.tikv.expression.Expression;",can we check unsued import in checkstyle?,java,1,1,1
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -371,7 +371,7 @@ public class Dictionary {
         fullStrip = true;
       } else if (""LANG"".equals(firstWord)) {
         language = singleArgument(reader, line);
-        alternateCasing = ""tr_TR"".equals(language) || ""az_AZ"".equals(language);
+        alternateCasing = language.startsWith(""tr"") || language.startsWith(""az"");
       } else if (""BREAK"".equals(firstWord)) {
         breaks = parseBreaks(reader, line);
       } else if (""FORBIDDENWORD"".equals(firstWord)) {",Hmm... I didn't check but can we use Locale to parse it properly to extract the language from country variant?,java,1,1,1
"@@ -76,8 +76,9 @@ public class Actions {
    * Note that the modifier key is <b>never</b> released implicitly - either
    * <i>keyUp(theKey)</i> or <i>sendKeys(Keys.NULL)</i>
    * must be called to release the modifier.
-   * @param theKey Either {@link Keys#SHIFT}, {@link Keys#ALT} or {@link Keys#CONTROL}. If the
-   * provided key is none of those, {@link IllegalArgumentException} is thrown.
+   * @param theKey Either {@link Keys#SHIFT}, {@link Keys#ALT}, {@link Keys#CONTROL}
+   * or {@link Keys#COMMAND}. If the provided key is none of those, 
+   * {@link IllegalArgumentException} is thrown.
    * @return A self reference.
    */
   public Actions keyDown(Keys theKey) {",Keys.COMMAND seems to be an alias to Keys.META. That isn't mentioned?,java,1,1,1
"@@ -104,6 +104,14 @@ public final class BoostQuery extends Query {
     return super.rewrite(reader);
   }
 
+  @Override
+  public void visit(QueryVisitor visitor) {
+    QueryVisitor v = visitor.getSubVisitor(BooleanClause.Occur.MUST, this);
+    if (v != null) {
+      query.visit(v);
+    }
+  }
+
   @Override
   public String toString(String field) {
     StringBuilder builder = new StringBuilder();",should you rather check for empty visitor here now? I guess we can assume that getSubVisitor never returns null?,java,1,1,1
"@@ -134,12 +134,16 @@ public class LinguisticNamingRule extends AbstractJavaRule {
         }
     }
 
+    private boolean isBooleanType(String typeImage) {
+        return ""boolean"".equalsIgnoreCase(typeImage) || ""AtomicBoolean"".equals(typeImage);
+    }
+
     private void checkBooleanMethods(ASTMethodDeclaration node, Object data, String nameOfMethod) {
         ASTResultType resultType = node.getResultType();
         ASTType t = node.getResultType().getFirstChildOfType(ASTType.class);
         if (!resultType.isVoid() && t != null) {
             for (String prefix : getProperty(BOOLEAN_METHOD_PREFIXES_PROPERTY)) {
-                if (hasPrefix(nameOfMethod, prefix) && !""boolean"".equalsIgnoreCase(t.getTypeImage())) {
+                if (hasPrefix(nameOfMethod, prefix) && !isBooleanType(t.getTypeImage())) {
                     addViolationWithMessage(data, node, ""Linguistics Antipattern - The method ''{0}'' indicates linguistically it returns a boolean, but it returns ''{1}''"",
                             new Object[] { nameOfMethod, t.getTypeImage() });
                 }",we should probably use typeresolution here just in case...,java,1,1,1
"@@ -115,6 +115,7 @@ public class DOIDataCiteServiceBean extends AbstractIdServiceBean {
      * @param dataset the Dataset whose metadata needs to be modified
      * @param metadata the new metadata for the Dataset
      * @return the Dataset identifier, or null if the modification failed
+     * @throws java.lang.Exception
      */
     @Override
     public String modifyIdentifier(Dataset dataset, HashMap<String, String> metadata) throws Exception {","When adding a `@throws`, I would suggest to add a situation in which the exception is thrown.",java,0,1,1
"@@ -9,14 +9,10 @@ public class ASTDeclaration extends AbstractJspNode {
 
     private String name;
 
-    public ASTDeclaration(int id) {
+    ASTDeclaration(int id) {
         super(id);
     }
 
-    public ASTDeclaration(JspParser p, int id) {
-        super(p, id);
-    }
-
     /**
      * @return Returns the name.
      */",`setName()` can be package-private as well,java,1,1,0
"@@ -295,7 +295,7 @@ public class SmartStoreReactBridge extends ReactContextBaseJavaModule {
 			final IndexSpec[] indexSpecs = IndexSpec.fromJSON(indexesJson);
 
             // Get soup spec if available.
-            final ReadableMap soupSpecObj = args.getMap(SOUP_SPEC);
+            final ReadableMap soupSpecObj = (args.hasKey(SOUP_SPEC) ? args.getMap(SOUP_SPEC) : null);
             if (soupSpecObj != null) {
 
                 // Get soup name.",getMap throws an exception if key doesn't exist,java,1,1,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -307,6 +307,10 @@ public class SearchIncludeFragment implements java.io.Serializable {
         String allTypesFilterQuery = SearchFields.TYPE + "":(dataverses OR datasets OR files)"";
         filterQueriesFinalAllTypes.add(allTypesFilterQuery);
 
+        if (page == 0) {
+            logger.info(""Variable 'page' was zero. Changing it one. What does this have to do with upgrading from Glassfish 4.1 to Payara 5?"");
+            page = 1;
+        }
         int paginationStart = (page - 1) * paginationGuiRows;
         /**
          * @todo",@pdurbin the log message makes me think we don't know why this is here? Can we find out if this is needed and why? I'd rather be sure of why we're adding in logic than just logging a \_()_/,java,0,1,1
"@@ -210,7 +210,7 @@ public class ExportWriter implements SolrCore.RawWriter, Closeable {
     // That causes the totalHits and export entries in the context to _not_ get set.
     // The only time that really matters is when we search against an _empty_ set. That's too obscure
     // a condition to handle as part of this patch, if someone wants to pursue it it can be reproduced with:
-    // ant test  -Dtestcase=StreamingTest -Dtests.method=testAllValidExportTypes -Dtests.seed=10F13879D0D1D6AD -Dtests.slow=true -Dtests.locale=es-PA -Dtests.timezone=America/Bahia_Banderas -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
+    // gradlew test  --tests *testAllValidExportTypes* -Ptests.seed=10F13879D0D1D6AD -Ptests.slow=true -Ptests.locale=es-PA -Ptests.timezone=America/Bahia_Banderas -Ptests.asserts=true -Ptests.file.encoding=ISO-8859-1
     // You'll have to uncomment the if below to hit the null pointer exception.
     // This is such an unusual case (i.e. an empty index) that catching this concdition here is probably OK.
     // This came to light in the very artifical case of indexing a single doc to Cloud.",I think this should be a qualified class.method reference (much like I showed above).,java,1,1,1
"@@ -52,6 +52,14 @@ public class TableMetadata {
                                                PartitionSpec spec,
                                                String location,
                                                Map<String, String> properties) {
+    return newTableMetadata(schema, spec, location, properties, DEFAULT_TABLE_FORMAT_VERSION);
+  }
+
+  static TableMetadata newTableMetadata(Schema schema,
+                                        PartitionSpec spec,
+                                        String location,
+                                        Map<String, String> properties,
+                                        int formatVersion) {
     // reassign all column ids to ensure consistency
     AtomicInteger lastColumnId = new AtomicInteger(0);
     Schema freshSchema = TypeUtil.assignFreshIds(schema, lastColumnId::incrementAndGet);",This is needed to create v2 tables in tests. It isn't public.,java,1,1,1
"@@ -100,5 +100,8 @@ public interface PrivacyController {
 
   PrivateTransactionSimulator getTransactionSimulator();
 
-  Optional<Hash> getBlockHashByBlockNumber(Optional<Long> blockNumber);
+  Optional<Hash> getBlockHashByBlockNumber(final Long blockNumber);
+
+  Optional<Hash> getStateRootByBlockNumber(
+      final String privacyGroupId, final String enclavePublicKey, final long blockNumber);
 }",Do we need to expose this method in this interface? Isn't it used internally? I recon we could just find the blockhash from the number inside `getStateRootByBlockNumber()` method.,java,1,1,1
"@@ -32,10 +32,6 @@ public interface Parser {
      */
     TokenManager getTokenManager(String fileName, Reader source);
 
-    /**
-     * Indicates if this parser can actual parse, or if it can only tokenize.
-     */
-    boolean canParse();
 
     /**
      * Parse source code and return the root node of the AST.",we also need to deprecate `Parser::canParse()` on master,java,1,1,1
"@@ -30,6 +30,8 @@ public enum Status {
   SUCCEEDED(50),
   KILLING(55),
   KILLED(60),
+  // EXECUTION_STOPPED refers to a terminating flow status due to crashed executor/container
+  EXECUTION_STOPPED(65),
   FAILED(70),
   FAILED_FINISHING(80),
   SKIPPED(90),",terminal flow status?,java,1,0,1
"@@ -2191,6 +2191,17 @@ public class ZTSImpl implements KeyStore, ZTSHandler {
             return false;
         }
 
+        // validate uriHostname in request matches the uriHostname in cert
+        if (!validateUriHostname(certReq.getUriHostname(), cert)) {
+            return false;
+        }
+
+        // validate InstanceID in request matches the instanceid in the cert
+        if (!validateInstanceId(certReq.getInstanceId(), cert)) {
+            // Todo: minitor the logs, and make this a hard failure in later iteration
+            LOGGER.error(""unable to match request id: {} with cert id: {}"", certReq.getInstanceId(), X509CertUtils.extractRequestInstanceId(cert));
+        }
+
         // validate the ip address if any provided
 
         return verifyCertRequestIP ? certReq.validateIPAddress(cert, ip) : true;",we should not return true here. otherwise we're skipping the last check.,java,1,1,1
"@@ -44,7 +44,7 @@ public class RangeSetBuilder<C extends Comparable> extends DefaultVisitor<RangeS
    * @param loose If prefix length is specified, then filter is loose, so is the range.
    * @return a range set.
    */
-  protected RangeSet<C> comparisonBinaryExprVisit(
+  RangeSet<C> comparisonBinaryExprVisit(
       ComparisonBinaryExpression node, Void context, C literal, boolean loose) {
     NormalizedPredicate predicate = node.normalize();
     RangeSet<C> ranges = TreeRangeSet.create();",naming rule should be verb+noun for a method,java,1,1,1
"@@ -340,6 +340,10 @@ public class NavigationURLBar extends FrameLayout {
             if (!hasProtocol && !urlText.contains("" "") && UrlUtils.isDomain(urlText)) {
                 urlText = ""https://"" + urlText;
                 hasProtocol = true;
+            } else if (!hasProtocol && !urlText.contains("" "") && UrlUtils.isIPUri(urlText)) {
+                String protocol = UrlUtils.isLocalIP(urlText) ? ""http://"" : ""https://"";
+                urlText = protocol + urlText;
+                hasProtocol = true;
             }
             if (hasProtocol) {
                 URL url = new URL(urlText);",I was thinking about ways we could degrade from https:// to http:// in FxR so we always try secure first.,java,1,1,1
"@@ -800,5 +800,13 @@ public class EnginePersistenceLogger extends ProcessEngineLogger {
         preconditionMessage,
         failedOperation.toString());
   }
+  
+  public void logTaskAlreadyFetched(String workerId, Throwable cause) {
+	  logWarn(""091"",
+			  ""Execution Null. External task {}  was already fetched by worker thread {} {}"", 
+			  workerId, 
+			  cause.getMessage(), 
+			  cause);
+  }
 
 }","In the case of optimistic lokcing exception on the task itself, we currently do not log anything. In that sense, I would be ok to also not log anything in this case. If we do want to log though, it should be on level `DEBUG` as this is an expected condition in high concurrency scenarios and doesn't pose a problem that someone must take care of.",java,1,1,1
"@@ -192,7 +192,7 @@ public class ItunesSearchFragment extends Fragment {
         progressBar.setVisibility(View.VISIBLE);
 
         ItunesTopListLoader loader = new ItunesTopListLoader(getContext());
-        disposable = loader.loadToplist(25)
+        disposable = loader.loadToplist(100)
                 .subscribe(podcasts -> {
                     progressBar.setVisibility(View.GONE);
                     topList = podcasts;","I think something like this should be discussed in #3788. We already cause quite a lot of traffic to iTunes and I want to keep it to a minimum, so we do not get locked out one day.",java,0,1,1
"@@ -40,7 +40,7 @@ class AvroFileAppender<D> implements FileAppender<D> {
   AvroFileAppender(Schema schema, OutputFile file,
                    Function<Schema, DatumWriter<?>> createWriterFunc,
                    CodecFactory codec, Map<String, String> metadata) throws IOException {
-    this.stream = file.create();
+    this.stream = file.createOrOverwrite();
     this.writer = newAvroWriter(schema, stream, createWriterFunc, codec, metadata);
   }
 ",This will affect writes for all data and metadata files. Is it safe to do this everywhere?,java,1,1,1
"@@ -398,7 +398,6 @@ public class UserAccountManager {
 		final String userId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USER_ID));
 		final String username = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USERNAME));
 		final String accountName = accountManager.getUserData(account, AccountManager.KEY_ACCOUNT_NAME);
-		final String clientId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_CLIENT_ID));
 		final String lastName = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_LAST_NAME));
 		final String email = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_EMAIL));
 		final String encFirstName =  accountManager.getUserData(account, AuthenticatorService.KEY_FIRST_NAME);",Unrelated - wasn't being used.,java,0,1,0
"@@ -380,14 +380,7 @@ public class AuthenticationServiceBean {
         }
         if (tokens.size() == 1) {
             // Normal case - one token that may or may not have expired
-            ApiToken token = tokens.get(0);
-            if (token.getExpireTime().before(latest)) {
-                // Don't return an expired token which is unusable, delete it instead
-                em.remove(token);
-                return null;
-            } else {
-                return tokens.get(0);
-            }
+            return tokens.get(0);
         } else {
             // We have more than one due to https://github.com/IQSS/dataverse/issues/6389 or
             // similar, so we should delete all but one token.",so the idea is this will just return the expired token and it weon't work but user will then no to reset it?,java,1,1,1
"@@ -570,6 +570,12 @@ public class ChatMessageManager
 			return;
 		}
 
+		//guard case for google MoreObjects#firstNonNull
+		if (message.getValue() == null && message.getRuneLiteFormattedMessage() == null)
+		{
+			return;
+		}
+
 		// this updates chat cycle
 		client.addChatMessage(
 			message.getType(),",use two separate if statements as an OR,java,1,1,1
"@@ -17,12 +17,12 @@ import java.io.IOException;
 
 import static org.junit.Assert.assertEquals;
 
-public class Issue1485 {
+public class Issue1485 extends AbstractTest {
 
     @Test
     public void issue1485withoutSpecifyingJARs() throws IOException {
-        File dir = new File(""src/test/resources/issue1485"");
-        File file = new File(""src/test/resources/issue1485/Complex.java"");
+        File dir = adaptPath(""src/test/resources/issue1485"").toFile();
+        File file = adaptPath(""src/test/resources/issue1485/Complex.java"").toFile();
 
         CombinedTypeSolver typeSolver = new CombinedTypeSolver();
         typeSolver.add(new ReflectionTypeSolver());",Try slowly refactoring things from File to Path.,java,1,1,1
"@@ -185,6 +185,10 @@ final class UnzippingBytesRequestConverter implements RequestConverterFunction {
     }
 
     if (content.isEmpty()) ZipkinHttpCollector.maybeLog(""Empty POST body"", ctx, request);
+    if (content.length() == 2 && ""[]"".equals(content.toStringAscii())) {
+      ZipkinHttpCollector.maybeLog(""Empty JSON list POST body"", ctx, request);
+      content = HttpData.EMPTY_DATA;
+    }
 
     byte[] result = content.array();
     ZipkinHttpCollector.metrics.incrementBytes(result.length);",found a bug while doing this!!,java,1,1,1
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -107,10 +107,14 @@ public class AvroSchemaUtil {
 
   public static boolean isTimestamptz(Schema schema) {
     LogicalType logicalType = schema.getLogicalType();
-    if (logicalType != null && logicalType instanceof LogicalTypes.TimestampMicros) {
+    if (logicalType instanceof LogicalTypes.TimestampMillis || logicalType instanceof LogicalTypes.TimestampMicros) {
       // timestamptz is adjusted to UTC
       Object value = schema.getObjectProp(ADJUST_TO_UTC_PROP);
-      if (value instanceof Boolean) {
+
+      if (value == null) {
+        // not all avro timestamp logical types will have the adjust_to_utc prop, default to not timestamptz
+        return false;
+      } else if (value instanceof Boolean) {
         return (Boolean) value;
       } else if (value instanceof String) {
         return Boolean.parseBoolean((String) value);","How about ""default to timestamp"" or ""default to timestamp without time zone""?",java,1,1,1
"@@ -307,4 +307,19 @@ public class OAuth2AuthorizationRequestTests {
 						""response_type=code&client_id=client-id&state=state&"" +
 						""redirect_uri=https://example.com/authorize/oauth2/code/registration-id"");
 	}
+
+	@Test
+	public void buildWhenAuthorizationUriIncludesEscapedQueryParameterThenAuthorizationRequestUrlIncludesIt() {
+		OAuth2AuthorizationRequest authorizationRequest =
+				TestOAuth2AuthorizationRequests.request()
+						.authorizationUri(AUTHORIZATION_URI +
+								""?claims=%7B%22userinfo%22%3A%7B%22email_verified%22%3A%7B%22essential%22%3Atrue%7D%7D%7D"").build();
+
+		assertThat(authorizationRequest.getAuthorizationRequestUri()).isNotNull();
+		assertThat(authorizationRequest.getAuthorizationRequestUri())
+				.isEqualTo(""https://provider.com/oauth2/authorize?"" +
+						""claims=%7B%22userinfo%22%3A%7B%22email_verified%22%3A%7B%22essential%22%3Atrue%7D%7D%7D&"" +
+						""response_type=code&client_id=client-id&state=state&"" +
+						""redirect_uri=https://example.com/authorize/oauth2/code/registration-id"");
+	}
 }",Can you also add some `additionalParameters` that require encoding.,java,1,1,1
"@@ -820,7 +820,10 @@ public class BlockchainQueries {
                         .orElseThrow(
                             () -> new IllegalStateException(""Could not retrieve block #"" + l)))
             .flatMap(Collection::stream)
-            .mapToLong(t -> t.getGasPrice().toLong())
+            // TODO: currently we omit 1559 transactions from this calculation, what should
+            //       gasPrice() return for this endpoint post-London? (substitute effective gas?)
+            .filter(t -> t.getGasPrice().isPresent())
+            .mapToLong(t -> t.getGasPrice().get().toLong())
             .sorted()
             .toArray();
     return (gasCollection == null || gasCollection.length == 0)","Just a sanity check. Was this TODO supposed to be here? I mean, did we forget to do something or is this a reminder for a future change?",java,1,1,1
"@@ -65,7 +65,17 @@ public enum Varbits
 	/**
 	 * Grand Exchange
 	 */
+	GRAND_EXCHANGE_ITEM_QUANTITY(4396),
+
+	/**
+	 * Type of GE offer currently being created
+	 * 0 = buy
+	 * 1 = sell
+	 */
+	GE_OFFER_CREATION_TYPE(4397),
+
 	GRAND_EXCHANGE_PRICE_PER_ITEM(4398),
+	GRAND_EXCHANGE_SELECTED_SLOT(4439),
 
 	/**
 	 * Runepouch",why? (that goes for all these varbit changes),java,0,0,0
"@@ -37,10 +37,11 @@ import org.junit.Test;
 import org.junit.rules.TemporaryFolder;
 
 public abstract class TestReadProjection {
+
   protected abstract Record writeAndRead(String desc,
-                                         Schema writeSchema,
-                                         Schema readSchema,
-                                         Record record) throws IOException;
+      Schema writeSchema,
+      Schema readSchema,
+      Record record) throws IOException;
 
   @Rule
   public TemporaryFolder temp = new TemporaryFolder();",Can you revert the non-functional changes here? This one and the whitespace one above.,java,1,1,1
"@@ -211,11 +211,16 @@ public final class Helper {
 
     static boolean isSystemLevelClass(ASTUserClass node) {
         List<TypeRef> interfaces = node.getNode().getDefiningType().getCodeUnitDetails().getInterfaceTypeRefs();
+
+        boolean hasWhitelistedInterfaces = false;
         for (TypeRef intObject : interfaces) {
-            return isWhitelisted(intObject.getNames());
+            if (isWhitelisted(intObject.getNames())) {
+                hasWhitelistedInterfaces = true;
+                break;
+            }
         }
 
-        return false;
+        return hasWhitelistedInterfaces;
     }
 
     private static boolean isWhitelisted(List<Identifier> ids) {",`return true` would be cleaner... or am I missing the point of the rule ?,java,1,1,1
"@@ -65,7 +65,10 @@ public class HANAStructureAssistant extends JDBCStructureAssistant<JDBCExecution
         GenericSchema parentSchema = parentObject instanceof GenericSchema ? (GenericSchema) parentObject : null;
 
         if (objectType == RelationalObjectType.TYPE_TABLE)
-            findTablesByMask(session, parentSchema, objectNameMask, caseSensitive, maxResults, result);
+        	/* 
+        	 * A TYPE_TABLE is requested in any kind of select statement. Hence it should return tables, views and (public) synonyms
+        	 */
+        	findObjectsByMask(session, parentSchema, objectNameMask, caseSensitive, maxResults, result);
         if (objectType == RelationalObjectType.TYPE_VIEW)
             findViewsByMask(session, parentSchema, objectNameMask, caseSensitive, maxResults, result);
         if (objectType == RelationalObjectType.TYPE_PROCEDURE)","The object types are choosen in the 'DB metadata' search dialog, so here should not find other types. If searching without schema might be ok to include synonyms with correct target object type in the result. A completely different solution would be adding 'Synonym' as searchable object type.",java,1,1,1
"@@ -0,0 +1,14 @@
+/**
+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html
+ */
+
+package net.sourceforge.pmd.util.fxdesigner.model;
+
+/** Exception during XPath evaluation. */
+public class XPathEvaluationException extends RuntimeException {
+
+    XPathEvaluationException(Throwable cause) {
+        super(cause);
+    }
+
+}",is package-private the intended visibility? or you just missed the access modifier?,java,1,1,1
"@@ -243,6 +243,12 @@ public class AddProductActivity extends AppCompatActivity {
         final State state = (State) getIntent().getSerializableExtra(""state"");
         offlineSavedProduct = (OfflineSavedProduct) getIntent().getSerializableExtra(""edit_offline_product"");
         Product mEditProduct = (Product) getIntent().getSerializableExtra(""edit_product"");
+
+        if(getIntent().getBooleanExtra(""perform_ocr"",false)) {
+            this.onPageSelected(1);
+            this.performOCR(mEditProduct.getCode(), ""ingredients_"" + mEditProduct.getLang());
+        }
+
         if (state != null) {
             mProduct = state.getProduct();
             // Search if the barcode already exists in the OfflineSavedProducts db",Always include a screenshot when a PR makes visual changes.,java,1,1,1
"@@ -180,6 +180,8 @@ public class SalesforceSDKManagerWithSmartStore extends SalesforceSDKManager {
     		if (userAccount != null && hasSmartStore(userAccount)) {
     			DBOpenHelper.deleteDatabase(getAppContext(), userAccount);
     		}
+    	} else {
+    		DBOpenHelper.deleteAllDatabases(getAppContext());
     	}
 
         /*",Cleaning up everything in the `Forgot Passcode` use case.,java,1,1,1
"@@ -230,4 +230,4 @@ public class Login {
 			return 1; // L: 1317
 		}
 	}
-}
+}",Revert this file,java,1,1,0
"@@ -173,7 +173,7 @@ public class BrowserActivity extends Activity implements SessionStore.SessionCha
             final MyGeckoViewPermission permission = new MyGeckoViewPermission();
             permission.androidPermissionRequestCode = REQUEST_PERMISSIONS;
             mGeckoSession.setPermissionDelegate(permission);
-            uriValue = (uri != null ? uri.toString() : SessionStore.DEFAULT_URL);
+            uriValue = (uri != null ? uri.toString() : SessionStore.get().getHomeUri());
             Log.e(LOGTAG, ""BrowserActivity create session and load URI from intent: "" + uriValue);
             mGeckoSession.loadUri(uriValue);
             mGeckoView.setSession(mGeckoSession);","Yep, we will never get a region upon first run after install unless we use something like postMessage. You will get updated region info after the geolocation request finishes in subsequest home reloads/app launches though (after adding the setRegion call to onGeolocationRequestSuccess)",java,1,1,1
"@@ -29,12 +29,18 @@ import java.util.Collection;
 import java.util.Collections;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.LinkedBlockingDeque;
+import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
-import java.util.concurrent.locks.ReentrantLock;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
 import java.util.function.Function;
 
 import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Stopwatch;
+import com.google.common.util.concurrent.ThreadFactoryBuilder;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.apache.tuweni.bytes.Bytes;","Experimentally determined a while ago. Since the rocks db default lock timeout is 1000ms, I aimed for a flush size that was as big as possible that completes in under 500ms",java,1,1,0
"@@ -220,7 +220,7 @@ class JsGenerator : public BaseGenerator {
        it != sorted_namespaces.end(); it++) {
     if (lang_.language == IDLOptions::kTs) {
       if (it->find('.') == std::string::npos) {
-        code += ""import { flatbuffers } from \""./flatbuffers\""\n"";
+        code += ""import { flatbuffers } from \""flatbuffers\""\n"";
         break;
       }
     } else {",Why is this? What effect will this have on other users? @krojew @JoshGalvin,java,0,0,0
"@@ -21,7 +21,11 @@ import java.util.Collection;
 
 /**
  * Provides relevant data for producing metrics on the status of a Proof of Authority (PoA) node.
+ *
+ * @deprecated This interface has been replaced by {@link
+ *     org.hyperledger.besu.plugin.services.query.PoaQueryService}
  */
+@Deprecated
 public interface PoAMetricsService {
 
   /**","nit: Can we check if we're using `PoA` or `Poa` to make sure these new APIs match. I think `Poa` is strictly right according to the style guide but looks really weird to me - I'd expect `PoA`. I can live with it either way, just want to minimise inconsistency.",java,1,1,1
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -18,17 +18,7 @@ package org.apache.solr.handler;
 
 import java.io.IOException;
 import java.lang.invoke.MethodHandles;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Locale;
-import java.util.Map;
-import java.util.Set;
+import java.util.*;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutionException;
 import java.util.concurrent.ExecutorService;","I've had this happen recently with IntelliJ, was this intentional?",java,0,1,0
"@@ -551,7 +551,8 @@ class CppGenerator : public BaseGenerator {
       if (opts_.generate_object_based_api) {
         // A convenient root unpack function.
         auto native_name =
-            NativeName(WrapInNameSpace(struct_def), &struct_def, opts_);
+            WrapInNameSpace(struct_def.defined_namespace,
+                            NativeName(Name(struct_def), &struct_def, opts_));
         code_.SetValue(""UNPACK_RETURN"",
                        GenTypeNativePtr(native_name, nullptr, false));
         code_.SetValue(""UNPACK_TYPE"",","This construction `WrapInNameSpace(ns, NativeName(Name(),...)` repeated 4 times. It would be better to add a shortcut for it.",java,1,1,1
"@@ -105,8 +105,7 @@ public class RegionStoreClient extends AbstractGRPCClient<TikvBlockingStub, Tikv
   // lockResolverClient, after implements the
   // write implementation of tispark, we can change
   // it to private
-  @VisibleForTesting
-  public final LockResolverClient lockResolverClient;
+  @VisibleForTesting public final LockResolverClient lockResolverClient;
   private TikvBlockingStub blockingStub;
   private TikvStub asyncStub;
 ",please undo this change,java,1,1,0
"@@ -0,0 +1,17 @@
+/**
+ * BSD-style license; for more info see http://pmd.sourceforge.net/license.html
+ */
+
+package net.sourceforge.pmd.lang.plsql.ast;
+
+import org.junit.Test;
+
+import net.sourceforge.pmd.lang.plsql.AbstractPLSQLParserTst;
+
+public class ParsingExclusionTest extends AbstractPLSQLParserTst {
+
+    @Test
+    public void parseParsingExclusion() {
+        plsql.parseResource(""ParsingExclusion.sql"");
+    }
+}","I think, we should somehow verify that the AST doesn't contain the excluded elements. In the future, we might improve the parser, so that it can parse scalar subqueries in where conditions.... maybe it's easier to just write really invalid SQL that will be skipped by PMD to verify, it is indeed being skipped....",java,1,1,1
"@@ -705,7 +705,8 @@ public class AzkabanWebServer extends AzkabanServer {
 
   private void startWebMetrics() throws Exception {
 
-    final MetricRegistry registry = MetricsManager.INSTANCE.getRegistry();
+    final MetricRegistry registry = SERVICE_PROVIDER.getInstance(MetricsManager.class)
+        .getRegistry();
 
     // The number of idle threads in Jetty thread pool
     MetricsUtility",Why not just get the MetricsRegistry directly?,java,1,1,1
"@@ -118,6 +118,7 @@ class ConfigScreenComponent extends BaseScreenComponent {
 					const files = await shim.fsDriver().readDirStats(Setting.value('resourceDir'));
 
 					for (const file of files) {
+						if (file.path == 'pluginAssets') continue;
 						const source = `${Setting.value('resourceDir')}/${file.path}`;
 						const dest = `${this.state.profileExportPath}/resources/${file.path}`;
 						reg.logger().info(`Copying profile: ${source} => ${dest}`);",A better fix would be to recursively copy all files and folders. I think there's an option on readDirStats for that,js,1,1,1
"@@ -48,6 +48,7 @@ describe( 'Plugin Activation Notice', () => {
 		await activateSiteKit();
 
 		await page.waitForSelector( '.googlesitekit-activation' );
+		await page.waitForSelector( 'h3.googlesitekit-activation__title' );
 
 		await expect( page ).toMatchElement( 'h3.googlesitekit-activation__title', { text: 'Congratulations, the Site Kit plugin is now activated.' } );
 ",Let's remove the `h3` from this selector (and below) and rely on the class only. The specific element isn't really important and will make the test fail unnecessarily should that change in the future.,js,1,1,1
"@@ -42,17 +42,6 @@ function missingRequiredChildren(virtualNode, role, required, ownedRoles) {
 
   // combobox exceptions
   if (isCombobox) {
-    // remove 'textbox' from missing roles if combobox is a native
-    // text-type input or owns a 'searchbox'
-    const textTypeInputs = ['text', 'search', 'email', 'url', 'tel'];
-    if (
-      (virtualNode.props.nodeName === 'input' &&
-        textTypeInputs.includes(virtualNode.props.type)) ||
-      ownedRoles.includes('searchbox')
-    ) {
-      required = required.filter(requiredRole => requiredRole !== 'textbox');
-    }
-
     // combobox only needs one of [listbox, tree, grid, dialog] and
     // only the type that matches the aria-popup value. remove
     // all the other popup roles from the list of required",All of this special case should probably be removed. We don't want to check for required owned elements.,js,1,1,1
"@@ -1924,7 +1924,10 @@ describe('Change Streams', function () {
     });
 
     it('when invoked using eventEmitter API', {
-      metadata: { requires: { topology: 'replicaset', mongodb: '>=3.6' } },
+      metadata: {
+        requires: { topology: 'replicaset', mongodb: '>=3.6' },
+        sessions: { skipLeakTests: true }
+      },
       test: function (done) {
         let closed = false;
         const close = _err => {","Note, this test was leaking a session for me locally. Looks like this is because the client can close in the `afterEach` hook before the `changeStream.close` completes. This seems acceptable, so I skipped the leak checker on this test.",js,1,1,1
"@@ -47,6 +47,7 @@ public interface CapabilityType {
   String ELEMENT_SCROLL_BEHAVIOR = ""elementScrollBehavior"";
   String HAS_TOUCHSCREEN = ""hasTouchScreen"";
   String OVERLAPPING_CHECK_DISABLED = ""overlappingCheckDisabled"";
+  String ENABLE_DOWNLOADING = ""chromium:enableDownloading"";
 
   String LOGGING_PREFS = ""loggingPrefs"";
 ",The name `enableDownloading` implies this is a boolean capability. How about `downloadDir`?,js,1,1,1
"@@ -0,0 +1,8 @@
+'use strict';
+function getDefaultOptionSetter(type) {
+  return function setDefaultOption(optionName, value) {
+    type.defaultOptions[optionName] = value;
+  };
+}
+
+module.exports = getDefaultOptionSetter;",Why is this function necessary? Seems like a lot of work to avoid copying a one-liner. Especially since you could just define `set()` as a function on SchemaType.prototype.,js,1,1,1
"@@ -30,7 +30,12 @@ const start = (buildConfig = config.defaultBuildConfig, options) => {
   }
 
   if (process.platform === 'darwin') {
-    util.run(path.join(config.outputDir, 'Brave.app', 'Contents', 'MacOS', 'Brave'), braveArgs, cmdOptions)
+    let product_name = 'Brave-Browser'
+    if (config.channel) {
+      // Capitalize channel name and append it to make product name like Brave-Browser-Beta
+      product_name = product_name + '-' + config.channel.charAt(0).toUpperCase() + config.channel.slice(1)
+    }
+    util.run(path.join(config.outputDir, product_name + '.app', 'Contents', 'MacOS', product_name), braveArgs, cmdOptions)
   } else if (process.platform === 'win32') {
     util.run(path.join(config.outputDir, 'brave.exe'), braveArgs, cmdOptions)
   } else {","this is fine to merge, but I think it probably makes sense to move this logic to config.js",js,1,1,1
"@@ -123,7 +123,8 @@ class SearchScreenComponent extends BaseScreenComponent {
 
 		if (!this.isMounted_) return;
 
-		const parsedQuery = await SearchEngine.instance().parseQuery(query);
+		// ignore brackets when finding words to highlight
+		const parsedQuery = await SearchEngine.instance().parseQuery(query.replace(/[()]/g, ' '));
 		const highlightedWords = SearchEngine.instance().allParsedQueryTerms(parsedQuery);
 
 		this.props.dispatch({","This regex shows up 4 times in the code. Instead, could you create a specific function that returns what you need. I can't think of any good name for it, but maybe even ""parseQueryNoBrackets"" would be better. Then this of course would call `parseQuery` internally.",js,1,1,1
"@@ -200,7 +200,7 @@ public class JsonHttpRemoteConfig {
     }
   }
 
-  private UrlMapper getUrlMapper(String method) {
+  protected UrlMapper getUrlMapper(String method) {
     if (""DELETE"".equals(method)) {
       return deleteMapper;
     } else if (""GET"".equals(method)) {","You don't need to expose this method to do what you want. There are already public addNewGetMapping, addNewPostMapping, and addNewDeleteMapping methods.",js,1,1,1
"@@ -360,6 +360,8 @@ function addNodeToGrid(grid, vNode) {
     const endRow = ((y + rect.height) / gridSize) | 0;
     const endCol = ((x + rect.width) / gridSize) | 0;
 
+    grid._numCols = Math.max(grid._numCols ?? 0, endCol);
+
     for (let row = startRow; row <= endRow; row++) {
       grid.cells[row] = grid.cells[row] || [];
 ","This feels a little off. If `_numCols` needs to be different, it should be fixed where that value is set. If it doesn't need to be changed, this should probably just be a local variable.",js,1,1,1
"@@ -123,6 +123,18 @@ SchemaArray.prototype.applyGetters = function (value, scope) {
 
 SchemaArray.prototype.cast = function (value, doc, init) {
   if (Array.isArray(value)) {
+
+    if (!value.length) {
+      var indexes = doc.schema.indexedPaths();
+
+      for (var i = 0, l = indexes.length; i < l; ++i) {
+        var pathIndex = indexes[i][0][this.path];
+        if ('2dsphere' === pathIndex || '2d' === pathIndex) {
+          return;
+        }
+      }
+    }
+
     if (!(value instanceof MongooseArray)) {
       value = new MongooseArray(value, this.path, doc);
     }",we could go even farther and cache this too to avoid the loop.,js,1,1,1
"@@ -111,7 +111,7 @@ export function getDomSibling(vnode, childIndex) {
 			// Since updateParentDomPointers keeps _dom pointer correct,
 			// we can rely on _dom to tell us if this subtree contains a
 			// rendered DOM node, and what the first rendered DOM node is
-			return sibling._dom;
+			return sibling._component ? sibling._component.base : sibling._dom;
 		}
 	}
 ","Hi! (Popping in from vacation   for a moment  . I have limited internet so I'll be away, so don't wait for me) My thinking when playing with this method last was that `_dom` was the source of truth and that `c.base` was just a reflection of that value (perhaps one day it is a getter property). Is there a situation where `v._component.base != v._dom`? Perhaps we should fix the code that updates `c.base` and not `v._dom` (assuming my understanding is anywhere near close to meaningful  )?",js,1,0,1
"@@ -46,7 +46,9 @@ public class HTMLTestResults {
   private final HTMLSuiteResult suite;
 
   private static final String HEADER = ""<html>\n"" +
-      ""<head><style type='text/css'>\n"" +
+      ""<head>\n""+
+      ""<meta charset=\""UTF-8\"">\n""+
+      ""<style type='text/css'>\n"" +
       ""body, table {\n"" +
       ""    font-family: Verdana, Arial, sans-serif;\n"" +
       ""    font-size: 12;\n"" +","Is there a recommended quote style for attributes? I see single and double here, double further down.",js,1,1,1
"@@ -286,7 +286,7 @@ class TextEditor extends BaseEditor {
     // TD is outside of the viewport.
     if (!this.TD) {
       if (!force) {
-        this.close();
+        this.close(); // TODO shouldn't it be this.finishEditing() ?
       }
 
       return;","I guess these issues are related: #3557, #3656 and definitely to do on a separated branch.",js,0,1,1
"@@ -281,7 +281,7 @@ class Event {
 
       priv.dblClickTimeout[1] = setTimeout(() => {
         priv.dblClickOrigin[1] = null;
-      }, 500);
+      }, 1000);
     }
   }
 ","`1s` as a delay for double click for some users can be a huge difference. Especially when some of them have set (in the OS settings) short delays between clicks. In that case, the table can be perceived as standing out in behavior from the other components or so - which is bad. I wouldn't change that delay. Maybe rewriting it to use the native `dblclick` event could resolve the problem with the delay. Then the touch event could be supported differently? CC @wojciechczerniak",js,0,0,1
"@@ -24,7 +24,9 @@ describe('mongodb+srv', function () {
         test[1].comment = test[0];
       }
 
-      it(test[1].comment, {
+      // TODO: Remove with NODE-3011
+      const maybeIt = test[1].comment.includes('loadBalanced') ? it.skip : it.only;
+      maybeIt(test[1].comment, {
         metadata: { requires: { topology: ['single'] } },
         test: function (done) {
           try {",is .only actually what we want here? not just plain `it`?,js,1,0,1
"@@ -37,9 +37,13 @@ function query(server, ns, cmd, cursorState, options, callback) {
 
   // If we have explain, we need to rewrite the find command
   // to wrap it in the explain command
-  const explain = Explain.fromOptions(options);
-  if (explain) {
-    findCmd = decorateWithExplain(findCmd, explain);
+  try {
+    const explain = Explain.fromOptions(options);
+    if (explain) {
+      findCmd = decorateWithExplain(findCmd, explain);
+    }
+  } catch (err) {
+    return callback(err);
   }
 
   // NOTE: This actually modifies the passed in cmd, and our code _depends_ on this","NODE-3377 Totally expanding scope here but we're validating too strictly here, this could be a quick fix that goes in this PR, we just need to assert string or boolean.",js,0,1,1
"@@ -93,6 +93,10 @@ function setup(logs) {
                 },
         });
 
+       process.on('SIGUSR2', function () {
+               log.reopenFileStreams();
+       });
+
         module.exports.logger = logger;
 }
 ","Check the linting is failing, `log` is not defined. you can run locally `npm run lint` to double check.",js,1,1,1
"@@ -133,6 +133,15 @@ storiesOf( 'Tag Manager Module/Settings', module )
 
 		return <Settings isOpen={ true } isEditing={ true } registry={ registry } />;
 	} )
+	.add( 'Edit, with ""Set up a new container""', ( registry ) => {
+		const webContainerVersion = fixtures.liveContainerVersions.web.gaWithVariable;
+		const accountID = webContainerVersion.accountId; // eslint-disable-line sitekit/camelcase-acronyms
+
+		registry.dispatch( STORE_NAME ).receiveGetAccounts( fixtures.accounts );
+		registry.dispatch( STORE_NAME ).receiveGetContainers( [], { accountID } );
+
+		return <Settings isOpen={ true } isEditing={ true } registry={ registry } />;
+	} )
 	.add( 'Edit, with all settings, with existing tag (with access)', ( registry ) => {
 		// eslint-disable-next-line sitekit/camelcase-acronyms
 		const accountID = fixtures.accounts[ 0 ].accountId;","Hah, just noticed that here (and elsewhere in this file) we're using `isOpen={ true }` rather than just `isOpen`. Hardly a big deal, but I'm surprised ESLint didn't warn us-I thought a lot of ESLint rules prefer boolean props to omit the `={ true }` part.  ",js,1,1,1
"@@ -0,0 +1,11 @@
+const fs = require(""fs"")
+
+const filePath = process.cwd()
+
+fs.appendFile(
+  `${filePath}/app/types.ts`,
+  ""declare module 'react' { interface StyleHTMLAttributes<T> extends React.HTMLAttributes<T> { jsx?: boolean; global?: boolean }}"",
+  function (err) {
+    if (err) throw err
+  },
+)","Is there a reason why it's a script? I mean, could we have a function, e.g. `const appendModuleDeclaration = () => {...}` and call it from within the test?",js,1,1,1
"@@ -12,12 +12,12 @@ var MongooseError = require('../error.js');
  */
 
 function MissingSchemaError (name) {
-  var msg = 'Schema hasn\'t been registered for model ""' + name + '"".\n'
-          + 'Use mongoose.model(name, schema)';
+  var msg = 'Schema hasn\'t been registered for document.\n'
+          + 'Use mongoose.Document(name, schema)';
   MongooseError.call(this, msg);
   Error.captureStackTrace && Error.captureStackTrace(this, arguments.callee);
   this.name = 'MissingSchemaError';
-};
+}
 
 /*!
  * Inherits from MongooseError.",Error message will be confusing on nodejs side. Perhaps we need a separate MissingSchemaError for client side.,js,1,1,1
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -237,10 +237,6 @@ define([""appSettings"", ""browser"", ""events"", ""htmlMediaHelper"", ""webSettings""], f
             features.push(""voiceinput"");
         }
 
-        if (!browser.tv && !browser.xboxOne) {
-            browser.ps4;
-        }
-
         if (supportsHtmlMediaAutoplay()) {
             features.push(""htmlaudioautoplay"");
             features.push(""htmlvideoautoplay"");",What was this even doing?,js,1,0,0
"@@ -119,10 +119,10 @@ public class Standalone implements CliCommand {
       LoggingOptions loggingOptions = new LoggingOptions(config);
       loggingOptions.configureLogging();
 
-      LOG.info(""Logging configured."");
+      LOG.finest(""Logging configured."");
 
       DistributedTracer tracer = loggingOptions.getTracer();
-      LOG.info(""Using tracer: "" + tracer);
+      LOG.finest(""Using tracer: "" + tracer);
       GlobalDistributedTracer.setInstance(tracer);
 
       EventBusConfig events = new EventBusConfig(config);","Again. This is part of the start up of the server, and the diagnostics are helpful.",js,0,1,1
"@@ -747,8 +747,9 @@
        * @param {Grid} grid grid object
        * @param {GridColumn} column the column we want to aggregate
        * @param {string} aggregationType of the recognised types from uiGridGroupingConstants or one of the custom aggregations from gridOptions
+       * @param {string} aggregationLabel to be used instead of the default label. If empty string is passed, label is omitted
        */
-      aggregateColumn: function( grid, column, aggregationType) {
+      aggregateColumn: function( grid, column, aggregationType, aggregationLabel ) {
         if (typeof(column.grouping) !== 'undefined' && typeof(column.grouping.groupPriority) !== 'undefined' && column.grouping.groupPriority >= 0) {
           service.ungroupColumn( grid, column );
         }","I couldn't help but notice that you said that ""[i]f empty string is passed, label is omitted"", Is the point of this to add a way for users to be able to hide the label on the aggregate column by passing an empty string?",js,1,1,1
"@@ -56,7 +56,7 @@ TemplateUtils.loadTemplates = async function(filePath) {
 		});
 	}
 
-	return templates;
+	return templates.sort((a, b) => { return a.label.localeCompare(b.label); });
 };
 
 module.exports = TemplateUtils;",Shouldn't we sort in a case insensitive way? (not sure if localeCompare does this),js,1,1,1
"@@ -33,13 +33,13 @@ export function createComponent(Ctor, props, context) {
 		inst;
 
 	if (Ctor.prototype && Ctor.prototype.render) {
-		inst = new Ctor(props, context);
+		inst = new /** @type {(props, context) => void} */(Ctor)(props, context);
 		Component.call(inst, props, context);
 	}
 	else {
 		inst = new Component(props, context);
 		inst.constructor = Ctor;
-		inst.render = doRender;
+		inst['render'] = doRender;
 	}
 
 ",This seems strange to me. @rbiggs Can you elaborate on the thinking behind it?,js,0,1,0
"@@ -113,6 +113,10 @@ class FsDriverRN extends FsDriverBase {
 		return RNFS.readFile(path, encoding);
 	}
 
+	async readDir(path) {
+		return RNFS.readDir(path).map(e => e.name);
+	}
+
 	// Always overwrite destination
 	async copy(source, dest) {
 		let retry = false;","As `readDirStats` can be used, we won't need this function anymore.",js,1,1,1
"@@ -106,7 +106,7 @@ public class BaseServer<T extends BaseServer> implements Server<T> {
       FilterHolder
           filterHolder = servletContextHandler.addFilter(CrossOriginFilter.class, ""/*"", EnumSet
           .of(DispatcherType.REQUEST));
-      filterHolder.setInitParameter(""allowedOrigins"", ""*"");
+      filterHolder.setInitParameter(""allowedMethods"", ""GET,POST,PUT,DELETE,HEAD"");
 
       // Warning user
       LOG.warning(""You have enabled CORS requests from any host. ""","Because the default value of allowedOrigins is * (all origins), so it isn't necessary to set again at all.",js,1,1,1
"@@ -225,7 +225,7 @@ class ColumnSorting extends BasePlugin {
 
     if (sortPossible) {
       const translateColumnToPhysical = ({ column: visualColumn, ...restOfProperties }) =>
-        ({ column: this.hot.toPhysicalColumn(visualColumn), ...restOfProperties });
+        ({ column: this.hot.renderedToPhysicalColumn(visualColumn), ...restOfProperties });
       const internalSortStates = arrayMap(destinationSortConfigs, columnSortConfig => translateColumnToPhysical(columnSortConfig));
 
       this.columnStatesManager.setSortStates(internalSortStates);","I don't see why this should be translated from `rendered` indexes. `sortConfig` should be consistent with any other public API and use visual indexes. Even if some columns are hidden they can be sorted from API, or sorted prior to hiding them.",js,1,1,1
"@@ -2,12 +2,14 @@ const http = require('http');
 const cluster = require('cluster');
 const formidable = require('formidable');
 const os = require('os');
+const fs = require('fs');
 const countlyConfig = require('./config', 'dont-enclose');
 const plugins = require('../plugins/pluginManager.js');
 const jobs = require('./parts/jobs');
 const log = require('./utils/log.js')('core:api');
 const common = require('./utils/common.js');
 const {processRequest} = require('./utils/requestProcessor');
+const versionInfo = require('../frontend/express/version.info');
 
 var t = [""countly:"", ""api""];  
 ","This is not a Promise, no need to reject, just log error",js,1,1,1
"@@ -46,6 +46,18 @@ function virtualDOMfromNode(node, shadowId) {
 				);
 			}
 			return vNodeCache._tabbableElements;
+		},
+
+		// abstract Node and Element APIs so we can run axe in DOM-less
+		// environments. these are static properties in the assumption
+		// that axe does not change any of them while it runs.
+		elementNodeType: node.nodeType,
+		elementNodeName: node.nodeName,
+		elementClassName: node.className,
+		elementId: node.id,
+
+		elementGetAttribute(attrName) {
+			return node.getAttribute(attrName);
 		}
 	};
 	axe._cache.get('nodeMap').set(node, vNode);","I think we should normalise this, do a `.toLowerCase()` here.",js,1,1,1
"@@ -27,7 +27,7 @@ import org.openqa.selenium.internal.Locatable;
  */
 public abstract class SingleKeyAction extends KeysRelatedAction {
   protected final Keys key;
-  private static final Keys[] MODIFIER_KEYS = {Keys.SHIFT, Keys.CONTROL, Keys.ALT};
+  private static final Keys[] MODIFIER_KEYS = {Keys.SHIFT, Keys.CONTROL, Keys.ALT, Keys.META, Keys.COMMAND, Keys.LEFT_ALT, Keys.LEFT_CONTROL, Keys.LEFT_SHIFT};
 
   protected SingleKeyAction(Keyboard keyboard, Mouse mouse, Keys key) {
     this(keyboard, mouse, null, key);","LEFT_ALT, LEFT_CONTROL, and LEFT_SHIFT should already be aliases. META could be an alias for ALT but probably isn't yet.",js,1,1,1
"@@ -1,2 +1,9 @@
-/** Virtual DOM Node */
+/**
+ * Virtual DOM Node
+ * @typedef VNode
+ * @property {string | Function} nodeName The string of the DOM node to create or Component constructor to render
+ * @property {Array<VNode | string>} children The children of node
+ * @property {string | number | undefined} key The key used to identify this VNode in a list
+ * @property {object} attributes The properties of this VNode
+ */
 export function VNode() {}",We should use either `undefined` or `void` throughout all our docs,js,1,1,1
"@@ -1731,5 +1731,15 @@ $(document).ready(function() {
             app.addMenu(""management"", {code: ""plugins"", url: ""#/manage/plugins"", text: ""plugins.title"", icon: '<div class=""logo-icon fa fa-puzzle-piece""></div>', priority: 30});
         }
         app.addMenu(""management"", {code: ""configurations"", url: ""#/manage/configurations"", text: ""plugins.configs"", icon: '<div class=""logo-icon ion-android-options""></div>', priority: 40});
+
+        var isCurrentHostnameIP = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(window.location.hostname);
+        if (!isCurrentHostnameIP && countlyGlobal.domain === """") {
+            countlyPlugins.updateConfigs({""api"": {""domain"": window.location.hostname}}, function(err) {
+                if (err) {
+                    // throw err
+                    console.log('An error has occurred: ', err);
+                }
+            });
+        }
     }
 });",Eslint was complaining about this line. Normally we do it like that: 1)If error happens after user action - we show styled notification. 2)If it happens in background - then we just ignore it silently. (So do not log it in console),js,1,1,1
"@@ -52,7 +52,8 @@ describe('preconditions', function() {
       $.checkArgumentType(1, PrivateKey);
     } catch (e) {
       error = e;
-      e.message.should.equal('Invalid Argument for (unknown name), expected PrivateKey but got number');
+      var fail = !(~e.message.indexOf('Invalid Argument for (unknown name)'));
+      fail.should.equal(false);
     }
     should.exist(error);
   });",what is `e.message` in other browsers? I'm worried this assertion is failing there,js,1,1,1
"@@ -5,7 +5,7 @@ if (ariaHeadingLevel !== null) {
 	return true;
 }
 
-var headingLevel = node.tagName.match(/H(\d)/);
+var headingLevel = node.nodeName.match(/H(\d)/);
 
 if (headingLevel) {
 	this.data(parseInt(headingLevel[1], 10));",do you need `toUpperCase()` here?,js,1,1,0
"@@ -19848,4 +19848,4 @@ var reactDom = ReactDOM$3.default || ReactDOM$3;
 
 return reactDom;
 
-})));
+})));",Why would this file have changed?,js,1,1,0
"@@ -21,7 +21,7 @@ import options from '../options';
  * @param {import('../internal').Component | null} ancestorComponent The direct
  * parent component
  */
-export function diff(dom, parentDom, newVNode, oldVNode, context, isSvg, excessDomChildren, mounts, ancestorComponent) {
+export function diff(dom, parentDom, newVNode, oldVNode, context, isSvg, excessDomChildren, mounts, ancestorComponent, force) {
 
 	// If the previous type doesn't match the new type we drop the whole subtree
 	if (oldVNode==null || newVNode==null || oldVNode.type!==newVNode.type) {",The JSDoc block of `diff()` needs to be updated for the new parameter,js,1,1,1
"@@ -41,7 +41,7 @@ class MergedCellsCollection {
    * @return {String}
    */
   static IS_OVERLAPPING_WARNING(newMergedCell) {
-    return toSingleLine`The merged cell declared at [${newMergedCell.row}, ${newMergedCell.col}] overlaps with the other declared merged 
+    return toSingleLine`The merged cell declared at [${newMergedCell.row}, ${newMergedCell.col}] overlaps with the other declared merged
       cell. The overlapping merged cell was not added to the table, please fix your setup.`;
   }
 ","The space between ""merged"" and ""cell"" shouldn't be removed, after this change the warning contains merged words. `The merged cell declared at [29, 1] overlaps with the other declared mergedcell. The overlapping merged cell was not added to the table, please fix your setup.`",js,1,1,1
"@@ -74,7 +74,7 @@ function DateRangeSelector() {
 	const handleMenuItemSelect = useCallback( ( index ) => {
 		setDateRange( Object.values( ranges )[ index ].slug );
 		setMenuOpen( false );
-	}, [ handleMenu ] );
+	}, [ ranges, setDateRange ] );
 
 	const currentDateRangeLabel = ranges[ dateRange ]?.label;
 	const menuItems = Object.values( ranges ).map( ( range ) => range.label );","Shame, I'd have expected it to know the dispatch functions (eg `setDateRange`) shouldn't ever change. Maybe it's only smart enough to do that with actual Redux and not WP Data. But it's no biggie!  ",js,1,1,1
"@@ -0,0 +1,11 @@
+const path = require('path');
+
+module.exports = {
+	mode: 'development',
+  watch: true,
+	entry: './lib/index.js',
+	output: {
+		path: path.resolve(__dirname, 'dist'),
+		filename: 'axe.js'
+	}
+};","Please feel free to suggest / write a better Webpack config, I'm still new to it.",js,0,1,0
"@@ -90,3 +90,18 @@ Blockly.Blocks['math_positive_number'] = {
     this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);
   }
 };
+
+Blockly.Blocks['math_angle'] = {
+  /**
+   * Block for angle picker.
+   * @this Blockly.Block
+   */
+  init: function() {
+    this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);
+    this.setColour(Blockly.Blocks.math.HUE);
+    this.appendDummyInput()
+        .appendField(new Blockly.FieldAngle('90'), 'NUM');
+    this.setOutput(true, 'Number');
+    this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);
+  }
+};",Prefer jsonInit--everything here should be doable with json.,js,1,1,1
"@@ -0,0 +1,15 @@
+/* global axe */
+/**
+ * Convenience function to extract primary language subtag from a given value
+ * @method getBaseLang
+ * @memberof axe.utils
+ * @instance
+ * @param {String} value value specified as lang or xml:lang attribute
+ * @return {String}
+ */
+axe.utils.getBaseLang = function getBaseLang(lang) {
+	return lang
+		.trim()
+		.split('-')[0]
+		.toLowerCase();
+};","This should be on axe.commons, not on `axe.utils`. `axe.utils` is reserved for things necessary in core.",js,1,1,1
"@@ -86,7 +86,7 @@ global._googlesitekitBaseData = {
 	blogPrefix: 'wp_',
 	ampMode: false,
 	isNetworkMode: false,
-	isFirstAdmin: true,
+	isOwner: true,
 	splashURL: 'http://example.com/wp-admin/admin.php?page=googlesitekit-splash',
 	proxySetupURL: 'https://sitekit.withgoogle.com/site-management/setup/?scope=openid%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsiteverification%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fwebmasters%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.manage.users%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit&supports=credentials_retrieval%20short_verification_token%20file_verification&nonce=&site_id=storybooksiteid.apps.sitekit.withgoogle.com',
 	proxyPermissionsURL: 'https://sitekit.withgoogle.com/site-management/permissions/?token=storybooktoken&site_id=storybooksiteid.apps.sitekit.withgoogle.com',",This should probably be kept since it's currently included in `_googlesitekitBaseData`.,js,1,1,1
"@@ -0,0 +1,4 @@
+const title = virtualNode.children.find(({ props }) => {
+	return props.nodeName === 'title';
+});
+return !!title && title.actualNode.textContent.trim() !== '';",Minor nitpick: `title` is a bit confusing as I though it was the actual text of the title and not the virtualNode of the `title` element.,js,1,1,1
"@@ -68,7 +68,9 @@ describe('Server Selection (spec)', function () {
         describe(subType, function () {
           specTests[topologyType][subType].forEach(test => {
             // NOTE: node does not support PossiblePrimary
-            const maybeIt = test.name.match(/Possible/) ? it.skip : it;
+            // TODO: Re-enable LoadBalanced in NODE-3011
+            const maybeIt =
+              test.name.match(/Possible/) || topologyType === 'LoadBalanced' ? it.skip : it;
 
             maybeIt(test.name, function (done) {
               executeServerSelectionTest(test, { checkLatencyWindow: false }, done);",Will re-enable these as part of NODE-3011,js,1,1,0
"@@ -123,6 +123,17 @@ exports.utils = require('./utils.js');
  */
 exports.Document = DocumentProvider();
 
+/**
+ * function stub for model
+ *
+ * @method model
+ * @api public
+ * @return {object} an empty object
+ */
+exports.model = function() {
+  return {};
+};
+
 /*!
  * Module exports.
  */",Why not `return null` or something like that? I'm hesitant to just return an empty object because then it will have an inconsistent and incompatible return type vs `model()` in server land.,js,1,1,1
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -7,11 +7,13 @@ import { diff, mounts, diffLevel, flushMounts, recollectNodeTree, removeChildren
 import { createComponent, collectComponent } from './component-recycler';
 import { removeNode } from '../dom/index';
 
-/** Set a component's `props` (generally derived from JSX attributes).
- *	@param {Object} props
- *	@param {Object} [opts]
- *	@param {boolean} [opts.renderSync=false]	If `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.
- *	@param {boolean} [opts.render=true]			If `false`, no render will be triggered.
+/**
+ * Set a component's `props` and possibly re-render the component
+ * @param {import('../component').Component} component The Component to set props on
+ * @param {object} props The new props
+ * @param {number} opts Render options - specifies how to re-render the component
+ * @param {object} context The new context
+ * @param {boolean} mountAll Whether or not to immediately mount all components
  */
 export function setComponentProps(component, props, opts, context, mountAll) {
 	if (component._disable) return;",Makes we wonder if we should rename `opts` to something like `render mode` or something similar.,js,1,1,1
"@@ -580,6 +580,18 @@ Blockly.Blocks.defaultToolbox = '<xml id=""toolbox-categories"" style=""display: no
         '</shadow>'+
       '</value>'+
     '</block>'+
+    '<block type=""operator_contains"" id=""operator_contains"">'+
+      '<value name=""STRING1"">'+
+        '<shadow type=""text"">'+
+          '<field name=""TEXT"">hello world</field>'+
+        '</shadow>'+
+      '</value>'+
+      '<value name=""STRING2"">'+
+        '<shadow type=""text"">'+
+          '<field name=""TEXT"">hello</field>'+
+        '</shadow>'+
+      '</value>'+
+    '</block>'+
     '<block type=""operator_mod"" id=""operator_mod"">'+
       '<value name=""NUM1"">'+
         '<shadow type=""math_number"">'+","After looking at this in detail, I think we should switch this to `hello` and change the default for `STRING2` to `world` as this boolean reporter looks too long in the category menu.",js,1,1,1
"@@ -156,6 +156,12 @@ class FsDriverRN extends FsDriverBase {
 		handle.offset += length;
 		return output ? output : null;
 	}
+
+	async fileSize(filePath) {
+		const stats = await RNFetchBlob.fs.stat(filePath);
+		return stats.size;
+	}
+
 }
 
 module.exports.FsDriverRN = FsDriverRN;","Same, you don't need to create a new method, you can simply use the existing `stat()` method.",js,0,1,1
"@@ -216,6 +216,18 @@ describe( 'modules/analytics properties', () => {
 				expect( registry.stores[ STORE_NAME ].store.getState().primaryPropertyType ).toBe( type );
 			} );
 		} );
+
+		describe( 'matchPropertyByURL', () => {
+			it( 'should return a correct property that has matching website URL', async () => {
+				const property = await registry.dispatch( STORE_NAME ).matchPropertyByURL( fixtures.propertiesProfiles.properties, 'http://wrhwh.com' );
+				expect( property ).toEqual( fixtures.propertiesProfiles.properties[ 0 ] );
+			} );
+
+			it( 'should return NULL when URL does not match', async () => {
+				const property = await registry.dispatch( STORE_NAME ).matchPropertyByURL( fixtures.propertiesProfiles.properties, 'http://wrongsite.com' );
+				expect( property ).toBeNull();
+			} );
+		} );
 	} );
 
 	describe( 'selectors', () => {",I'd prefer not to use the fixture here if we can as it makes it harder to understand; can we create a little property factory here as a helper so we can see which properties+URLs are involved? Perhaps we should also add a case or two to show that it matches with URL normalization as well?,js,1,1,1
"@@ -54,6 +54,8 @@ describe('Aggregation', function () {
         var collection = db.collection('shouldCorrectlyExecuteSimpleAggregationPipelineUsingArray');
         // Insert the docs
         collection.insertMany(docs, { w: 1 }, function (err, result) {
+          if (err) console.dir(err);
+
           expect(result).to.exist;
           expect(err).to.not.exist;
 ",Is this `console.dir` left over from debugging something?,js,1,1,1
"@@ -837,7 +837,18 @@ class WebDriver(object):
             del png
         return True
 
-    save_screenshot = get_screenshot_as_file
+    def save_screenshot(self, filename):
+        """"""
+        Gets the screenshot of the current window. Returns False if there is
+           any IOError, else returns True. Use full paths in your filename.
+
+        :Args:
+         - filename: The full path you wish to save your screenshot to.
+
+        :Usage:
+            driver.save_screenshot('/Screenshots/foo.png')
+        """"""
+        return self.get_screenshot_as_file(self, filename)
 
     def get_screenshot_as_png(self):
         """"""",This needs to be just return self.get_screenshot_as_file(filename),js,1,1,1
"@@ -435,7 +435,7 @@ describe('ReadConcern', function() {
   });
 
   it('Should set majority readConcern aggregate command but ignore due to out', {
-    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2' } },
+    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2 < 4.1' } },
 
     test: function(done) {
       var listener = require('../..').instrument(function(err) {",I didn't realize we could do this!,js,1,1,0
"@@ -52,7 +52,7 @@
     }
 
     console.log = customLog(console.log.bind(console), document.getElementById(""console-log""));
-    console.debug = customLog(console.log.bind(console), document.getElementById(""console-log""));
+    console.debug = customLog(console.debug.bind(console), document.getElementById(""console-log""));
     console.warn = customLog(console.warn.bind(console), document.getElementById(""console-log""));
     console.error = customLog(console.error.bind(console), document.getElementById(""console-log""));
   </script>",I think this used console.log for compatibility with IE,js,1,1,1
"@@ -607,8 +607,8 @@ function decorateWithCollation(command, target, options) {
  * @param {object} command the command on which to apply the read concern
  * @param {Collection} coll the parent collection of the operation calling this method
  */
-function decorateWithReadConcern(command, coll) {
-  let readConcern = Object.assign({}, command.readConcern || {});
+function decorateWithReadConcern(command, coll, options) {
+  let readConcern = Object.assign({}, command.readConcern || (options ? options.readConcern : {}));
   if (coll.s.readConcern) {
     Object.assign(readConcern, coll.s.readConcern);
   }",I think you can just do `options ? options.readConcern : undefined` to reduce the extra needless allocation,js,1,1,1
"@@ -14,11 +14,12 @@ class Handle {
     /** constructor **/
     constructor() {
         log.i('Starting job handle in %d', process.pid);
-        this.db = manager.singleDefaultConnection();
-        this.classes = {}; // {'job name': Constructor}
-        this.files = {}; // {'ping': '/usr/local/countly/api/jobs/ping.js'}
-        scan(this.db, this.files, this.classes);
-
+        manager.singleDefaultConnection().then((db) => {
+            this.db = db;
+            this.classes = {}; // {'job name': Constructor}
+            this.files = {}; // {'ping': '/usr/local/countly/api/jobs/ping.js'}
+            scan(this.db, this.files, this.classes);
+        });
     }
 
     /**",Why do we still need `manager.singleDefaultConnection`?,js,1,1,1
"@@ -77,8 +77,8 @@ public class LocalNewSessionQueuer extends NewSessionQueuer {
   }
 
   @Override
-  public Optional<HttpRequest> remove() {
-    return sessionRequests.poll();
+  public Optional<HttpRequest> remove(RequestId id) {
+    return sessionRequests.poll(id);
   }
 
   @Override",`poll` and `remove` have different meanings.,js,1,1,0
"@@ -88,7 +88,7 @@ class Uploader {
         this._paused = true
         if (this.tus) {
           const shouldTerminate = !!this.tus.url
-          this.tus.abort(shouldTerminate)
+          this.tus.abort(shouldTerminate).catch(() => {})
         }
         this.cleanUp()
       })","The `abort` function now returns a Promise. And if `shouldTerminate` is true, this Promise can be rejected. So, to avoid a unhandled promise rejection, I added a dummy handler. Since a possible error also wasn't handled before, I think it's OK to not handle it in this case as well.",js,1,1,1
"@@ -0,0 +1,14 @@
+/**
+ * External dependencies
+ */
+import { storiesOf } from '@storybook/react';
+
+/**
+ * Internal dependencies
+ */
+import UserInputApp from '../assets/js/components/user-input/UserInputApp';
+
+storiesOf( 'User Input', module )
+	.add( 'User Input Page', () => {
+		return <UserInputApp />;
+	} );","While this component doesn't use the datastore yet since it's just scaffolded, let's already wrap this in a `WithDataRegistry` component, to which we can pass a default registry created via `createTestRegistry()`.",js,1,1,1
"@@ -1,8 +1,12 @@
 import { options, Fragment, Component } from 'preact';
 
 export function initDevTools() {
-	if (typeof window != 'undefined' && window.__PREACT_DEVTOOLS__) {
-		window.__PREACT_DEVTOOLS__.attachPreact('10.4.1', options, {
+	const hook =
+		typeof window != 'undefined' &&
+		(window.__PREACT_DEVTOOLS__ || window.parent.__PREACT_DEVTOOLS__);
+
+	if (hook) {
+		hook.attachPreact('10.4.1', options, {
 			Fragment,
 			Component
 		});","kinda wondering if we could import the version from `package.json` and then inline during build, but not relevant for this PR",js,0,1,1
"@@ -5,7 +5,7 @@ describe('color-contrast code highlighting test', function() {
   function run(done) {
     axe.run(
       '#fixture',
-      { runOnly: { type: 'rule', values: ['color-contrast'] } },
+      { runOnly: { type: 'rule', values: ['color-contrast-enhanced', 'color-contrast'] } },
       function(err, r) {
         assert.isNull(err);
         results = r;","For clarity, I prefer we give color-contrast-enhanced its own set of integration tests, focused specifically on showing the higher contrast values are properly applied. This PR has no test that shows that a test with 6:1 fails this rule for example.",js,0,1,1
"@@ -556,14 +556,15 @@ describe('Cursor', function() {
           }
 
           function finished() {
-            collection.find(function(err, cursor) {
-              test.equal(null, err);
+            (function() {
+              const cursor = collection.find();
+
               test.throws(function() {
                 cursor.each();
               });
 
               client.close(done);
-            });
+            })();
           }
 
           insert(function() {",Why the IIFEs here? Are you trying to control variables? They should be lexically scoped since you're using `const`,js,1,1,1
"@@ -35,7 +35,7 @@ export function render(vnode, parent, callback) {
 	preactRender(vnode, parent);
 	if (typeof callback == 'function') callback();
 
-	return vnode ? vnode._component : null;
+	return vnode ? parent._children._component : null;
 }
 
 export function hydrate(vnode, parent, callback) {",I think this is erroneous atm since we'll be returning the fragment,js,1,1,1
"@@ -19,4 +19,6 @@ exports.Date = require('./date');
 
 exports.ObjectId = require('./objectid');
 
+exports.ObjectId = require('./dbref');
+
 exports.Mixed = require('./mixed');",Should be `exports.DBRef` i guess.,js,1,1,0
"@@ -108,7 +108,7 @@ exports.getRequestPath = (item) => {
   } else if (item.file_type) {
     return `${encodeURIComponent(item.meeting_id)}?recordingId=${encodeURIComponent(item.id)}`
   }
-  return `${encodeURIComponent(item.uuid)}`
+  return `${encodeURIComponent(encodeURIComponent(item.uuid))}`
 }
 
 exports.getStartDate = (item) => {",what kind of files does the `uuid` case match? Can we just always send `item.id` instead?,js,1,1,1
"@@ -91,7 +91,7 @@ export default function AdsConversionIDTextField() {
 			</TextField>
 
 			<p>
-				{ __( 'Insert your Ads Conversion ID here if you want Site Kit to place the snippet on your site', 'google-site-kit' ) }
+				{ __( 'If you’re using Google Ads, insert your Ads conversion ID if you’d like Site Kit to place the snippet on your site', 'google-site-kit' ) }
 			</p>
 		</div>
 	);","@felixarntz looks like maybe a good place to add a ""Learn more"" link - what do you think?",js,0,1,1
"@@ -198,7 +198,7 @@ public class LocalDistributor extends Distributor {
       Host host = new Host(bus, node);
       host.update(status);
       hosts.add(host);
-      LOG.info(String.format(""Added node %s."", node.getId()));
+      LOG.finest(String.format(""Added node %s."", node.getId()));
       host.runHealthCheck();
 
       Runnable runnable = host::runHealthCheck;",This change is incorrect.,js,1,1,0
"@@ -20,7 +20,7 @@ module.exports = function castBulkWrite(originalModel, op, options) {
       const model = decideModelByObject(originalModel, op['insertOne']['document']);
 
       const doc = new model(op['insertOne']['document']);
-      if (model.schema.options.timestamps != null) {
+      if (doc.initializeTimestamps) {
         doc.initializeTimestamps();
       }
       if (options.session != null) {",Shouldn't this be `if (model.schema.options.timestamps)` ?,js,1,1,1
"@@ -50,6 +50,8 @@ export default function SetupFormGA4() {
 	const { setValues } = useDispatch( CORE_FORMS );
 	const { setUseSnippet } = useDispatch( MODULES_ANALYTICS_4 );
 
+	const shouldShowAssociatedPropertyNotice = useSelect( ( select ) => select( MODULES_ANALYTICS_4 ).getPropertyID() );
+
 	useMount( () => {
 		selectProperty( PROPERTY_CREATE );
 		setValues( FORM_SETUP, { profileName: _x( 'All Web Site Data', 'default Analytics view name', 'google-site-kit' ) } );","We may want to actually assign this to a `ga4Property` variable first and then include the same conditions as below `accountID && accountID !== ACCOUNT_CREATE && ga4PropertyID`. These should be consistent between all three scenarios: 1. UA scenario: require account not empty and not create, and require UA property not empty 2. GA4 scenario: require account not empty and not create, and require GA4 property not empty 3. GA4-transitional scenario: require account not empty and not create, and require UA property _or_ GA4 property not empty",js,1,0,1
"@@ -0,0 +1,2 @@
+var mains = document.querySelectorAll('main,[role=main]');
+return mains.length<=1;","As above, use `axe.utils.querySelectorAll` instead, so you can query shadow DOM trees.",js,1,1,1
"@@ -272,8 +272,9 @@ Blockly.Msg.CATEGORY_EVENTS = 'Events';
 Blockly.Msg.CATEGORY_CONTROL = 'Control';
 Blockly.Msg.CATEGORY_SENSING = 'Sensing';
 Blockly.Msg.CATEGORY_OPERATORS = 'Operators';
-Blockly.Msg.CATEGORY_VARIABLES = 'Variables';
+Blockly.Msg.CATEGORY_VARIABLES = 'Data';
 Blockly.Msg.CATEGORY_MYBLOCKS = 'My Blocks';
+Blockly.Msg.CATEGORY_EXTENSIONS = 'Extensions';
 
 // Context menus
 Blockly.Msg.DUPLICATE = 'Duplicate';","This is the label that translators are currently translating, and in Scratch 3.0 it should be 'Variables', so we shouldn't change this value.",js,1,1,1
"@@ -0,0 +1,11 @@
+import React from 'react';
+import ReactDOM from 'react-dom';
+import './index.css';
+import App from './App';
+
+ReactDOM.render(
+  <React.StrictMode>
+    <App />
+  </React.StrictMode>,
+  document.getElementById('root')
+);","@jansiegel Should we remove StrictMode? This will trigger a warning with our current wrapper and ""UNSAFE"" use",js,0,1,1
"@@ -19,6 +19,10 @@ function splitString (str, splitIndex) {
 	return [str.substring(0, splitIndex), str.substring(splitIndex)];
 }
 
+function trimRight (str) {
+	return str.replace(/\s+$/, '')
+}
+
 /**
  * Take a relative or absolute URL and pull it into it's indivisual pieces
  *",Use prototype methods - `.trimRight()` or `.trimEnd()`? Need IE Support?,js,1,1,1
"@@ -185,8 +185,8 @@ function mountDOMElement(dom, internal, globalContext, isSvg, commitQueue) {
 			if (!isHydrating && newHtml.__html) {
 				dom.innerHTML = newHtml.__html;
 			}
-			internal._children = [];
-		} else if ((i = internal.props.children) != internal._children) {
+			internal._children = null;
+		} else if ((i = internal.props.children) != null) {
 			mountChildren(
 				dom,
 				Array.isArray(i) ? i : [i],","When mounting, `internal._children` is always `null` at this point since `mountChildren` hasn't been called on this internal yet. So this condition was only true when `props.children == null`. So I simplified this check to just use `null` directly. Also, there isn't a reason to have this check in `patch` cuz `props.children` is always an array VNodes and `internal._children` is always an array of Internals so they will never be equal.",js,1,1,1
"@@ -71,6 +71,8 @@ export default class Realm {
 
         [
             'path',
+            'readOnly',
+            'schema',
             'schemaVersion',
         ].forEach((name) => {
             Object.defineProperty(this, name, {get: util.getterForProperty(name)});",I think `readonly` would be nicer IMHO,js,1,1,1
"@@ -24,12 +24,16 @@ const test = (suite, buildConfig = config.defaultBuildConfig, options) => {
   config.update(options)
 
   const braveArgs = [
-    '--enable-logging'
+    '--enable-logging=stderr'
   ]
 
   // Android doesn't support --v
   if (config.targetOS !== 'android') {
     braveArgs.push('--v=' + options.v)
+
+    if (options.vmodule) {
+      braveArgs.push('--vmodule=' + options.vmodule)
+    } 
   }
 
   if (options.filter) {",logs are only exposed if test fails,js,1,1,0
"@@ -52,12 +52,8 @@ addFilter(
 	fillFilterWithComponent( DashboardZeroData )
 );
 
-let isAdBlockerActive = () => {};
-
 export const registerStore = ( registry ) => {
 	registerDatastore( registry );
-	// TODO: fix hack
-	isAdBlockerActive = () => registry.__experimentalResolveSelect( STORE_NAME ).isAdBlockerActive();
 };
 
 export const registerModule = ( modules ) => {",The `registerStore` function can be re-exported directly from `datastore` now rather than aliasing to add this hack. See other stores for how this looks like.,js,1,1,1
"@@ -43,13 +43,12 @@ describe('valid-lang', function () {
 			assert.deepEqual(checkContext._data, ['lang=""en-FOO""']);
 		});
 
-		it('should return true (and not throw) when given no options', function () {
+		it('should return false (and not throw) when given no options', function () {
 			var node = document.createElement('div');
 			node.setAttribute('lang', 'en-US');
 			fixture.appendChild(node);
 
-			assert.isTrue(checks['valid-lang'].evaluate.call(checkContext, node));
-			assert.deepEqual(checkContext._data, ['lang=""en-US""']);
+			assert.isFalse(checks['valid-lang'].evaluate.call(checkContext, node));
 		});
 
 		it('should return true if the language is badly formatted', function () {",How come the return values changed here?,js,1,1,1
"@@ -62,6 +62,7 @@ goog.require('Blockly.inject');
 goog.require('Blockly.utils');
 goog.require('goog.color');
 
+goog.require('Blockly.ScratchMsgs');
 
 // Turn off debugging when compiled.
 /* eslint-disable no-unused-vars */",Move this between `ggog.require('Blockly.Procedures');` and `goog.require('Blockly.Toolbox');`,js,1,1,1
"@@ -48,9 +48,9 @@ import { Cell, Row } from '../../material-components';
 import { trackEvent } from '../../util';
 const { useSelect, useDispatch } = Data;
 
-export default function UserInputQuestionnaire() {
-	const steps = [ ...USER_INPUT_QUESTIONS_LIST, 'preview' ];
+const steps = [ ...USER_INPUT_QUESTIONS_LIST, 'preview' ];
 
+export default function UserInputQuestionnaire() {
 	const [ activeSlug, setActiveSlug ] = useQueryArg( 'question', steps[ 0 ] );
 	const [ shouldScrollToActiveQuestion, setShouldScrollToActiveQuestion ] = useState( false );
 	const [ redirectURL ] = useQueryArg( 'redirect_url' );",move out of component so does not become a dynamic dependency,js,1,1,1
"@@ -190,6 +190,16 @@ Blockly.WorkspaceSvg.prototype.startScrollY = 0;
  */
 Blockly.WorkspaceSvg.prototype.dragDeltaXY_ = null;
 
+/***
+ * Distance to scroll when a mouse wheel event is received and
+ * its delta mode is line (0x1) instead of pixel (0x0). In these
+ * cases, a single ""scroll"" has a delta of 1, which makes the
+ * workspace scroll very slowly (just one pixel). To compensate,
+ * that delta is multiplied by this value.
+ * @type {number}
+ */
+Blockly.WorkspaceSvg.prototype.lineScrollMultiplier = 15;
+
 /**
  * Current scale.
  * @type {number}","Is there a better place to put this constant, or is putting it here right?",js,1,1,1
"@@ -1,10 +1,8 @@
 import { run } from '@ember/runloop';
-import { getOwner } from '@ember/application';
 import { hash } from 'rsvp';
 import Service, { inject as service } from '@ember/service';
 import Ember from 'ember';
 import config from '../config/environment';
-import { walkConfigs, setRTL } from '../utils/locale-utils';
 
 export const DEFAULT_LANGUAGE = config.intl.defaultLocale || 'en';
 ",These were removed along with the corresponding files since they don't relate to `ember-intl` anymore and were caught in my find/replace for `ember-i18n` to `ember-intl`. Is there a way I can verify that RTL is working properly with `ember-intl` in the same way it was before with `ember-i18n`?,js,1,1,1
"@@ -1118,7 +1118,7 @@ window.ConfigurationsView = countlyView.extend({
             return input;
         }
         else if (typeof value === ""number"") {
-            return ""<input type='number' id='"" + id + ""' value='"" + value + ""' max='2147483647' min='0' onkeyup='this.value= (parseInt(this.value) > 2147483647) ? 2147483647 : this.value;'/>"";
+            return ""<input type='number' id='"" + id + ""' value='"" + value + ""'/>"";
         }
         else {
             return ""<input type='text' id='"" + id + ""' value='"" + value + ""'/>"";",I think we agreed to leave this one,js,0,1,0
"@@ -36,7 +36,7 @@ export default AbstractEditController.extend({
 
     showDeleteItem(item) {
       let i18n = get(this, 'i18n');
-      let message = i18n.t('incident.messages.deleteItem');
+      let message = i18n.t('messages.delete_singular', { name: 'item' });
       let title = i18n.t('incident.titles.deleteItem');
       this.displayConfirm(title, message, 'deleteItem', Ember.Object.create({
         itemToDelete: item",This code is passing a non localized string when it should be passing in a localized string or it should use the name of the item being deleted.,js,1,1,1
"@@ -228,6 +228,18 @@ var request = require(""request"");
         options.db.collection(""long_tasks"").findOne({_id:options.id}, callback);
     };
     
+    /**
+    * Edit specific task
+    * @param {object} options - options for the task
+    * @param {object} options.db - database connection
+    * @param {object} options.task_id - ID of the target task 
+    * @param {string} options.data - data of the task want to modify
+    */
+    taskmanager.editTask = function(options, callback){
+        options.db = options.db || common.db;
+        options.db.collection(""long_tasks"").update({_id: options.task_id}, {$set: options.data}, callback);
+    };
+    
     /**
     * Check task's status
     * @param {object} options - options for the task","Let's keep parameter naming consistent with other methods, like `saveResult`, so not task_id, but id, etc",js,1,1,1
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -574,8 +574,15 @@ define(['appSettings', 'userSettings', 'playbackManager', 'connectionManager', '
 
             events.trigger(instance, ""playbackstop"", [state]);
 
+            var state = instance.lastPlayerData.PlayState || {};
+            var volume = state.VolumeLevel;
+            var mute = state.IsMuted;
+
             // Reset this so the next query doesn't make it appear like content is playing.
             instance.lastPlayerData = {};
+            instance.lastPlayerData.PlayState = {};
+            instance.lastPlayerData.PlayState.VolumeLevel = volume;
+            instance.lastPlayerData.PlayState.IsMuted = mute;
         });
 
         events.on(instance._castPlayer, ""playbackprogress"", function (e, data) {",should we add a default like `|| 0.5`?.. and `false` to `mute`?,js,1,1,1
"@@ -24,7 +24,7 @@ class ChromiumService(service.Service):
     """"""
 
     def __init__(self, executable_path, port=0, service_args=None,
-                 log_path=None, env=None, start_error_message=None):
+                 log_path=None, env=None, start_error_message=None, create_no_window=False):
         """"""
         Creates a new instance of the Service
 ",This would be better served as a method/property that is set when people don't want to a window.,js,1,1,1
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -287,6 +287,10 @@ function operand (self, where, delta, data, val, op) {
   // disabled versioning?
   if (false === self.schema.options.versionKey) return;
 
+  // path excluded from versioning
+  var notVersionedPaths = self.schema.options.notVersionedPaths;
+  if (notVersionedPaths && notVersionedPaths.indexOf(data.path) >= 0) return;
+
   // already marked for versioning?
   if (VERSION_ALL === (VERSION_ALL & self.$__.version)) return;
 ","IMO `notVersionedPaths` should be stored as a map, no sense in storing it as an array if you only use it for lookups",js,1,1,1
"@@ -24,6 +24,8 @@ import isPlainObject from 'lodash/isPlainObject';
 // Export codes and reasons.
 export const ERROR_CODE_MISSING_REQUIRED_SCOPE = 'missing_required_scopes'; // When scopes are missing.
 export const ERROR_REASON_INSUFFICIENT_PERMISSIONS = 'insufficientPermissions';
+export const ERROR_CODE_INSUFFICIENT_MODULE_DEPENDENCIES = 'insufficient_module_dependencies';
+export const ERROR_CODE_ADBLOCKER_ACTIVE = 'adblocker_active';
 
 /**
  * Checks if the provided object is an instance of WP_Error class.","I think it'd be more appropriate to define these in the areas where they're used. The first one could go into `assets/js/googlesitekit/modules/datastore/constants.js`, the latter into a new `assets/js/modules/adsense/constants.js`?",js,1,1,1
"@@ -420,13 +420,12 @@ describe('MongoClient', function() {
       var configuration = this.configuration;
       var MongoClient = configuration.require.MongoClient;
 
-      try {
-        MongoClient.connect('user:password@localhost:27017/test', function(err, client) {
-          client.close();
-        });
-      } catch (err) {
+      MongoClient.connect('user:password@localhost:27017/test', function(err, client) {
+        test.notEqual(err, null);
+        test.notEqual(err, undefined);
         done();
-      }
+        client.close();
+      });
     }
   });
 ",Should `client.close();` happen before `done()`?,js,1,1,1
"@@ -163,4 +163,16 @@ describe('Key', function() {
     });
   });
 
+  describe('bug in linux', function() {
+    it.only('should assign private key properly', function(){
+      var key = new Key();
+      var hex = '00ee983aa0421869418db3c50646728ce67db5a49d6cd853855854ae63fe7bce';
+      var pk = new Buffer(hex, 'hex');
+      pk.toString('hex').should.equal(hex);
+      key.private = pk;
+      key.private.toString('hex').should.equal(hex);
+
+    });
+  });
+
 });","The description here should probably read ""should assign private key starting with 0 properly""",js,1,1,1
"@@ -0,0 +1,3 @@
+module.exports.spliceURL = function spliceURL() {
+  return Array.from(arguments).reduce((lastResult, current) => lastResult + current).replace(/([^:])(\/)+(.)/g, `$1/$3`);
+};",Why use arguments instead normal parameters?,js,1,0,1
"@@ -60,6 +60,8 @@ describe('axe.utils.parseCrossOriginStylesheet', function() {
 	});
 
 	it('rejects when given url to fetch is not found', function(done) {
+		this.timeout(6000);
+
 		var importUrl =
 			'https://make-up-a-website-that-does-not-exist.com/style.css';
 		var options = {",Test needs to pass the `preload.timeout` option,js,1,1,1
"@@ -51,7 +51,10 @@ const getConfigFromEnv = () => {
       },
       zoom: {
         key: process.env.COMPANION_ZOOM_KEY,
-        secret: getSecret('COMPANION_ZOOM_SECRET')
+        secret: getSecret('COMPANION_ZOOM_SECRET'),
+        custom: {
+          verificationToken: getSecret('COMPANION_ZOOM_VERIFICATION_TOKEN')
+        }
       },
       s3: {
         key: process.env.COMPANION_AWS_KEY,","`verificationToken` is a required option, right? can we put it on the `zoom` options object itself instead of inside `custom`?",js,1,1,1
"@@ -66,7 +66,7 @@ describe('liftFN', function() {
     );
   });
 
-  it('retain order of arguments', function() {
+  it('retains order of arguments', function() {
     assert.isTrue(
       R.equals(
         RA.liftFN(3, add3)(Maybe.Some('a'), Maybe.Some('b'), Maybe.Some('c')),",should retain order of arguments,js,1,1,1
"@@ -74,7 +74,7 @@ public class SeleniumServer extends JettyServer {
           getClass().getClassLoader())
           .asSubclass(Routable.class);
       Constructor<? extends Routable> constructor = rcHandler.getConstructor(ActiveSessions.class);
-      LOG.info(""Bound legacy RC support"");
+      LOG.finest(""Bound legacy RC support"");
       return constructor.newInstance(sessions);
     } catch (ReflectiveOperationException e) {
       // Do nothing.",This informational message is important to users. Please leave.,js,1,1,1
"@@ -47,6 +47,12 @@ module Selenium
           @bridge.send_command(cmd: cmd, params: params)
         end
 
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
+
         private
 
         def debugger_address",the bridge here isn't defined as an accessor / reader to try mask it better. So you need to directly call the iVar `@bridge` here.,js,1,1,1
"@@ -692,6 +692,8 @@ define(['browser'], function (browser) {
         var h264Profiles = 'high|main|baseline|constrained baseline';
 
         if (browser.tizen || browser.web0s ||
+            // iOS 12 incorrectly reports support
+            !(browser.iOS && browser.iOSVersion < 13) &&
             videoTestElement.canPlayType('video/mp4; codecs=""avc1.640833""').replace(/no/, '')) {
             maxH264Level = 51;
         }",Making a function like `canPlayH264Level51` or something would simplify the complexity of this a bit.,js,1,1,1
"@@ -1,6 +1,6 @@
 import { options as rawOptions } from 'preact';
 
-/** @type {import('../../src/internal').Options} */
+/** @type {import('preact/src/internal').Options} */
 let options = rawOptions;
 
 let oldVNode = options.vnode;","Technically with the jsconfig.json, this is now possible, but felt out of scope for this PR.",js,0,1,1
"@@ -35,6 +35,12 @@ export default AuthenticatedRoute.extend(styleBody, CurrentUserSettings, Paginat
                 });
             }
 
+            // we need to load the roles into ember cache
+            // invites return role_id only and we do not offer a /role/:id endpoint
+            modelPromises.roles = this.get('store').query('role', {permissions: 'assign'}).then((roles) => {
+                return roles;
+            });
+
             return RSVP.hash(modelPromises);
         });
     },",Is the `{permissions: 'assign'}` needed here? It would be preferable to load all roles so that the role of team members can be displayed even if the current user doesn't have permission to assign those roles to new users.,js,1,1,1
"@@ -76,6 +76,7 @@ storiesOf( 'Analytics Module/Settings', module )
 		decorators: [
 			withRegistry,
 		],
+		padding: 0,
 	} )
 	.add( 'View, open with all settings', ( args, { registry } ) => {
 		registry.dispatch( STORE_NAME ).receiveGetSettings( {",Same with the settings. We need to use the default padding for all settings stories in all modules.,js,1,1,1
"@@ -27,7 +27,11 @@ describe('Sessions', function() {
   });
 
   it('should send endSessions for multiple sessions', {
-    metadata: { requires: { topology: ['single'], mongodb: '>3.6.0-rc0' } },
+    metadata: {
+      requires: { topology: ['single'], mongodb: '>3.6.0-rc0' },
+      // Skipping session leak tests b/c these are explicit sessions
+      sessions: { skipLeakTests: true }
+    },
     test: function(done) {
       var client = this.configuration.newClient({ w: 1 }, { poolSize: 1, auto_reconnect: false });
       client.connect((err, client) => {",what is the second command that's started here?,js,1,1,1
"@@ -64,10 +64,10 @@ function assertArity(args, requiredArity) {
  * @param {object} [validationOptions] Options for the validation itself.
  * @param {Logger} [validationOptions.logger] A logger instance to use if validation fails.
  * @param {string} [validationOptions.optionsValidationLevel] The level at which to validate the providedOptions ('none', 'warn', or 'error').
- * @param {boolean} [warnOnUnknownOptions=false] If true, warn on any option that is not in the schema.
+ * @param {string} [validationOptions.unknownOptionsWarningLevel] The level at which to handle unknown options ('none', 'warn', or 'error').
  * @return {object} returns a frozen object of validated options
  */
-function validate(optionsSchema, providedOptions, validationOptions, warnOnUnknownOptions) {
+function validate(optionsSchema, providedOptions, validationOptions) {
   let optionsValidationLevel = VALIDATION_LEVEL_WARN;
   let logger;
 ",The changes in `options_validator` supersede the changes in #1898. I can separate these changes out into a different PR if that would be better for readability and commit history.,js,0,1,1
"@@ -272,7 +272,7 @@ function* webpackConfig( env, argv ) {
 		},
 		plugins: [
 			new ProvidePlugin( {
-				React: 'react',
+				React: '@wordpress/element',
 			} ),
 			new WebpackBar( {
 				name: 'Module Entry Points',","Is this needed? I removed it and everything still built fine. It's minor, and I know it _is_ needed in the Jest tests and in Storybook, but maybe we should remove it here.",js,1,1,1
"@@ -125,8 +125,8 @@ function generateTopologyTests(testSuites, testContext, filter) {
       describe(suiteName, {
         metadata: { requires },
         test: function () {
-          beforeEach(() => prepareDatabaseForSuite(testSuite, testContext));
-          afterEach(() => testContext.cleanupAfterSuite());
+          // beforeEach(() => );
+          // afterEach();
 
           testSuite.tests.forEach(spec => {
             it(spec.description, function () {","hm this looks wrong, did you meant to revert?",js,1,1,1
"@@ -290,11 +290,11 @@ export default Controller.extend(SettingsMenuMixin, {
          * Action sent by post settings menu view.
          * (#1351)
          */
-        setPublishedAt(userInput) {
+        setPublishedAtUTC(userInput) {
             if (!userInput) {
-                // Clear out the publishedAt field for a draft
+                // Clear out the publishedAtUTC field for a draft
                 if (this.get('model.isDraft')) {
-                    this.set('model.publishedAt', null);
+                    this.set('model.publishedAtUTC', null);
                 }
                 return;
             }","This may be a little confusing as we get date from `parseDateString` that is actually in the blog's timezone, not in UTC. We actually convert it into UTC further down on line 319. I would suggest two variables here, one that holds the blog-timezone value and one that holds the UTC value.",js,1,1,1
"@@ -73,5 +73,6 @@ storiesOf( 'Global/ReportTable', module )
 				/>
 			</Layout>
 		);
-	} )
-;
+	}, {
+		padding: 0,
+	} );","Same here. Please, use the default padding.",js,1,1,1
"@@ -23,7 +23,7 @@ const resolve = (list, child, node) => {
 		// mark the child as completely resolved by deleting it from ._map.
 		// This is used to figure out when *all* children have been completely
 		// resolved when revealOrder is 'together'.
-		list._map.delete(child);
+		list._map.delete(child._node);
 	}
 
 	// If revealOrder is falsy then we can do an early exit, as the","Something is wrong here, since we'll only delete one and the second one isn't present in the _map (wrong ref?)",js,1,1,1
"@@ -281,6 +281,9 @@ class Application extends BaseApplication {
 
 		if (['NOTE_VISIBLE_PANES_TOGGLE', 'NOTE_VISIBLE_PANES_SET'].indexOf(action.type) >= 0) {
 			Setting.setValue('noteVisiblePanes', newState.noteVisiblePanes);
+			const viewer = newState.noteVisiblePanes[0];
+			this.updateMenuItemStates(viewer);
+
 		}
 
 		if (['SIDEBAR_VISIBILITY_TOGGLE', 'SIDEBAR_VISIBILITY_SET'].indexOf(action.type) >= 0) {",unnecessary white space on 286,js,1,1,1
"@@ -89,7 +89,14 @@ Query.prototype.bind = function bind (model, op, updateArg) {
   this.op = op;
 
   if (op == 'update' || op == 'findOneAndUpdate') {
-    merge(this._updateArg, updateArg || {});
+    // allow update to be a Document
+    if(updateArg instanceof Document) {
+      updateArg = updateArg.toObject();
+      delete updateArg._id;
+      merge(this._updateArg, updateArg);
+    } else {
+      merge(this._updateArg, updateArg || {});
+    }
   }
 
   return this;",why are we deleting the _id?,js,1,1,0
"@@ -16,9 +16,16 @@ module.exports = function(environment) {
     APP: {
       // Here you can pass flags/options to your application instance
       // when it is created
+    },
+
+    'simple-auth': {
+
+    },
+    'ember-cli-mirage': {
+      enabled: false
     }
   };
-    
+
 ENV.APP.manifest = {
   enabled: true,
   appcacheFile: ""/manifest.appcache"",",remanent of cli mirage.,js,1,0,0
"@@ -194,7 +194,17 @@ Blockly.Xml.blockToDom = function(block, opt_noId) {
     var commentElement = goog.dom.createDom('comment', null, commentText);
     if (typeof block.comment == 'object') {
       commentElement.setAttribute('pinned', block.comment.isVisible());
-      var hw = block.comment.getBubbleSize();
+      var hw;
+      if (block.comment instanceof Blockly.ScratchBlockComment) {
+        commentElement.setAttribute('type', 'scratch');
+        var xy = block.comment.getXY();
+        commentElement.setAttribute('x', xy.x);
+        commentElement.setAttribute('y', xy.y);
+        commentElement.setAttribute('minimized', block.comment.isMinimized());
+        hw = block.comment.getHeightWidth();
+      } else {
+        hw = block.comment.getBubbleSize();
+      }
       commentElement.setAttribute('h', hw.height);
       commentElement.setAttribute('w', hw.width);
     }",Make these into helper functions.,js,1,1,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -240,6 +240,12 @@ class Server extends EventEmitter {
     }
 
     wireProtocol.command(this, ns, cmd, options, (err, result) => {
+      if (err && err instanceof MongoNetworkError) {
+        if (options.session) {
+          options.session.serverSession.isDirty = true;
+        }
+      }
+
       if (err && isSDAMUnrecoverableError(err)) {
         this.emit('error', err);
       }",`if (err && err instanceof MongoNetworkError && options.session)`,js,1,0,0
"@@ -1,5 +1,5 @@
 module.exports = {
-  extends: ['airbnb-base', 'plugin:vue/base'],
+  extends: ['airbnb-base'],
   parser: '@babel/eslint-parser',
   plugins: [
     '@babel',","Plugin `plugin:vue/base` (`eslint-plugin-vue`) looks to be no used anymore, did you uninstall with (--save) it?",js,1,1,1
"@@ -118,13 +118,6 @@ define(['apphost', 'globalize', 'connectionManager', 'itemHelper', 'appRouter',
             });
         }
 
-        if (itemHelper.canConvert(item, user, connectionManager.getApiClient(item))) {
-            commands.push({
-                name: globalize.translate('Convert'),
-                id: 'convert'
-            });
-        }
-
         if (item.CanDelete && options.deleteItem !== false) {
 
             if (item.Type === 'Playlist' || item.Type === 'BoxSet') {","hmm, are you sure we have to remove this?",js,1,1,0
"@@ -907,6 +907,8 @@ export const showErrorNotification = ( ErrorComponent, props = {} ) => {
 export const decodeHtmlEntity = ( str ) => {
 	const decoded =  str.replace( /&#(\d+);/g, function( match, dec ) {
 		return String.fromCharCode( dec );
+	} ).replace( /(\\)/g, function( ) {
+		return '';
 	} );
 
 	return unescape( decoded );","No need for a function here, this can simply become `.replace( /(\\)/g, '' )`",js,1,1,1
"@@ -0,0 +1,5 @@
+package org.openqa.selenium.grid.session.remote;
+
+public class SessionTest {
+
+}",And another empty test. Please remove until there's content.,js,1,1,1
"@@ -1348,6 +1348,13 @@ Blockly.WorkspaceSvg.prototype.zoomCenter = function(type) {
   var metrics = this.getMetrics();
   var x = metrics.viewWidth / 2;
   var y = metrics.viewHeight / 2;
+  if (this.options.toolboxPosition == Blockly.TOOLBOX_AT_LEFT) {
+    x = x + 250;
+  } else if (this.options.toolboxPosition == Blockly.TOOLBOX_AT_RIHT) {
+    x = x + 250;
+  } else if (this.options.toolboxPosition == Blockly.TOOLBOX_AT_TOP) {
+    y = y + 158;
+  }
   this.zoom(x, y, type);
 };
 ",Looks like there's a typo for `TOOLBOX_AT_RIGHT` here.,js,1,1,1
"@@ -108,10 +108,11 @@ module Selenium
 
         def initialize(source, duration, x, y, element: nil, origin: nil)
           super(source)
+
           @duration = duration * 1000
           @x_offset = x
           @y_offset = y
-          @origin = element || origin
+          @origin = origin || POINTER
         end
 
         def type",Should be `@origin = element || origin || POINTER`,js,1,1,0
"@@ -414,7 +414,7 @@ class Uppy {
       throttledCalculateProgress(data)
     })
 
-    this.on('core:upload-success', (fileID, uploadResp, uploadURL) => {
+    this.on('core:upload-success', (fileID, uploadURL) => {
       const updatedFiles = Object.assign({}, this.getState().files)
       const updatedFile = Object.assign({}, updatedFiles[fileID], {
         progress: Object.assign({}, updatedFiles[fileID].progress, {","I think someone specifically asked for a full response object, and it makes sense. Is this removing uploadResp, or am I missing something?",js,1,1,1
"@@ -1,4 +1,14 @@
-var parent = axe.commons.dom.getComposedParent(node);
-return (['UL', 'OL'].includes(parent.nodeName.toUpperCase()) ||
-    (parent.getAttribute('role') || '').toLowerCase() === 'list');
-  
+const parent = axe.commons.dom.getComposedParent(node);
+
+if (!parent) {
+	return false;
+}
+
+const ALLOWED_TAGS = ['ul', 'ol'];
+const ALLOWED_ROLES = ['list'];
+
+const parentTagName = parent.nodeName.toLowerCase();
+const parentRole = (parent.getAttribute('role') || '').toLowerCase();
+const isListRole = (ALLOWED_ROLES.includes(parentRole));
+
+return ((ALLOWED_TAGS.includes(parentTagName) && (!parentRole || isListRole)) ||isListRole);",filter roles to only accept valid ARIA roles,js,1,1,1
"@@ -46,12 +46,12 @@ describe( 'trackAPIError', () => {
 				code: 'test-error-code',
 			},
 		} );
-		expect( dataLayerPushSpy ).toHaveBeenCalledTimes( 1 );
+		expect( dataLayerPushSpy ).toHaveBeenCalledTimes( 3 );
 		const [
 			event,
 			eventName,
 			eventData,
-		] = dataLayerPushSpy.mock.calls[ 0 ][ 0 ];
+		] = dataLayerPushSpy.mock.calls[ 2 ][ 0 ];
 		expect( event ).toEqual( 'event' );
 		expect( eventName ).toEqual(
 			'test-method:test-type/test-identifier/data/test-datapoint'",@ivankruchkoff this looks unexpected. Why would more events tracked be expected here?,js,0,1,1
"@@ -27,6 +27,16 @@ export function initDebug() {
 			);
 		}
 
+		Object.keys(vnode.props).forEach((key) => {
+			if (key[0]==='o' && key[1]==='n' && typeof vnode.props[key]!=='function') {
+				throw new Error(
+					`Component's ""${key}"" property should be a function,
+					but got [${typeof vnode.props[key]}] instead\n` +
+					serializeVNode(vnode)
+				);
+			}
+		});
+
 		// Check prop-types if available
 		if (typeof vnode.type==='function' && vnode.type.propTypes) {
 			checkPropTypes(vnode.type.propTypes, vnode.props, getDisplayName(vnode), serializeVNode(vnode));","Kind off afraid about the performance impact of this, since `Object.keys` iterates over the object and then we iterate over that created array. If this happens on every rerender...",js,1,0,1
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -12,6 +12,14 @@ const { _ } = require('lib/locale.js');
 const http = require('http');
 const https = require('https');
 const toRelative = require('relative');
+const { Database } = require('lib/database.js');
+
+let keytar;
+try {
+	keytar = require('keytar');
+} catch (err) {
+	keytar = null;
+}
 
 function shimInit() {
 	shim.fsDriver = () => {",`keytar` is installed and always available so no need for a try/catch block,js,1,1,1
"@@ -477,7 +477,7 @@ class Uppy {
   retryAll () {
     const updatedFiles = Object.assign({}, this.getState().files)
     const filesToRetry = Object.keys(updatedFiles).filter(file => {
-      return updatedFiles[file].error
+      return updatedFiles[file].error.message
     })
 
     filesToRetry.forEach((file) => {","Should we be checking if `error.message` exists first? What if string is returned from somewhere? Though I think we have an Eslint rule for that now, an extra check would not be too bad?",js,1,1,1
"@@ -26,9 +26,13 @@ const port = process.env.PORT || 8002;
 app.use(
 	'/assets',
 	express.static(
-		`${rootPath}/node_modules/@salesforce-ux/design-system/assets/`
+		path.join(
+			__dirname,
+			`${rootPath}/node_modules/@salesforce-ux/design-system/assets/`
+		)
 	)
 );
+app.use('/assets', express.static(path.join(__dirname, `${rootPath}/assets/`)));
 app.use(express.static(`${rootPath}/storybook-based-tests`));
 
 console.log(`","HItting ""JavaScript heap out of memory"" error when running `npm run test:snapshot ` on local right now, but this fix should allow the snapshot tests that compare image snapshots to pass after the SLDS upgrade. The image diffs were due to the new background: #b0c4df",js,1,1,1
"@@ -25,3 +25,4 @@ class ChromeRemoteConnection(RemoteConnection):
         self._commands[""launchApp""] = ('POST', '/session/$sessionId/chromium/launch_app')
         self._commands[""setNetworkConditions""] = ('POST', '/session/$sessionId/chromium/network_conditions')
         self._commands[""getNetworkConditions""] = ('GET', '/session/$sessionId/chromium/network_conditions')
+        self._commands['ExecuteCDP'] = ('POST', '/session/$sessionId/goog/cdp/execute')",Should this be camelCase to match the above commands? I am not the expert here so maybe Lucas or David can chime in.,js,0,1,1
"@@ -13,14 +13,16 @@ define(['apphost', 'globalize', 'connectionManager', 'itemHelper', 'appRouter',
             if (options.play !== false) {
                 commands.push({
                     name: globalize.translate('Play'),
-                    id: 'resume'
+                    id: 'resume',
+                    icon: ""play_arrow""
                 });
             }
 
             if (options.playAllFromHere && item.Type !== 'Program' && item.Type !== 'TvChannel') {
                 commands.push({
                     name: globalize.translate('PlayAllFromHere'),
-                    id: 'playallfromhere'
+                    id: 'playallfromhere',
+                    icon: ""play_arrow""
                 });
             }
         }",can we use consistent quotes please (here and in other places)?,js,1,1,1
"@@ -214,6 +214,14 @@ define(['browser'], function (browser) {
                 break;
             case 'avi':
                 supported = browser.tizen || browser.orsay || browser.web0s || browser.edgeUwp;
+                // New Samsung TV don't support XviD/DivX
+                if (browser.tizen) {
+                    videoCodecs.push('h264');
+                    if (canPlayH265(videoTestElement, options)) {
+                        videoCodecs.push('h265');
+                        videoCodecs.push('hevc');
+                    }
+                }
                 break;
             case 'mpg':
             case 'mpeg':",Why not just remove Tizen from the `supported` variable?,js,1,1,1
"@@ -119,7 +119,6 @@ const validOptions = require('./operations/connect').validOptions;
  * @param {number} [options.bufferMaxEntries=-1] Sets a cap on how many operations the driver will buffer up before giving up on getting a working connection, default is -1 which is unlimited
  * @param {(ReadPreference|string)} [options.readPreference] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST)
  * @param {object} [options.pkFactory] A primary key factory object for generation of custom _id keys
- * @param {object} [options.promiseLibrary] A Promise library class the application wishes to use such as Bluebird, must be ES6 compatible
  * @param {object} [options.readConcern] Specify a read concern for the collection (only MongoDB 3.2 or higher supported)
  * @param {ReadConcernLevel} [options.readConcern.level='local'] Specify a read concern level for the collection operations (only MongoDB 3.2 or higher supported)
  * @param {number} [options.maxStalenessSeconds=undefined] The max staleness to secondary reads (values under 10 seconds cannot be guaranteed)","At very least we should throw some warning when users try to do this, otherwise we might silently break user expectations. I think it's probably fine to still support `promiseLibrary` at the `MongoClient` level, and that option just internally sets the ""provided"" Promise",js,1,1,1
"@@ -278,7 +278,7 @@ export const createSettingsStore = ( type, identifier, datapoint, {
 		 * @return {Object} Redux-style action.
 		 */
 		actions[ `set${ pascalCaseSlug }` ] = ( value ) => {
-			invariant( typeof value !== 'undefined', 'value is required.' );
+			invariant( typeof value !== 'undefined', `value is required for calls to set${ pascalCaseSlug }().` );
 
 			return {
 				payload: { value },","I added this to assist in debugging; because these method names are dynamically generated, this makes it a lot easier to discover which method is throwing the error, which at first made narrowing down the `invariant` call cumbersome.",js,1,1,1
"@@ -166,7 +166,14 @@ export function diff(parentDom, newVNode, oldVNode, context, isSvg, excessDomChi
 	return newVNode._dom;
 }
 
+/**
+ * @param {Array<import('../internal').Component>} commitQueue List of components
+ * which have callbacks to invoke in commitRoot
+ * @param {import('../internal').VNode} root
+ */
 export function commitRoot(commitQueue, root) {
+	if (options._commit) options._commit(root, commitQueue);
+
 	commitQueue.some(c => {
 		try {
 			commitQueue = c._renderCallbacks;","If we need a post commit option, we should probably call it `_committed` following our existing option naming pattern",js,1,1,1
"@@ -1,5 +1,11 @@
 /*global dom */
 
+/**
+ * Finds the first Element with the given attribute
+ * @param {Element} node
+ * @param {String} attr Attribute name
+ * @return {Element}
+ */
 dom.getElementByReference = function (node, attr) {
 	let fragment = node.getAttribute(attr);
 ",not enough of a description to understand what the function is really doing,js,1,1,1
"@@ -24,7 +24,7 @@ if (!_rng && _crypto && _crypto.getRandomValues) {
 }
 
 try {
-  if (!_rng && require) {
+  if (!_rng) {
     const nodeCrypto = require('crypto');
     _rng = () => nodeCrypto.randomBytes(16);
   }",This change worries me. How does this change effect other supported environments?,js,1,1,1
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -165,7 +165,7 @@ Audit.prototype.run = function (context, options, resolve, reject) {
 							result: axe.constants.CANTTELL,
 							description: 'An error occured while running this rule',
 							message: err.message,
-							help: err.stack || err.message,
+							stack: err.stack,
 							error: err
 						});
 						res(errResult);","Does anything depend on `help` being a part of this object, or was that just for manual debugging info?",js,1,1,1
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -66,15 +66,9 @@ const groupFunction =
  * @param {Collection~bulkWriteOpCallback} [callback] The command result callback
  */
 function bulkWrite(coll, operations, options, callback) {
-  // Add ignoreUndfined
-  if (coll.s.options.ignoreUndefined) {
-    options = Object.assign({}, options);
-    options.ignoreUndefined = coll.s.options.ignoreUndefined;
-  }
-
   // Create the bulk operation
   const bulk =
-    options.ordered === true || options.ordered == null
+    options.ordered === true
       ? coll.initializeOrderedBulkOp(options)
       : coll.initializeUnorderedBulkOp(options);
 ",Want to double check: this was done b/c we will always have a default value of `ordered: true` unless otherwise specified?,js,1,1,1
"@@ -4,7 +4,7 @@ import globalize from '../../scripts/globalize';
 import layoutManager from '../layoutManager';
 import { playbackManager } from '../playback/playbackmanager';
 import playMethodHelper from '../playback/playmethodhelper';
-import syncPlayManager from '../syncPlay/syncPlayManager';
+import SyncPlay from 'SyncPlay';
 import './playerstats.css';
 import ServerConnections from '../ServerConnections';
 ",This import seems invalid. Should probably be a relative path?,js,1,1,1
"@@ -31,6 +31,12 @@ class DashboardModal extends React.Component {
     } else if (!prevProps.open && this.props.open) {
       this.plugin.openModal()
     }
+
+    for (const key of Object.keys(this.props)) {
+      if (this.props[key] !== prevProps[key] && key in this.plugin.opts) {
+        this.plugin[key] = this.props[key]
+      }
+    }
   }
 
   componentWillUnmount () {",Are we sure we want to do this for everything? This may have unexpected consequences in the future. Perhaps it's better to just explicitly update the value in question.,js,1,1,1
"@@ -84,7 +84,7 @@ class GhostTable {
    * Add a row consisting of the column headers.
    */
   addColumnHeadersRow(samples) {
-    if (this.hot.getColHeader(0) != null) {
+    if (this.hot.getColHeader(0) !== null && this.hot.getColHeader(0) !== void 0) {
       const rowObject = {row: -1};
       this.rows.push(rowObject);
 ","Could you cache result of the `this.hot.getColHeader(0)` method? This prevents firing `""modifyColHeader""` and `""modifyCol""` hooks twice for the same column index.",js,1,1,1
"@@ -1515,6 +1515,13 @@ Collection.prototype.findOneAndReplace = function(filter, replacement, options,
   if (replacement == null || typeof replacement !== 'object')
     throw toError('replacement parameter must be an object');
 
+  // Check that there are no atomic operators
+  const keys = Object.keys(replacement);
+
+  if (keys[0][0] === '$') {
+    throw toError('The replacement document must not contain atomic operators.');
+  }
+
   return executeOperation(this.s.topology, findOneAndReplace, [
     this,
     filter,",if `keys[0][0]` guaranteed to always exist? Won't this throw an exception if someone accidentally passes in an empty object for `replacement`?,js,1,1,1
"@@ -13,7 +13,7 @@ describe('has-visible-text', function() {
   });
 
   it('should return false if there is no visible text', function() {
-    var params = checkSetup('<object id=""target""></object>');
+    var params = checkSetup('<p id=""target""></p>');
     assert.isFalse(
       axe.testUtils
         .getCheckEvaluate('has-visible-text')",Don't know why we did that. Clearly that's wrong.,js,1,1,1
"@@ -1,5 +1,10 @@
-return !!(
-	node.getAttribute('lang') ||
-	node.getAttribute('xml:lang') ||
-	''
-).trim();
+const { isXHTML } = axe.utils;
+
+const langValue = (node.getAttribute(`lang`) || '').trim();
+const xmlLangValue = (node.getAttribute(`xml:lang`) || '').trim();
+
+if (!langValue && !isXHTML(document)) {
+	return false;
+}
+
+return !!(langValue || xmlLangValue);",Just curious: why use backticks (\`) here rather than quotes?,js,1,1,1
"@@ -50,7 +50,7 @@ define(['backdrop', 'userSettings', 'libraryMenu'], function (backdrop, userSett
                         return i;
                     }));
                 } else {
-                    backdrop.clear();
+                    backdrop.clearBackdrop();
                 }
             });
         }",I think `clear` was better than `clearBackdrop` since the filename already indicates the object.,js,1,1,1
"@@ -20,6 +20,8 @@
  * External dependencies
  */
 import invariant from 'invariant';
+import mapValues from 'lodash/mapValues';
+import memize from 'memize';
 
 /**
  * WordPress dependencies","Note that while `memize` was added to `package.json`, it's already a dependency of `@wordpress/data` so this just makes it safe to use without really adding anything to the bundle.",js,1,1,1
"@@ -118,7 +118,8 @@ export function setProperty(dom, name, value, oldValue, isSvg) {
 			name in dom
 		) {
 			try {
-				dom[name] = value == null ? '' : value;
+				const newValue = value == null ? '' : value;
+				if (dom[name] !== newValue) dom[name] = newValue;
 				// labelled break is 1b smaller here than a return statement (sorry)
 				break o;
 			} catch (e) {}","On a side note, this is a bug fix. I noticed this in my debugging sessions. For whatever reason, preact is setting the class name in dom even though it is identical and that causes a layout shift. This fixes it.",js,1,1,1
"@@ -420,6 +420,8 @@ ReplSetState.prototype.update = function(server) {
   //
   if (!this.primary && ismaster.ismaster && ismaster.setName) {
     var ismasterElectionId = server.lastIsMaster().electionId;
+    this.setName = this.setName.trim();
+    ismaster.setName = ismaster.setName.trim();
     if (this.setName && this.setName !== ismaster.setName) {
       this.topologyType = TopologyType.ReplicaSetNoPrimary;
       return new MongoError(",Why are we modifying `ismaster`?,js,1,1,1
"@@ -35,6 +35,9 @@ const { BundleAnalyzerPlugin } = require( 'webpack-bundle-analyzer' );
 const CreateFileWebpack = require( 'create-file-webpack' );
 const ManifestPlugin = require( 'webpack-manifest-plugin' );
 const features = require( './feature-flags.json' );
+const formattedFeaturesToPHPArray = Array.isArray( features )
+	? features.map( ( feature ) => `'${ feature }'` ).join( ',' )
+	: '';
 
 const projectPath = ( relativePath ) => {
 	return path.resolve( fs.realpathSync( process.cwd() ), relativePath );",We don't need the array check here because it's our own import which isn't dynamic so we can rely on it always being an array. If it wasn't something is probably wrong and it's probably better for it to fail here,js,1,1,1
"@@ -85,6 +85,10 @@ const fetchGetPropertiesStore = createFetchStore( {
 		);
 	},
 	reducerCallback( state, properties, { accountID } ) {
+		if ( ! Array.isArray( properties ) ) {
+			return state;
+		}
+
 		return {
 			...state,
 			properties: {","Curious, why is this necessary here? Shouldn't `properties` always expected to be an array? If this check is needed, I wonder if we have a problem elsewhere.",js,1,1,1
"@@ -40,7 +40,8 @@ export function setAccessor(node, name, old, value, isSvg) {
 		}
 		if (value && typeof value==='object') {
 			if (!isString(old)) {
-				for (let i in old) if (!(i in value)) node.style[i] = '';
+				for (let i in old)
+					if (!(i in value) || value[i] == null || value[i] === false) node.style[i] = '';
 			}
 			for (let i in value) {
 				node.style[i] = typeof value[i]==='number' && !NON_DIMENSION_PROPS[i] ? (value[i]+'px') : value[i];",Can skip the `in` check now I think,js,1,1,0
"@@ -480,6 +480,12 @@ plugins.setConfigs(""crashes"", {
                                 }];
                                 plugins.dispatch(""/plugins/drill"", {params: params, dbAppUser: dbAppUser, events: events});
 
+                                const hooksData = {
+                                    params: {...params}
+                                };
+                                hooksData.params.qstring.events = events;
+                                plugins.dispatch(""/hooks/incoming_data"", hooksData);
+
 
                                 const processCrash = function(userAll) {
                                     var groupSet = {};","Hello, instead of having a separate event for incoming data, maybe hooks can reuse this event that we already have and all future manual events will use it to write data to drill either way :)",js,1,1,1
"@@ -88,7 +88,7 @@ public class Docker {
 
     findImage(new ImageNamePredicate(name, tag));
 
-    LOG.info(String.format(""Pulling %s:%s"", name, tag));
+    LOG.finest(String.format(""Pulling %s:%s"", name, tag));
 
     HttpRequest request = new HttpRequest(POST, ""/images/create"");
     request.addQueryParameter(""fromImage"", name);",This will always need to be displayed to users.,js,1,1,1
"@@ -30,7 +30,7 @@ export const refreshAuthentication = async () => {
 			requiredScopes,
 			grantedScopes,
 			unsatisfiedScopes = [],
-		} = await data.get( TYPE_CORE, 'user', 'authentication', { timestamp: Date.now() } );
+		} = await data.get( TYPE_CORE, 'user', 'authentication' );
 
 		// We should really be using state management. This is terrible.
 		// Hang in there... we're getting to it ;)",This one can't be removed because it doesn't use `siteKitRequest` internally.,js,1,1,1
"@@ -46,8 +46,17 @@ function getFiles (store) {
   })
 }
 
+function probe (event) {
+  sendMessageToAllClients({
+    type: 'uppy/HERE_I_AM'
+  })
+}
+
 self.addEventListener('message', (event) => {
   switch (event.data.type) {
+    case 'uppy/PROBE':
+      probe()
+      break
     case 'uppy/ADD_FILE':
       addFile(event.data.store, event.data.file)
       break","MDN said something about using `clients.get(event.clientId)` to only send the message back to the sender, but `clientId` was undefined for me--i guess that's why we were sending the `uppy/ALL_FILES` message to all clients too.",js,1,1,1
"@@ -2588,7 +2588,7 @@ describe('Operation (Promises)', function () {
    * @example-class Db
    * @example-method collection
    */
-  it('shouldCorrectlyAccessACollectionWithPromises', {
+  it.skip('shouldCorrectlyAccessACollectionWithPromises', {
     metadata: { requires: { topology: ['single'] } },
 
     test: function (done) {",why is this test being skipped?,js,1,1,0
"@@ -47,6 +47,10 @@ public interface CapabilityType {
   String HAS_TOUCHSCREEN = ""hasTouchScreen"";
   String OVERLAPPING_CHECK_DISABLED = ""overlappingCheckDisabled"";
   String STRICT_FILE_INTERACTABILITY = ""strictFileInteractability"";
+  String TIMEOUTS = ""timeouts"";
+  String IMPLICIT_TIMEOUT = ""implicit"";
+  String PAGE_LOAD_TIMEOUT = ""pageLoad"";
+  String SCRIPT_TIMEOUT = ""script"";
 
   String LOGGING_PREFS = ""loggingPrefs"";
 ","These are really meant to be the keys in the capabilities, not the keys of values within the capabilities",js,1,1,1
"@@ -401,8 +401,11 @@ function ($timeout, gridUtil, uiGridConstants, uiGridColumnMenuService, $documen
           $scope.hideMenu( true );
 
           if ($scope.col) {
-            //Focus on the menu button
-            gridUtil.focus.bySelector($document, '.ui-grid-header-cell.' + $scope.col.getColClass()+ ' .ui-grid-column-menu-button', $scope.col.grid, false);
+            //Focus on the menu button if this is shown, otherwise focus the column header
+            var elementToFocus = '.ui-grid-header-cell.' + $scope.col.getColClass();
+            elementToFocus += ($scope.grid.options.showColumnMenuButtons && $scope.col.colDef.showColumnMenuButton !== false)? 
+              ' .ui-grid-column-menu-button' : ' .ui-grid-header-cell-primary-focus';
+            gridUtil.focus.bySelector($document, elementToFocus, $scope.col.grid, false);
           }
         }
       });","This is redundant. if $scope.grid.options.showColumnMenuButton returns truthy, then it is obviously different than false. You only need one of these checks.",js,1,1,1
"@@ -822,7 +822,7 @@ const htmlElms = {
   },
   svg: {
     contentTypes: ['embedded', 'phrasing', 'flow'],
-    allowedRoles: ['application', 'document', 'img'],
+    allowedRoles: true,
     chromiumRole: 'SVGRoot',
     namingMethods: ['svgTitleText']
   },",Is this the only change we need to make for an updated ARIA in HTML?,js,1,1,1
"@@ -13,13 +13,16 @@ import options from './options';
  */
 export function render(vnode, parentDom, replaceNode) {
 	if (options._root) options._root(vnode, parentDom);
-	let oldVNode = parentDom._children;
+	let oldVNode = replaceNode ?
+		replaceNode._children || parentDom._children :
+		parentDom._children;
+
 	vnode = createElement(Fragment, null, [vnode]);
 
 	let mounts = [];
 	diff(
 		parentDom,
-		replaceNode ? vnode : (parentDom._children = vnode),
+		replaceNode ? (replaceNode._children = vnode) : (parentDom._children = vnode),
 		oldVNode || EMPTY_OBJ,
 		EMPTY_OBJ,
 		parentDom.ownerSVGElement !== undefined,","This `||` is needed for the case when we first did `render(x, y, undefined)` and transition to a render with replaceNode. The second is needed for when we use replaceNode twice in a row.",js,1,1,1
"@@ -41,8 +41,9 @@ import WidgetCellWrapper from './WidgetCellWrapper';
 import { isInactiveWidgetState } from '../util/is-inactive-widget-state';
 import InViewProvider from '../../../components/InViewProvider';
 const { useSelect } = Data;
+const DEFAULT_CLASS_APPENDIX = '--boxes'
 
-export default function WidgetAreaRenderer( { slug, totalAreas } ) {
+export default function WidgetAreaRenderer( { slug = DEFAULT_CLASS_APPENDIX, totalAreas } ) {
 	const widgetAreaRef = useRef();
 	const intersectionEntry = useIntersection( widgetAreaRef, {
 		rootMargin: '0px',","@shayannosrat I don't think the problem here is related to the `slug` - it's related to the `style` of the widget area. `boxes` is a widget area style, not a widget area slug. We need to investigate why the `style` variable in this component can be `undefined` - it never should be.",js,0,1,1
"@@ -127,8 +127,8 @@ module.exports = function(config) {
 						exclude: /node_modules/,
 						loader: 'babel-loader',
 						options: {
-							comments: false,
-							compact: true,
+							// comments: false,
+							// compact: true,
 							plugins: coverage ?
 								[['istanbul', {
 									exclude: [",Note to self: Undo before checking in,js,0,1,0
"@@ -0,0 +1,19 @@
+const uniqueLandmarks = [];
+results.forEach(currentResult => {
+	const findMatch = someResult => {
+		return (
+			currentResult.data.role === someResult.data.role &&
+			currentResult.data.label === someResult.data.label
+		);
+	};
+
+	const foundResultIndex = uniqueLandmarks.findIndex(findMatch);
+	if (foundResultIndex === -1) {
+		uniqueLandmarks.push(currentResult);
+	} else {
+		currentResult.result = false;
+		uniqueLandmarks[foundResultIndex].result = false;
+	}
+});
+
+return results;",We should be adding the information about the currentResult to the matching item as a `relatedNode` that way we only return one fail for each duplicated role and name and we can see the others directly in the result.,js,1,1,1
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -32,6 +32,8 @@ export function Component(props, context) {
 	 */
 	this.props = props;
 
+	this._nextState =
+
 	/**
 	 * @public
 	 * @type {object}",@KevinDoughty Perhaps a bad push?,js,0,1,0
"@@ -0,0 +1,12 @@
+let nodeText = axe.commons.text.accessibleText(node);
+let nodeDescripbedBy = axe.commons.aria.ariaDescribedby(node);
+
+let elems = axe.utils.querySelectorAll(axe._tree, 'a[href]');
+return !Array.prototype.slice.call(elems).some(function(element) {
+  return (
+    nodeText === axe.commons.text.accessibleText(element.actualNode) &&
+    nodeDescripbedBy === axe.commons.aria.ariaDescribedby(element.actualNode) &&
+    node.title === element.actualNode.title &&
+    node.href !== element.actualNode.href
+  );
+});","nitpick, spelling mistake - `nodeDescibedBy`",js,1,1,1
"@@ -1,8 +1,11 @@
-/*global dom */
+/* global dom */
 /**
  * Get an element's parent in the composed tree
- * @param   DOMNode   Element
- * @return  DOMNode   Parent element
+ * @method getComposedParent
+ * @memberof axe.commons.dom
+ * @instance
+ * @param {Node} element
+ * @return {Node|null} Parent element or Null for root node
  */
 dom.getComposedParent = function getComposedParent (element)  {
   if (element.assignedSlot) {",I am surprised we did not rename this to `getFlattenedParent`!! Anyhoo - we should at least change the description to read `get an element's parent in the flattened tree`,js,1,1,1
"@@ -1119,7 +1119,7 @@ class BulkOperationBase {
         callback,
         new BulkWriteError(
           toError({
-            message: 'write operation failed',
+            message: this.s.bulkResult.writeErrors[0].errmsg,
             code: this.s.bulkResult.writeErrors[0].code,
             writeErrors: this.s.bulkResult.writeErrors
           }),",What happens if `this.s.bulkResult.writeErrors[0]` or its `errmsg` doesn't exist? Let's check that the `errmsg` exists and use the default `write operation failed` message if not.,js,1,1,1
"@@ -64,6 +64,7 @@ class Uppy {
         connectedToInternet: 'Connected to the Internet',
         // Strings for remote providers
         noFilesFound: 'You have no files or folders here',
+        loadMore: 'Load more',
         selectX: {
           0: 'Select %{smart_count}',
           1: 'Select %{smart_count}'",do we still need this?,js,1,1,0
"@@ -448,7 +448,7 @@ class Uppy {
       this.scheduledAutoProceed = setTimeout(() => {
         this.scheduledAutoProceed = null
         this.upload().catch((err) => {
-          console.error(err.stack || err.message || err)
+          onError(err.stack || err.message || err)
         })
       }, 4)
     }","`upload()` already logs an error and shows the informer, so we don't need to use `onError` here. (`console.error` is probably not that necessary either)",js,1,1,1
"@@ -206,7 +206,12 @@ function scheduleFlushAfterPaint() {
 if (typeof window !== 'undefined') {
 	afterPaint = (component) => {
 		if (!component._afterPaintQueued && (component._afterPaintQueued = true) && afterPaintEffects.push(component) === 1) {
-			requestAnimationFrame(scheduleFlushAfterPaint);
+			if (options.afterPaint) {
+				options.afterPaint(flushAfterPaintEffects);
+			}
+			else {
+				requestAnimationFrame(scheduleFlushAfterPaint);
+			}
 		}
 	};
 }",Can we change this to `options.requestAnimationFrame`? It should compress better.,js,1,1,1
"@@ -21,7 +21,7 @@ export function render(vnode, parentDom, replaceNode) {
 	diffChildren(
 		parentDom,
 		replaceNode ? vnode : (parentDom._prevVNode = vnode),
-		replaceNode ? undefined : oldVNode,
+		oldVNode,
 		EMPTY_OBJ,
 		parentDom.ownerSVGElement !== undefined,
 		replaceNode",what was the point of having undefined here?,js,1,1,1
"@@ -0,0 +1,14 @@
+
+import { wpApiFetch } from './wp-api-fetch';
+
+/**
+ *
+ * @param {*} config
+ */
+export async function setAuthToken( token = 'test-access-token' ) {
+	return await wpApiFetch( {
+		path: 'google-site-kit/v1/e2e/auth/access-token',
+		method: 'post',
+		data: { token },
+	} );
+}",Empty line before and no `Internal dependencies` docblock (mandatory anyway once #217 lands).,js,0,1,1
"@@ -40,7 +40,7 @@ public class BazelBuild {
     if (target == null || """".equals(target)) {
       throw new IllegalStateException(""No targets specified"");
     }
-    log.info(""\nBuilding "" + target + "" ..."");
+    log.finest(""\nBuilding "" + target + "" ..."");
 
     ImmutableList.Builder<String> builder = ImmutableList.builder();
     builder.add(""bazel"", ""build"", target);",This is to let people know that the tooling is doing something during a build. Please leave.,js,1,1,1
"@@ -62,6 +62,18 @@ class AdSensePerformanceWidget extends Component {
 					maxAge: getTimeInSeconds( 'day' ),
 					context: [ 'Single', 'Dashboard' ],
 					callback: ( result ) => {
+
+						// If there are no impressions, the site is not yet displaying ads.
+						if (
+							result && result.totals &&
+							(
+								null === result.totals[2] ||
+								0    === result.totals[2]
+							)
+						) {
+							handleZeroData();
+						}
+
 						this.setState( {
 							twentyEightDays: result,
 						} );","Instead of defining a custom condition here, I think it makes sense to rely on `isDataZeroAdSense()` as well. The current check here only checks for impressions, what if there's other data that is greater than zero (see the `isDataZeroAdSense()` function you created)? Just to clarify, of course, whatever this code here is changed to, should also apply to the below `earning-prev28days` callback logic.",js,1,1,1
"@@ -0,0 +1,17 @@
+/**
+ * Internal dependencies
+ */
+import { switchUserToAdmin, switchUserToTest, visitAdminPage } from '@wordpress/e2e-test-utils';
+
+const PLUGIN_SLUG = 'e2e-tests-reset-plugin';
+
+/**
+ * Reset Site Kit using utility plugin.
+ */
+export async function resetSiteKit() {
+	await switchUserToAdmin();
+	await visitAdminPage( 'plugins.php' );
+	await page.click( `tr[data-slug=""${ PLUGIN_SLUG }""] .activate a` );
+	await page.waitForSelector( `tr[data-slug=""${ PLUGIN_SLUG }""]` );
+	await switchUserToTest();
+}",There's a `activatePlugin` utility that can be used for this. So `resetSiteKit()` basically turns into `await activatePlugin( 'e2e-tests-reset-plugin' )`,js,1,1,1
"@@ -159,9 +159,10 @@ Config.prototype.buildArgs = function () {
     // Minimal symbols for target Linux x86, because ELF32 cannot be > 4GiB
     args.symbol_level = 1
   }
-  
-  if (this.targetArch === 'x64' && process.platform === 'linux') {
-    // Include vaapi support 
+
+  if (this.targetArch === 'x64' && process.platform === 'linux' &&
+    this.targetOS !== 'android') {
+    // Include vaapi support
     args.use_vaapi = true
   }
 ",Why are we ever setting this to true? The docs say that this is only for ChromeOS,js,1,1,1
"@@ -374,7 +374,7 @@ Blockly.Procedures.getPrototypeBlock = function(procCode, workspace) {
 Blockly.Procedures.newProcedureMutation = function() {
   var mutationText = '<xml>' +
       '<mutation' +
-      ' proccode=""block name""' +
+      ' proccode=""' + Blockly.Msg.PROCEDURE_DEFAULT_NAME + '""' +
       ' argumentids=""[]""' +
       ' argumentnames=""[]""' +
       ' argumentdefaults=""[]""' +","To avoid renames with Closure advanced compilation, prefer `Blockly.Msg['PROCEDURE_DEFAULT_NAME']`, unless you're including translation in your compilation sources.",js,1,1,1
"@@ -107,7 +107,7 @@ const webpackConfig = ( mode ) => {
 			output: {
 				filename: '[name].js',
 				path: __dirname + '/dist/assets/js',
-				chunkFilename: '[name]-[chunkhash].js',
+				chunkFilename: '[name].js',
 				publicPath: '',
 			},
 			performance: {","Would this have any side effects regarding browser caching? We used to have tons of issues with blank screens because of partially old resources being loaded alongside new ones, and I'm a bit worried that removing the chunk hash (specifically necessary for `googlesitekit-vendor.js` would bring back some of these problems. What do you think @tofumatt?",js,0,1,1
"@@ -0,0 +1,7 @@
+import { getImplicitRole } from '../commons/aria';
+
+function presentationRoleConflictMatches(node) {
+  return getImplicitRole(node) !== null;
+}
+
+export default presentationRoleConflictMatches;","Can you use the virtualNode here instead? We've been moving our rules over to exclusively use virtualNode. Tests can run dramatically faster if the DOM isn't involved, and not all situations where axe-core is used needs to build a complete DOM tree.",js,1,1,1
"@@ -0,0 +1,6 @@
+var role = node.getAttribute('role');
+if (role === null) {
+	return false;
+}
+var roleType = axe.commons.aria.getRoleType(role);
+return roleType === 'widget' || roleType === 'composite';","This check should have tests. Nothing too complicated, just check that it works.",js,1,1,1
"@@ -0,0 +1,18 @@
+/* global axe*/
+
+/**
+ * Get the pass, fail, or incomplete message for a check.
+ * @param {String} checkId The check id
+ * @param {String} type The message type ('pass', 'fail', or 'incomplete')
+ * @param {Object} [data] The check data
+ * @return {String}
+ */
+axe.utils.getCheckMessage = function getCheckMessage(checkId, type, data) {
+	const check = axe._audit.data.checks[checkId];
+
+	if (!check || !check.messages[type]) {
+		return '';
+	}
+
+	return axe.utils.processMessage(check.messages[type], data);
+};",I think it might be better if this just threw an error.,js,1,1,1
"@@ -406,7 +406,8 @@ export function unmount(vnode, parentVNode, skipRemove) {
 	if (options.unmount) options.unmount(vnode);
 
 	if ((r = vnode.ref)) {
-		applyRef(r, null, parentVNode);
+		if (!vnode.ref.current || vnode.ref.current === vnode._dom)
+			applyRef(r, null, parentVNode);
 	}
 
 	let dom;","It seems like we can either drop the `r` assignment altogether, or use it for L409 as well? Also - it seems like we can skip nulling the ref if it's already null? (when `!vnode.ref.current`)",js,1,1,1
"@@ -1,8 +1,10 @@
 import styled from 'styled-components'
 import System from './System'
 
-const create = new System({
-  createComponent: type => (...args) => styled(type)([], ...args)
+export const createSystem = (styledFn) => new System({
+  createComponent: type => (...args) => styledFn(type)([], ...args)
 })
 
+const create = createSystem(styled)
+
 export default create","Thanks for this! I was first considering exporting the `System` class itself, since it might eventually take more arguments that the `createComponent` argument. I think also having the empty array as the first argument is only necessary for styled-components, so I'd want to make sure that part is really customizable. The `createComponent` function could also be leveraged to do more than only swap out css-in-js libraries, if that makes sense...",js,1,0,1
"@@ -5,8 +5,15 @@ describe('aria-errormessage', function() {
 	var shadowSupported = axe.testUtils.shadowSupport.v1;
 	var shadowCheckSetup = axe.testUtils.shadowCheckSetup;
 	var checkContext = axe.testUtils.MockCheckContext();
+	var attrData = Object.assign(
+		{},
+		axe.commons.aria.lookupTable.attributes['aria-errormessage']
+	);
 
 	afterEach(function() {
+		axe.commons.aria.lookupTable.attributes[
+			'aria-errormessage'
+		] = Object.assign({}, attrData);
 		fixture.innerHTML = '';
 		checkContext.reset();
 	});",Do we do this object assignment anywhere else? Maybe it makes sense to abstract into a utility that we can reuse?,js,1,1,1
"@@ -30,7 +30,7 @@ describe('cleanupPlugins', function() {
 	it('should throw if no audit is configured', function() {
 		assert.throws(
 			function() {
-				cleanupPlugins(document, {});
+				axe.cleanup(document, {});
 			},
 			Error,
 			/^No audit configured/",I think this file should be renamed to just cleanup.js,js,0,1,0
"@@ -195,7 +195,7 @@
                 var col = filterCols(cols, group)[0];
 
                 var val = $utils.evalProperty(model, group);
-                val = (val === '' || val === null) ? 'null' : val.toString();
+                val = (val === '' || val === null || val === undefined) ? '[empty]' : val.toString();
                 if (!ptr[val]) {
                     ptr[val] = {};
                 }",Why are you changing the 'null' text to '[empty]' here?,js,1,1,1
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -1,4 +1,5 @@
 import { compose, complement, either } from 'ramda';
+import curry2 from 'ramda/src/internal/_curry2';
 
 /* eslint-disable max-len */
 /**",Can we use `curry` or `curryN` instead of internal `curry2`. We only use `curry1` from internals and probably get rid of it in the future and replace it with `curryN` so that we're dependant on internal api or ramda as few as possible.,js,1,1,1
"@@ -19,11 +19,13 @@
 export const STORE_NAME = 'modules/pagespeed-insights';
 export { STORE_NAME as MODULES_PAGESPEED_INSIGHTS };
 
-// Form ID for PageSpeed widget.
-export const FORM_DASH_WIDGET = 'pagespeedDashboardWidget';
 // Report strategies.
 export const STRATEGY_MOBILE = 'mobile';
 export const STRATEGY_DESKTOP = 'desktop';
 // Report data sources.
 export const DATA_SRC_LAB = 'data_lab';
 export const DATA_SRC_FIELD = 'data_field';
+
+// Dashboard widgets using the UI store.
+export const WIDGET_STRATEGY = 'dashboardPageSpeedWidgetStrategy';
+export const WIDGET_DATA_SOURCE = 'dashboardPageSpeedWidgetDataSource';","Let's use a consistent naming format for these key variables across the plugin. I like to keep the constant names short, but maybe we should prefix them to indicate that they are fields for the `core/ui` store. The alternative would be to go with super-verbose names (like what is used for the actual values of these constants), but since these constants are usually not mixed between different components, it should be okay keeping their names short. How about renaming these to `UI_STRATEGY` and `UI_DATA_SOURCE`?",js,1,0,1
"@@ -1229,6 +1229,14 @@ class WebDriver {
     if (target && cdpTargets.indexOf(target.toLowerCase()) === -1) {
       throw new error.InvalidArgumentError('invalid target value')
     }
+
+    if (debuggerAddress.match(/\/se\/cdp/)) {
+      if (debuggerAddress.match(""ws:\/\/"", ""http:\/\/"")) {
+        return debuggerAddress.replace(""ws:\/\/"", ""http:\/\/"") 
+      }
+      return debuggerAddress
+    }
+
     const path = '/json/version'
     let request = new http.Request('GET', path)
     let client = new http.HttpClient('http://' + debuggerAddress)",if we are returning the `ws` here when passing in `se:cdp` we can just return it straight or do we have to make a request to get the `ws` address?,js,1,1,1
"@@ -11,7 +11,10 @@ function ngGridFlexibleHeightPlugin (opts) {
             var gridId = self.grid.gridId;
             var footerPanelSel = '.' + gridId + ' .ngFooterPanel';
             var extraHeight = self.grid.$topPanel.height() + $(footerPanelSel).height();
-            var naturalHeight = self.grid.$canvas.height() + 1;
+            var naturalHeight = self.grid.$canvas.prop('scrollHeight') + 1;
+            if ( self.grid.$topPanel.width() < grid.$canvas.prop('scrollWidth')) {
+                naturalHeight += 15;
+            }
             if (opts != null) {
                 if (opts.minHeight != null && (naturalHeight + extraHeight) < opts.minHeight) {
                     naturalHeight = opts.minHeight - extraHeight - 2;",Does this work for all browsers? i tested one time and came up with 20px on FF on Linux... but i have not tried setting the `naturalHeight` to the `scrollHeight + 1`,js,1,1,1
"@@ -34,7 +34,9 @@ import { isValidStringsOrObjects } from '../../../util/report-validation';
 export function isValidMetrics( metrics ) {
 	return isValidStringsOrObjects( metrics, ( metric ) => {
 		const validExpression = metric.hasOwnProperty( 'expression' ) && typeof metric.expression === 'string';
-		const validAlias = metric.hasOwnProperty( 'alias' ) && typeof metric.alias === 'string';
+
+		// 'alias' is optional; if provided, it must be a string.
+		const validAlias = ! metric.hasOwnProperty( 'alias' ) || typeof metric.alias === 'string';
 		return validExpression && validAlias;
 	} );
 }","  although the doc block should be updated to reflect this as it currently contradicts this: > Objects must have ""expression"" and ""alias"" properties in order to be considered as valid.",js,1,1,1
"@@ -41,7 +41,7 @@ export default Mixin.create({
     notifications: injectService(),
     clock: injectService(),
     slugGenerator: injectService(),
-
+    wordCount: 0,
     cards: [], // for apps
     atoms: [], // for apps
     toolbar: [], // for apps",I think we should be trying to move as much editor-specific code into the `gh-editor` component as possible rather than relying on the controller mixin - I initially thought this was here because the value needs to be carried across the new->edit transition but they are both separate controllers so carrying long-lived state here isn't useful for that. Keeping short-lived editor state in `gh-editor` means that we get automatic cleanup and always know the starting value.,js,1,0,1
"@@ -22,9 +22,9 @@ const plugins = require('../../pluginManager'),
             const dayOfYear = now.dayOfYear();
 
             periods.forEach((p) => {
-                timeList[p] = now.dayOfYear(dayOfYear - p).utc().unix();
+                timeList[p] = now.dayOfYear(dayOfYear - p).utc().unix() * 1000;
                 conditions.push({
-                    ls: {$lt: timeList[p]},
+                    lac: {$lt: timeList[p]},
                 });
             });
 ","I think we also need to change in the view on click action to use `lac` instead of `ls`, when viewing users in user profiles list",js,1,1,1
"@@ -0,0 +1,11 @@
+(() => {
+  const docusaurusVersions = ['9.0'];
+  const legacyVersions = ['8.3.0', '8.2.0', '8.1.0', '8.0.0', '7.4.2', '7.4.1', '7.4.0', '7.3.0', '7.2.2', '7.2.1', '7.2.0', '7.1.1', '7.1.0', '7.0.3', '7.0.2', '7.0.1', '7.0.0', '6.2.2', '6.2.1', '6.2.0', '6.1.1', '6.1.0', '6.0.1', '6.0.0', '5.0.2', '5.0.1', '5.0.0', '4.0.0', '3.0.0', '2.0.0', ['1.18.1', '0.38.1'], ['1.18.0', '0.38.0'], ['1.17.0', '0.37.0'], ['1.16.0', '0.36.0'], ['1.15.1', '0.35.1'], ['1.15.0', '0.35.0'], ['1.14.3', '0.34.3'], ['1.14.2', '0.34.2'], ['1.14.1', '0.34.1'], ['1.14.0', '0.34.0']];
+  const versions = [...docusaurusVersions, ...legacyVersions];
+
+  if (window.location.hostname === 'dev.handsontable.com') {
+    versions.unshift('next');
+  }
+
+  docVersions && docVersions(versions);
+})();","probably redundant file, please verify",js,1,1,0
"@@ -438,7 +438,12 @@ describe('Connection Pool', function () {
     });
 
     loadSpecTests('connection-monitoring-and-pooling').forEach(test => {
-      it(test.description, function () {
+      const itFn =
+        test.description ===
+        'must aggressively timeout threads enqueued longer than waitQueueTimeoutMS'
+          ? it.skip
+          : it;
+      itFn(test.description, function () {
         const operations = test.operations;
         const expectedEvents = test.events || [];
         const ignoreEvents = test.ignore || [];","This test has been flaky for a long time, if we're okay with skipping I can make a ticket to take a look at this later.",js,1,1,0
"@@ -81,6 +81,7 @@ module.exports = function Dashboard (props) {
       onDrop={props.handleDrop}
     >
       <div
+        aria-hidden=""true""
         className=""uppy-Dashboard-overlay""
         tabIndex={-1}
         onClick={props.handleClickOutside}",Why was this added?,js,1,1,0
"@@ -98,6 +98,8 @@ Blockly.DataCategory.addDataVariable = function(xmlList, variable) {
   //    <field name=""VARIABLE"">variablename</field>
   // </block>
   Blockly.DataCategory.addBlock(xmlList, variable, 'data_variable', 'VARIABLE');
+  // In the flyout, this ID must match variable ID for monitor syncing reasons
+  xmlList[xmlList.length - 1].setAttribute('id', variable.getId());
 };
 
 /**","LG but add an id to the xml on line 97 (`id=""variableId""` or something similar)",js,1,1,1
"@@ -539,7 +539,13 @@ class WebElement(object):
     @property
     def rect(self):
         """"""A dictionary with the size and location of the element.""""""
-        return self._execute(Command.GET_ELEMENT_RECT)['value']
+        if self._w3c:
+            return self._execute(Command.GET_ELEMENT_RECT)['value']
+        else:
+            rect = self.size.copy()
+            rect.update(self.location)
+            return rect
+
 
     @property
     def screenshot_as_base64(self):",flake8 is going to fail on this having 2 lines,js,1,1,1
"@@ -113,9 +113,9 @@ export function diffChildren(
 
 		newDom = childInternal._dom;
 
-		if (childVNode.ref) {
+		if (childVNode.ref || oldVNodeRef) {
 			if (!refs) refs = [];
-			childInternal.ref = childVNode.ref
+			childInternal.ref = childVNode.ref;
 			refs.push(
 				oldVNodeRef,
 				childVNode.ref,","Wondering if we even need the conditional here, or could just always assign.",js,1,1,1
"@@ -1,14 +1,16 @@
+import { translationMacro as t } from 'ember-i18n';
 import AbstractModuleRoute from 'hospitalrun/routes/abstract-module-route';
 import FulfillRequest from 'hospitalrun/mixins/fulfill-request';
 import InventoryId from 'hospitalrun/mixins/inventory-id';
 import InventoryLocations from 'hospitalrun/mixins/inventory-locations'; // inventory-locations mixin is needed for fulfill-request mixin!
 export default AbstractModuleRoute.extend(FulfillRequest, InventoryId, InventoryLocations, {
   addCapability: 'add_inventory_item',
+  buttonText: t('navigation.subnav.inventoryReceived'),
   additionalButtons: function() {
     if (this.currentUserCan(this.get('addCapability'))) {
       return [{
         buttonAction: 'newInventoryBatch',
-        buttonText: '+ inventory received',
+        buttonText: this.get('buttonText'),
         class: 'btn btn-primary'
       }];
     }","This buttonText should use a separate localization entry, not reuse the one from the subnav (the text is intentionally lowercase for the button).",js,1,1,1
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -486,7 +486,9 @@ function init(self, obj, doc, prefix) {
       if (obj[i] === null) {
         doc[i] = null;
       } else if (obj[i] !== undefined) {
-        if (schema) {
+        let intCache = obj[i].$__ || {};
+        let wasPopulated = intCache.wasPopulated || null;
+        if (schema && !wasPopulated) {
           try {
             doc[i] = schema.cast(obj[i], self, true);
           } catch (e) {","You can use `lodash.get` for this in the future, `get(obj[i], '$__.wasPopulated', false)`",js,1,1,1
"@@ -48,6 +48,7 @@ const baseModuleStore = Modules.createModuleStore( 'adsense', {
                 'siteStatus',
                 'accountSetupComplete',
                 'siteSetupComplete',
+                'ownerID',
         ],
         adminPage: 'googlesitekit-module-adsense',
 } );","Thank you, I realize this detail was missed in the IB  ",js,1,1,0
"@@ -24,8 +24,7 @@ import java.io.OutputStream;
 import java.util.Base64;
 
 /**
- * Defines the output type for a screenshot. See org.openqa.selenium.Screenshot for usage and
- * examples.
+ * Defines the output type for a screenshot.
  *
  * @see TakesScreenshot
  * @param <T> Type for the screenshot output.",instead of removing can you reference org.openqa.selenium.TakesScreenshot ?,js,1,1,1
"@@ -46,13 +46,13 @@ export function createMethod(type, name, mutates) {
             throw new TypeError(name + ' method was called on an object of the wrong type!');
         }
 
-        let result = rpc.callMethod(realmId, id, name, Array.from(arguments));
-
-        if (mutates) {
-            fireMutationListeners(realmId);
+        try {
+            return rpc.callMethod(realmId, id, name, Array.from(arguments));
+        } finally {
+            if (mutates) {
+                fireMutationListeners(realmId);
+            }
         }
-
-        return result;
     };
 }
 ",what gets returns if this throws?,js,1,1,1
"@@ -22,9 +22,9 @@ define(['viewContainer', 'focusManager', 'queryString', 'layoutManager'], functi
             newView.initComplete = true;
 
             if (typeof options.controllerFactory === 'function') {
-
-                // Use controller method
                 var controller = new options.controllerFactory(newView, eventDetail.detail.params);
+            } else if (options.controllerFactory && typeof options.controllerFactory.default === 'function') {
+                var controller = new options.controllerFactory.default(newView, eventDetail.detail.params);
             }
 
             if (!options.controllerFactory || dispatchPageEvents) {",Maybe move `var controller` out of `if/else`? (_Code Smell_),js,1,1,1
"@@ -5,9 +5,14 @@ import { pageY } from './../../helpers/dom/event';
 import { arrayEach } from './../../helpers/array';
 import { rangeEach } from './../../helpers/number';
 import { registerPlugin } from './../../plugins';
+import { ValueMap } from './../../translations';
 
 // Developer note! Whenever you make a change in this file, make an analogous change in manualRowResize.js
 
+const ROW_HEIGHTS_MAP_NAME = 'rowHeights';
+const PERSISTENT_STATE_KEY = 'manualRowHeights';
+const privatePool = new WeakMap();
+
 /**
  * @description
  * This plugin allows to change rows height. To make rows height persistent the {@link Options#persistentState}",Please change this name to the name of the plugin.,js,1,1,1
"@@ -1,5 +1,14 @@
+import windowIsTopMatches from './window-is-top-matches';
+
 function bypassMatches(node) {
-	return !!node.querySelector('a[href]');
+	// the top level window should have an anchor
+	if (windowIsTopMatches(node)) {
+		return !!node.querySelector('a[href]');
+	}
+
+	// all iframes do not need an anchor but should be checked for bypass
+	// elements (headings, landmarks, etc.)
+	return true;
 }
 
 export default bypassMatches;",I'm kind of confused about what you are trying to accomplish here. I don't see how pages having native links is relevant to whether or not they need a mechanism for bypassing repeating content.,js,1,1,1
"@@ -83,15 +83,16 @@ function HelpMenu( { children } ) {
 					ref={ menuRef }
 					menuOpen={ menuOpen }
 					id=""googlesitekit-help-menu""
+					onSelected={ () => {} }
 				>
 					{ children }
-					<HelpMenuLink href=""https://sitekit.withgoogle.com/documentation/fix-common-issues/"">
+					<HelpMenuLink gaEventLabel=""fix_common_issues"" href=""https://sitekit.withgoogle.com/documentation/fix-common-issues/"">
 						{ __( 'Fix common issues', 'google-site-kit' ) }
 					</HelpMenuLink>
-					<HelpMenuLink href=""https://sitekit.withgoogle.com/documentation/"">
+					<HelpMenuLink gaEventLabel=""documentation"" href=""https://sitekit.withgoogle.com/documentation/"">
 						{ __( 'Read help docs', 'google-site-kit' ) }
 					</HelpMenuLink>
-					<HelpMenuLink href=""https://wordpress.org/support/plugin/google-site-kit/"">
+					<HelpMenuLink gaEventLabel=""support_forum"" href=""https://wordpress.org/support/plugin/google-site-kit/"">
 						{ __( 'Get support', 'google-site-kit' ) }
 					</HelpMenuLink>
 				</Menu>","Instead of adding an empty function here, let's better add it as a default prop in the Menu component itself.",js,1,1,1
"@@ -93,7 +93,7 @@ Blockly.WorkspaceDragSurfaceSvg.prototype.createDom = function() {
     'xmlns:html': Blockly.HTML_NS,
     'xmlns:xlink': 'http://www.w3.org/1999/xlink',
     'version': '1.1',
-    'class': 'blocklyWsDragSurface'
+    'class': 'blocklyWsDragSurface blocklyOverflowVisible'
   }, null);
   this.container_.appendChild(this.SVG_);
 };",To fix an eslint warning (comma-dangle) delete the trailing comma.,js,1,1,1
"@@ -92,7 +92,9 @@ const webpackConfig = ( mode ) => {
 				// New Modules (Post-JSR).
 				'googlesitekit-api': './assets/js/googlesitekit-api.js',
 				'googlesitekit-data': './assets/js/googlesitekit-data.js',
+				'googlesitekit-datastore-user': './assets/js/googlesitekit-datastore-user.js',
 				'googlesitekit-datastore-site': './assets/js/googlesitekit-datastore-site.js',
+				'googlesitekit-modules-analytics': './assets/js/googlesitekit-modules-analytics.js',
 				'googlesitekit-modules': './assets/js/googlesitekit-modules.js', // TODO: Add external following 1162.
 				// Old Modules
 				'googlesitekit-activation': './assets/js/googlesitekit-activation.js',","Super nitpick, but can we keep alpha-sort here? (i.e. after datastore-site)",js,1,1,1
"@@ -1,9 +1,8 @@
-const { h } = require('preact')
+const { h, Fragment } = require('preact')
 
-// TODO use Fragment when upgrading to preact X
 const Breadcrumb = (props) => {
   return (
-    <span>
+    <Fragment>
       <button
         type=""button""
         className=""uppy-u-reset""",I believe this can be simplified even further by just using `<>` and `</>` instead of having to import Fragment,js,1,1,1
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -1,5 +1,8 @@
+import cache from '../core/base/cache';
+
 function windowIsTopMatches(node) {
 	return (
+		cache.get('isTopWindow') ||
 		node.ownerDocument.defaultView.self === node.ownerDocument.defaultView.top
 	);
 }","Why not pass the options around, or record what we think is the top level in the context object and pass that around? This is basically using the cache as a way to create global variables. Global variables is something we're trying to get out of, lets not add more of them.",js,1,1,1
"@@ -580,19 +580,6 @@ module.exports = [
 			},
 		},
 	},
-	{
-		id: 'wordpress--wordpress-activation',
-		kind: 'WordPress',
-		name: 'WordPress Activation',
-		story: 'WordPress Activation',
-		parameters: {
-			fileName: './stories/wp-activation.stories.js',
-			options: {
-				hierarchyRootSeparator: '|',
-				hierarchySeparator: {},
-			},
-		},
-	},
 	{
 		id: 'wordpress--wordpress-dashboard',
 		kind: 'WordPress',",Thanks so much for this fix! I wouldn't have thought to look in that folder to fix the tests!,js,1,1,0
"@@ -330,6 +330,10 @@ var jsonpatch;
             generate(observer);
             clearTimeout(observer.next);
             removeObserverFromMirror(mirror, observer);
+            if (mirror.observers.length === 0)
+            {
+                beforeDict.splice(beforeDict.indexOf(mirror), 1);
+            }
             if (typeof window !== 'undefined') {
                 if (window.removeEventListener) {
                     window.removeEventListener('mousedown', fastCheck);",Incorrect format - braces must be on this same line after the preceding closing brace.,js,1,1,1
"@@ -23,14 +23,13 @@ import Data from 'googlesitekit-data';
 import authentication from './authentication';
 import dateRange from './date-range';
 import disconnect from './disconnect';
+import inputSettings from './input-settings';
 import { createErrorStore } from '../../data/create-error-store';
 import notifications from './notifications';
 import permissions from './permissions';
 import userInfo from './user-info';
 import { STORE_NAME } from './constants';
 
-export { STORE_NAME };
-
 const store = Data.combineStores(
 	Data.commonStore,
 	authentication,","Nitpicking, but let's call this file `user-input-settings.js` since ""User Input"" is kind of a semi-internal codename for this feature. ""input"" on its own therefore isn't as clear here.",js,1,1,1
"@@ -30,7 +30,7 @@ storiesOf( 'Dashboard', module )
 		<DashboardModuleHeader
 			title={ __( 'Module Header', 'google-site-kit' ) }
 			description={ __( 'Description of Module', 'google-site-kit' ) }
-			timePeriod={ __( 'Last 28 Days', 'google-site-kit' ) }
+			timePeriod={ __( 'Last 28 days', 'google-site-kit' ) }
 		/>
 	) )
 	.add( 'All Traffic', () => {",I think we might want to keep title case here.,js,1,1,1
"@@ -132,10 +132,8 @@ export function diff(parentDom, newVNode, oldVNode, context, isSvg, excessDomChi
 
 			c.base = newVNode._dom;
 
-			while (tmp=c._renderCallbacks.pop()) {
-				if (c._nextState) { c.state = c._nextState; }
-				tmp.call(c);
-			}
+			tmp = c._renderCallbacks; c._renderCallbacks=[];
+			tmp.some(cb => cb.call(c));
 
 			// Don't call componentDidUpdate on mount or when we bailed out via
 			// `shouldComponentUpdate`",Nit: let's newline this,js,1,1,1
"@@ -2,9 +2,12 @@ if (node.getAttribute('id')) {
 	const root = axe.commons.dom.getRootNode(node);
 	const id = axe.commons.utils.escapeSelector(node.getAttribute('id'));
 	const label = root.querySelector(`label[for=""${id}""]`);
+	const isLabelVisible = label && axe.commons.dom.isVisible(label);
 
-	if (label && !axe.commons.dom.isVisible(label)) {
-		return true;
+	if (isLabelVisible === false) {
+		const name = axe.commons.text.accessibleTextVirtual(virtualNode).trim();
+		const isNameEmpty = name === '';
+		return isNameEmpty;
 	}
 }
 return false;",I think this now fails if there is no label. Should probably just put the if statement back to the way it was.,js,1,1,1
"@@ -77,7 +77,7 @@ const nordStyle = {
 	htmlCodeBorderColor: nord[2],
 	htmlCodeColor: nord[13],
 
-	editorTheme: 'chaos',
+	editorTheme: 'terminal',
 	codeThemeCss: 'atom-one-dark-reasonable.css',
 };
 ","In AceEditor.tsx, you've added the ""tomorrow"" theme, and ""twilight"" was already present, however you didn't add ""terminal"". Isn't it an issue?",js,1,1,1
"@@ -19,6 +19,7 @@
 ""use strict"";
 
 const {promisify} = require(""./utils.js"");
+const { realpath } = require(""fs"");
 
 const instanceMethods = {
     logIn(credentials) {",This looks like an auto-complete error? :),js,1,1,1
"@@ -32,9 +32,10 @@ describe('createElement(jsx)', () => {
 		expect(<Test />).to.have.property('type', Test);
 	});
 
-	it('should set VNode._self property to prevent json injection', () => {
+	it('should set VNode.constructor property to prevent json injection', () => {
 		const vnode = <span />;
-		expect(vnode._self).to.equal(vnode);
+		// eslint-disable-next-line no-proto
+		expect(vnode.constructor).to.equal(undefined);
 	});
 
 	it('should set VNode#props property', () => {",Guess this one is a left over from the proto approach?,js,1,1,1
"@@ -1,9 +1,9 @@
 'use strict';
 
-const MongoError = require('../core').MongoError;
+const MongoError = require('../core/error').MongoError;
 const Aspect = require('./operation').Aspect;
 const OperationBase = require('./operation').OperationBase;
-const ReadPreference = require('../core').ReadPreference;
+const ReadPreference = require('../core/topologies/read_preference');
 const isRetryableError = require('../core/error').isRetryableError;
 const maxWireVersion = require('../core/utils').maxWireVersion;
 const isUnifiedTopology = require('../core/utils').isUnifiedTopology;",why the diff here?,js,1,1,0
"@@ -9,6 +9,10 @@ const databaseNamespace = require('./shared').databaseNamespace;
 const isTransactionCommand = require('../transactions').isTransactionCommand;
 const applySession = require('../sessions').applySession;
 
+function isClientEncryptionEnabled(server) {
+  return server && server.s && server.s.options && server.s.options.autoEncrypter;
+}
+
 function command(server, ns, cmd, options, callback) {
   if (typeof options === 'function') (callback = options), (options = {});
   options = options || {};","This could be follow-on work, but it would be nice to have `server.autoEncrypter` similar to `collection.readConcern` so we don't have to do this long check here.",js,1,1,1
"@@ -140,6 +140,10 @@ class SearchRunner
             compact('params', 'request', 'runningSearchId')
         );
 
+        if (isset($rawRequest['enabledFacets'])) {
+            $params->retainFacets($rawRequest['enabledFacets']);
+        }
+
         // Attempt to perform the search; if there is a problem, inspect any Solr
         // exceptions to see if we should communicate to the user about them.
         try {","While I don't see any major harm in globally enabling an enabledFacets query parameter, perhaps it would a more targeted fix to put this logic in the setup callback created by GetSideFacets::getFacetResults() instead of the SearchRunner itself.",php,1,1,1
"@@ -38,6 +38,8 @@ namespace VuFind\Sitemap;
  */
 class Sitemap extends AbstractFile
 {
+    const XHTML_NAMESPACE = 'xmlns:xhtml=""http://www.w3.org/1999/xhtml""';
+
     /**
      * Frequency of URL updates (always, daily, weekly, monthly, yearly, never)
      *",We should set this public or protected to keep PHPStan happy when we raise its level in the future.,php,1,1,1
"@@ -22,11 +22,13 @@ class MediaManager extends BaseDocumentManager
     {
         // BC compatibility for $context parameter
         if ($andFlush && is_string($andFlush)) {
+            @trigger_error(sprintf('Since version 2.2.7, passing context in argument 2 for %s() is deprecated and support for it will be removed in 3.0. Use %s::setContext() instead.', __METHOD__, $this->class), E_USER_DEPRECATED);
             $entity->setContext($andFlush);
         }
 
         // BC compatibility for $providerName parameter
         if (3 == func_num_args()) {
+            @trigger_error(sprintf('Since version 2.2.7, passing provider name in argument 3 for %s() is deprecated and support for it will be removed in 3.0. Use %s::setProviderName() instead.', __METHOD__, $this->class), E_USER_DEPRECATED);
             $entity->setProviderName(func_get_arg(2));
         }
 ",please line break this!,php,1,0,1
"@@ -14,7 +14,6 @@ return [
     */
 
     'previous' => '&laquo; Προηγούμενη',
-
     'next'     => 'Επόμενη &raquo;',
 
 ];",Why delete empty lines ?,php,1,1,1
"@@ -142,12 +142,12 @@ class BrandFacade
     /**
      * @param int $brandId
      */
-    public function deleteById($brandId)
+    public function deleteById(int $brandId): void
     {
         $brand = $this->brandRepository->getById($brandId);
         $this->em->remove($brand);
-
         $this->dispatchBrandEvent($brand, BrandEvent::DELETE);
+        $this->friendlyUrlFacade->removeFriendlyUrlsForAllDomains('front_brand_detail', $brandId);
 
         $this->em->flush();
     }",Can you please state this change in upgrade notes as it's BC break? (also please update PR description - BC breaks: yes),php,0,1,1
"@@ -110,7 +110,7 @@ array_map(
                 );
                 exit(1);
             }
-        } elseif (substr($arg, 0, 2) === '-' && $arg !== '-' && $arg !== '--') {
+        } elseif (substr($arg, 0, 1) === '-' && $arg !== '-' && $arg !== '--') {
             $arg_name = preg_replace('/=.*$/', '', substr($arg, 1));
 
             if (!in_array($arg_name, $valid_short_options) && !in_array($arg_name . ':', $valid_short_options)) {","The bug fix in this PR was noticed when looking at a check that `in_array()` is always explicitly passed a third argument for $strict. It doesn't matter now, but might matter if `-0` becomes an option, because `'0' == '0e1'` (strings are cast to numbers to compare if both are numeric)",php,1,1,1
"@@ -376,6 +376,13 @@ class AdminController extends Controller
      */
     protected function createEditForm($entity, array $entityProperties)
     {
+        $servicename = sprintf('form.type.%s', strtolower($this->entity['name']));
+
+		if($this->get('service_container')->has($servicename))
+		{
+			return $this->createForm( $this->get($servicename), $entity	);
+		}
+        
         $form = $this->createFormBuilder($entity, array(
             'data_class' => $this->entity['class'],
         ));","Maybe this should be prefixed with the `easyadmin` namespace ? (**_i.e**_: easyadmin.form.type.<entityname>) Or something more appropriate, as the form will not really be part of the bundle.",php,1,1,1
"@@ -1,5 +1,6 @@
 <?php namespace Backend\Models;
 
+use BackendAuth;
 use Mail;
 use Event;
 use Backend;",Move the backend auth use statement below the backend use statement please,php,1,1,0
"@@ -31,10 +31,9 @@ class ImportErrorsGrid extends AbstractGrid
         $id->setVisible(false);
         $this->addColumn('id', $id);
 
-        $this->addColumn('line', new NumericColumn('line', 'Record number', new NumericFilter()));
         $this->addColumn('created_at', new TextColumn('created_at', 'Created at', new DateFilter()));
         $this->addColumn('message', new TextColumn('message', 'Error description', new TextFilter()));
 
-        $this->orderBy('line', 'ASC');
+        $this->orderBy('id', 'ASC');
     }
 }",If `id` is not numeric I thing is better order by column `created_at`?,php,1,1,1
"@@ -50,7 +50,7 @@ class SolrConfigStatus implements StatusProviderInterface
      *
      * @var string
      */
-    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-4-0-0--20160406';
+    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-6-0-0--20160725';
 
     /**
      * Compiles a collection of solrconfig version checks against each configured","solrconfig didn't change, did it?",php,1,1,0
"@@ -45,6 +45,7 @@ return [
         ['file' => 'lightbox.js', 'priority' => 320],
         ['file' => 'truncate.js', 'priority' => 330],
         ['file' => 'trigger_print.js', 'priority' => 340],
+        ['file' => 'resultcount.js', 'priority' => 350],
     ],
     'less' => [
         'active' => false,","Now that showCounts is configurable, would it make sense to conditionally load this via searchTabs.phtml when the feature is enabled, rather than always loading the Javascript?",php,1,1,1
"@@ -19,7 +19,7 @@ use const PREG_OFFSET_CAPTURE;
 
 class DocblockParser
 {
-    public static function parse(string $docblock) : ParsedDocblock
+    public static function parse(string $docblock, int $offsetStart) : ParsedDocblock
     {
         // Strip off comments.
         $docblock = trim($docblock);",Mind adding a docblock specifying whether absolute file offset or relative docblock offset is expected here?,php,1,1,1
"@@ -160,6 +160,11 @@ class Configuration implements ConfigurationInterface
     private function addGlobalOptionsSection(ArrayNodeDefinition $rootNode)
     {
         $rootNode
+            ->beforeNormalization()
+                ->ifTrue(function ($v) { return isset($v['default_templates']); })
+                ->thenInvalid('The ""default_templates"" key is reserved for internal use and cannot be defined. It contains the templates to use when no entity configuration is available (for example in exception pages).')
+            ->end()
+
             ->children()
                 ->scalarNode('site_name')
                     ->defaultValue('Easy Admin')","Why ""exposing"" it in the bundle's configuration if it's only available as of processed metadata ?",php,1,1,1
"@@ -89,7 +89,7 @@ class CartFacadeDeleteOldCartsTest extends TransactionFunctionalTestCase
 
     /**
      * @param int $productId
-     * @return \Shopsys\ShopBundle\Model\Product\Product
+     * @return \Shopsys\FrameworkBundle\Model\Product\Product
      */
     private function getProductById($productId)
     {",symfony extension for new PR ?,php,0,1,1
"@@ -21,7 +21,7 @@ class ArticleTest extends TransactionFunctionalTestCase
     private $articleFactory;
 
     /**
-     * @var \Doctrine\ORM\EntityManager
+     * @var \Shopsys\FrameworkBundle\Component\EntityExtension\EntityManagerDecorator
      */
     private $em;
 ",OK now it make sense and also that `flush($entityInstance)`,php,1,1,0
"@@ -119,7 +119,13 @@ final class VimeoProvider extends BaseVideoProvider
 
     public function getReferenceUrl(MediaInterface $media): string
     {
-        return sprintf('https://vimeo.com/%s', $media->getProviderReference());
+        $providerReference = $media->getProviderReference();
+
+        if (null === $providerReference) {
+            return '';
+        }
+
+        return sprintf('https://vimeo.com/%s', $providerReference);
     }
 
     protected function fixBinaryContent(MediaInterface $media): void",Same thing about references to videos.,php,0,1,1
"@@ -93,6 +93,10 @@ class ForeachAnalyzer
 
         if ($stmt->valueVar instanceof PhpParser\Node\Expr\Variable && is_string($stmt->valueVar->name)) {
             $safe_var_ids['$' . $stmt->valueVar->name] = true;
+            $statements_analyzer->foreach_var_locations['$' . strtolower($stmt->valueVar->name)][] = new CodeLocation(
+                $statements_analyzer,
+                $stmt->valueVar
+            );
         } elseif ($stmt->valueVar instanceof PhpParser\Node\Expr\List_) {
             foreach ($stmt->valueVar->items as $list_item) {
                 if (!$list_item) {",why are you normalising the variable name? Variables in PHP are case-sensitive.,php,1,1,1
"@@ -951,11 +951,10 @@ class UpdateManager
         return base64_encode(hash_hmac('sha512', http_build_query($data, '', '&'), base64_decode($secret), true));
     }
 
-    //
-    // Internals
-    //
-
-    protected function getMigrationTableName()
+    /**
+     * @return string
+     */
+    public function getMigrationTableName()
     {
         return Config::get('database.migrations', 'migrations');
     }",Please check to make sure your linters haven't screwed with OctoberCMS stuff before making PRs ;),php,1,1,1
"@@ -45,6 +45,7 @@ final class Version20190818160000 extends AbstractErgonodeMigration
             'Ergonode\Workflow\Domain\Event\Workflow\WorkflowStatusRemovedEvent' => 'Deleted status from workflow',
             'Ergonode\Workflow\Domain\Event\Workflow\WorkflowTransitionAddedEvent' => 'Added transition to workflow',
             'Ergonode\Workflow\Domain\Event\Workflow\WorkflowTransitionRemovedEvent' => 'Deleted transition from workflow',
+            'Ergonode\Workflow\Domain\Event\Workflow\WorkflowDeletedEvent' => 'Workflow deleted',
         ]);
     }
 ",There should be also translations for event,php,1,1,1
"@@ -2038,11 +2038,6 @@ class ClassTemplateTest extends TestCase
                         public function __construct(Foo $v) {
                             $this->vector = $v;
                         }
-
-                        public function getIterator(): Iterator
-                        {
-                            yield from $this->vector;
-                        }
                     }',
                 [],
                 ['TooManyTemplateParams']",Why are you removing this? The test isn't testing anything proper without this yield,php,1,1,1
"@@ -557,14 +557,14 @@ class Layout_Blog extends Base_Customizer {
 		);
 
 		if ( empty( $value ) ) {
-			return $allowed;
+			return wp_json_encode( $allowed );
 		}
 
 		$decoded = json_decode( $value, true );
 
 		foreach ( $decoded as $val ) {
 			if ( ! in_array( $val, $allowed, true ) ) {
-				return $allowed;
+				return wp_json_encode( $allowed );
 			}
 		}
 ","Same thing here: the sanitize function should only confirm that the format is proper, not adapt it.",php,1,1,1
"@@ -103,4 +103,14 @@ class Missing extends DefaultRecord
         $title = parent::getShortTitle();
         return empty($title) ? $this->determineMissingTitle() : $title;
     }
+
+    /**
+     * Get an array of all the formats associated with the record.
+     *
+     * @return array
+     */
+    public function getFormats()
+    {
+        return ['other'];
+    }
 }","As a side effect, I think this is going to cause an untranslated ""other"" text to appear next to placeholder entries for missing records in lists. Would it be better to use 'Unknown' here to leverage existing translations, or does that not work in other ways?",php,1,1,1
"@@ -0,0 +1,9 @@
+<?php
+
+namespace Psalm\Issue;
+
+class InvalidTypeImport extends CodeIssue
+{
+    const ERROR_LEVEL = 7;
+    const SHORTCODE = 233;
+}","Not sure about the level, feel free to adjust.",php,1,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -13,7 +13,7 @@ class Currency
     const CODE_CZK = 'CZK';
     const CODE_EUR = 'EUR';
 
-    const DEFAULT_EXCHANGE_RATE = 1;
+    const DEFAULT_EXCHANGE_RATE = '1';
 
     /**
      * @var int","to me, it looks more like recasting than fixing typehint, but OK does make sense to join `Currency DEFAULT_EXCHANGE_RATE` into `Currency::$DEFAULT_EXCHANGE_RATE` ?",php,1,1,1
"@@ -82,7 +82,7 @@ class OrderData
     public $country;
 
     /**
-     * @var bool|null
+     * @var bool
      */
     public $deliveryAddressSameAsBillingAddress;
 ","shouldn't we do the same for at least one of these `FrontOrderData`, `ProductFilterData` ?",php,0,1,1
"@@ -32,8 +32,11 @@ class ActionConfigPass implements ConfigPassInterface
     {
         $backendConfig = $this->processDisabledActions($backendConfig);
         $backendConfig = $this->normalizeActionsConfig($backendConfig);
+        $backendConfig = $this->normalizeBatchActionsConfig($backendConfig);
         $backendConfig = $this->resolveActionInheritance($backendConfig);
+        $backendConfig = $this->resolveBatchActionInheritance($backendConfig);
         $backendConfig = $this->processActionsConfig($backendConfig);
+        $backendConfig = $this->processBatchActionsConfig($backendConfig);
 
         return $backendConfig;
     }","(To facilitate the review) all new code related to this file is a copy-paste of `*ActionsConfig()` methods, removing the `foreach($this->views as $view)` statements and hardcoding the `list` view value.",php,0,1,1
"@@ -10,15 +10,15 @@ return [
         'invalid_file_extension' => 'Extensión de archivo inválida: :invalid. Las extensiones permitidas son: :allowed.',
         'error_deleting' => 'Error borrando el archivo template "":name"". Por favor, revisa los permisos de escritura.',
         'delete_success' => 'Los templates fueron borrados satisfactoriamente: :count.',
-	'file_name_required' => 'Falta el nombre del campo del archivo.',
-	'safe_mode_enabled' => 'Modo seguro esta actualmente activado.'
+    'file_name_required' => 'Falta el nombre del campo del archivo.',
+    'safe_mode_enabled' => 'Modo seguro esta actualmente activado.'
     ],
     'dashboard' => [
         'active_theme' => [
             'widget_title_default' => 'Sitio Web',
             'online' => 'en línea',
             'maintenance' => 'en mantenimiento',
-	    'manage_themes' => 'Gestionar plantilla'
+        'manage_themes' => 'Gestionar plantilla'
         ]
     ],
     'theme' => [","Why was this merged @daftspunk? This isn't even consistent reformatting, it looks automated to me.",php,0,1,1
"@@ -14,7 +14,7 @@ use Symfony\Component\Routing\Generator\UrlGeneratorInterface;
 
 class PersonalDataAccessMail implements MailTypeInterface, MessageFactoryInterface
 {
-    public const VARIABLE_EMAIL = '{e-mail}';
+    public const VARIABLE_EMAIL = '{email}';
     public const VARIABLE_URL = '{url}';
     public const VARIABLE_DOMAIN = '{domain}';
 ",This is a dangerous BC break as current data (email templates in DB) have to be altered. It's really necessary to point it out in the upgrade notes. same applies for `PersonalDataExportMail`,php,1,1,1
"@@ -13,6 +13,9 @@ use Shopsys\FrameworkBundle\Model\Product\Exception\ProductNotFoundException;
 use Shopsys\FrameworkBundle\Model\Product\Product;
 use Shopsys\FrameworkBundle\Model\Product\ProductFacade;
 
+/**
+ * @deprecated Use ProductByUuidResolver instead
+ */
 class ProductResolver implements ResolverInterface, AliasedInterface
 {
     /**",I am missing reason why is this class renamed. It is just obout naming or it has some other reason I do not see now?,php,1,1,1
"@@ -42,7 +42,7 @@ trait PsalmRunnerTrait
             $process->mustRun();
         } else {
             $process->run();
-            $this->assertGreaterThan(0, $process->getExitCode());
+            $this->assertEquals(2, $process->getExitCode());
         }
 
         return [","As Psalm now always return exit code 2 when it detects issues, we expect that when `$shouldFail === true`, and let unexpected exceptions be reported as test failures.",php,1,1,1
"@@ -195,7 +195,9 @@ BEGIN_EVENT_TABLE (CAdvancedFrame, CBOINCBaseFrame)
     EVT_MENU(ID_HELPBOINCMANAGER, CAdvancedFrame::OnHelpBOINC)
     EVT_MENU(ID_HELPBOINCWEBSITE, CAdvancedFrame::OnHelpBOINC)
     EVT_MENU(wxID_ABOUT, CAdvancedFrame::OnHelpAbout)
+#ifdef ENABLE_NEW_VERSION_CHECK
     EVT_MENU(ID_CHECK_VERSION, CAdvancedFrame::OnCheckVersion)
+#endif
     EVT_MENU(ID_REPORT_BUG, CAdvancedFrame::OnReportBug)
     EVT_HELP(wxID_ANY, CAdvancedFrame::OnHelp)
     // Custom Events & Timers","As I told you before, there are two additional OSs we support: Windows and OSX. If you build BOINC Manager for linux to control BOINC client for linux - this works perfect. But if you decide to control BOINC client for Windows or OSX with BOINC Manager for Linux - then you'll have no way to check for a new version of BOINC client for that particular OS. The same if applicable for BOINC Manager for Windows or OSX, I'll have an option to check for a new version that will do basically nothing because this functionality just dropped from the BOINC client for linux.",php,0,0,1
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -77,7 +77,7 @@ static void get_user_agent_string() {
     );
     if (strlen(gstate.client_brand)) {
         char buf[256];
-        snprintf(buf, sizeof(buf), "" (%s)"", gstate.client_brand);
+        snprintf(buf, sizeof(buf), "" (%.80s)"", gstate.client_brand);
         safe_strcat(g_user_agent_string, buf);
     }
 }",Why this is cut to 80 symbols?,php,1,1,1
"@@ -30,7 +30,7 @@ var DBATag = ""v0.2.0""
 var RouterImage = ""drud/nginx-proxy"" // Note that this is overridden by make
 
 // RouterTag defines the tag used for the router.
-var RouterTag = ""v0.3.0"" // Note that this is overridden by make
+var RouterTag = ""router-expose"" // Note that this is overridden by make
 
 // COMMIT is the actual committish, supplied by make
 var COMMIT = ""COMMIT should be overridden""",Update to real tag before pull.,php,1,1,1
"@@ -29,6 +29,19 @@ class Customer
      */
     protected $billingAddresses;
 
+    /**
+     * @var \Shopsys\FrameworkBundle\Model\Customer\DeliveryAddress[]|\Doctrine\Common\Collections\Collection
+     *
+     * @ORM\OneToMany(targetEntity=""Shopsys\FrameworkBundle\Model\Customer\DeliveryAddress"", mappedBy=""customer"", cascade={""persist""})
+     */
+    protected $deliveryAddresses;
+
+    public function __construct()
+    {
+        $this->billingAddresses = new ArrayCollection();
+        $this->deliveryAddresses = new ArrayCollection();
+    }
+
     /**
      * @param \Shopsys\FrameworkBundle\Model\Customer\BillingAddress $billingAddress
      */",I'm not sure if this change doesn't break the application.. because before it would set billing addresses to an empty collection and then add one. Now it seems that there could be more addresses,php,1,1,1
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -123,4 +123,9 @@ interface ProductOnCurrentDomainFacadeInterface
      * @return array
      */
     public function getProductsOnCurrentDomain(int $limit, int $offset, string $orderingModeId): array;
+
+    /**
+     * @return int
+     */
+    public function getProductsCountOnCurrentDomain(): int;
 }",Should it be called `getAllListableProductCount...`?,php,1,1,1
"@@ -35,8 +35,11 @@ class CurlDownloader implements DownloaderInterface
      *
      * @throws DownloaderException
      */
-    public function download(string $url, array $headers = []): string
+    public function download(string $url, array $headers = [], string $acceptedHeaderTypes = null): string
     {
+        if (null !== $acceptedHeaderTypes) {
+            throw new DownloaderException('CurlDownloader not supported param `acceptedHeaderTypes`');
+        }
         $ch = curl_init();
         curl_setopt($ch, CURLOPT_HEADER, 0);
         curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);","IMHO acceptedHeaderTypes should be array not string, or I miss somthing ??",php,1,1,1
"@@ -80,6 +80,7 @@ class Data extends AbstractData {
 
     if (isset($downloadUrl) && !filter_var($downloadUrl, FILTER_VALIDATE_URL)) {
       $resourceIdentifier = $downloadUrl;
+      $ref = NULL; $original = NULL;
       [$ref, $original] = $this->retrieveDownloadUrlFromResourceMapper($resourceIdentifier);
 
       $downloadUrl = isset($original) ? $original : """";",My guess is you added these because Code Climate thinks these are undefined...,php,1,1,1
"@@ -13,7 +13,7 @@
 
 return [
     'accepted'             => 'Pole musi zostać zaakceptowane.',
-    'accepted_if'          => 'This field must be accepted when :other is :value.',
+    'accepted_if'          => 'Pole :attribute musi zostać zaakceptowane gdy :other ma wartość :value.',
     'active_url'           => 'Pole jest nieprawidłowym adresem URL.',
     'after'                => 'Pole musi być datą późniejszą od :date.',
     'after_or_equal'       => 'Pole musi być datą nie wcześniejszą niż :date.',",There is not :attribute tag here,php,1,1,1
"@@ -26,7 +26,7 @@ class IndependentTransportVisibilityCalculationTest extends TransactionFunctiona
     private $independentTransportVisibilityCalculation;
 
     /**
-     * @var \Shopsys\FrameworkBundle\Model\Transport\TransportDataFactoryInterface
+     * @var \App\Model\Transport\TransportDataFactory
      * @inject
      */
     private $transportDataFactory;",Why is it necessary to replace interfaces with class?,php,1,1,1
"@@ -237,6 +237,7 @@ class ReturnTypeAnalyzer
             foreach ($inferred_return_type_parts as $inferred_return_type_part) {
                 if ($inferred_return_type_part->isVoid()) {
                     $unsafe_return_type = true;
+                    break;
                 }
             }
         }",Loops that only flags a variable should break as soon as possible to avoid useless iterations.,php,1,1,1
"@@ -1,6 +1,7 @@
 <?php
 namespace Psalm\Tests;
 
+use Person;
 use Psalm\Tests\Traits\InvalidCodeAnalysisTestTrait;
 use Psalm\Tests\Traits\ValidCodeAnalysisTestTrait;
 ","Not sure how that will play out, this is not an existing class",php,1,1,1
"@@ -158,14 +158,6 @@ class Controller extends ControllerBase
          */
         $this->user = BackendAuth::getUser();
 
-        /*
-         * Media Manager widget is available on all back-end pages
-         */
-        if ($this->user && $this->user->hasAccess('media.*')) {
-            $manager = new MediaManager($this, 'ocmediamanager');
-            $manager->bindToController();
-        }
-
         $this->extendableConstruct();
     }
 ",@alxy @bennothommo doesn't this mean that the MediaManager widget is now bound to the controller once for every single instance of a field that uses it? That seems a bit excessive.,php,0,1,1
"@@ -60,8 +60,11 @@ class DbalLogQuery implements LogQueryInterface
     private function getQuery(): QueryBuilder
     {
         return $this->connection->createQueryBuilder()
-            ->select('es.id, event, payload, recorded_at, recorded_by AS author_id, coalesce(u.first_name || \' \' || u.last_name, \'System\') AS author')
-            ->leftJoin('es', 'users', 'u', 'u.id = es.recorded_by')
-            ->from('event_store', 'es');
+            ->select('es.id, payload, recorded_at, recorded_by AS author_id')
+            ->addSelect('coalesce(u.first_name || \' \' || u.last_name, \'System\') AS author')
+            ->addSelect('ese.translation_key as event')
+            ->from('event_store', 'es')
+            ->join('es', 'event_store_event', 'ese', 'es.event = ese.id')
+            ->leftJoin('es', 'users', 'u', 'u.id = es.recorded_by');
     }
 }",It be better if you name event_id instead of event id in name give you information about relation,php,1,1,1
"@@ -1416,13 +1416,12 @@ void process_request(char* code_sign_key) {
             if (config.min_sendwork_interval) {
                 double diff = dtime() - last_rpc_time;
                 if (diff < config.min_sendwork_interval) {
-                    double t_left = config.min_sendwork_interval - diff;
                     ok_to_send_work = false;
                     log_messages.printf(MSG_NORMAL,
-                        ""Not sending work - last request too recent, please wait: %f\n"", t_left
+                        ""Not sending work - last request too recent, please wait: %f\n"", config.min_sendwork_interval
                     );
                     sprintf(buf,
-                        ""Not sending work - last request too recent, please wait: %d sec"", (int)t_left
+                        ""Not sending work - last request too recent, please wait: %d sec"", (int)config.min_sendwork_interval
                     );
                     g_reply->insert_message(buf, ""low"");
 ","This means that user will always see the, let's say, 'default' delay interval even if there is less time left before he can do next request. E.g. There is a default delay of 60 sec. User waits 59 seconds, make another request and see the message that he should wait for 60 seconds more while in fact he had to wait only 1 second before doing next request. Isn't this misleading a little bit?",php,1,1,1
"@@ -28,14 +28,12 @@ class AttributeGroupGrid extends AbstractGrid
      */
     public function init(GridConfigurationInterface $configuration, Language $language): void
     {
-        $filters = $configuration->getFilters();
-
-        $id = new TextColumn('id', 'Id', new TextFilter($filters->get('id')));
+        $id = new TextColumn('id', 'Id', new TextFilter());
         $id->setVisible(false);
         $this->addColumn('id', $id);
-        $this->addColumn('code', new TextColumn('code', 'Code', new TextFilter($filters->get('code'))));
-        $this->addColumn('name', new TextColumn('name', 'Name', new TextFilter($filters->get('name'))));
-        $this->addColumn('elements_count', new IntegerColumn('elements_count', 'Elements Count', new TextFilter($filters->get('elements_count'))));
+        $this->addColumn('code', new TextColumn('code', 'Code', new TextFilter()));
+        $this->addColumn('name', new TextColumn('name', 'Name', new TextFilter()));
+        $this->addColumn('elements_count', new IntegerColumn('elements_count', 'Elements Count', new TextFilter()));
 
         $links = [
             'get' => [",In TextColum u can use TextFilter as class default. Less coding :),php,1,1,1
"@@ -51,16 +51,14 @@ class DbalConditionSetQuery implements ConditionSetQueryInterface
     /**
      * @return array
      */
-    public function findNumericConditionRelations(AttributeId $attributeId): array
+    public function findAttributeIdConditionRelations(AttributeId $attributeId): array
     {
         $qb = $this->connection->createQueryBuilder();
 
         $records = $qb->select('id')
             ->from(self::TABLE)
-            ->where($qb->expr()->eq('conditions->0->>\'type\'', ':type'))
-            ->where($qb->expr()->eq('conditions->0->>\'attribute\'', ':attribute_id'))
-            ->setParameter(':type', 'NUMERIC_ATTRIBUTE_VALUE_CONDITION')
-            ->setParameter(':attribute_id', $attributeId->getValue())
+            ->where('conditions::text ILIKE :attribute_id')
+            ->setParameter(':attribute_id', '%'.$attributeId->getValue().'%')
             ->execute()
             ->fetchAll(\PDO::FETCH_COLUMN);
 ",I don't really like the solution. Though unlikely it may occur that there will be text or id assigned to another type of entity matching. What is the reasoning for that?,php,1,1,1
"@@ -25,6 +25,9 @@ func TestWriteDrupalConfig(t *testing.T) {
 	err = WriteDrupalConfig(drupalConfig, file.Name())
 	assert.NoError(t, err)
 
+	os.Chmod(dir, 0755)
+	os.Chmod(file.Name(), 0666)
+
 	err = os.RemoveAll(dir)
 	assert.NoError(t, err)
 }",Please check the return on these.,php,1,1,1
"@@ -23,14 +23,14 @@ class CacheDownloaderDecorator implements DownloaderInterface
         $this->directory = sprintf('%s/var/downloader', $appKernel->getProjectDir());
     }
 
-    public function download(string $url, array $headers = []): string
+    public function download(string $url, array $headers = [], string $acceptedHeaderTypes = null): string
     {
         $data = parse_url($url);
 
         $filename = sprintf('%s/%s%s', $this->directory, $data['host'], $data['path']);
 
         if (!file_exists($filename)) {
-            $content = $this->downloader->download($url, $headers);
+            $content = $this->downloader->download($url, $headers, $acceptedHeaderTypes);
             if ($content) {
                 $this->saveFile($filename, $content);
             }",As far as I know it is about limiting the allowed mime formats ? So maybe it is better to call it AcceptedMimeTypes or AcceptetContenType ?,php,1,1,1
"@@ -561,6 +561,10 @@ class Folio extends AbstractAPI implements
                 $locationData = $this->getLocationData($locationId);
                 $locationName = $locationData['name'];
                 $locationCode = $locationData['code'];
+                $holdingCallNumber = $holding->callNumber ?? '';
+                $holdingCallNumberPrefix = $holding->callNumberPrefix ?? '';
+                $itemCallNumber = $item->itemLevelCallNumber ?? '';
+                $itemCallNumberPrefix = $item->itemLevelCallNumberPrefix ?? '';
                 $items[] = [
                     'id' => $bibId,
                     'item_id' => $item->id,",I think you could actually move the two holding-related variable declarations above the foreach loop that's iterating over items in order to avoid a little bit of redundant work.,php,1,1,1
"@@ -47,8 +47,8 @@ return [
     'in_array'             => 'שדה :attribute לא קיים ב:other.',
     'integer'              => 'שדה :attribute חייב להיות מספר שלם.',
     'ip'                   => 'שדה :attribute חייב להיות כתובת IP תקנית.',
-    'ipv4'                 => 'The :attribute must be a valid IPv4 address.',
-    'ipv6'                 => 'The :attribute must be a valid IPv6 address.',
+    'ipv4'                 => 'שדה :attribute חייב להיות כתובת IPv4 תקנית.',
+    'ipv6'                 => 'The :attribute חייב להיות כתובת IPv6 תקנית.',
     'json'                 => 'שדה :attribute חייב להיות מחרוזת JSON תקנית.',
     'max'                  => [
         'numeric' => 'שדה :attribute אינו יכול להיות גדול מ-:max.',","Hello, you forgot ""The""",php,1,1,1
"@@ -94,8 +94,9 @@ void CLIENT_STATE::check_app(APP& p) {
 }
 
 void CLIENT_STATE::check_file_info(FILE_INFO& p) {
-    if (p.pers_file_xfer) check_pers_file_xfer_pointer(p.pers_file_xfer);
-    if (p.result) check_result_pointer(p.result);
+    if (p.pers_file_xfer) {
+        check_pers_file_xfer_pointer(p.pers_file_xfer);
+    }
     check_project_pointer(p.project);
 }
 ","Last question before merge - it looks like this was a refactor to put parenthesis around the if statement. However, it also removed the line `if (p.result) check_result_pointer(p.result);` was that intended?",php,1,1,1
"@@ -25,12 +25,16 @@ use Thelia\Core\Security\SecurityContext;
 use Thelia\Exception\TheliaProcessException;
 use Thelia\Mailer\MailerFactory;
 use Thelia\Model\AddressQuery;
+use Thelia\Model\Base\ProductDocumentQuery;
 use Thelia\Model\Cart as CartModel;
 use Thelia\Model\ConfigQuery;
 use Thelia\Model\Currency as CurrencyModel;
 use Thelia\Model\Customer as CustomerModel;
 use Thelia\Model\Lang as LangModel;
 use Thelia\Model\Map\OrderTableMap;
+use Thelia\Model\MessageQuery;
+use Thelia\Model\MetaData as MetaDataModel;
+use Thelia\Model\MetaDataQuery;
 use Thelia\Model\Order as ModelOrder;
 use Thelia\Model\OrderAddress;
 use Thelia\Model\OrderProduct;","Be careful, you use the base model",php,1,1,1
"@@ -8,7 +8,7 @@ use Cms\Classes\Controller;
 use Cms\Classes\ComponentBase;
 use Illuminate\Pagination\Paginator;
 use Illuminate\Support\Collection;
-use Illuminate\Support\Debug\HtmlDumper;
+use Symfony\Component\VarDumper\Dumper\HtmlDumper;
 use Symfony\Component\VarDumper\Cloner\VarCloner;
 use October\Rain\Database\Model;
 ",Does this require a class alias setup in the library?,php,1,1,1
"@@ -9,7 +9,7 @@ use Cms\Contracts\CmsObject as CmsObjectContract;
 use ApplicationException;
 use ValidationException;
 use Exception;
-
+use Cms\Classes\Theme;
 /**
  * This is a base class for all CMS objects - content files, pages, partials and layouts.
  * The class implements basic operations with file-based templates.",Why is this necessary? The Theme class exists within this namespace.,php,1,1,1
"@@ -54,7 +54,7 @@ class DbalBatchActionQuery implements BatchActionQueryInterface
             $record['all'],
             $record['processed'],
             new \DateTime($record['created_at']),
-            $record['all'] === $record['processed'] ? new \DateTime($record['last_processed_at']) : null
+            $record['all'] === $record['processed'] ? new \DateTime($record['last_processed_at'] ?? $record['created_at']) : null
         );
 
         foreach ($this->getEntries($id, $language) as $entry) {",This seems redundant and not related,php,1,1,0
"@@ -0,0 +1,17 @@
+<?php
+/**
+ * Copyright © Bold Brand Commerce Sp. z o.o. All rights reserved.
+ * See LICENSE.txt for license details.
+ */
+
+declare(strict_types=1);
+
+namespace Ergonode\Core\Infrastructure\Exception;
+
+class DeserializationException extends SerializerException
+{
+    public function __construct(string $message, \Throwable $previous = null)
+    {
+        parent::__construct($message, $previous);
+    }
+}",I think it should been in `SharedKernel` module.,php,1,1,0
"@@ -535,6 +535,10 @@ class MediaLibrary
     {
         $path = $this->validatePath($path);
 
+        if (Config::get('cms.storage.media.disk') === 'local') {
+            return $this->storagePath . $path;
+        }
+
         $fullPath = $this->storagePath.implode(""/"", array_map(""rawurlencode"", explode(""/"", $path)));
 
         return Url::to($fullPath);",Shouldn't you put the check after this line and return fullPath instead?,php,1,1,1
"@@ -664,6 +664,7 @@ static void handle_acct_mgr_info(GUI_RPC_CONN& grc) {
         || strlen(gstate.acct_mgr_info.authenticator)
     ) {
         grc.mfout.printf(""   <have_credentials/>\n"");
+	grc.mfout.printf(""   <authenticator>%s</authenticator>\n"", gstate.acct_mgr_info.authenticator);
     }
 
     if (gstate.acct_mgr_info.cookie_required) {",Can you replace the tab with spaces so that it properly indents? Thanks!,php,1,1,1
"@@ -96,7 +96,9 @@ class ContentEditController extends BaseController
 
     private function updateFieldFromPost(string $key, $postfield, Content $content): void
     {
-        if (! $field = $content->getField($key)) {
+        if ($content->getField($key)) {
+            $field = $content->getField($key);
+        } else {
             $fields = collect($content->getDefinition()->get('fields'));
             $field = Field::factory($fields->get($key)['type']);
             $field->setName($key);",do we have $content->hasField($key) ?,php,1,1,1
"@@ -22,7 +22,7 @@ use Sonata\MediaBundle\Model\MediaInterface;
 class SimpleResizer implements ResizerInterface
 {
     /**
-     * @var ImagineInterface
+     * @var ImagineInterface.
      */
     protected $adapter;
 ",Please remove the `.`,php,1,1,1
"@@ -33,6 +33,7 @@ class DbalDataSetFactory
         $result->select('*');
         $result->from(sprintf('(%s)', $queryBuilder->getSQL()), 't');
         $result->setParameters($queryBuilder->getParameters(), $queryBuilder->getParameterTypes());
+        $result->distinct();
 
         return new DbalDataSet($result, $this->filterBuilderProvider);
     }",Why distinct in main factory ? IMHO use distinct in this case can by only hiding a problem not a resolving it. Are we sure that fetching duplicated data is not inserting or query problem ??,php,1,1,1
"@@ -1,5 +1,6 @@
 <?php
 
+use Cms\Classes\LayoutCode;
 use Cms\Classes\Page;
 use Cms\Classes\Theme;
 use Cms\Classes\Layout;",I'd prefer the `use` statements were in order,php,1,1,1
"@@ -127,7 +127,8 @@ class ProductPriceCalculation
 
         $minimumPrice = null;
         foreach ($prices as $price) {
-            if ($minimumPrice === null || $price->getPriceWithoutVat() < $minimumPrice->getPriceWithoutVat()) {
+            /** @var \Shopsys\FrameworkBundle\Model\Pricing\Price|null $minimumPrice */
+            if ($minimumPrice === null || $price->getPriceWithoutVat()->isLessThan($minimumPrice->getPriceWithoutVat())) {
                 $minimumPrice = $price;
             }
         }",I think even `Price` should have `isLessThan` method,php,1,1,1
"@@ -20,7 +20,7 @@ return [
     'alpha_dash'           => 'Este campo pode conter apenas letras, números, traços e o caractere de sublinhado.',
     'alpha_num'            => 'Este campo pode conter apenas letras e números',
     'array'                => 'Este campo deve ser uma matriz.',
-    'attached'             => 'This field is already attached.',
+    'attached'             => 'Este campo já está ligado.',
     'before'               => 'Esta deve ser uma data anterior a :date.',
     'before_or_equal'      => 'Esta deve ser uma data anterior ou igual a :date.',
     'between'              => [",I believe it should be 'Este campo j est anexado.' just like in locales/pt/validation.php,php,1,1,1
"@@ -853,6 +853,19 @@ class DefaultRecord extends AbstractBase
         return $params;
     }
 
+    /**
+     * Get an alternate display title.
+     *
+     * @return string
+     */
+    public function getAlternateDisplayTitle()
+    {
+        $format = '%s %s';
+        $short = $this->fields['alt_title_short'] ?? '';
+        $sub = $this->fields['alt_title_sub'] ?? '';
+        return sprintf($short, $sub);
+    }
+
     /**
      * Get the OpenURL parameters to represent this record (useful for the
      * title attribute of a COinS span tag).","I did this for convenience but maybe this should be split out into two functions like the corresponding ""normal"" fields are? Or maybe the corresponding fields could be combined into 1 function, e.g. `getDisplayTitle`? I wasn't sure what to do here so I just did something quick and easy. I'm not sure if it's problematic though.",php,0,1,0
"@@ -73,6 +73,7 @@ class EasyAdminExtension extends Extension
         $backendConfiguration['entities'] = $this->getEntitiesConfiguration($backendConfiguration['entities']);
         $backendConfiguration = $this->processEntityActions($backendConfiguration);
         $backendConfiguration = $this->processEntityTemplates($backendConfiguration);
+        $backendConfiguration['default_entity_name'] = $this->getFirstEntityName($backendConfiguration);
 
         $container->setParameter('easyadmin.config', $backendConfiguration);
 ","If you create it at runtime, why not allowing it in the EasyAdmin user configuration?",php,1,1,1
"@@ -39,6 +39,8 @@
 #include <vector>
 #include <string>
 #include <cstring>
+#include <tuple>
+#include <set>
 #endif
 
 #if HAVE_XSS",I'm not sure this is available in VS2010,php,1,1,1
"@@ -11,7 +11,9 @@ use Symfony\Component\Console\Output\OutputInterface;
 
 class DatabaseDumpCommand extends Command
 {
+    /** @access private */
     const ARG_OUTPUT_FILE = 'outputFile';
+    /** @access private */
     const OPT_PGDUMP_BIN = 'pgdump-bin';
 
     /**","Shouldn't argument names be public? I'd guess they might come handy when calling the command programatically or during an extension. As an example, take a look at `ServerStartWithCustomRouterCommand` which would definitely use a `ServerStartCommand::ARG_ROUTER` constant if it were declared (now it uses only the literal string `'router'`). Or did you have some other reason for the private visibility in mind?",php,1,0,1
"@@ -40,8 +40,8 @@ return [
     | or doing any other checks to ensure the service is functional.
     |
     */
-    
-    'preflight' => false,
+
+    'preflight' => true,
 
     /*
     |--------------------------------------------------------------------------","As a compromise, I would say to have preflight set to WP_ENV !== 'production' or something so that by default it's not enabled in production.",php,1,1,1
"@@ -312,7 +312,7 @@ int diagnostics_update_thread_list() {
             // Enumerate the threads
             for(uiSystemIndex = 0; uiSystemIndex < pProcesses->ThreadCount; uiSystemIndex++) {
                 pThread = &pProcesses->Threads[uiSystemIndex];
-                pThreadEntry = diagnostics_find_thread_entry((DWORD)pThread->ClientId.UniqueThread);
+                pThreadEntry = diagnostics_find_thread_entry((DWORD)(uintptr_t)pThread->ClientId.UniqueThread);
 
                 if (pThreadEntry) {
                     pThreadEntry->crash_kernel_time = (FLOAT)pThread->KernelTime.QuadPart;",Double type cast looks bad. Why do we need it here?,php,1,1,1
"@@ -651,9 +651,7 @@ class Algebra
 
                         $new_clause = new Clause(
                             $new_clause_possibilities,
-                            $clause->creating_conditional_id === $grouped_clause->creating_conditional_id
-                                ? $clause->creating_conditional_id
-                                : $grouped_clause->creating_conditional_id,
+                            $grouped_clause->creating_conditional_id,
                             $clause->creating_object_id,
                             false,
                             true,",On the first glance this doesn't look like exact equivalent.,php,1,1,0
"@@ -65,10 +65,9 @@ class DisplayLanguageOptionFactory implements FactoryInterface
         if (!empty($options)) {
             throw new \Exception('Unexpected options sent to factory.');
         }
-        // We want to construct a separate translator instance for this helper,
-        // since it configures different language/locale than the core shared
-        // instance!
-        $factory = new \VuFind\I18n\Translator\TranslatorFactory();
-        return new $requestedName($factory($container, Translator::class));
+        $translator = $container->get(Translator::class);
+        // Add a special locale used just for this plugin:
+        $translator->addTranslationFile('ExtendedIni', null, 'default', 'native');
+        return new $requestedName($translator);
     }
 }","Perhaps it makes more sense to put this in the actual TranslatorFactory; I'm torn between doing that (which is probably more straightforward) and leaving it here (since it ties the loading of the translations to the use of the helper that needs them). Any thoughts/preferences, @EreMaijala?",php,0,1,1
"@@ -343,7 +343,7 @@ class GalleryController
             'csrf_protection' => false,
         ));
 
-        $form->bind($request);
+        $form->handleRequest($request);
 
         if ($form->isValid()) {
             $galleryHasMedia = $form->getData();",Not related to this PR. Please create a separate one.,php,0,1,0
"@@ -473,19 +473,6 @@ class EmptyTest extends TestCase
                     }',
                 'error_message' => 'MixedReturnTypeCoercion'
             ],
-            'secondEmptyTwice' => [
-                'code' => '<?php
-                    /**
-                     * @param array{a?:int,b?:string} $p
-                     */
-                    function f(array $p) : void {
-                        if (empty($p)) {
-                            throw new RuntimeException("""");
-                        }
-                        assert(!empty($p));
-                    }',
-                'error_message' => 'RedundantCondition'
-            ],
         ];
     }
 }",why did you drop this? Seems like it still works on my side,php,1,1,1
"@@ -27,11 +27,8 @@ final class ForbiddenSuperGlobalSniff implements Sniff
     {
         return [T_VARIABLE];
     }
-
-    /**
-     * @param int $position
-     */
-    public function process(File $file, $position): void
+    
+    public function process(File $file, int $position): void
     {
         $currentToken = $file->getTokens()[$position];
 ",Should be fixed,php,1,1,0
"@@ -154,3 +154,9 @@ function array_change_key_case(array $arr, int $case = CASE_LOWER) {}
  * @return array<int, array<array-key, T>>
  */
 function array_chunk(array $arr, int $size, bool $preserve_keys = false) {}
+
+
+/**
+* @param resource|HashContext
+*/
+function hash_update($hash, string $data) : bool {}","I think this should go to `src/Psalm/Internal/CallMap.php` instead. `CoreGenericFunctions` implies generics, i.e. functions with `@template` tags.",php,1,1,1
"@@ -187,9 +187,9 @@ function show_status_html($x) {
     end_table();
     
     global $server_version;
-    global $git_commit;
-    if ( isset($server_version) && isset($git_commit) ) {
-        echo ""Server version: $server_version (<a href=https://github.com/BOINC/boinc/commit/$git_commit>$git_commit</a>)<br>"";
+    global $git_url;
+    if ( isset($server_version) && isset($git_url) ) {
+        echo ""Server version: <a href=\""$git_url\"">$server_version</a><br>"";
     }
 
     if ($j->db_revision) {","I recommend to make the link optional but always show the version (if available). Right now `$git_url` is set in a way that makes the following assumptions: - the source repo was cloned via `https`, not `ssh` - the source repo's relevant remote is called ""origin"" I think that both assumptions shouldn't be made. At least the code should prepare for the case that they're no met, i.e. make the link/URL optional and don't just assume you got a ""working"" `$git_url`.",php,1,0,1
"@@ -1195,7 +1195,7 @@ static void handle_get_app_config(GUI_RPC_CONN& grc) {
         return;
     }
     sprintf(path, ""%s/%s"", p->project_dir(), APP_CONFIG_FILE_NAME);
-    printf(""path: %s\n"", path);
+    // printf(""path: %s\n"", path);    // debug only
     int retval = read_file_string(path, s);
     if (retval) {
         grc.mfout.printf(""<error>app_config.xml not found</error>\n"");",Could be completely removed,php,1,1,0
"@@ -3,7 +3,7 @@ namespace Psalm\Tests\Provider;
 
 use PhpParser;
 
-class ParserInstanceCacheProvider extends \Psalm\Provider\ParserCacheProvider
+class ParserInstanceCacheProvider extends \Psalm\Internal\Provider\ParserCacheProvider
 {
     /**
      * @var array<string, string>",nit: Would it make more sense to move tests/Provider to tests/Internal/Provider (etc.) so that Psalm\Tests\Internal\Foo contains overrides of Psalm\Internal\Foo (e.g. if both Psalm\Provider and Psalm\Internal\Provider exist later),php,1,1,1
"@@ -1099,7 +1099,9 @@ class RelationController extends ControllerBehavior
                 $modelToSave->save(null, $this->manageWidget->getSessionKey());
             }
 
-            $this->relationObject->add($newModel, $sessionKey);
+            if (!$this->model->{$this->relationName}->contains($newModel)) {
+                $this->relationObject->add($newModel, $sessionKey);
+            }
         }
         elseif ($this->viewMode == 'single') {
             $newModel = $this->viewModel;","This will load all related models from the database to check for duplicates. If you have a large dataset, the process is likely to run out of memory.",php,1,1,1
"@@ -9954,7 +9954,8 @@ return [
 'preg_filter' => ['null|string|string[]', 'regex'=>'mixed', 'replace'=>'mixed', 'subject'=>'mixed', 'limit='=>'int', '&w_count='=>'int'],
 'preg_grep' => ['array', 'regex'=>'string', 'input'=>'array', 'flags='=>'int'],
 'preg_last_error' => ['int'],
-'preg_match' => ['int|false', 'pattern'=>'string', 'subject'=>'string', '&w_subpatterns='=>'string[]', 'flags='=>'int', 'offset='=>'int'],
+'preg_match' => ['int|false', 'pattern'=>'string', 'subject'=>'string', '&w_subpatterns='=>'string[]', 'flags='=>'0|', 'offset='=>'int'],
+'preg_match\'1' => ['int|false', 'pattern'=>'string', 'subject'=>'string', '&w_subpatterns='=>'array', 'flags='=>'int', 'offset='=>'int'],
 'preg_match_all' => ['int|false', 'pattern'=>'string', 'subject'=>'string', '&w_subpatterns='=>'array', 'flags='=>'int', 'offset='=>'int'],
 'preg_quote' => ['string', 'str'=>'string', 'delim_char='=>'string'],
 'preg_replace' => ['string|string[]|null', 'regex'=>'string|array', 'replace'=>'string|array', 'subject'=>'string|array', 'limit='=>'int', '&w_count='=>'int'],","Typing flags as `0` doesn't work, but `0|` does. Is this a bug in `Type::parseTokens()`?",php,1,1,1
"@@ -23,7 +23,7 @@ class LocalTest extends TestCase
         $local = new Local('/tmp');
 
         // check if OS is Mac OS X where /tmp is a symlink to /private/tmp
-        $result = 'Darwin' === php_uname('s') ? '/private/tmp' : '/tmp';
+        $result = 'Darwin' === PHP_OS ? '/private/tmp' : '/tmp';
 
         $this->assertSame($result, $local->getDirectory());
     }",I wonder if this could be simplified by using `sys_get_tmp_dir()`,php,1,1,1
"@@ -1,4 +1,5 @@
 <?php namespace System\Traits;
+use October\Rain\Exception\ValidationException;
 
 /**
  * Property container trait","Doesn't look like this needs to be here, no exceptions are thrown.",php,1,1,1
"@@ -6,10 +6,10 @@ use Ivory\CKEditorBundle\Form\Type\CKEditorType;
 use Shopsys\FormTypesBundle\MultidomainType;
 use Shopsys\ShopBundle\Component\Domain\Config\DomainConfig;
 use Shopsys\ShopBundle\Component\Domain\Domain;
-use Shopsys\ShopBundle\Component\Form\InvertChoiceTypeExtension;
 use Shopsys\ShopBundle\Component\Plugin\PluginCrudExtensionFacade;
 use Shopsys\ShopBundle\Form\DomainsType;
 use Shopsys\ShopBundle\Form\FileUploadType;
+use Shopsys\ShopBundle\Form\InvertChoiceTypeExtension;
 use Shopsys\ShopBundle\Form\Locale\LocalizedType;
 use Shopsys\ShopBundle\Form\UrlListType;
 use Shopsys\ShopBundle\Model\Category\Category;","commit message word order should be ""InvertChoiceTypeExtension moved from...""",php,0,1,0
"@@ -53,7 +53,10 @@ class Bootstrap
         }
 
         $kernel = new AppKernel($this->environment, EnvironmentType::isDebug($this->environment));
-        Request::setTrustedProxies(['127.0.0.1'], Request::HEADER_X_FORWARDED_ALL);
+
+        $kernel->boot();
+        $trustedProxies = $kernel->getContainer()->getParameter('trusted_proxies');
+        Request::setTrustedProxies($trustedProxies, Request::HEADER_X_FORWARDED_ALL);
         if ($this->console) {
             $input = new ArgvInput();
             $output = new ConsoleOutput();",kernel->boot seems to have bad impact on symfony console somehow,php,1,1,1
"@@ -1241,7 +1241,7 @@ class AssertAnnotationTest extends TestCase
                         return substr($a, 0, 1) . substr($b, 0, 1);
                     }'
             ],
-            'SKIPPED-convertConstStringType' => [
+            'convertConstStringType' => [
                 '<?php
                     class A {
                         const T1 = 1;",I've re-enabled this test case as it is fixed with this PR as well. Thanks to @orklah for referring to it in #6300,php,0,1,1
"@@ -33,6 +33,6 @@ class Context extends BaseContext
 
     public function getId()
     {
-        return $this->id;
+        return $this->id ?? '';
     }
 }",Isn't better to return null if there is no id and check for null value if needed ?,php,1,1,1
"@@ -252,6 +252,13 @@ class Controller
             $result = $event;
         }
 
+        /*
+         * Set a default samesite config value for invalid values
+         */
+        if (!in_array(strtolower(Config::get('session.same_site', 'lax')), ['lax', 'strict', 'none'])) {
+            Config::set('session.same_site', 'Lax');
+        }
+
         /*
          * Prepare and return response
          * @see \System\Traits\ResponseMaker",@ayumi-cloud this should be done in the System service provider,php,0,1,1
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -121,7 +121,9 @@ class FieldExtension extends AbstractExtension
 
     public function getType(Field $field): string
     {
-        return $field->getType() ?? $field->getDefinition()->get('type');
+        // Note, this used to be a ternary, with `?? $field->getDefinition()->get('type');`. I'm not sure
+        // how/when this would trigger, since $field->getType always returns a value. 🤔💭
+        return $field->getType();
     }
 
     /**","Hm, looks like it was left as a ""safe"" choice in #1709 . Which means it's probably safe as-is now.",php,0,1,1
"@@ -128,7 +128,6 @@ class GalleryAdmin extends AbstractAdmin
             ->end()
             ->with('Gallery')
                 ->add('galleryHasMedias', 'sonata_type_collection', array(
-                        'cascade_validation' => true,
                     ), array(
                         'edit' => 'inline',
                         'inline' => 'table',",Why remove this?,php,1,1,0
"@@ -15,7 +15,14 @@ namespace Thelia\Coupon;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Thelia\Condition\Implementation\ConditionInterface;
 use Thelia\Coupon\Type\CouponInterface;
+use Thelia\Log\Tlog;
+use Thelia\Model\AddressQuery;
+use Thelia\Model\Base\CouponModule;
 use Thelia\Model\Coupon;
+use Thelia\Model\CouponCountry;
+use Thelia\Model\CouponCustomerCount;
+use Thelia\Model\CouponCustomerCountQuery;
+use Thelia\Model\Order;
 
 /**
  * Manage how Coupons could interact with a Checkout","Be careful, base model is imported here.",php,1,1,0
"@@ -887,13 +887,18 @@ func (app *DdevApp) Down(removeData bool) error {
 		return fmt.Errorf(""failed to remove %s: %v"", app.GetName(), err)
 	}
 
-	// Remove data/database if we need to.
+	// Remove data/database/hostname if we need to.
 	if removeData {
+		if err = app.RemoveHostsEntries(); err != nil {
+			return fmt.Errorf(""failed to remove hosts entries: %v"", err)
+		}
+
 		// Check that app.DataDir is a directory that is safe to remove.
 		err = validateDataDirRemoval(app)
 		if err != nil {
 			return fmt.Errorf(""failed to remove data/database directories: %v"", err)
 		}
+
 		// mysql data can be set to read-only on linux hosts. PurgeDirectory ensures files
 		// are writable before we attempt to remove them.
 		if !fileutil.FileExists(app.DataDir) {",I think it's worth just a small conversation on whether we should just do this on regular rm as well. I guess the argument against is that people hit sudo too often.,php,1,1,1
"@@ -101,7 +101,6 @@ class Faceting implements Modifier
      */
     protected function buildFacetingParameters()
     {
-        $facetParameters = array();
         foreach ($this->allConfiguredFacets as $facetName => $facetConfiguration) {
             $facetName = substr($facetName, 0, -1);
 ",This initializes the variable and should not be removed. If at all it should be moved to before line 109,php,0,1,1
"@@ -283,6 +283,7 @@ $config = [
             'VuFind\ContentTOCPluginManager' => 'VuFind\Service\Factory::getContentTOCPluginManager',
             'VuFind\CookieManager' => 'VuFind\Service\Factory::getCookieManager',
             'VuFind\Cover\Router' => 'VuFind\Service\Factory::getCoverRouter',
+            'VuFind\CsrfValidator' => 'VuFind\Service\Factory::getCsrfValidator',
             'VuFind\DateConverter' => 'VuFind\Service\Factory::getDateConverter',
             'VuFind\DbAdapter' => 'VuFind\Service\Factory::getDbAdapter',
             'VuFind\DbAdapterFactory' => 'VuFind\Service\Factory::getDbAdapterFactory',","For forward-compatibility with the Service Manager 3 code, I'd recommend naming this service for the class that's being created -- i.e. Zend\Validator\Csrf. We're already using that class in the login process -- should we be using this service there as well, or is there a reason to configure it differently in two different places? (I haven't reviewed that code... so apologies if this is actually a bad suggestion because I'm missing an important detail).",php,1,0,1
"@@ -151,7 +151,7 @@ func sentryNotSetupWarning() {
 // from the last saved version. If it is, prompt to request anon ddev usage stats
 // and update the info.
 func checkDdevVersionAndOptInSentry() error {
-	if !output.JSONOutput && version.COMMIT != globalconfig.DdevGlobalConfig.LastUsedVersion && globalconfig.DdevGlobalConfig.InstrumentationOptIn == false {
+	if !output.JSONOutput && version.COMMIT != globalconfig.DdevGlobalConfig.LastUsedVersion && globalconfig.DdevGlobalConfig.InstrumentationOptIn == false && os.Getenv(""DDEV_NO_SENTRY"") == """" {
 		allowStats := util.Confirm(""It looks like you have a new ddev release.\nMay we send anonymous ddev usage statistics and errors?\nTo know what we will see please take a look at\nhttps://ddev.readthedocs.io/en/latest/users/cli-usage/#opt-in-usage-information\nPermission to beam up?"")
 		if allowStats {
 			globalconfig.DdevGlobalConfig.InstrumentationOptIn = true","I think it'd be a good idea to define the environment variable name as a constant in values.go because it's hard-coded in several places, but that's a small point.",php,1,1,1
"@@ -32,6 +32,7 @@
 #include ""MainDocument.h""
 #include ""version.h""
 
+#include <wx/settings.h>
 
 ////@begin XPM images
 #include ""res/skins/default/graphic/background_image.xpm""",This is to bring in `wxSystemSettings`.,php,1,1,1
"@@ -0,0 +1,18 @@
+<?php
+
+declare(strict_types=1);
+
+namespace Bolt\Widget;
+
+use Symfony\Component\HttpFoundation\Response;
+
+/**
+ * Interface ResponseAware - Widgets that make use of the Response to provide
+ * their functionality need to implement this interface.
+ */
+interface ResponseAware
+{
+    public function setResponse(?Response $response = null): WidgetInterface;
+
+    public function getResponse(): ?Response;
+}",responses are not optional here,php,1,1,1
"@@ -78,4 +78,17 @@ return [
 
     'prefix' => 'october',
 
+    /*
+    |--------------------------------------------------------------------------
+    | Disable Request Cache
+    |--------------------------------------------------------------------------
+    |
+    | The request cache remembers cache retrievals from your cache store
+    | in memory to speed up consecutive retrievals within the same request.
+    | It is recommended you leave this on both in production and development.
+    |
+    */
+
+    'disableRequestCache' => false,
+
 ];","Change `remembers` to `stores`, `your` to `the`, and replace the last line with `Set to true to disable this in-memory request cache` please. Thanks!",php,1,1,1
"@@ -30,8 +30,9 @@ class Config
     /** @var string */
     private $projectDir;
 
-    public function __construct(Stopwatch $stopwatch, $projectDir, CacheInterface $cache)
+    public function __construct(Stopwatch $stopwatch, string $projectDir, CacheInterface $cache)
     {
+        // @todo move stopwatch to decorator or remove it completely
         $this->stopwatch = $stopwatch;
         $this->cache = $cache;
         $this->projectDir = $projectDir;","I've added it to see what the impact of parsing the config was. If we're content with it now, we can remove it.",php,1,1,1
"@@ -54,11 +54,12 @@ abstract class AbstractCrudController extends BaseAdminController
      *
      * @param string $visibilityToggleEventIdentifier the dispatched visibility toggle TheliaEvent identifier, or null if the object has no visible options. Example: TheliaEvents::MESSAGE_TOGGLE_VISIBILITY
      * @param string $changePositionEventIdentifier   the dispatched position change TheliaEvent identifier, or null if the object has no position. Example: TheliaEvents::MESSAGE_UPDATE_POSITION
+     * @param string $moduleCode The module code for ACL
      */
     public function __construct(
         $objectName,
-        $defaultListOrder = null,
-        $orderRequestParameterName = null,
+        $defaultListOrder,
+        $orderRequestParameterName,
         $resourceCode,
         $createEventIdentifier,
         $updateEventIdentifier,","I don't agree, don't change the signature. I know it's an issue on scrutinizer but we have to deal with it.",php,1,1,1
"@@ -74,7 +74,7 @@ class AdminController extends Controller
             throw new ForbiddenActionException(array('action' => $action, 'entity' => $this->entity['name']));
         }
 
-        $customMethodName  = $action.$this->entity['name'].'Action';
+        $customMethodName = $action.$this->entity['name'].'Action';
         $defaultMethodName = $action.'Action';
 
         return method_exists($this, $customMethodName) ? $this->{$customMethodName}() : $this->{$defaultMethodName}();","For this case (and all other similar ones) you can revert them: aligning variable definitions and array keys is not a ""bad"" practice.",php,1,1,1
"@@ -33,13 +33,17 @@ int REGEX_CLAUSE::init(const char* p) {
     present = true;
     negate = false;
     expr = p;
-    if (*p == '!') {
-        p++;
+    if (!strncmp(p,""(?!"",3) && p[strlen(p)-1] == ')') {
+        p += 3;
+        p[strlen(p)-1] = '\0'; // don't parse trailing ')'
         negate = true;
     }
     if (regcomp(&regex, p, REG_EXTENDED|REG_NOSUB) ) {
         return ERR_XML_PARSE;
     }
+    if (negate) {
+        p[strlen(p)] = ')'; // restore trailing ')'
+    }
     return 0;
 }
 ",Here copy constructor will be called,php,1,1,1
"@@ -1024,6 +1024,13 @@ class ArrayAccessTest extends TestCase
                         return $p[""name""];
                     }'
             ],
+            'unsetListKeyedArrayDisableListFlag' => [
+                '<?php
+                $a = [""a"", ""b""];
+                unset($a[0]);
+                ',
+                'assertions' => ['$a===' => 'array{1: ""b""}']
+            ],
         ];
     }
 ",This can be improved by keeping the flag when _last_ element is being unset.,php,1,1,1
"@@ -0,0 +1,19 @@
+<?php
+
+return [
+
+    /*
+    |--------------------------------------------------------------------------
+    | Authentication Language Lines
+    |--------------------------------------------------------------------------
+    |
+    | The following language lines are used during authentication for various
+    | messages that we need to display to the user. You are free to modify
+    | these language lines according to your application's requirements.
+    |
+    */
+
+    'failed' => 'Hierdie verwysings stem nie ooreen met ons rekords nie.',
+    'throttle' => 'Te veel pogings om aan te meld. Probeer asseblief weer binne :seconds sekondes',
+
+];","Need 'password' => 'The provided password is incorrect.',",php,1,1,1
"@@ -19,7 +19,8 @@ return [
     'password_hash' => ['string|null', 'password'=>'string', 'algo'=>'int|string|null', 'options='=>'array'],
     'password_needs_rehash' => ['bool', 'hash'=>'string', 'algo'=>'int|string|null', 'options='=>'array'],
     'proc_open' => ['resource|false', 'command'=>'string|array', 'descriptorspec'=>'array', '&w_pipes'=>'resource[]', 'cwd='=>'?string', 'env='=>'?array', 'other_options='=>'array'],
-    'ReflectionProperty::getType' => ['?ReflectionType'],
+    'ReflectionProperty::getType' => ['?ReflectionNamedType'],
+    'ReflectionParameter::hasType' => ['bool'],
 ],
 'old' => [
     'gzread' => ['string|0', 'stream'=>'resource', 'length'=>'int'],","`ReflectionParameter::hasType()` is available since 7.0, and I don't think its return type has ever changed. So this does not belong in 7.4 delta.",php,1,1,1
"@@ -33,7 +33,7 @@ class CurrentCategoryResolver
     /**
      * @param \Symfony\Component\HttpFoundation\Request $request
      * @param int $domainId
-     * @return \Shopsys\ShopBundle\Model\Category\Category|null
+     * @return \Shopsys\FrameworkBundle\Model\Category\Category|null
      */
     public function findCurrentCategoryByRequest(Request $request, $domainId)
     {",why? maybe another phpstan extension ?,php,1,1,1
"@@ -137,7 +137,7 @@ func (c *Config) Config() error {
 	namePrompt = fmt.Sprintf(""%s (%s)"", namePrompt, c.Name)
 	// Define an application name.
 	fmt.Print(namePrompt + "": "")
-	c.Name = getInput(c.Name)
+	c.Name = GetInput(c.Name)
 
 	err := c.docrootPrompt()
 	util.CheckErr(err)",Fine w/ reusing this but we should likely move it into a utils or inputreader package if we do.,php,1,1,1
"@@ -13,7 +13,7 @@ declare(strict_types=1);
 
 namespace Sonata\MediaBundle\Document;
 
-use Sonata\DatagridBundle\Pager\PagerInterface;
+use Sonata\AdminBundle\Datagrid\PagerInterface;
 use Sonata\Doctrine\Document\BaseDocumentManager;
 use Sonata\MediaBundle\Model\MediaManagerInterface;
 ",This looks wrong. You should use the bundle without the admin stuff,php,1,1,1
"@@ -76,6 +76,7 @@ class OverviewModuleController extends AbstractModuleController
     {
         $connectedHosts = [];
         $missingHosts = [];
+        $invalidPath = [];
 
         foreach ($this->connections as $connection) {
             $coreUrl = $connection->getScheme() . '://' . $connection->getHost() . ':' . $connection->getPort() . $connection->getPath();",should be plural,php,1,1,1
"@@ -118,7 +118,7 @@ abstract class FunctionLikeAnalyzer extends SourceAnalyzer
     /**
      * @param Closure|Function_|ClassMethod|ArrowFunction $function
      */
-    protected function __construct($function, SourceAnalyzer $source, FunctionLikeStorage $storage)
+    public function __construct($function, SourceAnalyzer $source, FunctionLikeStorage $storage)
     {
         $this->function = $function;
         $this->source = $source;",each child redefine the visibility of the constructor as public. The parent should have the same visibility,php,1,1,1
"@@ -583,9 +583,12 @@ class Manager implements \LmcRbacMvc\Identity\IdentityProviderInterface
         // Depending on verification setting, either do a direct update or else
         // put the new address into a pending state.
         if ($this->config->Authentication->verify_email ?? false) {
-            $user->pending_email = $email;
+            // If new email address is the current address, just reset any pending
+            // email address:
+            $user->pending_email = ($email === $user->email) ? '' : $email;
         } else {
             $user->updateEmail($email, true);
+            $user->pending_email = '';
         }
         $user->save();
         $this->updateSession($user);","@EreMaijala, I simplified this with a ternary operator. Any objections?",php,0,1,1
"@@ -488,11 +488,13 @@ class Controller
 
         $useCache = !Config::get('cms.twigNoCache');
         $isDebugMode = Config::get('app.debug', false);
+        $strictVariables = (Config::get('cms.enableTwigStrictVariables', null) !== null) ?: $isDebugMode;
         $forceBytecode = Config::get('cms.forceBytecodeInvalidation', false);
 
         $options = [
             'auto_reload' => true,
             'debug' => $isDebugMode,
+            'strict_variables' => $isDebugMode,
         ];
 
         if ($useCache) {","This needs to be `$strictVariables`, please test each config value and ensure that they're working as intended (true = enabled, false = disabled, null = value of app.debug)",php,1,1,1
"@@ -31,7 +31,12 @@ class FormTabs implements IteratorAggregate, ArrayAccess
      * @var string Default tab label to use when none is specified.
      */
     public $defaultTab = 'backend::lang.form.undefined_tab';
-
+    
+    /**
+     * @var string List of icons for their corresponding tabs.
+     */
+    public $icons;
+    
     /**
      * @var bool Should these tabs stretch to the bottom of the page layout.
      */",This would be an array right? Also could you add the expected array structure here in the form of `['tab-name' => 'icon-class']`?,php,1,1,1
"@@ -101,7 +101,11 @@ class ImportInstagram implements ShouldQueue
 
                 $path = storage_path(""app/$importData->path"");
                 $storagePath = ""public/m/{$monthHash}/{$userHash}"";
-                $newPath = ""app/$storagePath/$filename"";
+                $dir = ""app/$storagePath"";
+                if(!is_dir(storage_path($dir))) {
+                    mkdir(storage_path($dir), 0777, true);
+                }
+                $newPath = ""$dir/$filename"";
                 $fs->move($path,storage_path($newPath));
                 $path = $newPath;
                 $hash = \hash_file('sha256', storage_path($path));",Please remove the second and third parameters of the `mkdir` function,php,1,1,1
"@@ -125,7 +125,7 @@ final class GalleryListBlockService extends AbstractBlockService implements Edit
         $order = $blockContext->getSetting('order');
         \assert(\is_string($order));
         $sortDirection = $blockContext->getSetting('sort');
-        \assert(\is_string($sortDirection));
+        \assert(\is_string($sortDirection) && \in_array($sortDirection, ['asc', 'desc'], true));
         $template = $blockContext->getTemplate();
         \assert(\is_string($template));
 ",is_string check might no be needed then,php,1,1,1
"@@ -214,10 +214,17 @@ class QueryController implements ContainerInjectionInterface {
   }
 
   /**
-   * Add the header row.
+   * Add the header row, from specified properties, if any, or the schema.
    */
   private function addHeaderRow(array &$data) {
-    $header_row = array_keys(reset($data['schema'])['fields']);
+
+    if (!empty($data['query']['properties'])) {
+      $header_row = $data['query']['properties'];
+    }
+    else {
+      $header_row = array_keys(reset($data['schema'])['fields']);
+    }
+
     if (is_array($header_row)) {
       array_unshift($data['results'], $header_row);
     }",@thierrydallacroce possible to provide test coverage for this condition?,php,0,1,1
"@@ -66,10 +66,6 @@ echo ""<project_config>
     <web_rpc_url_base>"".secure_url_base().""</web_rpc_url_base>
 "";
 
-if ( isset($git_commit) ) {
-    echo ""<git_commit>$git_commit</git_commit>\n"";
-}
-
 if ( isset($server_version) ) {
     echo ""<server_version>$server_version</server_version>\n"";
 }",Does this mean that the project config should not communicate any codebase details anymore? Why not replace this with the newly generated common tag base?,php,1,1,1
"@@ -17,7 +17,7 @@ const SiteNotFound = ""not found""
 const SiteDirMissing = ""app directory missing""
 
 // SiteConfigMissing defines the string used to denote when a site is missing its .ddev/config.yml file.
-const SiteConfigMissing = "".ddev/config.yml missing""
+const SiteConfigMissing = "".ddev/config.yaml missing""
 
 // SiteStopped defines the string used to denote when a site is in the stopped state.
 const SiteStopped = ""stopped""","Hmm, thought this would happen if .ddev was missing or docker_compose.yml was missing? Fine with me, don't think it's that important.",php,1,1,1
"@@ -12,6 +12,12 @@ $config = [
             'SearchApi' => 'VuFindApi\Controller\SearchApiController',
         ],
     ],
+    'service_manager' => [
+        'allow_override' => true,
+        'factories' => [
+            'VuFindApi\Formatter\RecordFormatter' => 'VuFindApi\Formatter\RecordFormatterFactory',
+        ],
+    ],
     'router' => [
         'routes' => [
             'apiHome' => [",Do you need this allow_override setting here? Won't it be inherited from the main VuFind module?,php,1,1,1
"@@ -1157,10 +1157,8 @@ class RelationController extends ControllerBehavior
             }
         }
         elseif ($this->viewMode == 'single') {
-            $this->viewModel = $this->manageWidget->model;
-
             $this->viewWidget->setFormValues($saveData);
-            $this->viewModel->save(null, $this->manageWidget->getSessionKey());
+            $this->viewWidget->model->save(null, $this->manageWidget->getSessionKey());
         }
 
         return $this->relationRefresh();",Why wouldn't you just change this line to `$this->viewWidget->model`?,php,1,1,1
"@@ -57,7 +57,7 @@ class IdUserProvider implements UserProviderInterface
     /**
      * {@inheritdoc}
      */
-    public function refreshUser(UserInterface $user): User
+    public function refreshUser(UserInterface $user): UserInterface
     {
         return $this->loadUserByUsername($user->getUsername());
     }",PHPStan claims it's incorrect? It's legit by PHP...,php,1,1,1
"@@ -119,10 +119,6 @@ class SonataMediaExtension extends Extension
         $pool = $container->getDefinition('sonata.media.pool');
         $pool->replaceArgument(0, $config['default_context']);
 
-        // this shameless hack is done in order to have one clean configuration
-        // for adding formats ....
-        $pool->addMethodCall('__hack__', $config);
-
         $strategies = array();
 
         foreach ($config['contexts'] as $name => $settings) {",Why isolate this in a method?,php,1,1,1
"@@ -27,11 +27,11 @@ interface CategoryManagerInterface
     public function getRootCategory($context);
 
     /**
-     * @param bool|true $loadChildren
+     * @param bool $loadChildren
      *
      * @return CategoryInterface[]
      */
-    public function getRootCategories($loadChildren);
+    public function getRootCategories($loadChildren = true);
 
     /**
      * @param int $categoryId","this is a BC break, we should add an UPGRADE note",php,1,1,1
"@@ -93,6 +93,19 @@ return [
 
     'backendSkin' => 'Backend\Skins\Standard',
 
+    /*
+    |--------------------------------------------------------------------------
+    | Automatically run migrations on login
+    |--------------------------------------------------------------------------
+    |
+    | If value is true, UpdateMananger will be run on logging in to the backend.
+    | It's recommended to set this value to 'false' in production enviroments
+    | because it clears the cache every time a user logs in to the backend.
+    |
+    */
+
+    'runMigrationsOnLogin' => true,
+
     /*
     |--------------------------------------------------------------------------
     | Determines which modules to load","@bennothommo I wonder if we should have this set to null by default to represent pulling its value from the value of app.debug (debug enabled this enabled, debug disabled this disabled). Thoughts? Are users still able to have migrations run when installing new plugins or plugin updates through the backend when debug (i.e. this) is disabled in that case?",php,0,1,1
"@@ -89,9 +89,7 @@ final class CropResizer implements ResizerInterface
     }
 
     /**
-     * @param array<string, int> $settings
-     *
-     * @phpstan-param array{width: int, height: int} $settings
+     * @param array<string, mixed> $settings
      */
     private function createTargetBox(array $settings): Box
     {",Why losing this ?,php,1,1,0
"@@ -3,16 +3,14 @@
 namespace App;
 
 use Roots\Sage\Container;
-use Illuminate\Contracts\Container\Container as ContainerContract;
 
 /**
  * Get the sage container.
  *
  * @param string $abstract
  * @param array  $parameters
- * @param ContainerContract $container
- * @return ContainerContract|mixed
- * @SuppressWarnings(PHPMD.StaticAccess)
+ * @param Container $container
+ * @return Container|mixed
  */
 function sage($abstract = null, $parameters = [], ContainerContract $container = null)
 {",@QWp6t Still have a reference to `ContainerContract` (removed from `use`)! :smiley:,php,0,1,1
"@@ -0,0 +1,18 @@
+<?php
+use October\Rain\Database\Schema\Blueprint;
+use October\Rain\Database\Updates\Migration;
+class DbSystemMailLayoutsInlineCss extends Migration
+{
+    public function up()
+    {
+        Schema::table('system_mail_layouts', function (Blueprint $table) {
+            $table->boolean('inline_css')->default(true);
+        });
+    }
+    public function down()
+    {
+        Schema::table('system_mail_layouts', function (Blueprint $table) {
+           $table->dropColumn('inlince_css');
+        });
+    }
+}",Think this should be `inline_css`,php,1,1,1
"@@ -12,8 +12,9 @@ interface ProductFactoryInterface
 
     /**
      * @param \Shopsys\FrameworkBundle\Model\Product\ProductData $data
+     * @param \Shopsys\FrameworkBundle\Model\Product\Product $mainProduct
      * @param \Shopsys\FrameworkBundle\Model\Product\Product[] $variants
      * @return \Shopsys\FrameworkBundle\Model\Product\Product
      */
-    public function createMainVariant(ProductData $data, array $variants): Product;
+    public function createMainVariant(ProductData $data, Product $mainProduct, array $variants): Product;
 }",docs do not mention the change of `createMainVariant` interface - I believe they should,php,1,1,1
"@@ -99,7 +99,7 @@ class SonataMediaExtension extends Extension implements PrependExtensionInterfac
         $loader->load('serializer.xml');
         $loader->load('command.xml');
 
-        if (!in_array(strtolower($config['db_driver']), ['doctrine_orm', 'doctrine_mongodb', 'doctrine_phpcr'])) {
+        if (!in_array(strtolower($config['db_driver']), ['doctrine_orm', 'doctrine_mongodb', 'doctrine_phpcr', 'no_driver'])) {
             throw new \InvalidArgumentException(sprintf('SonataMediaBundle - Invalid db driver ""%s"".', $config['db_driver']));
         }
 ","can we extract this array into a `const` maybe, what do @sonata-project/contributors think?",php,0,1,1
"@@ -4,17 +4,13 @@ namespace EasyCorp\Bundle\EasyAdminBundle\Search;
 
 use Doctrine\ORM\Query as DoctrineQuery;
 use Doctrine\ORM\QueryBuilder as DoctrineQueryBuilder;
-use Doctrine\ORM\Tools\Pagination\CountWalker;
-use Pagerfanta\Adapter\DoctrineORMAdapter;
-use Pagerfanta\Pagerfanta;
 
 /**
+ * @deprecated Use EasyCorp\Bundle\EasyAdminBundle\Search\QueryPaginator
  * @author Javier Eguiluz <javier.eguiluz@gmail.com>
  */
 class Paginator
 {
-    private const MAX_ITEMS = 15;
-
     /**
      * Creates a Doctrine ORM paginator for the given query builder.
      *","This is a BC break too, peoples overriding this method will expect an instance of `Pagerfanta`, but since the new one contains the same methods I guess can it be ignored?",php,1,1,1
"@@ -89,9 +89,7 @@ class ScalarTypeComparator
         }
 
         if ($container_type_part instanceof TNonspecificLiteralString
-            && ($input_type_part instanceof TLiteralString
-                || $input_type_part instanceof TNonspecificLiteralString
-                || $input_type_part instanceof TNonEmptyNonspecificLiteralString)
+            && ($input_type_part instanceof TLiteralString || $input_type_part instanceof TNonspecificLiteralString)
         ) {
             return true;
         }",TNonEmptyNonspecificLiteralString is a child of TNonspecificLiteralString just above,php,1,1,0
"@@ -115,7 +115,7 @@ abstract class BaseMediaAdmin extends AbstractAdmin
                     );
                 } else {
                     $media->setProviderName(
-                        $this->getRequest()->get($uniqid['providerName'])
+                        $this->getRequest()->get($uniqid)['providerName']
                     );
                 }
             } else {","Function array dereferencing does not work on old versions of php, you will have to change that (that's why the build fails)",php,1,1,1
"@@ -50,6 +50,11 @@ class CheckPermission extends BaseInstall
         'upload_max_filesize' => 2097152
     );
 
+    protected $phpExpectedVerions = array(
+        'min' => '5.5',
+        'max' => '7.4'
+    );
+
     protected $extensions = array(
         'curl',
         'fileinfo',","Maybe putting 7.3 here, and checking max version with > instead of >= would be more clear to the reader",php,1,1,1
"@@ -65,4 +65,14 @@ class Search2recordController extends AbstractRecord
         return isset($config->Record->next_prev_navigation)
             && $config->Record->next_prev_navigation;
     }
+
+    /**
+     * Get the Hierarchy Type (false if none)
+     *
+     * @return string|bool
+     */
+    public function getHierarchyType()
+    {
+        return 'Search2';
+    }
 }",Does this method do anything? I'm not seeing any getHierarchyType method used/defined in the core code's controllers -- this seems to be a record driver mechanism.,php,1,1,1
"@@ -23,4 +23,9 @@ interface AccountQueryInterface
      * @return UserId[]
      */
     public function findUserIdByRoleId(RoleId $roleId): array;
+
+    /**
+     * @return array
+     */
+    public function getUsers(): array;
 }",This brings nothing to the table. Can you specify a type perhaps?,php,1,1,1
"@@ -178,7 +178,12 @@ class MailManager
 
         $css = MailBrandSetting::renderCss();
 
+        $disableInlineCss = false;
+
         if ($template->layout) {
+
+            $disableInlineCss = array_get($template->layout->options, 'disable_inline_css', $disableInlineCss);
+
             $html = $this->renderTwig($template->layout->content_html, [
                 'content' => $html,
                 'css' => $template->layout->content_css,","Would it not be more appropiate to name this ""$disableCssToInline""? Because we are not someohow preventing the layout to have inline styles, we are just toggling whether or not we want defined css classes converted to inline css.",php,1,1,1
"@@ -121,16 +121,16 @@ class ImageRepository
     }
 
     /**
-     * @param array $entities
+     * @param array $entitiesOrEntityIds
      * @param string $entityName
      * @return \Shopsys\FrameworkBundle\Component\Image\Image[]
      */
-    public function getMainImagesByEntitiesIndexedByEntityId(array $entities, $entityName)
+    public function getMainImagesByEntitiesIndexedByEntityId(array $entitiesOrEntityIds, $entityName)
     {
         $queryBuilder = $this->getImageRepository()
             ->createQueryBuilder('i')
             ->andWhere('i.entityName = :entityName')->setParameter('entityName', $entityName)
-            ->andWhere('i.entityId IN (:entities)')->setParameter('entities', $entities)
+            ->andWhere('i.entityId IN (:entities)')->setParameter('entities', $entitiesOrEntityIds)
             ->addOrderBy('i.position', 'desc')
             ->addOrderBy('i.id', 'desc');
 ",Please extract this change to a refactoring commit,php,0,1,1
"@@ -985,10 +985,14 @@ class MediaManager extends WidgetBase
 
             $path = Input::get('path');
             $path = MediaLibrary::validatePath($path);
-
+            
+            $realpath = empty(trim($uploadedFile->getRealPath())) 
+                            ? $uploadedFile->getPath().DIRECTORY_SEPARATOR.$uploadedFile->getFileName() 
+                            : $uploadedFile->getRealPath()
+                        ;
             MediaLibrary::instance()->put(
                 $path.'/'.$fileName,
-                File::get($uploadedFile->getRealPath())
+                File::get($realpath))
             );
 
             die('success');",You have an extra `)` in `File::get($realpath))`. Please remove it.,php,1,1,1
"@@ -0,0 +1,5 @@
+<?php
+
+if (file_exists(__DIR__.'/../var/cache/dev/Bolt_KernelDevDebugContainer.preload.php')) {
+    require __DIR__.'/../var/cache/dev/Bolt_KernelDevDebugContainer.preload.php';
+}","This file is not needed. I don't know where it came from, but I occasionally see it popping up on my end as well. Regardless, we can remove it here.",php,1,1,1
"@@ -124,6 +124,12 @@ class ContentTypesParser extends BaseParser
             $contentType['singleton'] = false;
         }
 
+        if ($contentType['singleton']) {
+            $contentType['listing_records'] = 1;
+        } elseif (isset($contentType['listing_records']) === false) {
+            $contentType['listing_records'] = 6;
+        }
+
         if (! isset($contentType['locales'])) {
             $contentType['locales'] = [];
         } elseif (is_string($contentType['locales'])) {",shouldn't it default to what is set in main config?,php,1,1,1
"@@ -205,6 +205,7 @@ class SonataMediaExtension extends Extension
             'targetEntity'  => $config['class']['gallery_has_media'],
             'cascade'       => array(
                 'persist',
+                'remove'
             ),
             'mappedBy'      => 'media',
             'orphanRemoval' => false,","that means that all media in a gallery are deleted when the gallery is deleted. is that the intention, can media only be in one single gallery? this affects all doctrine flavors, right? does it make sense for orm and mongo too?",php,1,1,1
"@@ -55,6 +55,7 @@ final class ThumbnailCompilerPassTest extends TestCase
 
 final class TestUncallableAddResizerMethod
 {
+    // @phpstan-ignore-next-line
     private function addResizer(): void
     {
     }",Can you explain why ?,php,1,1,0
"@@ -86,10 +86,10 @@ class OrderItemFacade
         $product = $this->productRepository->getById($productId);
         $orderDomainConfig = $this->domain->getDomainConfigById($order->getDomainId());
 
-        $productPrice = $this->productPriceCalculationForUser->calculatePriceForUserAndDomainId(
+        $productPrice = $this->productPriceCalculationForUser->calculatePriceForCustomerUserAndDomainId(
             $product,
             $order->getDomainId(),
-            $order->getCustomer()
+            $order->getCustomerUser()
         );
 
         $orderProduct = $this->orderItemFactory->createProduct(",Maybe `ProductPriceCalculationForUser` should be also renamed to `productPriceCalculationForCustomerUser`,php,1,1,1
"@@ -34,6 +34,17 @@ class Configuration implements ConfigurationInterface
             ->children()
                 ->scalarNode('db_driver')->isRequired()->end()
                 ->scalarNode('default_context')->isRequired()->end()
+                ->arrayNode('admin_format')
+                    ->info('Configures the thumbnail preview for the admin')
+                    ->addDefaultsIfNotSet()
+                    ->children()
+                        ->scalarNode('width')->defaultValue(200)->end()
+                        ->scalarNode('height')->defaultValue(false)->end()
+                        ->scalarNode('quality')->defaultValue(90)->end()
+                        ->scalarNode('format')->defaultValue('jpg')->end()
+                        ->scalarNode('constraint')->defaultValue(true)->end()
+                    ->end()
+                ->end()
             ->end()
         ;
 ",maybe `->info()` would be great for what this is used,php,1,1,1
"@@ -109,8 +109,12 @@ class ArrayAnalyzer
         }
 
         if ($array_creation_info->all_list) {
-            $array_type = new Type\Atomic\TNonEmptyList($item_value_type ?: Type::getMixed());
-            $array_type->count = count($stmt->items);
+            if (empty($array_creation_info->item_key_atomic_types)) {
+                $array_type = new Type\Atomic\TList($item_value_type ?: Type::getMixed());
+            } else {
+                $array_type = new Type\Atomic\TNonEmptyList($item_value_type ?: Type::getMixed());
+                $array_type->count = count($array_creation_info->property_types);
+            }
 
             $stmt_type = new Type\Union([
                 $array_type,","Not sure if this is correct, but I'm also not sure what would be correct. `count($stmt->items)` is clearly wrong with unpacked arrays. Should `count` be renamed to `min_count` as well?",php,1,1,1
"@@ -848,9 +848,9 @@ return [
 'closelog' => ['bool'],
 'Closure::bind' => ['Closure', 'old'=>'Closure', 'to'=>'object|null', 'scope='=>'object|string'],
 'Closure::bindTo' => ['Closure', 'new'=>'object|null', 'newscope='=>'object|string'],
-'Closure::call' => ['Closure', 'to'=>'object', 'parameter='=>'', '...='=>''],
+'Closure::call' => ['mixed', 'to'=>'object', 'parameter='=>'mixed', '...='=>'mixed'],
 'Closure::__construct' => [''],
-'Closure::__invoke' => ['', '...=' => ''],
+'Closure::__invoke' => ['mixed', '...=' => 'mixed'],
 'Closure::fromCallable' => ['Closure', 'callable'=>'callable'],
 'Collator::asort' => ['bool', 'arr'=>'array', 'sort_flag='=>'int'],
 'collator_asort' => ['bool', 'coll='=>'collator', 'arr'=>'array', 'sort_flag='=>'int'],","for brevity, `''` means `mixed`, so you can remove the *other* changes here",php,1,1,1
"@@ -1,8 +1,11 @@
 <?php namespace Cms\Controllers;
 
+use File;
+use Lang;
 use Backend;
 use BackendMenu;
 use ApplicationException;
+use Cms\Classes\Theme;
 use Cms\Models\ThemeData;
 use Cms\Classes\Theme as CmsTheme;
 use System\Classes\SettingsManager;",These extra import statements shouldn't be required anymore,php,1,1,1
"@@ -23,8 +23,13 @@
 
 namespace Thelia\Model;
 
+use Propel\Runtime\Propel;
 use Thelia\Model\Base\Coupon as BaseCoupon;
+use Thelia\Model\Base\CouponCountryQuery;
+use Thelia\Model\Base\CouponModuleQuery;
 use Thelia\Model\Exception\InvalidArgumentException;
+use Thelia\Model\Map\CouponTableMap;
+use Thelia\Model\Tools\ModelEventDispatcherTrait;
 
 /**
  * Used to provide an effect (mostly a discount)",Base model is imported here.,php,1,1,0
"@@ -199,7 +199,6 @@ class UserDataFixtureLoader
         } else {
             $customerData->deliveryAddressData = $this->deliveryAddressDataFactory->create();
         }
-        $userData->domainId = $domainId;
 
         $customerData->userData = $userData;
         $customerData->billingAddressData = $billingAddressData;",commit message: should be the dash part on the new line with one empty line ? or is it intentional ?,php,1,1,1
"@@ -66,6 +66,13 @@ abstract class Results
      */
     protected $startRecordOverride = null;
 
+    /**
+     * Offset override (only for use in very rare cases)
+     *
+     * @var string
+     */
+    protected $startRecordOffset = null;
+
     /**
      * Array of results (represented as Record Driver objects) retrieved on latest
      * search","I find this all a bit confusing; I wonder if it would be better to implement this entirely within the Solr/Results.php, and just go ahead and call it CursorMark. We can refactor it to something more generic in future if we find a common use case... but I think it might be premature to try to find a generic approach to something this specific in function.",php,1,1,1
"@@ -136,6 +136,17 @@ class User extends UserBase
     public function afterLogin()
     {
         parent::afterLogin();
+        /**
+         * @event backend.user.login
+         * Provides an opportunity to interact with the Backend User model after the user has logged in
+         *
+         * Example usage:
+         *
+         *     Event::listen('backend.user.login', function ((\Backend\Models\User) $user) {
+         *         Flash::success(sprintf('Welcome %s!', $user->getFullNameAttribute()));
+         *     });
+         *
+         */
         Event::fire('backend.user.login', [$this]);
     }
 ",extra line of whitespace before the start of the docblock please,php,1,1,1
"@@ -47,6 +47,15 @@ collect([
  * Render page using Blade
  */
 add_filter('template_include', function ($template) {
+    collect(['get_header', 'wp_head'])->each(function ($tag) {
+        ob_start();
+        do_action($tag);
+        $c = ob_get_clean();
+        remove_all_actions($tag);
+        add_action($tag, function () use ($c) {
+            echo $c;
+        });
+    });
     $data = collect(get_body_class())->reduce(function ($data, $class) use ($template) {
         return apply_filters(""sage/template/{$class}/data"", $data, $template);
     }, []);","Can we use a variable a little bit better than ""`$c`""?",php,1,1,1
"@@ -295,13 +295,14 @@ class NonDivArithmeticOpAnalyzer
             && $right_type_part instanceof TLiteralInt
             && ($left instanceof PhpParser\Node\Scalar
                 || $left instanceof PhpParser\Node\Expr\ConstFetch
-                || $left instanceof PhpParser\Node\Expr\ClassConstFetch)
+                || $left instanceof PhpParser\Node\Expr\ClassConstFetch
+                || $left instanceof PhpParser\Node\Expr\BinaryOp)
             && ($right instanceof PhpParser\Node\Scalar
                 || $right instanceof PhpParser\Node\Expr\ConstFetch
-                || $right instanceof PhpParser\Node\Expr\ClassConstFetch)
+                || $right instanceof PhpParser\Node\Expr\ClassConstFetch
+                || $right instanceof PhpParser\Node\Expr\BinaryOp)
         ) {
             // time for some arithmetic!
-
             $calculated_type = null;
 
             if ($parent instanceof PhpParser\Node\Expr\BinaryOp\Plus) {","Shouldn't this be any expression really? E.g. `(true ? 1 : 2) | 22` would not have `$left` as binary op, but it still can be calculated, I suppose.",php,1,1,1
"@@ -251,11 +251,11 @@ const ConfigInstructions = `
 # These values specify the destination directory for ddev ssh and the
 # directory in which commands passed into ddev exec are run.
 
-# omit_containers: [""dba"", ""ddev-ssh-agent""]
-# would omit the dba (phpMyAdmin) and ddev-ssh-agent containers. Currently
-# only those two containers can be omitted here.
-# Note that these containers can also be omitted globally in the
-# ~/.ddev/global_config.yaml or with the ""ddev config global"" command.
+# omit_containers: [""db"", dba"", ""ddev-ssh-agent""]
+# Currently only these containers are supported. Some containers can also be
+# omitted globally in the ~/.ddev/global_config.yaml. Note that if you omit
+# the ""db"" container, several standard features of ddev that access the
+# database container will be unusuable.
 
 # nfs_mount_enabled: false
 # Great performance improvement but requires host configuration first.","Sorry, typo s/unusuable/unusable/",php,1,1,1
"@@ -1470,7 +1470,7 @@ function neve_is_new_builder() {
  * @since 3.0.0
  */
 function neve_is_new_skin() {
-	return get_theme_mod( 'neve_new_skin', false ) === 'new';
+	return get_theme_mod( 'neve_new_skin', 'new' ) === 'new';
 }
 
 /**",@abaicus I think here we should check if neve_new_skin != 'old' since we are setting explicitly the legacy flag,php,0,1,1
"@@ -521,7 +521,7 @@ class BaseModule extends ContainerAware implements BaseModuleInterface
      * @param string $newVersion the new module version, as defined in the module.xml file
      * @param ConnectionInterface $con
      */
-    public function update($currentVersion, $newVersion, ConnectionInterface $con)
+    public function update($currentVersion, $newVersion, ConnectionInterface $con = null)
     {
         // Override this method to do something useful.
     }","By adding the default ""null"" to $con parameter, you're breaking the compatibility with exiting modules which uses the signature without the default 'null' value, which was valid until now. Please remove this 'null' default.",php,1,1,1
"@@ -67,17 +67,7 @@ class ControllerListener
             return;
         }
 
-        $customController = $entity['controller'];
-        $controllerMethod = $currentController[1];
-
-        // build the full controller name depending on its type
-        if (class_exists($customController)) {
-            // 'class::method' syntax for normal controllers
-            $customController .= '::'.$controllerMethod;
-        } else {
-            // 'service:method' syntax for controllers as services
-            $customController .= ':'.$controllerMethod;
-        }
+        $customController = $entity['controller'].'::'.$currentController[1];
 
         $request->attributes->set('_controller', $customController);
         $newController = $this->resolver->getController($request);",This must probably still take into account the installed version of the HttpKernel component. IIRC EasyAdminBundle is compatible with older versions that don't allow the syntax with two colons for controller services.,php,1,1,1
"@@ -73,6 +73,8 @@ class EasyAdminExtension extends AbstractTypeExtension
      * To be replaced by the usage of the request stack when 2.3 support is dropped.
      *
      * @param Request|null $request
+     *
+     * @return null
      */
     public function setRequest(Request $request = null)
     {","Maybe this one can be ignored, gives no value.",php,1,1,1
"@@ -227,7 +227,7 @@ function roots_nice_search_redirect() {
 
   $search_base = $wp_rewrite->search_base;
   if (is_search() && !is_admin() && strpos($_SERVER['REQUEST_URI'], ""/{$search_base}/"") === false) {
-    wp_redirect(home_url(""/{$search_base}/"" . urlencode(get_query_var('s'))));
+	  wp_redirect(esc_url_raw(home_url(""/{$search_base}/"" . get_query_var('s'))));
     exit();
   }
 }","woops? (spacing) just remembered this file is in soil now, anyway. could you submit a PR over there for this one?",php,1,1,1
"@@ -669,6 +669,12 @@ func TestDdevXdebugEnabled(t *testing.T) {
 	runTime := util.TimeTrack(time.Now(), fmt.Sprintf(""%s %s"", site.Name, t.Name()))
 
 	phpVersions := nodeps.ValidPHPVersions
+
+	// arm64 builds from deb.sury.org do not have xdebug in php5.6
+	if runtime.GOARCH == ""arm64"" {
+		t.Log(""Skipping php5.6 test on arm64 because deb.sury.org packages do not include it currently"")
+		delete(phpVersions, ""5.6"")
+	}
 	phpKeys := make([]string, 0, len(phpVersions))
 	for k := range phpVersions {
 		phpKeys = append(phpKeys, k)","Silly me. This shouldn't be done in the tests, but instead in the actual definition of ValidPHPVersions on arm64. Same with Mysql and MariaDB.",php,0,1,1
"@@ -14,8 +14,10 @@ var (
 	DdevBin      = ""ddev""
 	DevTestSites = []testcommon.TestSite{
 		{
-			Name:        ""drupal8"",
-			DownloadURL: ""https://github.com/drud/drupal8/archive/v0.2.2.tar.gz"",
+			Name:      ""drupal8"",
+			SourceURL: ""https://github.com/drud/drupal8/archive/v0.2.2.tar.gz"",
+			FileURL:   ""https://github.com/drud/drupal8/releases/download/v0.2.2/files.tar.gz"",
+			DBURL:     ""https://github.com/drud/drupal8/releases/download/v0.2.2/db.tar.gz"",
 		},
 	}
 )",This is currently a db.tar.gz with just one .sql file in it. It might be worth another test (or maybe I'll find one) that has more than one sql file in it.,php,1,1,1
"@@ -210,10 +210,18 @@ class FileProvider extends BaseProvider implements FileProviderInterface
 
     public function generatePrivateUrl(MediaInterface $media, $format)
     {
-        if (MediaProviderInterface::FORMAT_REFERENCE === $format) {
+        if (self::FORMAT_REFERENCE === $format) {
             return $this->getReferenceImage($media);
         }
 
+        // throw new \InvalidArgumentException(sprintf(
+        //     'Argument 2 passed to ""%s()"" only accepts the value ""%s"", ""%s"" given.',
+        //     __METHOD__,
+        //     self::FORMAT_REFERENCE,
+        //     $format
+        // ));
+        // NEXT_MAJOR: Uncomment the previous exception and remove the `return false` statement.
+
         return false;
     }
 ",Should we trigger a deprecation then ?,php,1,1,1
"@@ -132,7 +132,8 @@ if (TYPO3_MODE == 'BE') {
         'solr::clearSolrConnectionCache',
         'ApacheSolrForTypo3\\Solr\\ConnectionManager->updateConnections'
     );
-
+}
+if ((TYPO3_MODE == 'BE') || ((TYPO3_MODE == 'FE') && isset($_POST['TSFE_EDIT']))) {
     // the order of registering the garbage collector and the record monitor is important!
     // for certain scenarios items must be removed by GC first, and then be re-added to to Index Queue
 ",Can you make two changes here: 1) You don't need the braces around `TYPO3_MODE == 'FE'` 2) Please use triple equal signs for comparison `===`,php,1,1,1
"@@ -42,6 +42,16 @@ class ExportGridBuilder implements GridBuilderInterface
                         'export' => '{id}',
                     ],
                 ],
+                'download' => [
+                    'privilege' => 'CHANNEL_READ',
+                    'show' => ['system' => false],
+                    'route' => 'ergonode_channel_export_download',
+                    'parameters' => [
+                        'language' => $language->getCode(),
+                        'channel' => '{channel_id}',
+                        'export' => '{id}',
+                    ],
+                ],
             ]))
             ->orderBy('started_at', 'DESC');
 ",This will add this action to every export and not every export will have file to download..,php,1,1,1
"@@ -15,7 +15,8 @@ namespace Sonata\MediaBundle\Security;
 
 use Sonata\MediaBundle\Model\MediaInterface;
 use Symfony\Component\HttpFoundation\Request;
-use Symfony\Component\Translation\TranslatorInterface;
+use Symfony\Component\Translation\TranslatorInterface as LegacyTranslatorInterface;
+use Symfony\Contracts\Translation\TranslatorInterface;
 
 /**
  * @final since sonata-project/media-bundle 3.21.0","We usually use references to the argument number instead its name. Additionally, we use the term ""argument"" instead of ""parameter"".",php,1,1,1
"@@ -17,7 +17,9 @@
 
 from abc import ABCMeta, abstractmethod
 import os
+from typing import Optional
 from selenium.webdriver.common.utils import keys_to_typing
+from selenium.types import AnyKey
 
 
 class FileDetector(metaclass=ABCMeta):","just realised... This breaks things since there is not selenium types module, is there a PR for this?",py,0,1,1
"@@ -3,10 +3,15 @@
 
 import collections
 import functools
+from typing import TYPE_CHECKING, Dict, List, Union
 
 from pylint import reporters
 from pylint.lint.utils import _patch_sys_path
 from pylint.message import Message
+from pylint.typing import CheckerStats
+
+if TYPE_CHECKING:
+    from typing import Counter  # typing.Counter added in Python 3.6.1
 
 try:
     import multiprocessing","This could also be a `sys.version_info` guard with import from `typing_extensions`. In that case the quotes around `Counter` wouldn't be necessary. Leave that up to you, if you what to change it. Support for `3.6` will end soon anyway, so might not be that important.",py,1,1,1
"@@ -93,7 +93,7 @@ CMPS = [""="", ""-"", ""+""]
 
 
 # py3k has no more cmp builtin
-def cmp(a, b):  # pylint: disable=redefined-builtin
+def cmp(a, b):
     return (a > b) - (a < b)
 
 ",This was useless since pylint 2.0,py,1,1,0
"@@ -82,6 +82,9 @@ class KMSScannerTest(unittest_utils.ForsetiTestCase):
 
             crypto_key.data = fake_kms_scanner_data.NON_ROTATED_CRYPTO_KEY_DATA
 
+            crypto_key.data = (
+                fake_kms_scanner_data.NON_ROTATED_CRYPTO_KEY_STATE_DATA)
+
             session.commit()
 
     def setUp(self):",why do we set the crypto_key.data twice? (here and two lines above),py,1,1,1
"@@ -360,6 +360,10 @@ DATA = collections.OrderedDict([
          SettingValue(typ.Bool(), 'false'),
          ""Hide the tabbar if only one tab is open.""),
 
+        ('perm-hide',
+         SettingValue(typ.Bool(), 'false'),
+         ""Hide permanently.""),
+
         ('wrap',
          SettingValue(typ.Bool(), 'true'),
          ""Whether to wrap when changing tabs.""),","I think `perm-` is a bit confusing. I'd prefer `always-hide`. Alternatively, renaming `auto-hide` to `hide-auto` and `perm-hide` to `hide-always` would sort them correctly. What's your opinion on this?",py,1,1,1
"@@ -30,6 +30,11 @@ try:
 except ImportError:
     something = None
 
+try:
+    from collections import something
+except ModuleNotFoundError:
+    something = None
+
 try:
     from collections import anything # [no-name-in-module]
 except ValueError:",Could you recheck some of these tests? Some are non-sensical (such as this one) in that they never occur in actual runtime `python`. Since `collections` can be found this will/should never raise a `ModuleNotFoundError` and only raise a `ImportError`. I think we shouldn't bloat our tests with unfeasible examples.,py,1,1,1
"@@ -841,6 +841,11 @@ def data(readonly=False):
              ""required to exactly match the requested domain.\n\n""
              ""Local domains are always exempt from hostblocking.""),
 
+            ('enable-pdfjs', SettingValue(typ.Bool(), 'true'),
+             ""Enable pdf.js to view PDF files in the browser.\n\n""
+             ""Note that the files can still be downloaded by clicking""
+             "" the download button in the pdf.js viewer.""),
+
             readonly=readonly
         )),
 ",I'd prefer if this was `false` by default - I think many people prefer to opt-in to pdfjs than to opt-out of it :wink:,py,1,1,1
"@@ -1987,6 +1987,10 @@ class NameChecker(_BasicChecker):
                     self._check_name(""variable"", node.name, node)
         elif isinstance(frame, astroid.ClassDef):
             if not list(frame.local_attr_ancestors(node.name)):
+                for ancestor in frame.ancestors():
+                    if ancestor.name == ""Enum"" and ancestor.root().name == ""enum"":
+                        self._check_name(""const"", node.name, node)
+                        return
                 self._check_name(""class_attribute"", node.name, node)
 
     def _recursive_check_names(self, args, node):",I would prefer a simple break statement here instead of return. What do you think about it?,py,1,1,1
"@@ -443,7 +443,9 @@ class SparkFrameMethods(object):
         """"""
         from databricks.koalas.frame import CachedDataFrame
 
-        self._kdf._internal = self._kdf._internal.resolved_copy
+        self._kdf._update_internal_frame(
+            self._kdf._internal.resolved_copy, requires_same_anchor=False
+        )
         return CachedDataFrame(self._kdf._internal)
 
     def persist(self, storage_level=StorageLevel.MEMORY_AND_DISK):",When do we need to set `requires_same_anchor=False`?,py,1,1,1
"@@ -119,6 +119,7 @@ install_requires = [
     ""invenio-documents>=0.1.0.post2"",
     ""invenio-upgrader>=0.1.0"",
     ""invenio-unapi>=0.1.0"",
+    ""invenio-jsonschemas>=0.0.0"",
     ""itsdangerous>=0.24"",
     ""jellyfish>=0.3.2"",
     ""Jinja2>=2.7"",",it's not required dependency,py,1,1,0
"@@ -0,0 +1,15 @@
+# Licensed under the GPL: https://www.gnu.org/licenses/old-licenses/gpl-2.0.html
+# For details: https://github.com/PyCQA/pylint/blob/main/LICENSE
+
+import sys
+
+from pylint.reporters import BaseReporter
+
+
+def test_deprecation_set_output(recwarn):
+    """"""TODO remove in 3.0""""""  # pylint: disable=fixme
+    reporter = BaseReporter()
+    reporter.set_output(sys.stdout)
+    warning = recwarn.pop()
+    assert ""set_output' will be removed in 3.0"" in str(warning)
+    assert reporter.out == sys.stdout",Is this file at the right place? I would have expected this test in ``tests/unittest_reporting.py``.,py,1,1,1
"@@ -45,6 +45,7 @@ import sys
 import time
 
 import pkg_resources
+from prometheus_client import CONTENT_TYPE_LATEST
 import tornado.httpserver
 import tornado.ioloop
 import tornado.netutil","This breaks because we are missing `prometheus_client` as a dependency in `setup.py`. So instead of pulling the dependency, we can hardcode the string.",py,1,1,1
"@@ -8,14 +8,14 @@
 Bluetooth layers, sockets and send/receive functions.
 """"""
 
+import ctypes
 import socket
 import struct
 import array
-from ctypes import *
 from select import select
 
 from scapy.config import conf
-from scapy.data import DLT_BLUETOOTH_HCI_H4
+from scapy.data import DLT_BLUETOOTH_HCI_H4, DLT_BLUETOOTH_HCI_H4_WITH_PHDR
 from scapy.packet import *
 from scapy.fields import *
 from scapy.supersocket import SuperSocket","This is some cleanup: previously importing scapy ==> import all types from ctypes, because of its usage in bluetooth.py",py,1,1,1
"@@ -421,11 +421,10 @@ class NVDAObject(documentBase.TextContainerObject, baseObject.ScriptableObject,
 	#: Type definition for auto prop '_get_role'
 	role: int
 
-	def _get_role(self) -> int:
+	def _get_role(self) -> controlTypes.Role:
 		""""""The role or type of control this object represents (example: button, list, dialog).
-		@return: a ROLE_* constant from L{controlTypes}
 		""""""  
-		return controlTypes.ROLE_UNKNOWN
+		return controlTypes.Role.UNKNOWN
 
 	def _get_roleText(self):
 		""""""",This is not correct anymore as the type of the role has changed to `controlTypes.Role`,py,1,1,1
"@@ -607,6 +607,10 @@ public class RegistrationRequest {
           + HUB_HOST + "" X -"" + HUB_PORT + "" 5555. The specified config was -"" + HUB_HOST + "" ""
           + hub + "" -"" + HUB_PORT + "" "" + port);
     }
+    
+    if(port==-1){
+    	throw new GridConfigurationException(""No port was specified in -hub parameter. Example - http://""+hub+"":4444/grid/register"");
+    }
   }
 
 ","I think if they _don't_ specify a port, we should assume grid default (which is 4444)",py,1,1,1
"@@ -52,6 +52,8 @@ class ApiritifNoseExecutor(SubprocessedExecutor):
     def __init__(self):
         super(ApiritifNoseExecutor, self).__init__()
         self._tailer = FileReader(file_opener=lambda _: None, parent_logger=self.log)
+        self._iteration_number = None
+        self._iteration_start = None
 
     def reporting_setup(self, prefix=None, suffix=None):
         if not self.reported:",Why store these fields at all? Why not just make iteration listener to receive `iteration_started(time)` and `iteration_ended(time)` so it decides itself what to store and do?,py,1,1,1
"@@ -10,7 +10,11 @@ SQLALCHEMY_DATABASE_URI = os.environ['SQLALCHEMY_DATABASE_URI']
 REGISTRY_URL = os.environ['REGISTRY_URL']
 CATALOG_HOST = os.environ['CATALOG_HOST']
 
-CATALOG_URL = 'https://%s' % CATALOG_HOST
+CATALOG_URL = os.environ.get('CATALOG_URL', 'https://%s' % CATALOG_HOST)
+if not CATALOG_URL.startswith(""https""):
+    print(""WARNING: INSECURE CONNECTION TO CATALOG"")
+    # require verbose environment variable to be defined
+    ALLOW_INSECURE_CATALOG_ACCESS = os.environ['ALLOW_INSECURE_CATALOG_ACCESS']
 
 PACKAGE_BUCKET_NAME = os.environ['PACKAGE_BUCKET_NAME']
 ",I'm fine with `CATALOG_URL` - but we should then drop `CATALOG_HOST`. No point in having two of them,py,1,1,1
"@@ -118,6 +118,9 @@ def get_argparser():
                        action='append')
     debug.add_argument('--qt-flag', help=""Pass an argument to Qt as flag."",
                        nargs=1, action='append')
+    debug.add_argument('--debug-flag', type=debug_flag_error,
+                       help=""Pass name of debugging feature to be turned on."",
+                       nargs=1, action='append')
     parser.add_argument('command', nargs='*', help=""Commands to execute on ""
                         ""startup."", metavar=':command')
     # URLs will actually be in command",You'll also need to add a `dest='debug_flags'` here - otherwise you'd need to adjust the checks to do `... in self._args.debug_flag:` which reads a bit odd.,py,1,1,1
"@@ -133,10 +133,12 @@ def process_proxy_options(parser, options):
 
     if options.clientcerts:
         options.clientcerts = os.path.expanduser(options.clientcerts)
-        if not os.path.exists(options.clientcerts) or not os.path.isdir(options.clientcerts):
+        if not (os.path.exists(options.clientcerts) or
+                os.path.isdir(options.clientcerts) or
+                os.path.isfile(options.clientcerts)):
             return parser.error(
-                ""Client certificate directory does not exist or is not a directory: %s"" %
-                options.clientcerts
+                ""Client certificate argument is not a file or directory, ""
+                ""or does not exist: %s"" % options.clientcerts
             )
 
     if options.auth_nonanonymous or options.auth_singleuser or options.auth_htpasswd:","This condition doesn't make much sense, `isdir/isfile` always imply `exists`. I think just checking for `.exists()` is good enough.",py,1,1,1
"@@ -344,6 +344,14 @@ def run(cmd, *args, win_id, env, verbose=False):
     if user_agent is not None:
         env['QUTE_USER_AGENT'] = user_agent
     cmd = os.path.expanduser(cmd)
+
+    # check if userscript is in absolute path or in $XDG_DATA_DIRS
+    if not os.path.isabs(cmd):
+        log.misc.debug(""{} is no absoulte path"".format(cmd))
+        c = os.path.join(standarddir.data(), ""userscripts"", cmd)
+        if os.path.isfile(c):
+            cmd = c
+
     runner.run(cmd, *args, env=env, verbose=verbose)
     runner.finished.connect(commandrunner.deleteLater)
     runner.finished.connect(runner.deleteLater)",That command doesn't seem accurate anymore - `$XDG_DATA_DIRS` is not checked.,py,1,1,1
"@@ -269,6 +269,14 @@ class Stream(param.Parameterized):
         return repr(self)
 
 
+class Next(Stream):
+    """"""
+    Example of an empty stream that can be used to trigger generators or
+    callbacks that take no arguments.
+    """"""
+    pass
+
+
 class Counter(Stream):
     """"""
     Simple stream that automatically increments an integer counter",Not strictly necessary as you could use ``Stream``. Another possible name could be ``Trigger``.,py,1,1,1
"@@ -8,12 +8,13 @@ to multiple files in parallel.
 import random
 import sys
 from mitmproxy import io, http
+import typing  # noqa
 
 
 class Writer:
     def __init__(self, path: str) -> None:
         if path == ""-"":
-            f = sys.stdout  # type: io.TextIO
+            f = sys.stdout  # type: typing.IO[typing.Any]
         else:
             f = open(path, ""wb"")
         self.w = io.FlowWriter(f)","The FlowWriter only writes bytes, so this should really be `typing.IO[bytes]`. If that raises errors, that's a strong indicator that the code here does not work as intended. I'd be fine with removing the `if path == ""-"":` special case altogether.",py,1,1,1
"@@ -103,6 +103,10 @@ class ElementOperation(Operation):
        first component is a Normalization.ranges list and the second
        component is Normalization.keys. """""")
 
+    link_inputs = param.Boolean(default=False, doc=""""""
+         Whether a plot created from the output of this operation
+         should be linked to the inputs of this operation."""""")
+
     streams = param.List(default=[], doc=""""""
         List of streams that are applied if dynamic=True, allowing
         for dynamic interaction with the plot."""""")","Needs a *lot* more explanation as almost none of the required concepts exist at this level: 1. An operation doesn't create plots, it generates a data-structure. 2. Specifically, linking is about streams which relates to DynamicMap so this should say something about when the operation is dynamic. 3. Linked streams only exist for specific backends. As a very rough suggestion, it should be something along the lines of: > 'If the operation is dynamic, this switch specifies whether or not linked streams should be defined from the operation inputs. Only applies when rendering the output with backends that support linked streams. For example ... '",py,1,0,1
"@@ -145,3 +145,14 @@ def init():
     objreg.register('command-history', command_history)
     save_manager.add_saveable('command-history', command_history.save,
                               command_history.changed)
+
+
+def init_fprompt():
+    """"""Initialize the LimitLineParser storing the history.""""""
+    save_manager = objreg.get('save-manager')
+    fprompt_history = lineparser.LimitLineParser(
+        standarddir.data(), 'fprompt-history',
+        limit='completion.fprompt_history_max_items')
+    objreg.register('fprompt-history', fprompt_history)
+    save_manager.add_saveable('fprompt-history', fprompt_history.save,
+                              fprompt_history.changed)",No need to have a separate init function for this.,py,1,1,0
"@@ -0,0 +1,8 @@
+import pydantic
+from typing import List
+
+
+class NewReleasesStat(pydantic.BaseModel):
+    type: str
+    user_name: str
+    data: List",Maybe add a docstring/docs for what will be in the list?,py,1,1,1
"@@ -1095,7 +1095,7 @@ class Resource:
                         send_alert(self.request, message, url)
                     operator = COMPARISON.LT
 
-                if value == """":
+                if value == """" or (not isinstance(value, int) and not isinstance(value, str)):
                     raise_invalid(self.request, **error_details)
 
                 filters.append(Filter(self.model.modified_field, value, operator))",`isinstance()` can take a tuple as a second argument,py,1,1,1
"@@ -19,7 +19,7 @@ from databricks.koalas.testing.utils import ReusedSQLTestCase
 
 
 class ReprTests(ReusedSQLTestCase):
-    max_display_count = 123
+    max_display_count = 23
 
     @classmethod
     def setUpClass(cls):","pandas' `display.max_rows` value is 60 by default. So, lowering then that will test the changes correctly.",py,1,1,1
"@@ -15,12 +15,12 @@
 """"""Scanner for Enabled APIs.""""""
 
 import json
-import sys
 
 from google.cloud.forseti.common.gcp_type.project import Project
 from google.cloud.forseti.common.util import logger
 from google.cloud.forseti.scanner.audit import enabled_apis_rules_engine
 from google.cloud.forseti.scanner.scanners import base_scanner
+from google.cloud.forseti.common.util import errors as util_errors
 
 LOGGER = logger.get_logger(__name__)
 ",Can you please alpha-sort this import?,py,1,1,0
"@@ -212,3 +212,12 @@ class ExtraPropertiesValidationTest(BaseWebTestWithSchema, unittest.TestCase):
         self.app.patch_json(record_url,
                             {'data': record},
                             headers=self.headers)
+
+    def test_additional_properties_are_rejected(self):
+        record_id = '5443d83f-852a-481a-8e9d-5aa804b05b08'
+        record = VALID_RECORD.copy()
+        record['extra'] = 'blah!'
+        self.app.put_json('%s/%s' % (RECORDS_URL, record_id),
+                          {'data': record},
+                          headers=self.headers,
+                          status=400)",I would also validate that the error message give enough feedback for the user to solve the issue.,py,1,1,1
"@@ -71,3 +71,14 @@ class Good(object):
 def does_not_crash_on_range_without_args():
     for elem in range():
         print(elem)
+
+# False negative described in #3657
+class MyClass(object):
+    def __init__(self):
+        self.my_list = []
+
+my_obj = MyClass()
+def my_function(instance: MyClass):
+    for i in range(len(instance.my_list)):  # [consider-using-enumerate]
+        var = instance.my_list[i]
+        print(var)",Can you add a link to the Github issue here as well?,py,0,1,1
"@@ -470,8 +470,10 @@ class BacktrackingTM(ConsolePrinterMixin, Serializable):
     proto.lrnIterationIdx = self.lrnIterationIdx
     proto.iterationIdx = self.iterationIdx
     proto.segID = self.segID
-    if self.currentOutput is not None:
-      proto.currentOutput = self.currentOutput.tolist()
+    if self.currentOutput is None:
+      proto.currentOutput.none = None
+    else:
+      proto.currentOutput.list = self.currentOutput.tolist()
     proto.pamCounter = self.pamCounter
     proto.collectSequenceStats = self.collectSequenceStats
     proto.resetCalled = self.resetCalled",I don't understand this. Is it a workaround to allow a proto to contain a null value? I see this pattern in several other places.,py,1,1,1
"@@ -30,6 +30,8 @@ from scapy.modules.six.moves import range, zip
 
 class PacketList(BasePacketList, _CanvasDumpExtended):
     __slots__ = [""stats"", ""res"", ""listname""]
+    read_allowed_exceptions = ()  # emulate SuperSocket
+    nonblocking_socket = True
 
     def __init__(self, res=None, name=""PacketList"", stats=None):
         """"""create a packet list from a list of packets",Could you explain why you are making this a (fake) socket ?,py,1,1,1
"@@ -304,7 +304,7 @@ public class DefaultGridRegistry extends BaseGridRegistry implements GridRegistr
     if (proxy == null) {
       return;
     }
-    LOG.info(""Registered a node "" + proxy);
+    LOG.finest(""Registered a node "" + proxy);
     try {
       lock.lock();
 ",This is wildly unhelpful to users --- they need to know when a proxy has been registered.,py,1,1,1
"@@ -46,7 +46,7 @@ def open_browser(url: str) -> bool:
     browsers = (
         ""windows-default"", ""macosx"",
         ""wslview %s"",
-        ""x-www-browser %s"", ""gnome-open %s"",
+        ""x-www-browser %s"", ""gnome-open %s"", ""xdg-open"",
         ""google-chrome"", ""chrome"", ""chromium"", ""chromium-browser"",
         ""firefox"", ""opera"", ""safari"",
     )",Is this related to the Docker change? I don't think this even works when mitmproxy is running inside a container...,py,1,1,1
"@@ -0,0 +1,15 @@
+# -*- coding: utf-8 -*-
+
+# Licensed under the GPL: https://www.gnu.org/licenses/old-licenses/gpl-2.0.html
+# For details: https://github.com/PyCQA/pylint/blob/master/COPYING
+
+import textwrap
+
+
+def normalize_text(text, line_len=80, indent=""""):
+    """"""Wrap the text on the given line length.""""""
+    return ""\n"".join(
+        textwrap.wrap(
+            text, width=line_len, initial_indent=indent, subsequent_indent=indent
+        )
+    )","Seems odd to have a module just for this function, is there a way to move it somewhere else?",py,1,1,1
"@@ -140,6 +140,11 @@ def main():
     inspect_p.add_argument(""package"", type=str, help=HANDLE)
     inspect_p.set_defaults(func=command.inspect)
 
+    rm_p = subparsers.add_parser(""rm"")
+    rm_p.add_argument(""package"", type=str, help=HANDLE)
+    rm_p.add_argument(""-f"", ""--force"", action=""store_true"", help=""Remove without prompting"")
+    rm_p.set_defaults(func=command.rm)
+
     args = parser.parse_args()
 
     # Convert argparse.Namespace into dict and clean it up.","Given a single name, are we sure about ""rm"" vs ""uninstall"" which makes it clear that this is local. Sorry for the late question... quilt rm/del/delete is ambiguous whether it applies server-side, client-side or both... also, if you intend to someday add metadata-delete-only, you might want to spec this out now, so the syntax won't be awkward...",py,1,0,1
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
-        # Training state
-        if self.training:
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_train_or_val_workflow = (coeff_pred[0].dim() == 4)
+
+        # Train or val workflow
+        if is_train_or_val_workflow:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",self.is_training or self.training?,py,1,1,0
"@@ -75,6 +75,16 @@ class Resize(object):
 
     @staticmethod
     def random_select(img_scales):
+        """"""Randomly select an img_scale when ``multiscale_mode=='value'``
+
+        Args:
+            img_scales (list[tuple]): Images scales for selection.
+
+        Returns:
+            tuple: Image scale selected.
+            int: The index of selected image scale.
+        """"""
+
         assert mmcv.is_list_of(img_scales, tuple)
         scale_idx = np.random.randint(len(img_scales))
         img_scale = img_scales[scale_idx]",Randomly select an image scale from the given candidates. (There is no restrict that it can only be used with ``multiscale_mode=='value'``),py,1,1,1
"@@ -140,6 +140,10 @@ class DocumentWithTableNavigation(TextContainerObject,ScriptableObject):
 				destCol+=1 if movement==""next"" else -1
 		raise LookupError
 
+	lastTableSelection = None
+	lastTableAxis = None
+	lastTableCoordinate = None
+	lastTableCoordinateSpan = None
 	def _tableMovementScriptHelper(self, movement=""next"", axis=None):
 		if isScriptWaiting():
 			return","Have you considered using four variables here, lastRow, lastRowSpan, lastCol and lastCOlSpan? While it adds two extra variables, I think it makes things a bit easier to follow. Also, please make these private variables, i.e. add add an underscore prefix",py,1,1,1
"@@ -521,7 +521,7 @@ class Package(object):
         return cls._browse(name=name, registry=registry, top_hash=top_hash)
 
     @classmethod
-    def _browse(cls, name, registry, top_hash):
+    def _browse(cls, name, registry=None, top_hash=None):
         validate_package_name(name)
         if registry is None:
             registry = get_from_config('default_local_registry')",Is this change needed for the fix?,py,1,1,0
"@@ -215,10 +215,15 @@ class WordDocumentTextInfo(UIATextInfo):
 				self.setEndPoint(docInfo,""endToEnd"")
 
 	def getTextWithFields(self,formatConfig=None):
-		if self.isCollapsed:
-			# #7652: We cannot fetch fields on collapsed ranges otherwise we end up with repeating controlFields in braille (such as list list list). 
-			return []
-		fields=super(WordDocumentTextInfo,self).getTextWithFields(formatConfig=formatConfig)
+		fields = None
+		if not self.isCollapsed:
+			rawText = self._rangeObj.GetText(2)
+			if not rawText or rawText == '\x07':
+				r = self.copy()
+				r.end = r.start
+				fields = super(WordDocumentTextInfo, r).getTextWithFields(formatConfig=formatConfig)
+		if fields is None:
+			fields = super(WordDocumentTextInfo, self).getTextWithFields(formatConfig=formatConfig)
 		if len(fields)==0: 
 			# Nothing to do... was probably a collapsed range.
 			return fields",What does `'\x07'` represent in this instance? Could it be replaced by a named constant?,py,1,1,1
"@@ -33,8 +33,8 @@ from nupic.encoders import MultiEncoder
 
 _VERBOSITY = 0  # how chatty the demo should be
 _SEED = 1956  # the random seed used throughout
-_DATA_PATH = ""extra/hotgym/rec-center-hourly.csv""
-_OUTPUT_PATH = ""test_output.csv""
+_DATA_PATH = ""../prediction/data/extra/hotgym/rec-center-hourly.csv""
+_OUTPUT_PATH = ""network-demo-output.csv""
 _NUM_RECORDS = 2000
 
 # Config field for SPRegion","You should not have to do this. Please undo this change. If it doesn't work, you may need to set `NTA_DATA_PATH` but it should default correctly.",py,1,1,1
"@@ -24,7 +24,7 @@
 Some unit tests for the AutoscaleConnection
 """"""
 
-import unittest
+from __future__ import print_function
 import time
 from boto.ec2.autoscale import AutoScaleConnection
 from boto.ec2.autoscale.activity import Activity","`print_function` is not required for `print('some string')` to work since we support Python 2.6+, it is only required for more complex invocations of the print function (like passing keyword args). You can remove this import.",py,1,1,1
"@@ -2,6 +2,12 @@ import urllib
 import netlib.http
 from textwrap import dedent
 
+import sys, re
+if (sys.version_info > (3, 0)):
+    from urllib.parse import urlparse
+else:
+    import urlparse
+
 
 def curl_command(flow):
     data = ""curl """,@mhils started using `six` for py2/3 compatible imports in recent commits to master. Maybe you could try to adopt it here as well?,py,0,1,1
"@@ -8,10 +8,11 @@ from mmdet.core import (anchor_inside_flags, build_anchor_generator,
                         multiclass_nms, unmap)
 from ..builder import HEADS, build_loss
 from .base_dense_head import BaseDenseHead
+from .dense_test_mixins import BBoxTestMixin
 
 
 @HEADS.register_module()
-class AnchorHead(BaseDenseHead):
+class AnchorHead(BaseDenseHead, BBoxTestMixin):
     """"""Anchor-based head (RPN, RetinaNet, SSD, etc.).
 
     Args:","RPNHead has a mixin `RPNTestMixin`, can these two mixins somehow be merged to avoid confusion?",py,1,1,1
"@@ -185,6 +185,16 @@ def filter_rules_by_network(rules, network):
     return filtered_rules
 
 
+def _rule_update_can_patch(rule_from, rule_to):
+    if not rule_to or not rule_from:
+        raise ValueError('from and to must both exist for checking replace vs patch.')
+    if 'allowed' in rule_from and 'denied' in rule_to:
+        return False # Patch fails to update allowed -> denied
+    if 'denied' in rule_from and 'allowed' in rule_to:
+        return False # Patch fails to update denied -> allowed
+    return True
+
+
 class FirewallRules(object):
     """"""A collection of validated firewall rules.""""""
 ",It would be nice to see unit tests for this.,py,0,1,1
"@@ -22,6 +22,7 @@ from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
 
 
 class Options(object):
+    KEY = ""goog:chromeOptions""
 
     def __init__(self):
         self._binary_location = ''",nice touch since Google likes to change things every now and then.,py,1,0,0
"@@ -389,11 +389,13 @@ class Configuration(object):
         configVar = os.environ['NTA_CONF_DIR']
         # Return as a list of paths
         configPaths = configVar.split(':')
-      elif os.path.exists(os.path.join(
-          nupic.rootDir, 'conf', 'site', 'default')):
-        configPaths = [os.path.join(nupic.rootDir, 'conf', 'site', 'default')]
-      else:
+      elif (
+          not os.path.exists(os.path.join(
+              nupic.rootDir, 'conf', 'site', 'default')) and
+          os.path.exists(os.path.join(nupic.rootDir, 'conf', 'default'))):
         configPaths = [os.path.join(nupic.rootDir, 'conf', 'default')]
+      else:
+        configPaths = [os.path.join(nupic.rootDir, 'conf', 'site', 'default')]
         
       return configPaths
 ","@scottpurdy : os.path.join(nupic.rootDir, 'conf', 'site', 'default') was the intended location of the site-specific defaults. Why are we allowing for non-determinism in this new logic? The tests used to work fine with the intended location.",py,0,1,1
"@@ -132,6 +132,13 @@ def restart(disableAddons=False, debugLogging=False):
 		sys.argv.remove(""--ease-of-access"")
 	except ValueError:
 		pass
+	if globalVars.appArgs.cmdLineLanguage:
+		import config
+		# We should better compare here with the saved value if not saveOnExit.
+		if config.conf[""general""][""language""] != globalVars.appArgs.cmdLineLanguage:
+			for i, arg in list(enumerate(sys.argv)):
+				if arg.startswith(""--lang=""):
+					del sys.argv[i]
 	shellapi.ShellExecute(None, None,
 		sys.executable,
 		subprocess.list2cmdline(sys.argv + options),","I think cmdLanguage can just be language. globalVars.appArgs already implies that we're dealing with a command line argument here. Having said that, I note that some magic is happening with the configPath, but that could be considered confusing.",py,1,1,1
"@@ -755,11 +755,12 @@ class Storage(StorageBase, MigratorMixin):
                 # However, it does support Postgres arrays of any
                 # type. Assume that the referenced field is a JSON
                 # array and convert it to a Postgres array.
-                # N.B. This won't work on JSON objects and will never match.
                 data_as_array = '''
                 (SELECT array_agg(elems) FROM jsonb_array_elements({}) elems)
-                '''.format(sql_field)
+                '''.format(sql_field, sql_field)
                 cond = '{} && (:{})::jsonb[]'.format(data_as_array, value_holder)
+                # In case the field is not a sequence, we ignore the record.
+                conditions.append(""jsonb_typeof({}) = 'array'"".format(sql_field))
 
             elif value != MISSING:
                 # Safely escape value. MISSINGs get handled below.",nit: nicer with `{field}` in the string and `.format(field=sql_field)`,py,1,1,1
"@@ -293,10 +293,9 @@ class ScalarEncoder(Encoder):
 
   def _checkReasonableSettings(self):
     """"""(helper function) check if the settings are reasonable for SP to work""""""
-    # checks for likely mistakes in encoder settings
     if self.w < 21:
-      raise ValueError(""Number of bits in the SDR (%d) must be greater than 2, and recommended >= 21 (use forced=True to override)""
-                         % self.w)
+      raise ValueError(""Number of bits in the SDR (%d) must be greater than 21 ""
+        ""and recommended >= 21 (use forced=True to override)."" % self.w)
 
 
   def getDecoderOutputFieldTypes(self):",This statement repeats itself: > Number of bits in the SDR (%d) must be greater than 21 and recommended >= 21 Can you simplify to: > Number of bits in the SDR (%d) must be >= 21,py,1,1,1
"@@ -126,11 +126,14 @@ class ClassBalancedDataset(object):
             no oversampling. For categories with ``f_c < oversample_thr``, the
             degree of oversampling following the square-root inverse frequency
             heuristic above.
+        include_bkg (bool): Whether to include pure background images as an
+            independent category during autobalancing. Default: False.
     """"""
 
-    def __init__(self, dataset, oversample_thr):
+    def __init__(self, dataset, oversample_thr, include_bkg=False):
         self.dataset = dataset
         self.oversample_thr = oversample_thr
+        self.include_bkg = include_bkg
         self.CLASSES = dataset.CLASSES
 
         repeat_factors = self._get_repeat_factors(dataset, oversample_thr)",How about `include_empty` or just `include_background`? `bkg` is a little bit hard to guess.,py,1,1,1
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -43,16 +43,16 @@ def insert_user_stats(user_id, artists, recordings, releases, artist_count):
 
     artist_stats = {
         'count': artist_count,
-        'all_time': artists,
+        'prev_month': artists,
     }
 
     recording_stats = {
-        'all_time': recordings,
+        'prev_month': recordings,
     }
 
 
     release_stats = {
-        'all_time': releases,
+        'prev_month': releases,
     }
 
 ","We should prolly just specify the month here in the key, like `2019-01` so that we know exactly which month the data is for. With prev month, we might have data for different months for different users.",py,1,1,1
"@@ -47,9 +47,10 @@ class RemoteScheduler(Scheduler):
     Scheduler proxy object. Talks to a RemoteSchedulerResponder.
     """"""
 
-    def __init__(self, host='localhost', port=8082, connect_timeout=None):
+    def __init__(self, host='localhost', port=8082, url_prefix='', connect_timeout=None):
         self._host = host
         self._port = port
+        self._url_prefix = url_prefix
 
         config = configuration.get_config()
 ",Can you put the `url_prefix argument` after `connect_timeout` to be backward compatible.,py,1,1,1
"@@ -24,6 +24,9 @@ import cPickle as pickle
 import numpy
 import unittest2 as unittest
 
+from nupic.support.unittesthelpers.alogrithm_test_helpers \
+     import getNumpyRandomGenerator
+
 from nupic.bindings.algorithms import FlatSpatialPooler as CPPFlatSpatialPooler
 from nupic.bindings.math import GetNTAReal, Random
 from nupic.research.flat_spatial_pooler import (",Nit: PEP 8 says to prefer using parentheses for implicit line continuations rather than backslashes. Up to you.,py,1,1,1
"@@ -128,13 +128,14 @@ class GroupNode(Node):
         store = None
         hash_list = []
         stack = [self]
+        alldfs = True
         while stack:
             node = stack.pop()
             if isinstance(node, GroupNode):
                 stack.extend(child for _, child in sorted(node._items(), reverse=True))
             else:
                 if not isinstance(node._node, core.TableNode):
-                    raise ValueError(""Group contains non-dataframe nodes"")
+                    alldfs = False
                 if not node._node.hashes:
                     msg = ""Can only merge built dataframes. Build this package and try again.""
                     raise NotImplementedError(msg)","You probably need to check for `node._node is None` now, too (same as in the previous PR)",py,0,1,1
"@@ -126,7 +126,9 @@ def _get_instance():
         with DagsterInstance.get() as instance:
             yield instance
     else:
-        with tempfile.TemporaryDirectory() as tempdir:
+        # make the temp dir in the cwd since default temp dir roots
+        # have issues with FS notif based event log watching
+        with tempfile.TemporaryDirectory(dir=os.getcwd()) as tempdir:
             click.echo(
                 f""Using temporary directory {tempdir} for storage. This will be removed when dagit exits.\n""
                 ""To persist information across sessions, set the environment variable DAGSTER_HOME to a directory to use.\n""",does this have any cleanup issues if dagit crashes or something?,py,1,1,1
"@@ -21,4 +21,6 @@
 
 from nupic.frameworks.viz.graphviz_renderer import GraphVizRenderer
 from nupic.frameworks.viz.networkx_renderer import NetworkXRenderer
+from nupic.frameworks.viz.dot_renderer import DotRenderer
 from nupic.frameworks.viz.network_visualization import NetworkVisualizer
+",put import in alpha order,py,1,1,1
"@@ -64,6 +64,8 @@ def test_start(proc, qtbot, message_mock, py_proc):
     assert not message_mock.messages
     assert qutescheme.spawn_output == expected
     assert proc.exit_status() == QProcess.NormalExit
+    assert proc.final_stdout().strip() == ""test"", proc.final_stdout()
+    assert proc.final_stderr().strip() == """", proc.final_stderr()
 
 
 def test_start_verbose(proc, qtbot, message_mock, py_proc):",Maybe those would fit better in `test_start_output_message` which also tests various combinations of stdout/stderr being set or unset?,py,1,1,1
"@@ -87,6 +87,6 @@ class ForsetiClientInstaller(ForsetiInstaller):
             'FORSETI_BUCKET': bucket_name[len('gs://'):],
             'BUCKET_LOCATION': self.config.bucket_location,
             'GCP_CLIENT_SERVICE_ACCOUNT': self.gcp_service_acct_email,
-            'BRANCH_OR_RELEASE': 'branch-name: ""{}""'.format(self.branch),
+            'FORSETI_TARGET': 'forseti-target: ""{}""'.format(self.branch),
             'FORSETI_SERVER_ZONE': self.server_zone
         }","Now that I see this here, is there any reason why `forseti-target` attribute is defined here, rather in the yaml.in files?",py,1,1,1
"@@ -380,7 +380,7 @@ public class Actions {
 
     // Of course, this is the offset from the centre of the element. We have no idea what the width
     // and height are once we execute this method.
-    LOG.info(""When using the W3C Action commands, offsets are from the center of element"");
+    LOG.finest(""When using the W3C Action commands, offsets are from the center of element"");
     return moveInTicks(target, xOffset, yOffset);
   }
 ","Again, the existing level is correct --- we're letting users know about something that might cause there tests to fail.",py,1,1,1
"@@ -9,12 +9,13 @@ try:
     old_bokeh = True
 except ImportError:
     from bokeh.models import Component as PlotObject
-    from bokeh._json_encoder import serialize_json
+    from bokeh.core.json_encoder import serialize_json
     old_bokeh = False
 
 import param
 
 from ...core.data import ArrayColumns
+from .util import models_to_json
 
 
 class Callback(param.ParameterizedFunction):",`old_bokeh` isn't a great name as one day the latest version will become old! I would consider stating the version explicitly...i.e `bokeh_XX`.,py,1,1,1
"@@ -23,12 +23,6 @@ Usage:
       --rules <rules path> \\
       --engine_name <rule engine name> \\
       --output_path <output path (optional)> \\
-      --db_host <Cloud SQL database hostname/IP> \\
-      --db_user <Cloud SQL database user> \\
-      --db_name <Cloud SQL database name (required)> \\
-      --sendgrid_api_key <API key to auth SendGrid email service> \\
-      --email_sender <email address of the email sender> \\
-      --email_recipient <email address of the email recipient>
 """"""
 
 ",Do we need to list the config arg here?,py,1,1,1
"@@ -25,6 +25,7 @@ from qutebrowser.config import config, configdata
 from qutebrowser.models import basecompletion
 from qutebrowser.utils import log, qtutils, objreg
 from qutebrowser.commands import cmdutils
+from qutebrowser.browser import quickmarks
 
 
 class SettingSectionCompletionModel(basecompletion.BaseCompletionModel):",You can remove this import now after 74839d7affdaabd4899311c64e9f50a430a6ea3d,py,0,1,1
"@@ -0,0 +1,19 @@
+# -*- coding: UTF-8 -*-
+#A part of NonVisual Desktop Access (NVDA)
+#Copyright (C) 2016 NV Access Limited
+#This file is covered by the GNU General Public License.
+#See the file COPYING for more details.
+
+""""""
+Contains upgrade steps for the NVDA configuration files. These steps are run to ensure that a configuration file
+complies with the latest schema (@see configSpec.py).
+
+To add a new step (after modifying the schema and incrementing the schema version number) add a new method to this
+module. The method name should be in the form ""upgradeConfigFrom_X_to_Y"" where X is the previous schema version, and Y
+is the current schema version. The argument profile will be a configobj.ConfigObj object. The function should ensure 
+that no information is lost, while updating the ConfigObj to meet the requirements of the new schema.
+""""""
+
+from logHandler import log
+
+# add upgrade steps here.",Please provide a docstring here which explains what this module is and how to add steps.,py,1,1,1
"@@ -346,6 +346,8 @@ def tree_attribute(identifier):
     These custom attributes start with a capitalized character when
     applicable (not applicable to underscore or certain unicode characters)
     """"""
+    if not identifier:
+        return True
     if identifier[0].upper().isupper() is False and identifier[0] != '_':
         return True
     else:","This would match anything that is falsey even though it should only ever match the empty string. I would prefer to be explicit, i.e.: `if identifier=='':`",py,1,1,1
"@@ -779,7 +779,7 @@ class GlobalCommands(ScriptableObject):
                 if scriptHandler.getLastScriptRepeatCount()>=1:
                         if curObject.TextInfo!=NVDAObjectTextInfo:
                                 textList=[]
-                                if curObject.name and isinstance(curObject.name, basestring) and not curObject.name.isspace():
+                                if curObject.name and isinstance(curObject.name, str) and not curObject.name.isspace():
                                         textList.append(curObject.name)
                                 try:
                                         info=curObject.makeTextInfo(textInfos.POSITION_SELECTION)",Could you also split this one while at it?,py,1,1,1
"@@ -452,6 +452,10 @@ class Series(Frame, IndexOpsMixin, Generic[T]):
     def add(self, other) -> ""Series"":
         return self + other
 
+    def __add__(self, other):
+        other = ks.Index(other, name=self.name) if isinstance(other, (list, tuple)) else other
+        return IndexOpsMixin.__add__(self, other)
+
     add.__doc__ = _flex_doc_SERIES.format(
         desc=""Addition"",
         op_name=""+"",",- Why do we create Index to compare instead of Series? - Looks like Index support this too. Can't we move this into `base.py`?,py,1,1,1
"@@ -178,6 +178,7 @@ confspec = ConfigObj(StringIO(
 	reportPage = boolean(default=true)
 	reportLineNumber = boolean(default=False)
 	reportLineIndentation = boolean(default=False)
+	reportToneIndentation = boolean(default=False)
 	reportParagraphIndentation = boolean(default=False)
 	reportTables = boolean(default=true)
 	includeLayoutTables = boolean(default=False)","I think we should rename this to `reportLineIndentationWithTones` or `lineIndentationTones`, since it isn't clear that this is related to line indentation (as opposed to paragraph indentation).",py,1,1,1
"@@ -34,6 +34,7 @@ class BasicAuthAuthenticationPolicy(base_auth.BasicAuthAuthenticationPolicy):
                 return
 
             hmac_secret = settings[""userid_hmac_secret""]
+            # Unsure how to use fstring with *args
             credentials = ""{}:{}"".format(*credentials)
             userid = utils.hmac_digest(hmac_secret, credentials)
             return userid","I would say that `f""{credentials[0]}:{credentials[1]""` is fine. Or leave the format() call",py,1,1,1
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -169,6 +169,9 @@ class MainWindow(QWidget):
         objreg.register('message-bridge', message_bridge, scope='window',
                         window=self.win_id)
 
+        if config.val.window.hide_decoration:
+            window_flags = Qt.CustomizeWindowHint | Qt.NoDropShadowWindowHint
+            self.setWindowFlags(Qt.Window | window_flags)
         self.setWindowTitle('qutebrowser')
         self._vbox = QVBoxLayout(self)
         self._vbox.setContentsMargins(0, 0, 0, 0)",This should be handled in `_on_config_changed` too if possible so it can be set without requiring a restart. Not sure if it's possible to just change the flags after the window has been shown though - but maybe a `self.hide()` and `self.show()` helps.,py,1,1,1
"@@ -46,11 +46,7 @@ class TestEndpointLoading(unittest.TestCase):
 
     def test_load_endpoint_json(self):
         endpoints = load_endpoint_json(boto.ENDPOINTS_PATH)
-        self.assertTrue('ec2' in endpoints)
-        self.assertEqual(
-            endpoints['ec2']['us-east-1'],
-            'ec2.us-east-1.amazonaws.com'
-        )
+        self.assertTrue('partitions' in endpoints)
 
     def test_merge_endpoints(self):
         defaults = {",Would this be a breaking change to have partitions as the top layered key?,py,1,1,1
"@@ -246,7 +246,10 @@ def _parse_keystring(keystr):
                 yield '>'
                 assert not key, key
         elif c == '<':
-            special = True
+            if special:
+                key += c
+            else:
+                special = True
         elif special:
             key += c
         else:","This seems to somewhat fix `<alt-less>` (I need to bind `<alt-shift-less>` to get this to work, I wonder why that needs `shift` but a plain `<` dosen't), but it dosen't fix `<alt-greater>` so it's not a full fix. I'm also not sure if this will change any error messages. I don't really like this whole parsing logic, it needs a proper grammar instead of consuming keys like this (in my opinion). We could special-case `> ` right after `+` or `-`, but that feels really hacky to me.",py,1,0,1
"@@ -173,7 +173,7 @@ public class DefaultConditionRunner implements ConditionRunner {
     }
 
     protected void log(String message) {
-      logger.info(new Date() + "" - "" + message);
+      logger.finest(new Date() + "" - "" + message);
     }
 
   }",This method is designed to allow the condition runner to tell users something interesting. The current `INFO` log level is correct.,py,1,1,1
"@@ -62,14 +62,13 @@ class Swagger(object):
         self.responses = {}
         self.paths = OrderedDict()
 
-    def _load(self, swagger_spec_path):
-        with open(swagger_spec_path) as fds:
-            swagger_content = fds.read()
+    def _load(self, swagger_spec_fd):
+        swagger_content = swagger_spec_fd.read()
         try:
             self.swagger = yaml_ordered_load(swagger_content, yaml.SafeLoader)
-            self.log.info(""Loaded Swagger spec %s"", swagger_spec_path)
+            self.log.info(""Loaded Swagger spec %s"", swagger_spec_fd)
         except IOError as exc:
-            raise TaurusConfigError(""Error when parsing Swagger file '%s': %s"" % (swagger_spec_path, exc))
+            raise TaurusConfigError(""Error when parsing Swagger file '%s': %s"" % (swagger_spec_fd, exc))
 
     def _validate_swagger_version(self):
         swagger_version = self.swagger.get(""swagger"", self.swagger.get(""openapi""))","Actually, it's not necessary to call `read()` on a stream, as `yaml_ordered_load()` already accepts both strings and streams.",py,1,1,1
"@@ -356,6 +356,12 @@ MSGS = {
         ""Emitted when a dict key is not hashable ""
         ""(i.e. doesn't define __hash__ method)."",
     ),
+    ""E1141"": (
+        ""Dict is not iterable"",
+        ""dict-iter-missing-items"",
+        ""Emitted when trying to iterate through""
+        ""a dict without calling .items()"",
+    ),
     ""W1113"": (
         ""Keyword argument before variable positional arguments list ""
         ""in the definition of %s function"",","Let's add a bit more context here, since the dictionary is actually iterable, but it's going to raise an error if we don't call `items()` on it. So maybe something along the lines of `Unpacking a dictionary in iteration without calling .items()`?",py,1,1,1
"@@ -72,7 +72,11 @@ class Anomaly(object):
   _supportedModes = (MODE_PURE, MODE_LIKELIHOOD, MODE_WEIGHTED)
 
 
-  def __init__(self, slidingWindowSize=None, mode=MODE_PURE, binaryAnomalyThreshold=None):
+  def __init__(self, 
+               slidingWindowSize=None,
+               mode=MODE_PURE,
+               binaryAnomalyThreshold=None,
+               claBurnInPeriod=300):
     """"""
     @param slidingWindowSize (optional) - how many elements are summed up;
         enables moving average on final anomaly score; int >= 0",So I can specify `claBurnInPeriod=0` and get the previous behavior?,py,1,1,1
"@@ -180,6 +180,7 @@ class BaseKeyParser(QObject):
 
         count, cmd_input = self._split_count()
 
+        print(count, cmd_input)
         if not cmd_input:
             # Only a count, no command yet, but we handled it
             return self.Match.other","That should probably be removed now, or replaced by a debug log command :wink:",py,1,1,1
"@@ -211,6 +211,10 @@ class Task(object):
 
     _event_callbacks = {}
 
+    # Priority of the task: the scheduler should favor available
+    # tasks with higher priority values first.
+    priority = 0
+
     @classmethod
     def event_handler(cls, event):
         """""" Decorator for adding event handlers """"""",This name conflicts with luigi.hadoop.BaseHadoopJobTask which uses priority for hadoop scheduling priority,py,1,1,1
"@@ -932,6 +932,9 @@ class UserResource:
                 'description': 'Invalid value for {}'.format(param)
             }
 
+            if value == '':
+                raise_invalid(self.request, **error_details)
+
             # Ignore specific fields
             if param.startswith('_') and param not in ('_since',
                                                        '_to',",I guess this test is not only for `_since` and for other fields it might be useful to be able to search for an empty value.,py,1,1,1
"@@ -47,6 +47,7 @@ VIOLATION_RESOURCES = {
     'LOCATION_VIOLATION': 'location_violations',
     'LOG_SINK_VIOLATION': 'log_sink_violations',
     'RETENTION_VIOLATION': 'retention_violations',
+    'ROLE_VIOLATION': 'custom_role_violations',
     'SERVICE_ACCOUNT_KEY_VIOLATION': (
         'service_account_key_violations'),
     'EXTERNAL_PROJECT_ACCESS_VIOLATION': 'external_project_access_violations'","Change this to either `'CUSTOM_ROLE_VIOLATION': 'custom_role_violations',` or `'ROLE_VIOLATION': 'role_violations',` So that is matches the pattern of other violations.",py,1,1,1
"@@ -94,13 +94,15 @@ def get_window(via_ipc, force_window=False, force_tab=False,
     return window.win_id
 
 
-def raise_window(window):
+def raise_window(window, alert=False):
     """"""Raise the given MainWindow object.""""""
     window.setWindowState(window.windowState() & ~Qt.WindowMinimized)
     window.setWindowState(window.windowState() | Qt.WindowActive)
     window.raise_()
     window.activateWindow()
-    QApplication.instance().alert(window)
+
+    if alert:
+        QApplication.instance().alert(window)
 
 
 # WORKAROUND for https://github.com/PyCQA/pylint/issues/1770","I think you meant to say `alert=True` here, to make all existing usages keep the old behavior",py,1,1,1
"@@ -7,6 +7,8 @@ from mitmproxy.net import tcp
 # We redefine these here for now to avoid importing Urwid-related guff on
 # platforms that don't support it, and circular imports. We can do better using
 # a lazy checker down the track.
+from mitmproxy.optmanager import Path
+
 console_palettes = [
     ""lowlight"",
     ""lowdark"",","We already import `optmanager`, so let's just use `optmanager.Path` below.",py,1,1,1
"@@ -67,11 +67,11 @@ public abstract class AbstractWebDriverEventListener implements WebDriverEventLi
     // Do nothing.
   }
 
-  public void beforeChangeValueOf(WebElement element, WebDriver driver) {
+  public void beforeChangeValueOf(WebElement element, WebDriver driver, CharSequence[] value) {
     // Do nothing.
   }
 
-  public void afterChangeValueOf(WebElement element, WebDriver driver) {
+  public void afterChangeValueOf(WebElement element, WebDriver driver, CharSequence[] value) {
     // Do nothing.
   }
 ","change 'value' to keysToSend, here and in other references in this commit. 'value' implies the user is getting the value of the element, rather than just the keys we're sending to it.",py,1,1,1
"@@ -195,15 +195,12 @@ class SecurityCenterClient(object):
         response = self.repository.findings.list(parent=source_id)
         return response
 
-    def update_finding(self, finding, finding_id, state, event_time,
-                       source_id=None):
+    # pylint: disable=inconsistent-return-statements
+    def update_finding(self, finding, finding_id, source_id=None):
         """"""Updates a finding in CSCC.
 
         Args:
             finding (dict): Forseti violation in CSCC format.
-            name (str): Name of the CSCC finding.
-            state (str): State of the CSCC finding.
-            event_time (str): Event time of the the CSCC finding.
             source_id (str): Unique ID assigned by CSCC, to the organization
                 that the violations are originating from.
             finding_id (str): id hash of the CSCC finding.",You should have the return statement on line 213 return an empty dict and not override the pylint.,py,1,1,1
"@@ -61,6 +61,13 @@ class PermissionsUnauthenticatedViewTest(BaseWebTest, unittest.TestCase):
             'resource_name': 'bucket',
             'uri': '/buckets'})
 
+    def test_can_paginate(self):
+        """"""kinto_http.js uses this sort of request when listing permissions""""""
+        resp = self.app.get('/permissions?_sort=id&_limit=1', headers=self.everyone_headers)
+        while 'Next-Page' in resp.headers:
+            next_url = resp.headers['Next-Page'][len('http://localhost/v1'):]
+            resp = self.app.get(next_url, headers=self.everyone_headers)
+
     def test_object_details_are_provided(self):
         resp = self.app.get('/permissions', headers=self.everyone_headers)
         entries = resp.json['data']","Ideally, I'd like the `/buckets` perm to come out first, could you please check that? (I never know whether `None` comes first or not)",py,1,1,1
"@@ -195,7 +195,10 @@ def main():
         if args.eval:
             eval_kwargs = cfg.get('evaluation', {}).copy()
             # hard-code way to remove EvalHook args
-            for key in ['interval', 'tmpdir', 'start', 'gpu_collect']:
+            for key in [
+                    'interval', 'tmpdir', 'start', 'gpu_collect', 'save_best',
+                    'key_indicator', 'rule'
+            ]:
                 eval_kwargs.pop(key, None)
             eval_kwargs.update(dict(metric=args.eval, **kwargs))
             print(dataset.evaluate(outputs, **eval_kwargs))",Other scripts such as `benchmark.py` may also be affected.,py,0,1,0
"@@ -19,3 +19,8 @@
 
 import pytest_bdd as bdd
 bdd.scenarios('tabs.feature')
+
+
+@bdd.when(""I wait for a prompt"")
+def wait_for_prompt(quteproc):
+    quteproc.wait_for(message='Asking question *')","You can simply do `And I wait for ""Asking question *"" in the log` in the `feature` file (though you might want to include some portion of the question text as well)",py,1,1,1
"@@ -27,6 +27,12 @@ class LoadImageFromFile(object):
         results['img'] = img
         results['img_shape'] = img.shape
         results['ori_shape'] = img.shape
+        # Set initial values for default meta_keys
+        results['pad_shape'] = img.shape
+        results['flip'] = False
+        results['scale_factor'] = 1.0
+        cnum = 1 if len(img.shape) < 3 else img.shape[2]
+        results['img_norm_cfg'] = [[0.0] * cnum, [1.0] * cnum, False]
         return results
 
     def __repr__(self):",Use a more specific variable name like `num_channels`.,py,1,1,1
"@@ -112,6 +112,10 @@ class AddonHalt(MitmproxyException):
     pass
 
 
+class TypeError(MitmproxyException):
+    pass
+
+
 """"""
     Net-layer exceptions
 """"""",This looks wrong - we should use a regular Python TypeError?,py,1,1,1
"@@ -0,0 +1,6 @@
+import ConfigParser
+import os,binascii
+
+cfgfile = open(""/{{cookiecutter.repo_name}}/{{cookiecutter.repo_name}}/{{cookiecutter.repo_name}}.ini"",'w') #enter path of file
+parser = ConfigParser.SafeConfigParser()
+parser.set('authentication_configuration','kinto.userid_hmac_secret', binascii.b2a_hex(os.urandom(8)))","The leading `/` in the path here, migth be the source of your trouble",py,1,1,1
"@@ -19,8 +19,7 @@
 # http://numenta.org/licenses/
 # ----------------------------------------------------------------------
 
-from collections import defaultdict, namedtuple
-
+from collections import defaultdict
 
 
 class SynapseData(object):","I think we want 3 blank lines above this, not 2. ""Separate top level functions and classes by three blank lines.""",py,1,1,1
"@@ -8,6 +8,14 @@ from pylint import checkers
 from pylint.lint import PyLinter
 from pylint.testutils import MinimalTestReporter
 
+TOP = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
+PYLINTRC = os.path.join(TOP, ""pylintrc"")
+
+
+@pytest.fixture(autouse=True)
+def pylintrc():
+    os.environ[""PYLINTRC""] = PYLINTRC
+
 
 @pytest.fixture
 def linter(checker, register, enable, disable, reporter):",I don't see the point in adding those lines. Can you explain a little bit please?,py,0,1,1
"@@ -28,10 +28,10 @@ def get_python_path(filepath: str) -> str:
             return os.getcwd()
 
 
-def _basename_in_ignore_list_re(base_name, ignore_list_re):
-    """"""Determines if the basename is matched in a regex ignorelist
+def _is_in_ignore_list_re(element, ignore_list_re):
+    """"""Determines if the element is matched in a regex ignore-list
 
-    :param str base_name: The basename of the file
+    :param str element: The element to be checked.
     :param list ignore_list_re: A collection of regex patterns to match against.
         Successful matches are ignored.
 ","Could you add the typing and remove the docstring that became useless, please. Since this MR we've removed python 3.5 and trying to add typing on modified functions :)",py,1,1,1
"@@ -144,11 +144,9 @@ class TimescaleListenStore(ListenStore):
             t0 = time.monotonic()
             min_ts = self._select_single_timestamp(True, user_name)
             max_ts = self._select_single_timestamp(False, user_name)
+            cache.set(REDIS_USER_TIMESTAMPS + user_name, ""%d,%d"" % (min_ts, max_ts), time=0)
             # intended for production monitoring
             self.log.info(""timestamps %s %.2fs"" % (user_name, time.monotonic() - t0))
-            if min_ts and max_ts:
-                cache.set(REDIS_USER_TIMESTAMPS + user_name,
-                          ""%d,%d"" % (min_ts, max_ts), time=0)
 
         return min_ts, max_ts
 ",can we add to the docstring of select_single_timestamp to say that it returns a sentinel 0 in the case that they user has no listens?,py,1,1,1
"@@ -83,7 +83,8 @@ class YamlConfig:
     def __init__(self):
         self._filename = os.path.join(standarddir.config(auto=True),
                                       'autoconfig.yml')
-        self.values = {}
+        self._values = {}
+        self._changed = None
 
     def init_save_manager(self, save_manager):
         """"""Make sure the config gets saved properly.","FWIW I'd prefer this to be called `self._dirty` as it's called that in other places, and when we add a `changed` signal, it's harder to mix those two up. Also, why set it to `None` here and not `False`?",py,1,1,1
"@@ -38,6 +38,7 @@ VIOLATION_RESOURCES = {
     'FIREWALL_WHITELIST_VIOLATION': 'firewall_rule_violations',
     'GROUP_VIOLATION': 'groups_violations',
     'KE_VERSION_VIOLATION': 'ke_version_violations',
+    'KE_JMESPATH_VIOLATION': 'ke_jmespath_violations',
     'IAM_POLICY_VIOLATION': 'iam_policy_violations',
     'IAP_VIOLATION': 'iap_violations',
     'INSTANCE_NETWORK_INTERFACE_VIOLATION': (",Can we just name this as `KE_VIOLATION`? jmespath is just what we used to evaluate for the violation.,py,1,1,1
"@@ -0,0 +1,6 @@
+# -*- coding: UTF-8 -*-
+# A part of NonVisual Desktop Access (NVDA)
+# Copyright (C) 2018 NV Access Limited, Łukasz Golonka
+# This file may be used under the terms of the GNU General Public License, version 2 or later.
+# For more details see: https://www.gnu.org/licenses/gpl-2.0.html
+from mplayerc import *",Could you please add an empty line before and after this line?,py,1,1,1
"@@ -176,8 +176,8 @@ def _get_mapped_solids_dict(
     with user_code_error_boundary(
         DagsterConfigMappingFunctionError, _get_error_lambda(current_stack)
     ):
-        mapped_solids_config = graph_def.config_mapping.config_fn(
-            config_mapped_solid_config.value.get(""config"", {})
+        mapped_solids_config = graph_def.config_mapping.resolve(
+            config_mapped_solid_config.value.get(""config"", {}), config_has_been_validated=True
         )
 
     # Dynamically construct the type that the output of the config mapping function will",how do we handle enums in composite descent? is it under test at all?,py,1,1,1
"@@ -18,6 +18,7 @@ from __future__ import absolute_import
 from __future__ import division
 from __future__ import print_function
 
+import threading
 import concurrent.futures
 from google.apputils import datelib
 ","nit: threading is part of the standard library, so it should be with __future__ section.",py,1,1,1
"@@ -416,9 +416,9 @@ This initializes all modules such as audio, IAccessible, keyboard, mouse, and GU
 		log.warning(""Java Access Bridge not available"")
 	except:
 		log.error(""Error initializing Java Access Bridge support"", exc_info=True)
-	import winConsoleHandler
-	log.debug(""Initializing winConsole support"")
-	winConsoleHandler.initialize()
+	import winConsoleHandlerLegacy
+	log.debug(""Initializing legacy winConsole support"")
+	winConsoleHandlerLegacy.initialize()
 	import UIAHandler
 	log.debug(""Initializing UIA support"")
 	try:",Why did you rename this as well?,py,1,1,1
"@@ -2042,12 +2042,10 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         2     0     0     0
         3    10    13    17
         4    20    23    27
-
         """"""
         applied = []
         for column in self._internal.data_columns:
             applied.append(self[column].shift(periods, fill_value))
-
         sdf = self._sdf.select(
             self._internal.index_scols + [c._scol for c in applied])
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])",Can you remove unrelated changes here?,py,1,1,1
"@@ -0,0 +1,12 @@
+from __future__ import absolute_import, print_function, division
+
+from mitmproxy import ctxmanager
+
+_flow = None
+_log = None
+_master = None
+
+
+flow = ctxmanager.Facade(lambda: _flow)
+log = ctxmanager.Facade(lambda: _log)
+master = ctxmanager.Facade(lambda: _master)",Can we avoid the whole Facade dance and just assign to `ctx.flow` etc. in `handlecontext`?,py,1,1,1
"@@ -694,7 +694,13 @@ class ColorbarPlot(ElementPlot):
             self._cbar_extend = 'max'
 
         # Define special out-of-range colors on colormap
-        cmap = copy.copy(plt.cm.get_cmap(opts.get('cmap')))
+        cmap = opts.get('cmap')
+        if isinstance(cmap, list):
+            cmap = mpl_colors.ListedColormap(cmap)
+        elif isinstance(cmap, util.basestring):
+            cmap = copy.copy(plt.cm.get_cmap(cmap))
+        else:
+            cmap = copy.copy(cmap)
         colors = {}
         for k, val in self.clipping_colors.items():
             if isinstance(val, tuple):",What is all the copying about?,py,1,1,0
"@@ -174,6 +174,9 @@ class ElementPlot(BokehPlot, GenericElementPlot):
         default=None, class_=(util.basestring, TickFormatter, FunctionType), doc=""""""
         Formatter for ticks along the x-axis."""""")
 
+    x2rotation = param.Integer(default=None, bounds=(0, 360), doc=""""""
+        Rotation angle of the xticks."""""")
+
     _categorical = False
 
     # Declare which styles cannot be mapped to a non-scalar dimension",Rotation angle of _which_ xticks?,py,1,1,0
"@@ -268,6 +268,7 @@ def _load_skill(path, course):
 
     return Skill(
         name=name,
+        filename=str(path)[len(course.course_dir)+1:],
         id=skill_id,
         words=words,
         phrases=phrases,",why `str(path)` instead of just `path`?,py,1,1,1
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -5202,6 +5202,15 @@ class DataFrameTest(ReusedSQLTestCase, SQLTestUtils):
         kdf = ks.Series([]).to_frame()
         self.assert_eq(pdf.last_valid_index(), kdf.last_valid_index())
 
+    def test_last(self):
+        from pandas.tseries.offsets import DateOffset
+
+        index = pd.date_range(""2018-04-09"", periods=4, freq=""2D"")
+        pdf = pd.DataFrame([1, 2, 3, 4], index=index)
+        kdf = ks.from_pandas(pdf)
+        self.assert_eq(pdf.last(""1D""), kdf.last(""1D""))
+        self.assert_eq(pdf.last(DateOffset(days=1)), kdf.last(DateOffset(days=1)))
+
     def test_first_valid_index(self):
         pdf = pd.DataFrame(
             {""a"": [None, 2, 3, 2], ""b"": [None, 2.0, 3.0, 1.0], ""c"": [None, 200, 400, 200]},",You can import it at the import block at the header of this file.,py,1,1,1
"@@ -27,6 +27,10 @@ import queueHandler
 import speechDictHandler
 import characterProcessing
 import languageHandler
+import extensionPoints
+
+# inform those who want to know that there is new speech
+preSpeech = extensionPoints.Action()
 
 speechMode_off=0
 speechMode_beeps=1","Also, this might have to be pre_speech according to the conventions.",py,1,1,1
"@@ -66,7 +66,8 @@ class PythonModelWrapper(object):
     @lazy_property
     def _model_udf(self):
         spark = default_session()
-        return spark_udf(spark, self._path, self._run_id, result_type=self._return_type)
+        model_uri = ""runs:/{run_id}/{path}"".format(run_id=self._run_id, path=self._path)
+        return spark_udf(spark, model_uri=model_uri, result_type=self._return_type)
 
     def __str__(self):
         return ""PythonModelWrapper({})"".format(str(self._model))","Seems like `run_id` is optional according to `load_model` signature, what if it's `None`?",py,1,1,1
"@@ -247,6 +247,8 @@ class BrailleDisplayDriver(braille.BrailleDisplayDriver,ScriptableObject):
 			""kb:control+end"" : (""br(freedomScientific):dot4+dot5+dot6+brailleSpaceBar"",),
 			""kb:alt"" : (""br(freedomScientific):dot1+dot3+dot4+brailleSpaceBar"",),
 			""kb:alt+tab"" : (""br(freedomScientific):dot2+dot3+dot4+dot5+brailleSpaceBar"",),
+			""kb:alt+shift+tab"" : (""br(freedomScientific):dot1+dot2+dot5+dot6+brailleSpaceBar"",),
+			""kb:win+tab"" : (""br(freedomScientific):dot2+dot3+dot4+brailleSpaceBar"",),
 			""kb:escape"" : (""br(freedomScientific):dot1+dot5+brailleSpaceBar"",),
 			""kb:windows"" : (""br(freedomScientific):dot2+dot4+dot5+dot6+brailleSpaceBar"",),
 			""kb:windows+d"" : (""br(freedomScientific):dot1+dot2+dot3+dot4+dot5+dot6+brailleSpaceBar"",),","This one is wrong and breaks the driver currently. it should be windows, not win. @Oliver2213: Could you provide a pr that fixes this?",py,0,1,1
"@@ -0,0 +1,15 @@
+""""""Test case for typevar-name-missing-variance with default settings""""""
+
+from typing import TypeVar
+
+# Name set by regex pattern
+TypeVarsShouldBeLikeThis = TypeVar(""TypeVarsShouldBeLikeThis"")
+TypeVarsShouldBeLikeThis_contra = TypeVar(
+    ""TypeVarsShouldBeLikeThis_contra"", contravariant=True
+)
+TypeVarsShouldBeLikeThis_co = TypeVar(""TypeVarsShouldBeLikeThis_co"", covariant=True)
+
+# Name using the standard style
+T_GoodName = TypeVar(""T_GoodName"")  # [invalid-name]
+T_GoodName_co = TypeVar(""T_GoodName_co"", covariant=True)  # [invalid-name]
+T_GoodName_contra = TypeVar(""T_GoodName_contra"", contravariant=True)  # [invalid-name]",Better to remove the `T_` prefix,py,1,1,0
"@@ -293,9 +293,8 @@ class OptionsManagerMixIn:
             msg = ""No config file found, using default configuration""
         print(msg, file=sys.stderr)
 
-    @staticmethod
     def _parse_toml(
-        config_file: Union[Path, str], parser: configparser.ConfigParser
+        self, config_file: Union[Path, str], parser: configparser.ConfigParser
     ) -> None:
         """"""Parse and handle errors of a toml configuration file.""""""
         with open(config_file, encoding=""utf-8"") as fp:",Might want to add an explanation for why we get here. Can we get the incorrect item from the ValueError message? If so we might be able to pass it as an `args`.,py,1,1,1
"@@ -7710,9 +7710,9 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
 
         Examples
         --------
-        >>> df = ks.DataFrame({'A': {0: 'a', 1: 'b', 2: 'c'},
-        ...                    'B': {0: 1, 1: 3, 2: 5},
-        ...                    'C': {0: 2, 1: 4, 2: 6}},
+        >>> df = ks.DataFrame({'A': {'0': 'a', '1': 'b', '2': 'c'},
+        ...                    'B': {'0': '1', '1': '3', '2': '5'},
+        ...                    'C': {'0': '2', '1': '4', '2': '6'}},
         ...                   columns=['A', 'B', 'C'])
         >>> df
            A  B  C",Why changed here? Seems not related?,py,1,0,0
"@@ -47,15 +47,12 @@ import json
 import random
 import tempfile
 import unittest2 as unittest
+from pkg_resources import resource_filename
 
-from nupic.data.datasethelpers import findDataset
 from nupic.data.file_record_stream import FileRecordStream
 from nupic.engine import Network
-from nupic.research import fdrutilities as fdrutils
 from nupic.encoders import MultiEncoder
-from nupic.regions.RecordSensorFilters.ModifyFields import ModifyFields
-from nupic.support.unittesthelpers.testcasebase import (TestCaseBase,
-                                                        TestOptionParser)
+from nupic.support.unittesthelpers.testcasebase import TestCaseBase
 
 _VERBOSITY = 0         # how chatty the unit tests should be
 _SEED = 35             # the random seed used throughout",Cleaned up unused imports.,py,1,1,0
"@@ -121,6 +121,10 @@ class espeak_VOICE(Structure):
 	def __eq__(self, other):
 		return isinstance(other, type(self)) and addressof(self) == addressof(other)
 
+# constants that can be returned by espeak_callback
+callback_continue_synthesis=0
+callback_abort_synthesis=1
+
 t_espeak_callback=CFUNCTYPE(c_int,POINTER(c_short),c_int,POINTER(espeak_EVENT))
 
 @t_espeak_callback",Great! You worked out what these values were for. I think they should be in caps though.,py,1,1,1
"@@ -101,7 +101,8 @@ def get_template_body(req_data):
     url = req_data.get('TemplateURL')
     if url:
         response = run_safe(lambda: safe_requests.get(url, verify=False))
-        if not response or response.status_code >= 400:
+        # check error codes, and code 301 - fixes https://github.com/localstack/localstack/issues/1884
+        if not response or response.status_code == 301 or response.status_code >= 400:
             # check if this is an S3 URL, then get the file directly from there
             if '://localhost' in url or re.match(r'.*s3(\-website)?\.([^\.]+\.)?amazonaws.com.*', url):
                 parsed_path = urlparse.urlparse(url).path.lstrip('/')",Should this check for ://localhost instead be checking for HOSTNAME or HOSTNAME_EXTERNAL?,py,1,1,1
"@@ -21,7 +21,9 @@
 
 """"""Anomaly-related algorithms.""""""
 
+import collections
 import numpy
+from types import FunctionType
 
 from nupic.algorithms.anomaly_likelihood import AnomalyLikelihood
 from nupic.utils import MovingAverage","`collections` is newly imported, but not used. Please run your changes through pylint with nupic pylint configuration and fix findings related to your changes.",py,1,1,1
"@@ -21,7 +21,7 @@ from pathlib import Path
 
 import astroid
 import pytest
-from unittest_pyreverse_writer import Config, get_project
+from unittest_pyreverse_writer import _DEFAULTS, Config, get_project
 
 from pylint.pyreverse.diadefslib import (
     ClassDiadefGenerator,",Shouldn't this be defined in ``conftest.py`` and used as a pytest fixtures?,py,1,1,1
"@@ -34,6 +34,15 @@ class CocoDataset(CustomDataset):
                'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush')
 
     def load_annotations(self, ann_file):
+        """"""Load annotation from COCO style annotation file
+
+        Args:
+            ann_file (str): Path of annotation file.
+
+        Returns:
+            list[dict]: Annotation info from COCO api.
+        """"""
+
         self.coco = COCO(ann_file)
         self.cat_ids = self.coco.get_cat_ids(cat_names=self.CLASSES)
         self.cat2label = {cat_id: i for i, cat_id in enumerate(self.cat_ids)}",Missing the last `.`,py,1,1,0
"@@ -76,7 +76,7 @@ def check_stepfunctions(expect_shutdown=False, print_error=False):
     out = None
     try:
         # check Kinesis
-        wait_for_port_open(config.LOCAL_PORT_STEPFUNCTIONS)
+        wait_for_port_open(config.LOCAL_PORT_STEPFUNCTIONS, sleep_time=2)
         endpoint_url = f""http://127.0.0.1:{config.LOCAL_PORT_STEPFUNCTIONS}""
         out = aws_stack.connect_to_service(
             service_name=""stepfunctions"", endpoint_url=endpoint_url",Noted some interesting race conditions when the sleep time is too small on M1. Might be creating a tight loop blocking the actual startup. This seems to make it start every time.,py,1,1,1
"@@ -47,6 +47,7 @@ schemaVersion = integer(min=0, default={latestSchemaVersion})
 # Audio settings
 [audio]
         audioDuckingMode = integer(default=0)
+        idleCloseDelay = integer(default=10000,min=0,max=86400000)
 
 # Braille settings
 [braille]","Wow, a day is a bit long isn't it? May be leave out the max, or set it somewhere around an hour.",py,1,1,1
"@@ -41,6 +41,13 @@ class ImportTest(QuiltTestCase):
         assert set(dataframes._group_keys()) == set()
         assert set(dataframes._data_keys()) == {'csv', 'nulls'}
 
+        # this should contain elements
+        for node in package:
+            assert node
+        # iter over an empty GroupNode
+        for node in dataframes:
+            assert not node
+
         assert isinstance(README(), string_types)
         assert isinstance(README._data(), string_types)
         assert isinstance(dataframes.csv(), pd.DataFrame)",This doesn't actually check that package contains elements; it won't run at all if the iterator doesn't return anything. Do something like `assert list(package)` instead.,py,1,1,1
"@@ -956,6 +956,13 @@ def package_preview(owner, package_name, package_hash):
     (instance, is_public, is_team) = result
     assert isinstance(instance.contents, RootNode)
 
+    log_count = (
+        db.session.query(
+            sa.func.count(Log.instance_id)
+        )
+        .filter(Log.instance_id==instance.id)
+    ).first()[0]
+
     readme = instance.contents.children.get(README)
     if isinstance(readme, FileNode):
         assert len(readme.hashes) == 1","Don't think this does what you want: this will count how many times a given hash has been updated (which means, no-op or metadata-only updates). I'd assume you want the count for the package?",py,1,1,1
"@@ -172,7 +172,7 @@ class ViewHex(View):
     def _format(data):
         for offset, hexa, s in strutils.hexdump(data):
             yield [
-                (""offset"", offset + "" ""),
+                (""offset"", offset + b"" ""),
                 (""text"", hexa + ""   ""),
                 (""text"", s)
             ]","This should just be `"" ""`? strutils.hexdump returns `native()`.",py,1,1,1
"@@ -231,7 +231,9 @@ def listComPorts(onlyAvailable=True):
 			):
 				# Ignore ERROR_INSUFFICIENT_BUFFER
 				if ctypes.GetLastError() != ERROR_INSUFFICIENT_BUFFER:
-					raise ctypes.WinError()
+					# #6007: SPDRP_FRIENDLYNAME sometimes doesn't exist/isn't valid.
+					log.debugWarning(""Couldn't get SPDRP_FRIENDLYNAME for %s: %s"" % (port, ctypes.WinError()))
+					entry[""friendlyName""] = port
 			else:
 				entry[""friendlyName""] = buf.value
 ",Unrelated to your change. While it might be unlikely I think it would be a good idea to log an insufficient buffer error.,py,0,1,1
"@@ -1,5 +1,5 @@
 from functools import update_wrapper
-from typing import Any, Callable, Dict, List, Optional, Sequence, Set, Union
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional, Sequence, Set, Union
 
 from dagster import check
 from dagster.core.decorator_utils import format_docstring_for_description","Oops, I'm going to move these changes that don't have anything to do with asset defs to a separate PR.",py,0,1,0
"@@ -1207,6 +1207,8 @@ class Frame(object, metaclass=ABCMeta):
         >>> df['b'].sum(min_count=3)
         nan
         """"""
+        axis = validate_axis(axis)
+        numeric_only = None if axis == 1 else numeric_only
 
         def sum(spark_column, spark_type):
             if isinstance(spark_type, BooleanType):",`numeric_only = None if axis == 1 and numeric_only is True else numeric_only`?,py,1,1,1
"@@ -0,0 +1,14 @@
+# A part of NonVisual Desktop Access (NVDA)
+# Copyright (C) 2021 NV Access Limited
+# This file is covered by the GNU General Public License.
+# See the file COPYING for more details.
+
+
+def applyMonkeyPatches():
+	# Apply several monkey patches to comtypes
+	# F401 - imported but unused: Patches are applied during import
+	from . import comtypesMonkeyPatches  # noqa: F401
+
+	# Apply patches to Enum, prevent cyclic references on ValueError during construction
+	from . import enumPatches
+	enumPatches.replace__new__()",Since you're grouping all monkey patches in one package can our monkey patches for `wx` be moved to it from `gui.initialize`?,py,1,1,1
"@@ -888,6 +888,17 @@ class WebDriver(BaseWebDriver):
         """"""
         self.execute(Command.MINIMIZE_WINDOW)
 
+    def print_page(self, print_option_arg = None):
+        """"""
+        Takes PDF of the current page.
+        The driver makes a best effort to return a PDF based on the provided parameters.
+        """"""
+        options = {}
+        if print_option_arg:
+            options = print_option_arg.print_options
+
+        return self.execute(Command.PRINT_PAGE, options)['value']
+
     @property
     def switch_to(self):
         """"""",Let's not use a form of hungarian notation in naming our variables,py,1,1,1
"@@ -1277,6 +1277,10 @@ class DictionaryEntryDialog(wx.Dialog):
                 return DictionaryEntryDialog.TYPE_LABELS_ORDERING[typeRadioValue]
 
         def onOk(self,evt):
+                if not self.patternTextCtrl.GetValue():
+                        # Translators: This is an error message to let the user know that the pattern field in the dictionary entry is not valid.
+                        gui.messageBox(_(""A pattern is required.""), _(""Dictionary Entry Error""), wx.OK|wx.ICON_WARNING, self)
+                        return 
                 try:
                         self.dictEntry=speechDictHandler.SpeechDictEntry(self.patternTextCtrl.GetValue(),self.replacementTextCtrl.GetValue(),self.commentTextCtrl.GetValue(),bool(self.caseSensitiveCheckBox.GetValue()),self.getType())
                 except Exception as e:",Would it be a better user experience to disable the OK button when there is no text in the pattern field?,py,1,1,1
"@@ -45,6 +45,12 @@ class ResponseData(HttpEvent):
         self.data = data
 
 
+@dataclass
+class ResponseTrailers(HttpEvent):
+    trailers: http.Headers
+    end_stream: bool = True
+
+
 @dataclass
 class RequestEndOfMessage(HttpEvent):
     def __init__(self, stream_id: int):",Don't ResponseTrailers always imply `end_stream`? We can probably remove the attribute here and end the stream unconditionally.,py,1,1,1
"@@ -95,6 +95,11 @@ CORS_HEADERS = [
     'Access-Control-Request-Headers', 'Access-Control-Request-Method'
 ]
 
+LOCATION_CONSTRAINT_VALID_REGION = ['af-south-1', 'ap-east-1', 'ap-northeast-1', 'ap-northeast-2', 'ap-northeast-3',
+    'ap-south-1', 'ap-southeast-1', 'ap-southeast-2', 'ca-central-1', 'cn-north-1', 'cn-northwest-1, EU',
+    'eu-central-1', 'eu-north-1', 'eu-south-1', 'eu-west-1', 'eu-west-2', 'eu-west-3', 'me-south-1', 'sa-east-1',
+    'us-east-2', 'us-gov-east-1', 'us-gov-west-1', 'us-west-1', 'us-west-2']
+
 
 def event_type_matches(events, action, api_method):
     """""" check whether any of the event types in `events` matches the","nit: Looks like a typo in string `'cn-northwest-1, EU'`. Also, I think we should probably rather match for `us-east-1` (rather than matching against all the other regions here) - to my knowledge `us-east-1` is literally the only region that is an exception when it comes to `LocationConstraint`.",py,1,1,1
"@@ -34,6 +34,7 @@ from qutebrowser.keyinput import keyutils
 val = None
 instance = None
 key_instance = None
+configcache = None
 
 # Keeping track of all change filters to validate them later.
 change_filters = []","hmm, `configcache` or `config_cache`? Or even just `cache` since we access it via the module, i.e. `config.cache['foo']`?",py,1,1,1
"@@ -14,7 +14,7 @@ def evaluateTarget(requestContext, target):
     return result
 
 
-def evaluateTokens(requestContext, tokens, replacements=None):
+def evaluateTokens(requestContext, tokens, replacements=None, pipedArg=None):
   if tokens.template:
     arglist = dict()
     if tokens.template.kwargs:",Could you please elaborate how pipedArg is passed here?,py,1,1,1
"@@ -297,6 +297,14 @@ class SensorExecutionArgs(
         )
 
 
+@whitelist_for_serdes
+class NotebookDataArgs(namedtuple(""_NotebookDataArgs"", ""notebook_path"")):
+    def __new__(cls, notebook_path):
+        return super(NotebookDataArgs, cls).__new__(
+            cls, notebook_path=check.str_param(notebook_path, ""notebook_path"")
+        )
+
+
 @whitelist_for_serdes
 class ExternalJobArgs(
     namedtuple(",slightly dubious about having an object wrapper for a string param - seems unlikely we would want other serdes objects as args here - if ever any other args,py,1,1,1
"@@ -16,7 +16,7 @@ from select import select, error as select_error
 import subprocess
 import time
 import types
-
+import socket
 from scapy.consts import DARWIN, FREEBSD, OPENBSD, WINDOWS
 from scapy.compat import plain_str
 from scapy.data import ETH_P_ALL, MTU",Also please move it to its right alphabetical place in the imports (above: native modules). Below is reserved for scapy modules,py,1,1,1
"@@ -376,7 +376,16 @@ class PackageStore(object):
         objfiles = [self.object_path(h) for h in hash_list]
         dataset = ParquetDataset(objfiles)
         table = dataset.read(nthreads=4)
-        dataframe = table.to_pandas()
+        try:
+            dataframe = table.to_pandas()
+        except:
+            # Try again to convert the table after removing
+            # the possibly buggy Pandas-specific metadata.
+            meta = table.schema.metadata.copy()
+            meta.pop(b'pandas')
+            newtable = table.replace_schema_metadata(meta)
+            dataframe = newtable.to_pandas()
+
         return dataframe
 
     def _read_parquet_spark(self, hash_list):","Catch a more specific exception - `AssertionError`, `Exception`, etc..; you don't want to catch things like `KeyboardInterrupt` or `SystemExit`.",py,1,1,1
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -21,6 +21,8 @@ import com.google.common.base.Charsets;
 import com.google.common.io.ByteStreams;
 import com.google.common.net.MediaType;
 
+import com.sun.org.glassfish.gmbal.ManagedObject;
+
 import org.apache.http.Header;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpHost;","Again, you don't want to depend on glassfish.",py,1,1,0
"@@ -42,7 +42,11 @@ from .objects import (
 
 
 def start_inprocess_executor(
-    pipeline_context, execution_plan, intermediates_manager, step_keys_to_execute=None
+    pipeline_context,
+    execution_plan,
+    intermediates_manager,
+    step_keys_to_execute=None,
+    emit_skips=True,
 ):
     check.inst_param(pipeline_context, 'pipeline_context', SystemPipelineExecutionContext)
     check.inst_param(execution_plan, 'execution_plan', ExecutionPlan)",why have a toggle for this? I would wait to add this til we have a case that needs it.,py,1,1,1
"@@ -42,7 +42,7 @@ def _check_tcpdump():
         return False
 
     # On some systems, --version does not exist on tcpdump
-    return proc.returncode == 0 or output.startswith(b'Usage: tcpdump ')
+    return proc.returncode == 0 or output.startswith(b'Usage: tcpdump ') or output.startswith(b'tcpdump: unrecognized option')
 
 
 # This won't be used on Windows",This line is longer than 79 characters. Please split it.,py,1,1,1
"@@ -94,7 +94,7 @@ def test_index_view_at_path_prefix():
             res = client.get(""/dagster-path/"")
             assert res.status_code == 200
             assert b""You need to enable JavaScript to run this app"" in res.data
-            assert b'{""pathPrefix"": ""/dagster-path""}' in res.data
+            assert b'""pathPrefix"": ""/dagster-path""' in res.data
 
 
 def test_graphql_view():",Also add an asset for the telemetry value?,py,1,1,1
"@@ -24,6 +24,10 @@ from datetime import datetime
 from functools import wraps
 from os.path import splitext, basename
 
+from django.conf import settings
+from django.utils.timezone import make_aware
+from graphite.logger import log
+
 try:
   import cPickle as pickle
   USING_CPICKLE = True",eliminate unneeded try/except,py,0,1,1
"@@ -276,7 +276,7 @@ def in_nested_list(nested_list, obj):
 
 def _get_break_loop_node(break_node):
     """"""
-    Returns the loop node that holds the break node in arguments.
+    Returns the loop node that holds the break or return node in arguments.
 
     Args:
         break_node (astroid.Break): the break node of interest.",Can the code that uses this be changed to use `checkers.utils.get_node_first_ancestor_of_type`? This function is basically doing the same I believe.,py,1,1,1
"@@ -1444,7 +1444,8 @@ class CommandDispatcher:
         else:
             qnam = tab.networkaccessmanager()
             download_manager.get(self._current_url(), user_agent=user_agent,
-                                 qnam=qnam, target=target)
+                                 qnam=qnam, target=target,
+                                 title=self._current_title())
 
     @cmdutils.register(instance='command-dispatcher', scope='window')
     def view_source(self):","I think passing a title here makes `get_request` needlessly complicated for only this single use case. Instead, you should be able to construct a `downloads.FileDownloadTarget` here (similar to what's done above when `--dest` is given), and pass that to `.get()` instead. Then there shouldn't be any changes in `qtnetworkdownloads.py` needed at all.",py,1,1,1
"@@ -23,7 +23,11 @@ class AnchorHead(BaseDenseHead, BBoxTestMixin):
         anchor_generator (dict): Config dict for anchor generator
         bbox_coder (dict): Config of bounding box coder.
         reg_decoded_bbox (bool): If true, the regression loss would be
-            applied on decoded bounding boxes. Default: False
+            applied directly on decoded bounding boxes, meaning both the
+            predicted boxes and regression targets are with absolute
+            coordinates format. Default False. It should be set to
+            `True` when using `IoULoss`, `GIoULoss`, or `DIoULoss`
+            in the bbox head.
         loss_cls (dict): Config of classification loss.
         loss_bbox (dict): Config of localization loss.
         train_cfg (dict): Training config of anchor head.",`meaning both the predicted boxes and regression targets are with absolute` -> `converting both the predicted boxes and regression targets to absolute xxx`,py,1,1,1
"@@ -29,6 +29,13 @@ from pyspark.sql import Column
 from pyspark.sql.functions import pandas_udf
 import pyspark.sql.types as types
 
+from databricks import koalas as ks  # For running doctests and reference resolution in PyCharm.
+
+
+__all__ = ['Col', '_make_fun', 'pandas_wrap', 'as_spark_type',
+           'as_python_type', 'infer_pd_series_spark_type']
+
+
 T = typing.TypeVar(""T"")
 
 ",I think `__all__` usually doesn't include `_*` functions.,py,1,1,1
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -760,6 +760,14 @@ class ChannelDB(SqlDB):
     def get_node_info_for_node_id(self, node_id: bytes) -> Optional['NodeInfo']:
         return self._nodes.get(node_id)
 
+    def get_node_infos(self) -> Dict[bytes, NodeInfo]:
+        with self.lock:
+            return self._nodes
+
+    def get_node_policies(self) -> Dict[Tuple[bytes, ShortChannelID], Policy]:
+        with self.lock:
+            return self._policies
+
     def to_dict(self) -> dict:
         """""" Generates a graph representation in terms of a dictionary.
 ",should we create a copy here? the lock as-is does not do much; the dict is passed by reference,py,1,1,1
"@@ -29,14 +29,14 @@ def test_config_build_detector():
     from mmdet.models import build_detector
 
     config_dpath = _get_config_directory()
-    print('Found config_dpath = {!r}'.format(config_dpath))
+    print(f'Found config_dpath = {config_dpath!r}')
 
     import glob
     config_fpaths = list(glob.glob(join(config_dpath, '**', '*.py')))
     config_fpaths = [p for p in config_fpaths if p.find('_base_') == -1]
     config_names = [relpath(p, config_dpath) for p in config_fpaths]
 
-    print('Using {} config files'.format(len(config_names)))
+    print(f'Using {len(config_names)} config files')
 
     for config_fname in config_names:
         config_fpath = join(config_dpath, config_fname)",The `!r` is unnecessary.,py,1,1,0
"@@ -154,13 +154,15 @@ class CustomWindow(AutoPropertyObject):
 	def _get__wClass(cls):
 		return WNDCLASSEXW(
 			cbSize=ctypes.sizeof(WNDCLASSEXW),
-			lpfnWndProc=cls._rawWindowProc,
+			lpfnWndProc=_rawWindowProc,
 			hInstance=appInstance,
 			lpszClassName=cls.className,
 		)
 
 	_abstract_className = True
 
+	className: str
+
 	@classmethod
 	def _get_className(cls) -> str:
 		""""""The class name of this window.""""""",I think the `cls.` part of this line suggests that this is intentional.,py,1,1,1
"@@ -21,6 +21,8 @@
 
 import itertools
 
+import random as r
+
 import numpy
 from nupic.bindings.math import (SM32 as SparseMatrix,
                                  SM_01_32_32 as SparseBinaryMatrix,","Yikes - we can't do this. We need to use the same random generator as used in the C code, i.e. NupicRandom. This is initialized as the member variable _random. Search for that to see how it's used.",py,1,1,1
"@@ -135,7 +135,7 @@ class ResamplingOperation(Operation):
 
         xtype = 'numeric'
         if isinstance(xstart, datetime_types) or isinstance(xend, datetime_types):
-            xstart, xend = dt_to_int(xstart), dt_to_int(xend)
+            xstart, xend = dt_to_int(xstart, 'ns'), dt_to_int(xend, 'ns')
             xtype = 'datetime'
         elif not np.isfinite(xstart) and not np.isfinite(xend):
             if element.get_dimension_type(x) in datetime_types:","Wondering if life might be easier/ less error-prone if instead of ``dt_to_int(x, 'ns')`` and ``dt_to_int(x)`` you had two separate utilities: ``dt_to_ns`` and ``dt_to_us``...",py,1,1,1
"@@ -102,11 +102,14 @@ class TaskProcess(multiprocessing.Process):
         self.timeout_time = time.time() + worker_timeout if worker_timeout else None
 
     def _run_get_new_deps(self):
+        run_again = False
         try:
             task_gen = self.task.run(tracking_url_callback=self.tracking_url_callback)
         except TypeError as ex:
             if 'unexpected keyword argument' not in getattr(ex, 'message', ex.args[0]):
                 raise
+            run_again = True
+        if run_again:
             task_gen = self.task.run()
         if not isinstance(task_gen, types.GeneratorType):
             return None",what is this if statement - it's pretty horrible,py,1,1,0
"@@ -25,6 +25,9 @@ import logging
 
 import pytest
 import jinja2
+from helpers.utils import CallbackChecker
+from PyQt5.QtCore import QUrl
+from qutebrowser.utils.debug import qenum_key
 
 try:
     from PyQt5.QtWebKit import QWebSettings","Please also import the `utils` and `debug` modules here, and group the imports correctly.",py,1,1,1
"@@ -119,11 +119,11 @@ class ActiveExecution:
             )
             if self._interrupted:
                 raise DagsterExecutionInterruptedError(
-                    f""Execution of pipeline was interrupted before completing the execution plan. {state_str}""
+                    f""Execution of job/pipeline was interrupted before completing the execution plan. {state_str}""
                 )
             else:
                 raise DagsterInvariantViolationError(
-                    f""Execution of pipeline finished without completing the execution plan. {state_str}""
+                    f""Execution of job/pipeline finished without completing the execution plan. {state_str}""
                 )
 
         # See verify_complete - steps for which we did not observe a failure/success event are in an unknown","even with `JobDefinition`, will we not know if it's a job or a pipeline?",py,1,1,1
"@@ -647,6 +647,7 @@ def read_config_py(filename: str, raising: bool = False) -> None:
 
     if api.errors:
         raise configexc.ConfigFileErrors('config.py', api.errors)
+    config.instance.config_py_loaded = True
 
 
 def read_autoconfig() -> None:","This means it isn't set when there were errors - but in that case, the `config.py` is still loaded, just with some errors. This should probably be done before the `if api.errors:`.",py,1,1,1
"@@ -214,6 +214,14 @@ class TlsConfig:
             key_size=ctx.options.key_size,
             passphrase=ctx.options.cert_passphrase.encode(""utf8"") if ctx.options.cert_passphrase else None,
         )
+        if self.certstore.default_ca.has_expired():
+            ctx.log.warn(
+                ""The mitmproxy certificate authority has expired!\n""
+                ""Please delete all CA-related files in your ~/.mitmproxy folder.\n""
+                ""The CA will be regenerated automatically after restarting mitmproxy.\n""
+                ""Then make sure all your clients have the new CA installed."",
+            )
+
         for certspec in ctx.options.certs:
             parts = certspec.split(""="", 1)
             if len(parts) == 1:",Let's point them to the docs to use mitm.it et al.,py,1,1,1
"@@ -81,3 +81,12 @@ class APITimelineEvent(pydantic.BaseModel):
     user_name: str
     created: int
     metadata: APIEventMetadata
+
+class APIRecommendationNotificationTimelineEvent(pydantic.BaseModel):
+    # since `id` is not sent in APITimelineEvent
+    # this field is needed for deletion of Recommendation and Notification Events
+    id: int
+    event_type: UserTimelineEventType
+    user_name: str
+    created: int
+    metadata: APIEventMetadata","You can instead add the `id` field to APITimelineEvent. If all entities are not going to have it, you can make it as `id: Optional[int]`.",py,1,1,1
"@@ -2192,8 +2192,8 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])
         return DataFrame(internal)
 
-    # TODO: add axis parameter
-    def diff(self, periods=1):
+    # TODO: axis should support 1 or 'columns' either
+    def diff(self, periods: int = 1, axis: int = 0):
         """"""
         First discrete difference of element.
 ",At this moment?,py,0,0,0
"@@ -16,6 +16,8 @@ MAX_HEAP_SIZE = ""256m""
 # todo: will be replaced with plugin mechanism
 PROCESS_THREAD = None
 
+default_region = ""us-east-1""
+
 
 def get_command(backend_port):
     cmd = (",Let's better remove this and use `stepfunctions_listener.default_region` in line 30 below.. (We can fix this in a follow-up PR..),py,0,1,1
"@@ -32,6 +32,7 @@ import email.generator
 import email.encoders
 import email.mime.multipart
 import email.message
+from quopri import encodestring
 
 from PyQt5.QtCore import QUrl
 ","Please only import modules (i.e. `import quopri` and use `encodestring.quopri`), as this makes things much more readable IMHO.",py,1,1,1
"@@ -127,10 +127,14 @@ class RemoteFileSystem(luigi.target.FileSystem):
         return exists
 
     def _ftp_exists(self, path, mtime):
+        path_parts = path.split('/')
+        path = '/'.join(path_parts[:-1])
+        fn = path_parts[-1]
+
         files = self.conn.nlst(path)
 
         exists = False
-        if files:
+        if fn in files:
             if mtime:
                 mdtm = self.conn.sendcmd('MDTM ' + path)
                 modified = datetime.datetime.strptime(mdtm[4:], ""%Y%m%d%H%M%S"")",Does this assignment make sense?? You seem to overwrite it right afterwards in the loop no?,py,1,1,1
"@@ -44,7 +44,7 @@ public abstract class NewSessionQueue implements HasReadyState {
 
   public abstract boolean offerFirst(HttpRequest request, RequestId requestId);
 
-  public abstract Optional<HttpRequest> poll();
+  public abstract Optional<HttpRequest> poll(RequestId requestId);
 
   public abstract int clear();
 ","The expected behaviour for `poll` would be to match what `Deque` does, which is: > Retrieves and removes the head of the queue represented by this deque As such, you shouldn't need the `RequestId` here.",py,1,1,1
"@@ -42,7 +42,7 @@ extras_require[""examples""] = extras_require[""recommended""] + [
     ""ffmpeg"",
     ""cftime"",
     ""netcdf4"",
-    ""dask"",
+    ""dask<=2020.12.0"",
     ""scipy"",
     ""shapely"",
     ""scikit-image""","Ideally we'd fix the regression in a separate PR, rather than pin this here.",py,0,1,1
"@@ -76,7 +76,7 @@ public class TestEdgeDriver extends RemoteWebDriver implements WebStorage, Locat
                 .findFirst().orElseThrow(WebDriverException::new);
 
         service = (EdgeDriverService) builder.withVerbose(true).withLogFile(logFile.toFile()).build();
-        LOG.info(""edgedriver will log to "" + logFile);
+        LOG.fine(""edgedriver will log to "" + logFile);
         service.start();
         Runtime.getRuntime().addShutdownHook(new Thread(() -> service.stop()));
       }",This is deliberately at this level.,py,1,1,0
"@@ -631,6 +631,8 @@ class FormatChecker(BaseTokenChecker):
             elif token[1] == ',':
                 if not bracket_level:
                     return False
+            elif token[1] == '.':
+                continue
             elif token[0] not in (tokenize.NAME, tokenize.STRING):
                 return False
         return False","Well, yes, this is one possible solution. Thanks for a fix  ",py,0,1,0
"@@ -264,6 +264,16 @@ class BuildTest(QuiltTestCase):
         with assertRaisesRegex(self, build.BuildException, r'Bad yaml syntax.*build_bad_syntax\.yml'):
             build.build_package(None, 'test_syntax_error', PACKAGE, path)
 
+    def test_build_no_contents_node(self):
+        """"""
+        Attempt to build a yml file without contents node nor packages
+        """"""
+        mydir = os.path.dirname(__file__)
+        path = os.path.join(mydir, './build_no_contents_node.yml')
+
+        with assertRaisesRegex(self, build.BuildException, r'Error in build_no_contents_node.yml'):
+            build.build_package(None, 'no_contents', PACKAGE, path)
+
     def test_build_checks_yaml_syntax_error(self):    # pylint: disable=C0103
         """"""
         Attempt to build a yml file with a syntax error",Docstring inaccurate: You tested 'packages' elsewhere,py,1,1,1
"@@ -104,7 +104,7 @@ def check_for_software_updates(flash_message=False):
     :return: True if you have latest version, else False if you need to upgrade
              or None if server was not reachable.
     """"""
-    from invenio.config import CFG_VERSION
+    from invenio.version import __version__ as invenio_version
     from invenio.base.i18n import _
     try:
         find = re.compile('Invenio v[0-9]+.[0-9]+.[0-9]+(\-rc[0-9])?'",we can use `invenio.version` instead,py,1,1,0
"@@ -144,7 +144,9 @@ def _process_recommendations(recommendations, count, artist_type, user_name, off
         err_msg = 'No recommendations for user {}, please try again later.'.format(user_name)
         raise APINoContent(err_msg, payload={'last_updated': int(getattr(recommendations, 'created').timestamp())})
 
-    count = min(count, MAX_ITEMS_PER_GET)
+    # For the purpose of experimenting with recommendations, we're allowing to fetch at most
+    # 1K recommendations.
+    count = min(count, 1000)
 
     return mbid_list[offset:offset+count], total_mbid_count
 ","This should really be a defined constant, tied the number of recommendations we generate. For expediency sake, maybe open a ticket for improving that so we can merge this faster?",py,1,1,1
"@@ -987,6 +987,7 @@ class BrowseModeDocumentTextInfo(textInfos.TextInfo):
 
 	def getControlFieldSpeech(self, attrs, ancestorAttrs, fieldType, formatConfig=None, extraDetail=False, reason=None):
 		textList = []
+		role=attrs.get('role')
 		landmark = attrs.get(""landmark"")
 		if formatConfig[""reportLandmarks""] and fieldType == ""start_addedToControlFieldStack"" and landmark:
 			try:",This line is no longer necessary.,py,1,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -1,8 +1,6 @@
-#!/usr/bin/env python
-
 # ----------------------------------------------------------------------
 # Numenta Platform for Intelligent Computing (NuPIC)
-# Copyright (C) 2013, Numenta, Inc.  Unless you have an agreement
+# Copyright (C) 2014, Numenta, Inc.  Unless you have an agreement
 # with Numenta, Inc., for a separate license for this software code, the
 # following terms and conditions apply:
 #",I think it is preferred to change to `2013-2014`.,py,1,1,0
"@@ -103,7 +103,11 @@ class Message(serializable.Serializable):
         ce = self.headers.get(""content-encoding"")
         if ce:
             try:
-                return encoding.decode(self.raw_content, ce)
+                content = encoding.decode(self.raw_content, ce)
+                # A client may illegally specify a byte -> str encoding here (e.g. utf8)
+                if isinstance(content, str):
+                    raise ValueError(""Invalid Content-Encoding: {}"".format(ce))
+                return content
             except ValueError:
                 if strict:
                     raise","If it is a client, shouldn't we raise a ProtocolException or something similar?",py,1,1,1
"@@ -48,9 +48,8 @@ class TestFileCompletion:
         return _get_prompt_func
 
     @pytest.mark.parametrize('steps, where, subfolder', [
-        (1, 'next', '..'),
-        (1, 'prev', 'c'),
-        (2, 'next', 'a'),
+        (1, 'next', 'a'),
+        (2, 'next', 'b'),
         (2, 'prev', 'b'),
     ])
     def test_simple_completion(self, tmp_path, get_prompt, steps, where,",You can leave this one as it still should work. Going to the previous item once still falls in `c`.,py,1,1,1
"@@ -853,7 +853,11 @@ class UIA(Window):
 		# Windows 8.x toast, although a form of tool tip, is covered separately.
 		elif UIAControlType==UIAHandler.UIA_ToolTipControlTypeId:
 			clsList.append(ToolTip)
-		elif self.UIAElement.cachedFrameworkID in (""InternetExplorer"",""MicrosoftEdge""):
+		elif(
+			self.UIAElement.cachedFrameworkID in (""InternetExplorer"", ""MicrosoftEdge"")
+			# But not for Internet Explorer
+			and not self.appModule.appName == 'iexplore'
+		):
 			from . import edge
 			if UIAClassName in (""Internet Explorer_Server"",""WebView"") and self.role==controlTypes.ROLE_PANE:
 				clsList.append(edge.EdgeHTMLRootContainer)","I'm pretty confident that Internet Explorer can be removed here, as that would only be true for the mshtml implementation, not edgeHTML. And, we would want this fix for any mshtml embedding, not just the Internet Explorer application.",py,1,1,1
"@@ -131,7 +131,12 @@ def create_full_filename(basename, filename):
     encoding = sys.getfilesystemencoding()
     filename = utils.force_encoding(filename, encoding)
     basename = utils.force_encoding(basename, encoding)
-    if os.path.isabs(filename) and os.path.isdir(filename):
+
+    if filename.endswith('/'):
+        # The path is a directory we want to store the file in (rather than the
+        # path *to* the file).
+        return os.path.join(filename, basename)
+    elif os.path.isabs(filename) and os.path.isdir(filename):
         # We got an absolute directory from the user, so we save it under
         # the default filename in that directory.
         return os.path.join(filename, basename)",Shouldn't this be `os.sep` so it works on Windows with `\` too?,py,1,1,1
"@@ -153,7 +153,11 @@ def cleanup():
 			log.exception(""Error terminating app module %r"" % deadMod)
 
 def doesAppModuleExist(name):
-	return any(importer.find_module(""appModules.%s"" % name) for importer in _importers)
+	# #9797: when invoked from system tests, importers list isn't initialized (attribute error on a None object), thus assume no app module exists.
+	try:
+		return any(importer.find_module(""appModules.%s"" % name) for importer in _importers)
+	except AttributeError:
+		return False
 
 def fetchAppModule(processID,appName):
 	""""""Returns an appModule found in the appModules directory, for the given application name.","I think I would prefer just to check if _importers is None and return False, rather than letting it knowingly fail. Though I'd like to also understand why systemTestSpy actually causes doesAppModule exist to be called? can you provide an example traceback on the issue?",py,1,1,1
"@@ -162,9 +162,9 @@ class FCOSHead(nn.Module):
         pos_bbox_preds = flatten_bbox_preds[pos_inds]
         pos_bbox_targets = flatten_bbox_targets[pos_inds]
         pos_centerness = flatten_centerness[pos_inds]
-        pos_centerness_targets = self.centerness_target(pos_bbox_targets)
 
         if num_pos > 0:
+            pos_centerness_targets = self.centerness_target(pos_bbox_targets)
             pos_points = flatten_points[pos_inds]
             pos_decoded_bbox_preds = distance2bbox(pos_points, pos_bbox_preds)
             pos_decoded_target_preds = distance2bbox(pos_points,",We can also move `pos_bbox_targets = flatten_bbox_targets[pos_inds]` to here.,py,1,1,1
"@@ -269,6 +269,13 @@ def set_rate_limits(per_token_limit, per_ip_limit, window_size):
         set_rate_limits(per_token_limit, per_ip_limit, window_size)
 
 
+@cli.command(name=""update_all_user_listen_counts"")
+def update_all_user_listen_counts():
+    """""" Scans listen table and update listen counts for all users """"""
+    application = webserver.create_app()
+    with application.app_context():
+        ts_update_user_listen_counts()
+
 @cli.command(name=""recalculate_all_user_data"")
 def recalculate_all_user_data():
     """"""",Could use updating.,py,1,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -231,6 +231,14 @@ def file(recid, filename):
             return send_file(file_, mimetype='application/octet-stream',
                              attachment_filename=filename)
         return send_file(document['uri'])
+
+    from invenio.modules.documents.utils import _get_legacy_bibdocs
+    for fullpath, permission in _get_legacy_bibdocs(recid, filename=filename):
+        if not permission:
+            error = 401
+            continue
+        return send_file(fullpath)
+
     abort(error)
 
 ",Why the previous lines are reading the whole file into memory :scream: ?,py,1,1,1
"@@ -717,7 +717,8 @@ class UserResource(object):
 
         :raises: :class:`pyramid.httpexceptions.HTTPBadRequest`
         """"""
-        if not self.model.id_generator.match(six.text_type(record_id)):
+        is_string = isinstance(record_id, six.text_type)
+        if not is_string or not self.model.id_generator.match(record_id):
             error_details = {
                 'location': 'path',
                 'description': ""Invalid record id""",I think the right fix would be to convert the id as a string rather than raising an error.,py,1,1,1
"@@ -108,8 +108,9 @@ class TestCloudFormationCreateStack(CloudFormationConnectionBase):
 
     def test_create_stack_fails(self):
         self.set_http_response(status_code=400, reason='Bad Request',
-                               body='Invalid arg.')
-        with self.assertRaises(self.service_connection.ResponseError):
+            body='{""Error"": {""Code"": 1, ""Message"": ""Invalid arg.""}}')
+        with self.assertRaisesRegexp(self.service_connection.ResponseError,
+            'Invalid arg.'):
             api_response = self.service_connection.create_stack(
                 'stack_name', template_body=SAMPLE_TEMPLATE,
                 parameters=[('KeyName', 'myKeyName')])",This probably needs more tests that just this modified one. How about a test that validates the parsed attributes of the exception given a JSON error message?,py,1,1,1
"@@ -49,7 +49,8 @@ class FCOSHead(nn.Module):
                      use_sigmoid=True,
                      loss_weight=1.0),
                  conv_cfg=None,
-                 norm_cfg=dict(type='GN', num_groups=32, requires_grad=True)):
+                 norm_cfg=dict(type='GN', num_groups=32, requires_grad=True),
+                 center_sample_radius=0):  # 0 for disable `center sampling`
         super(FCOSHead, self).__init__()
 
         self.num_classes = num_classes",This is somewhat misleading. It may be better to add a parameter `center_sampling` to indicate whether or not using center sampling.,py,1,1,1
"@@ -424,6 +424,17 @@ public class NodeTest {
     return baseDir;
   }
 
+  //Test that the draining command sets Host status to DRAINING
+  @Test
+  public void drainingNodeStatusDraining() {
+
+  }
+
+  //Test that a draining node doesn't accept new sessions by any means
+  //Test that a draining node continues to run its sessions and accept new WebDriver commands
+  //Test that a node will shut down once all sessions are finished
+  //Test that RemoteNode will post the correct command oto the LocalNode
+
   private CreateSessionRequest createSessionRequest(Capabilities caps) {
     return new CreateSessionRequest(
             ImmutableSet.copyOf(Dialect.values()),",Is this only to set the node to draining?   I think we can do that inside `Before` or something?,py,1,1,1
"@@ -73,11 +73,8 @@ class ConsistentHashRing:
 
   def compute_ring_position(self, key):
     if self.hash_type == 'fnv1a_ch':
-      big_hash = '{:x}'.format(int(fnv32a( str(key) )))
-      if len(big_hash) > 4:
-          small_hash = int(big_hash[:4], 16) ^ int(big_hash[4:], 16)
-      else:
-          small_hash = int(big_hash, 16)
+      big_hash = int(fnv32a(str(key)))
+      small_hash = (big_hash >> 16) ^ (big_hash & 0xffff)
     else:
       big_hash = compactHash(str(key))
       small_hash = int(big_hash[:4], 16)","I see that here we don't have the same python version check as in carbon, we should make them consistent. The best solution may be to use `big_hash = int(fnv32a(six.binary_type(key)))` for both 2.x and 3.x.",py,1,1,1
"@@ -444,6 +444,9 @@ class Daemon(Logger):
             daemon_jobs.append(self.watchtower.run)
         if self.network:
             self.network.start(jobs=[self.fx.run])
+            # prepare lightning functionality, also load channel db early
+            self.network.maybe_init_lightning()
+            self.network.channel_db.load_data()
 
         self.taskgroup = TaskGroup()
         asyncio.run_coroutine_threadsafe(self._run(jobs=daemon_jobs), self.asyncio_loop)","if we start calling `channel_db.load_data()` from multiple places, we should add some kind of guarantees into `load_data` that it only runs once it always runs on the sql thread, so no need for locking; it could simply have an early return if it has already run once",py,1,1,1
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -138,6 +138,8 @@ class Register(abc.ABCMeta):
         return global_params.iteritems()
 
 
+_event_callbacks = {}
+
 class Task(object):
     __metaclass__ = Register
 ",I think this should go into the Task class.,py,1,1,0
"@@ -33,6 +33,7 @@ class RouteTable(TaggedEC2Object):
         self.id = None
         self.vpc_id = None
         self.routes = []
+        self.propagatingvgws = []
         self.associations = []
 
     def __repr__(self):",Any reason this is not `propagating_vgws` instead of all one word?,py,1,1,1
"@@ -148,10 +148,10 @@ def dynamize_value(val):
 if six.PY2:
     class Binary(object):
         def __init__(self, value):
-            if isinstance(value, six.text_type):  # Support only PY2 for backward compatibility.
-                value = value.encode('utf-8')
-            elif not isinstance(value, bytes):
+            if not isinstance(value, (bytes, six.text_type)):
                 raise TypeError('Value must be a string of binary data!')
+            if not isinstance(value, bytes):
+                value = value.encode(""utf-8"")
 
             self.value = value
 ",I believe that `unicode` should still be encoded to UTF-8. The internal representation (`value`) of the `Binary` class should always be `bytes`.,py,1,1,1
"@@ -27,7 +27,13 @@ MeshType = itk.Mesh[PixelType, Dimension]
 mesh = MeshType.New()
 
 # Create Vector Container and Store values in it for each Point
-v = itk.VectorContainer[itk.UL, PixelType].New()
+# For windows use itk.ULL
+if hasattr(itk.VectorContainer, 'ULAD'):
+    IdentifierType = itk.UL
+else:
+    IdentifierType = itk.ULL
+
+v = itk.VectorContainer[IdentifierType, PixelType].New()
 v.Reserve(NumberOfPoints)
 
 for i in range(NumberOfPoints):","A generic way to check for Windows is `if os.name == 'nt'`. But if the one you wrote here works, we should keep it.",py,1,1,1
"@@ -345,7 +345,7 @@ class GFLHead(AnchorHead):
          bbox_weights_list, num_total_pos, num_total_neg) = cls_reg_targets
 
         num_total_samples = reduce_mean(
-            torch.tensor(num_total_pos).cuda()).item()
+            torch.tensor(num_total_pos).float().cuda()).item()
         num_total_samples = max(num_total_samples, 1.0)
 
         losses_cls, losses_bbox, losses_dfl,\","`torch.tensor(num_total_pos, dtype=torch.float, device=device)`",py,1,0,0
"@@ -11,6 +11,8 @@ from .transforms import (ImageTransform, BboxTransform, MaskTransform,
 from .utils import to_tensor, random_scale
 from .extra_aug import ExtraAugmentation
 
+from imagecorruptions import corrupt
+
 
 @DATASETS.register_module
 class CustomDataset(Dataset):",Third-party imports may be moved before relative imports.,py,1,1,1
"@@ -111,8 +111,8 @@ def hierarchical(keys):
     ndims = len(keys[0])
     if ndims <= 1:
         return True
-    dim_vals = zip(*keys)
-    combinations = (zip(*dim_vals[i:i+2])
+    dim_vals = list(zip(*keys))
+    combinations = (list(zip(*dim_vals[i:i+2]))
                     for i in range(ndims-1))
     hierarchies = []
     for combination in combinations:",Is the second list needed here? Seems like `combination` in the nested for loop below is only used as an iterator.,py,1,1,1
"@@ -47,6 +47,9 @@ def molecule_provisioner_section_data():
                 'instance-1': [{
                     'foo': 'bar'
                 }],
+                'localhost': [{
+                    'foo': 'baz'
+                }]
             },
             'group_vars': {
                 'example_group1': [{",This and line 156 below adds coverage for the special case of localhost host_vars,py,0,1,0
"@@ -42,11 +42,12 @@ class TestProcessProxyOptions:
         assert self.p()
 
     def test_certs(self, tdata):
-        self.assert_noerr(
-            ""--cert"",
-            tdata.path(""mitmproxy/data/testkey.pem""))
-        with pytest.raises(Exception, match=""does not exist""):
-            self.p(""--cert"", ""nonexistent"")
+        with pytest.raises(Exception, match=""ambiguous option""):
+            self.assert_noerr(
+                ""--cert"",
+                tdata.path(""mitmproxy/data/testkey.pem""))
+            with pytest.raises(Exception, match=""does not exist""):
+                self.p(""--cert"", ""nonexistent"")
 
 
 class TestProxyServer:",Is this change intentional? The double-indented `.raises` doesn't make much sense to me.,py,1,1,1
"@@ -926,9 +926,12 @@ a metaclass class method."",
                     continue
                 if isinstance(attribute.expr, nodes.Name) and attribute.expr.name in (
                     ""self"",
+                    ""cls"",
                     node.name,
                 ):
-                    # self.__attrname / node_name.__attrname
+                    # self.__attrname
+                    # cls.__attrname
+                    # node_name.__attrname
                     break
                 if isinstance(attribute.expr, nodes.Call):
                     # type(self).__attrname","I think we already fixed something really similar in another MR, we have a duplication between this and ``child.expr.name in (""self"", ""cls"", node.name)`` line 969/972.",py,1,1,1
"@@ -44,9 +44,9 @@ class Model(object):
   def __init__(self, inferenceType):
     """""" Model constructor.
 
-    Args:
-      inferenceType: An opfutils.InferenceType value that specifies the type
+      @param inferenceType: An opfutils.InferenceType value that specifies the type
           of inference (i.e. TemporalNextStep, Classification, etc.).
+      @param header format of data going into the model, from nupic.data.file_record_stream.py
     """"""
     self._numPredictions = 0
     self.__inferenceType =  inferenceType",This function doesn't take a `header` parameter...,py,1,1,1
"@@ -125,6 +125,18 @@ class Index(IndexOpsMixin):
         """""" Returns the data type as defined by Spark, as a Spark DataType object.""""""
         return self.to_series().spark_type
 
+    @property
+    def has_duplicates(self) -> bool:
+        """"""
+        If index has duplicates, return True, otherwise False.
+        """"""
+        idx_column = self._kdf._sdf.select(self._scol)
+        deduplicate_idx_column = idx_column.drop_duplicates()
+
+        if idx_column.count() == deduplicate_idx_column.count():
+            return False
+        return True
+
     @property
     def name(self) -> Union[str, Tuple[str, ...]]:
         """"""Return name of the Index.""""""",This runs Spark jobs twice. Can we use `F.count` and `F.countDistinct` instead?,py,1,1,1
"@@ -29,6 +29,7 @@ class _ResourceEvent:
         self.request = request
 
     def __repr__(self):
+        # Not sure what proper conversion to fstring is
         return ""<{klass} action={action} uri={uri}>"".format(
             klass=self.__class__.__name__, **self.payload
         )",This is probably better to leave it with format(),py,1,1,1
"@@ -37,6 +37,15 @@ class MonitorMixinBase(object):
 
 
   def __init__(self, *args, **kwargs):
+    """"""
+    Note: If you set the kwarg ""__name__"", then pretty-printing of traces and
+          metrics will include the name you specify as a tag before every title.
+    """"""
+    self.name = None
+    if ""__name__"" in kwargs:
+      self.name = kwargs[""__name__""]
+      del kwargs[""__name__""]
+
     super(MonitorMixinBase, self).__init__(*args, **kwargs)
 
     # Mapping from key (string) => trace (Trace)",It would be better if this kwarg had some unique prefix rather than following this pattern.,py,1,1,1
"@@ -220,6 +220,12 @@ _options = [
             ""'plotting.sample_ratio' should be 1.0 >= value >= 0.0."",
         ),
     ),
+    Option(
+        key=""plotting.backend"",
+        doc=(""Backend to use for plotting. Default is matplotlib.""),
+        default=""matplotlib"",
+        types=str,
+    ),
 ]  # type: List[Option]
 
 _options_dict = dict(zip((option.key for option in _options), _options))  # type: Dict[str, Option]",Could you add a list of currently supported backends?,py,1,1,0
"@@ -76,7 +76,7 @@ public class ProtocolHandshake {
 
         if (result.isPresent()) {
           Result toReturn = result.get();
-          LOG.info(String.format(""Detected dialect: %s"", toReturn.dialect));
+          LOG.finest(String.format(""Detected dialect: %s"", toReturn.dialect));
           return toReturn;
         }
       }",This is an incorrect change. The dialect spoken is an important part of the handshake and should be communicated to users.,py,1,1,1
"@@ -193,7 +193,7 @@ class SparkSubmitTaskTest(unittest.TestCase):
         def interrupt():
             raise KeyboardInterrupt()
 
-        proc.return_value.poll = interrupt
+        proc.return_value.wait = interrupt
         try:
             job = TestSparkSubmitTask()
             job.run()",btw ideally we should use the mock library for this. but that's prob outside the scope of this PR,py,0,1,0
"@@ -582,7 +582,7 @@ public class DistributorTest {
         );
 
         Session firefoxSession = distributor.newSession(createRequest(firefoxPayload)).getSession();
-        LOG.info(String.format(""Firefox Session %d assigned to %s"", i, chromeSession.getUri()));
+        LOG.finer(String.format(""Firefox Session %d assigned to %s"", i, chromeSession.getUri()));
 
         boolean inFirefoxNodes = firefoxNodes.stream().anyMatch(node -> node.getUri().equals(firefoxSession.getUri()));
         boolean inChromeNodes = chromeNodes.stream().anyMatch(node -> node.getUri().equals(chromeSession.getUri()));","Since this is in a test, I imagine that the choice of `info` level was deliberate.",py,1,1,1
"@@ -3419,7 +3419,15 @@ class Elfcar(VolumetricData):
             poscar (Poscar): Poscar object containing structure.
             data: Actual data.
         """"""
-        super().__init__(poscar.structure, data)
+        # allow for poscar or structure files to be passed
+        if isinstance(poscar, Poscar):
+            tmp_struct = poscar.structure
+            self.poscar = poscar
+        elif isinstance(poscar, Structure):
+            tmp_struct = poscar
+            self.poscar = Poscar(poscar)
+
+        super().__init__(tmp_struct, data)
         # TODO: modify VolumetricData so that the correct keys can be used.
         # for ELF, instead of ""total"" and ""diff"" keys we have
         # ""Spin.up"" and ""Spin.down"" keys",Can you modify the docstring to reflect the fact that you can also pass a `Structure` ?,py,1,1,1
"@@ -167,7 +167,7 @@ class View(collections.abc.Sequence):
 
     def load(self, loader):
         loader.add_option(
-            ""view_filter"", typing.Optional[str], None,
+            ""view_filter"", typing.Optional[str], """",
             ""Limit the view to matching flows.""
         )
         loader.add_option(",Is there a reason why you changed the default?,py,1,1,1
"@@ -56,6 +56,19 @@ def setup_json_serializer(config):
     config.add_renderer(""json"", renderer)
 
 
+def setup_csp_headers(config):
+    """"""Content-Security-Policy HTTP response header helps reduce XSS risks on
+    modern browsers by declaring, which dynamic resources are allowed to load.
+    On APIs, we disable everything.
+    """"""
+    disable_all = ""default-src 'none'; "" ""frame-ancestors 'none'; "" ""base-uri 'none'; ""
+
+    def on_new_response(event):
+        event.response.headers.setdefault(""Content-Security-Policy"", disable_all)
+
+    config.add_subscriber(on_new_response, NewResponse)
+
+
 def setup_version_redirection(config):
     """"""Add a view which redirects to the current version of the API.
     """"""","Why not just `""default-src 'none'; frame-ancestors 'none'; base-uri 'none';""`? Why the trailing space in the string?",py,1,1,1
"@@ -6,6 +6,10 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 2**64 / 2
+
+POSITIVE_BIG_INTEGER = colander.Range(min=0, max=POSTGRESQL_MAX_INTEGER_VALUE)
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""","In other parts of code we used lowercase for validators, but anything is fine, i guess.",py,1,1,1
"@@ -10,6 +10,7 @@ from mmcv.utils import build_from_cfg
 
 from mmdet.core.evaluation.bbox_overlaps import bbox_overlaps
 from mmdet.datasets.builder import PIPELINES
+from .utils import create_random_bboxes
 
 
 def test_resize():","If relative import is adopted, is it impossible to run unit tests in the current folder?",py,1,1,1
"@@ -108,7 +108,11 @@ class NdWidget(param.Parameterized):
         super(NdWidget, self).__init__(**params)
         self.id = plot.comm.target if plot.comm else uuid.uuid4().hex
         self.plot = plot
-        self.dimensions, self.keys = drop_streams(plot.streams,
+        streams = []
+        for stream in plot.streams:
+            if any(k in plot.dimensions for k in stream.contents):
+                streams.append(stream)
+        self.dimensions, self.keys = drop_streams(streams,
                                                   plot.dimensions,
                                                   plot.keys)
 ",I assume this bit is simply a bug fix and otherwise unrelated?,py,0,1,0
"@@ -140,6 +140,7 @@ class HTTPFlow(flow.Flow):
     """"""
     request: HTTPRequest
     response: Optional[HTTPResponse] = None
+    trailers: http.Headers
     error: Optional[flow.Error] = None
     """"""
     Note that it's possible for a Flow to have both a response and an error",I suppose trailers are optional as well?,py,1,1,1
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -660,7 +660,7 @@ class CaiTemporaryStore(object):
             return '/'.join(asset_pb.name.split('/')[:-4])
 
         elif (asset_pb.asset_type.startswith('google.appengine') or
-              asset_pb.asset_type.startswith('google.bigquery') or
+              asset_pb.asset_type.startswith('google.cloud.bigquery') or
               asset_pb.asset_type.startswith('google.spanner') or
               asset_pb.asset_type.startswith('google.cloud.kms')):
             # Strip off the last two segments of the name to get the parent",Minor nit: Can we make these alphabetical?,py,1,1,1
"@@ -152,4 +152,11 @@ class RPN(BaseDetector):
         Returns:
             np.ndarray: The image with bboxes drawn on it.
         """"""
+        if kwargs is not None:
+            if 'score_thr' in kwargs:
+                kwargs.pop('score_thr')
+            if 'text_color' in kwargs:
+                kwargs.pop('text_color')
+            if 'bbox_color' in kwargs:
+                kwargs['colors'] = kwargs.pop('bbox_color')
         mmcv.imshow_bboxes(data, result, top_k=top_k, **kwargs)","can we simply use kwargs.pop('score_thr', None) ?",py,1,1,1
"@@ -11,6 +11,13 @@ from .custom import CustomDataset
 
 @DATASETS.register_module()
 class XMLDataset(CustomDataset):
+    """"""XML dataset for detection.
+
+    Args:
+        min_size (int|float|None, optional): The minimum size of bounding
+            boxes in the images. If the size of a bounding box is less than
+            ``min_size``, it would be add to ignored field.
+    """"""
 
     def __init__(self, min_size=None, **kwargs):
         super(XMLDataset, self).__init__(**kwargs)","`int | float | None` or `int | float, optional`",py,1,0,0
"@@ -106,9 +106,12 @@ def get_listens(user_name):
     if time_range < 1 or time_range > MAX_TIME_RANGE:
         log_raise_400(""time_range must be between 1 and %d."" % MAX_TIME_RANGE)
 
-    # if no max given, use now()
     if max_ts and min_ts:
-        log_raise_400(""You may only specify max_ts or min_ts, not both."")
+        if max_ts < min_ts:
+            log_raise_400(""max_ts should be greater than min_ts"")
+        
+        if (max_ts - min_ts) > MAX_TIME_RANGE * 432000:
+            log_raise_400(""time_range specified by min_ts and max_ts should be less than %d."" % MAX_TIME_RANGE)
 
     db_conn = webserver.create_timescale(current_app)
     (min_ts_per_user, max_ts_per_user) = db_conn.get_timestamps_for_user(user_name)","what does this number mean? Is it number of seconds in a day? If so, it'd be good to add a constant at the beginning of the file with a name that describes its purpose.",py,1,1,1
"@@ -0,0 +1,6 @@
+from dagster import graph
+
+
+@graph
+def graph_one():
+    pass",Nitpick: include newline at end of file.,py,1,1,1
"@@ -45,7 +45,8 @@ public class Grid {
 
   public List<Node> getNodes() {
     return distributorStatus.get().getNodes().stream()
-      .map(summary -> new Node(summary.getNodeId(), summary.getUri(), summary.isUp(), summary.getMaxSessionCount()))
+      .map(summary -> new Node(summary.getNodeId(), summary.getUri(), summary.isUp(),
+                               summary.getMaxSessionCount(), summary.getStereotypes()))
       .collect(ImmutableList.toImmutableList());
   }
 ",Break things on to one parameter per line now.,py,1,1,1
"@@ -58,8 +58,9 @@ class DeltaXYWHBBoxCoder(BaseBBoxCoder):
         """"""Apply transformation `pred_bboxes` to `boxes`.
 
         Args:
-            boxes (torch.Tensor): Basic boxes.
-            pred_bboxes (torch.Tensor): Encoded boxes with shape
+            bboxes (torch.Tensor): Basic boxes. Shape (B, N, 4) or (N, 4)
+            pred_bboxes (torch.Tensor): Encoded boxes with
+               shape (B, N, 4) or (N, 4)
             max_shape (tuple[int], optional): Maximum shape of boxes.
                 Defaults to None.
             wh_ratio_clip (float, optional): The allowed ratio between",max_shape may be tuple[tuple],py,1,1,0
"@@ -138,7 +138,18 @@ def _filter_outputs_by_handle(
     step_key = str(node_handle)
     output_found = False
     for step_output_handle, value in output_dict.items():
-        if (
+
+        # For the mapped output case, where step keys are in the format
+        # ""step_key[upstream_mapped_output_name]"" within the step output handle.
+        if step_output_handle.step_key.startswith(f""{step_key}[""):
+            output_found = True
+            key_start = step_output_handle.step_key.find(""["")
+            key_end = step_output_handle.step_key.find(""]"")
+            upstream_mapped_output_name = step_output_handle.step_key[key_start + 1 : key_end]
+            mapped_outputs[upstream_mapped_output_name] = value
+
+        # For all other cases, search for exact match.
+        elif (
             step_key == step_output_handle.step_key
             and step_output_handle.output_name == output_name
         ):","I know not exactly inside the scope of this PR, but looked at the type annotation while trying to grok it - could we change it from `Any` to `Dict[str, Any]`?",py,0,1,1
"@@ -7,5 +7,5 @@ Workflow mgmgt + task scheduling + dependency resolution.
 __author__ = 'The Luigi Authors'
 __contact__ = 'https://github.com/spotify/luigi'
 __license__ = 'Apache License 2.0'
-__version__ = '2.8.13'
+__version__ = '3.0.0b2'
 __status__ = 'Production'",@honnix shouldn't we change version here prior to merge?,py,0,1,1
"@@ -1,10 +1,13 @@
 import logging
 import sqlalchemy
 import uuid
+import json
 
 from datetime import datetime
 from listenbrainz import db
 from listenbrainz.db.exceptions import DatabaseException
+from data.model.similar_user_model import SimilarUserRecord, SimilarUsers
+from typing import Tuple, List
 
 
 logger = logging.getLogger(__name__)",lets try to use ujson for speed,py,1,1,1
"@@ -443,6 +443,8 @@ class ImportsChecker(BaseChecker):
         for name, _ in node.names:
             if name != '*':
                 self._add_imported_module(node, '%s.%s' % (imported_module.name, name))
+            else:
+                self._add_imported_module(node, imported_module.name)
 
     @check_messages(*(MSGS.keys()))
     def leave_module(self, node):","This makes sense, don't know why it was ignored previously",py,1,1,1
"@@ -46,7 +46,6 @@ CONSOLE_COLORS_TO_RGB=( #http://en.wikipedia.org/wiki/Color_Graphics_Adapter
 COMMON_LVB_UNDERSCORE=0x8000
 
 
-
 @wincon.PHANDLER_ROUTINE
 def _consoleCtrlHandler(event):
 	if event in (wincon.CTRL_C_EVENT,wincon.CTRL_BREAK_EVENT):",Looks like removing this blank line is the only change in this file. This change can probably be removed.,py,1,1,1
"@@ -43,7 +43,7 @@ class BoundZmqEventBus implements EventBus {
     Addresses xpubAddr = deriveAddresses(address, publishConnection);
     Addresses xsubAddr = deriveAddresses(address, subscribeConnection);
 
-    LOG.info(String.format(""XPUB binding to %s, XSUB binding to %s"", xpubAddr, xsubAddr));
+    LOG.finest(String.format(""XPUB binding to %s, XSUB binding to %s"", xpubAddr, xsubAddr));
 
     xpub = context.createSocket(SocketType.XPUB);
     xpub.setImmediate(true);",This change is unhelpful: it precludes users from knowing which ports are being used for what purpose within the system.,py,1,1,1
"@@ -428,7 +428,9 @@ SEQUENCE_TYPES = {
 }
 
 
-def _emit_no_member(node, owner, owner_name, ignored_mixins=True, ignored_none=True):
+def _emit_no_member(
+    node, owner, owner_name, ignored_mixins, ignored_none, mixin_class_rgx
+):
     """"""Try to see if no-member should be emitted for the given owner.
 
     The following cases are ignored:",Why are the default values gone away?,py,1,1,1
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -154,6 +154,7 @@ class CompletionModel(QAbstractItemModel):
         """"""Override QAbstractItemModel::columnCount.""""""
         # pylint: disable=unused-argument
         return 3
+        # pylint: enable=unused-argument
 
     def canFetchMore(self, parent):
         """"""Override to forward the call to the categories.""""""","No need for this, as pylint already only turns things off for this function and it's needed for the entire function.",py,1,1,1
"@@ -41,7 +41,7 @@ install_requires = [
     # https://pagure.io/python-daemon/issue/18
     'python-daemon<2.2.0',
     'python-dateutil==2.7.5',
-    'enum34>1.1.0;python_version<""3.4""',
+    'enum34>1.1.0;python_version<""3.4""'
 ]
 
 if os.environ.get('READTHEDOCS', None) == 'True':",trailing commas in Python lists are valid. Are you saying pip has a problem with this?,py,1,1,1
"@@ -177,6 +177,15 @@ class PyRegion(object):
     name: the name of the output
     """"""
 
+  def getAlgorithm(self):
+    """"""
+    Returns the underlying algorithm that is performing the computation.
+    This method should be overridden by the region subclass.
+
+    Returns None if there is no underlying algorithm for the region.
+    """"""
+    return None
+
   def getParameter(self, name, index):
     """"""Default implementation that return an attribute with the requested name
 ","I don't think this makes sense to add. The return value for a region of unknown type is an unknown object. It would only make sense if we required all regions to have an ""algorithm"" object that subclasses the some common base class.",py,1,1,1
"@@ -2,16 +2,17 @@ import types
 import logging
 import traceback
 from moto.s3 import models as s3_models, responses as s3_responses, exceptions as s3_exceptions
-from moto.s3.responses import minidom, MalformedXML, undo_clean_key_name, is_delete_keys
+from moto.s3.responses import (minidom, MalformedXML, undo_clean_key_name, is_delete_keys)
 from moto.s3.exceptions import S3ClientError
 from moto.s3bucket_path import utils as s3bucket_path_utils
 from localstack import config
 from localstack.utils.aws import aws_stack
-from localstack.services.s3 import s3_listener
+from localstack.services.s3 import s3_listener, s3_utils
 from localstack.utils.server import multiserver
 from localstack.utils.common import wait_for_port_open, get_free_tcp_port
 from localstack.services.infra import start_moto_server
 from localstack.services.awslambda.lambda_api import BUCKET_MARKER_LOCAL
+from urllib.parse import urlparse
 
 LOG = logging.getLogger(__name__)
 ",nit: braces could be removed,py,1,1,1
"@@ -124,10 +124,10 @@ class TypingChecker(BaseChecker):
                 ""type"": ""yn"",
                 ""metavar"": ""<y_or_n>"",
                 ""help"": (
-                    ""Set to ``no`` if the app / libary does NOT need to ""
-                    ""support runtime introspection of type ""
-                    ""annotations. Only applies to Python version ""
-                    ""3.7 - 3.9""
+                    ""Set to ``no`` if the app / library does NOT need to ""
+                    ""support runtime introspection of type annotations. ""
+                    ""Only change it if you understand what that means. ""
+                    ""Applies to Python version 3.7 - 3.9""
                 ),
             },
         ),","Could we explain ""what that means"" or link to the doc that explains it here ? :)",py,1,1,1
"@@ -80,7 +80,11 @@ kwargs = delimitedList(kwarg)
 
 
 def setRaw(s, loc, toks):
-    toks[0].raw = s[toks[0].start:toks[0].end]
+    try:
+        toks[0]['raw'] = s[toks[0].start:toks[0].end]
+    except AttributeError:
+        # Accommodate version < 3 of the PyParsing API.
+        toks[0].raw = s[toks[0].start:toks[0].end]
 
 
 call = Group(","The code you have in the try-block should be compatible with pyparsing pre-3.0 and post-3.0. It's the code in the except block that only works in pyparsing pre 3.0. I don't think the code in the try block will *ever* raise `AttributeError`, in either version of pyparsing.",py,1,1,1
"@@ -1614,7 +1614,7 @@ class CloudSqlInstanceIterator(resource_iter_class_factory(
         api_method_name='iter_cloudsql_instances',
         resource_name='cloudsql_instance',
         api_method_arg_key='projectNumber',
-        resource_validation_method_name='cloudsql_api_enabled')):
+        resource_validation_method_name='enumerable')):
     """"""The Resource iterator implementation for CloudSQL Instance.""""""
 
 ",Please also remove the cloudsql_api_enabled function at line 734.,py,0,1,1
"@@ -133,10 +133,13 @@ def get_port_from_custom_rules(method, path, data, headers):
     if re.match(r'^/queue/[a-zA-Z0-9_-]+$', path):
         return config.PORT_SQS
 
+    if path == '/' and to_bytes('QueueName=') in data_bytes:
+        return config.PORT_SQS
+
     # TODO: move S3 public URLs to a separate port/endpoint, OR check ACLs here first
     stripped = path.strip('/')
     data_bytes = to_bytes(data or '')
-    if method == 'GET' and '/' in stripped:
+    if method in ['GET', 'HEAD'] and '/' in stripped:
         # assume that this is an S3 GET request with URL path `/<bucket>/<key ...>`
         return config.PORT_S3
 ",Move this above 136 to fix the linting error,py,1,1,1
"@@ -34,7 +34,7 @@ module Beaker
       install_update_server = answer_for(@options, :q_install_update_server, 'y')
 
       the_answers.map do |key, value|
-        the_answers[key][:q_update_server_host] = update_server_host
+        the_answers[key][:q_update_server_host] = update_server_host if the_answers[key]
       end
       the_answers[master.name][:q_install_update_server] = install_update_server
 ",In what case is this answer empty?,rb,1,1,1
"@@ -0,0 +1,17 @@
+class InboxController < ApplicationController
+  include Mandrill::Rails::WebHookProcessor
+
+  def handle_inbound(event_payload)
+    handler = IncomingMail::Handler.new
+    resp = handler.handle(event_payload)
+    Rails.logger.warn(resp.inspect)
+    if resp.action == IncomingMail::Response::ERROR
+      # TODO do we want mandrill to keep trying on our error?
+      head 500
+    elsif resp.action == IncomingMail::Response::DROPPED
+      head 204 # TODO does mandrill treat this like 200?
+    else
+      head 200 # default tells mandrill to stop trying to send the event
+    end
+  end
+end",is there an error tracking system we can use to log this with?,rb,1,1,1
"@@ -239,7 +239,14 @@ module Travis
 
           def stop_postgresql
             sh.echo ""PostgreSQL package is detected. Stopping postgresql service. See https://github.com/travis-ci/travis-ci/issues/5737 for more information."", ansi: :yellow
-            sh.cmd ""sudo service postgresql stop"", echo: true
+            command = <<~ENDOFBASH
+              if [[ ""$TRAVIS_INIT"" = systemd ]]; then
+                sudo systemctl stop postgresql
+              else
+                sudo service postgresql stop
+              fi
+            ENDOFBASH
+            sh.cmd command, echo: true
           end
       end
     end",`==` for equality check please!,rb,1,0,1
"@@ -173,7 +173,7 @@ public class DefaultConditionRunner implements ConditionRunner {
     }
 
     protected void log(String message) {
-      logger.info(new Date() + "" - "" + message);
+      logger.finest(new Date() + "" - "" + message);
     }
 
   }",This method is designed to allow the condition runner to tell users something interesting. The current `INFO` log level is correct.,rb,1,1,1
"@@ -0,0 +1,9 @@
+<% if @subscription_coupon.valid? %>
+  $("".totalprice"").html('<%= t(""subscriptions.discount.#{@subscription_coupon.duration}"", final_price: @subscription_coupon.apply(@purchase.price), full_price: @purchase.price, duration_in_months: @subscription_coupon.duration_in_months) %>');
+  $("".coupon .error"").hide();
+  $(""#total a"").hide();
+  $("".coupon"").hide();
+  $(""#purchase_stripe_coupon_id"").val(""<%= @subscription_coupon.code %>"");
+<% else %>
+  $("".coupon .error"").show();
+<% end %>","I'd vote that new js be written in coffeescript instead, with us converting the old stuff when we happen to touch it.",rb,1,1,1
"@@ -438,7 +438,7 @@ module Beaker
           @logger.trace result.stdout
         end
       else # a directory with ignores
-        dir_source = Dir.glob(""#{source}/**/*"").reject do |f|
+        dir_source = Dir.glob(""#{source}/**/{*,.*}"").reject do |f|
           f.gsub(/\A#{Regexp.escape(source)}/, '') =~ ignore_re #only match against subdirs, not full path
         end
         @logger.trace ""After rejecting ignored files/dirs, going to scp [#{dir_source.join("", "")}]""",Can you update this PR with tests for this?,rb,0,1,1
"@@ -131,7 +131,7 @@ public class DriverCommandExecutor extends HttpCommandExecutor implements Closea
         Thread.currentThread().interrupt();
         throw new WebDriverException(""Timed out waiting for driver server to stop."", e);
       } finally {
-        executorService.shutdownNow();
+        executorService.shutdown();
       }
 
     } else {","For the command executor, which in turn, uses the HTTP client to talk to the WebDriver, the client might have high-timeout values set, so the shutdown can take a long time if we wait for it to complete, especially if multiple-long running threads are there. I think it might be a good idea in general to couple the shutdown() with `awaitTermination()` with a timeout, if the ongoing tasks do not complete within that timeout then call `shutdownNow()`. What do you think?",rb,1,0,1
"@@ -19,6 +19,12 @@ module Travis
           super
           if version == 'nightly'
             install_python_nightly
+            return
+          end
+
+          sh.if ""! -f #{virtualenv_activate}"" do
+            sh.echo ""#{version} is not installed; attempting download"", ansi: :yellow
+            install_python_archive( version )
           end
         end
 ",why not just change this line to `install_python_archive('nightly')` and remove the nightly method?,rb,1,1,1
"@@ -116,7 +116,14 @@ The `puppetfile` section of the configuration file configures how to retrieve mo
 
 ## Transport configuration options
 
-Transport configuration options can be set in both the configuration file and inventory file.
+Transport configuration options can be set in the inventory file. Options at
+the inventory's top level will apply to all targets.
+
+### The transport option
+
+<% @transport_option[:options].each do |option, desc| -%>
+| `<%= option %>` | <%= desc %> | <%= @transport_option[:defaults][option].to_s %> |
+<% end %>
 
 <% @transports[:options].each do |transport, options| %>
 ### <%= transport %>","Definitely work for another ticket, but I think we need to look at creating separate ref pages for each config/inventory file. This is quickly getting confusing.  ",rb,1,1,1
"@@ -18,4 +18,9 @@
   .trail-titles li.<%= topic.slug.parameterize %> {
     border-color: <%= topic.color %>;
   }
+
+  .trail.<%= topic.slug.parameterize %> .topic-label {
+    background: <%= topic.color %>;
+    color: <%= topic.color_accent %>;
+  }
 <% end %>","Just noticed that this seems to be just CSS and not SASS. It shouldn't be done as part of this pull request, but do we want to support SASS in here? The nesting is a little prettier and we currently can't use Bourbon mixins or anything.",rb,1,1,1
"@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 require 'resolv'
 require 'inifile'
 require 'timeout'",Is this something we need to be adding to all the Beaker source files?,rb,1,1,1
"@@ -34,7 +34,7 @@ module Selenium
           driver.manage.timeouts.implicit_wait = 6
 
           driver.find_element(id: 'adder').click
-          driver.find_element(id: 'box0')
+          expect { driver.find_element(id: 'box0') }.not_to raise_error(WebDriver::Error::NoSuchElementError)
         end
 
         it 'should still fail to find an element with implicit waits enabled' do",This should just be `.not_to raise_error` otherwise it potentially hides errors,rb,1,1,1
"@@ -35,9 +35,9 @@ module Blacklight
         fields = Array.wrap(view_config.html_title_field)
         f = fields.detect { |field| document.has? field }
         f ||= 'id'
-        field_values(field_config(f))
+        field_values(field_config(f), no_html: true)
       else
-        heading
+        heading(no_html: true)
       end
     end
 ",This bothers me a little bit because it isn't actually used in blacklight.. It almost makes me wonder if we're appropriately using `field_values` here at all. I'd like to put a little more thought into it before we ship this.,rb,1,1,1
"@@ -35,13 +35,13 @@ public class BaseSuite {
   public static ExternalResource testEnvironment = new ExternalResource() {
     @Override
     protected void before() {
-      log.info(""Preparing test environment"");
+      log.finest(""Preparing test environment"");
       GlobalTestEnvironment.get(SeleniumTestEnvironment.class);
       System.setProperty(""webdriver.remote.shorten_log_messages"", ""true"");
     }
     @Override
     protected void after() {
-      log.info(""Cleaning test environment"");
+      log.finest(""Cleaning test environment"");
       TestEnvironment environment = GlobalTestEnvironment.get();
       if (environment != null) {
         environment.stop();",This is in test code: understanding what we're doing is important in this context.,rb,1,1,0
"@@ -10,7 +10,7 @@ class Duplicate < ActiveRecord::Base
   validates :comment, length: { maximum: 1000 }, allow_blank: true
 
   def resolve!(editor_account)
-    good_project.editor_account = bad_project.editor_account = editor_account
+    @editor_account = good_project.editor_account = bad_project.editor_account = editor_account
     Duplicate.transaction { RESOLVES.each { |r| send(""resolve_#{r}!"") } }
   end
 ",Do we even need to set `good_project.editor_account` and `bad_project.editor_account`? I can't see that they are used any longer. Do they need to be set for something else?,rb,1,1,1
"@@ -11,11 +11,15 @@ feature 'Account Settings' do
 
   scenario 'user views paid purchases' do
     user = create(:user)
-    create_list(:paid_purchase, 3, user: user)
+    create_list(:paid_purchase, 4, user: user, created_at: 6.minutes.ago)
+    purchase_two = create(:paid_purchase, user: user, created_at: 5.minutes.ago)
+    purchase_one = create(:paid_purchase, user: user, created_at: 1.minutes.ago)
 
     visit edit_my_account_path(as: user)
 
     expect_to_see_my_paid_purchases(user)
+    expect(purchase_one.purchaseable_name).
+      to appear_before(purchase_two.purchaseable_name)
   end
 
   scenario 'user with no purchases' do","Place the . on the next line, together with the method name.",rb,1,1,1
"@@ -186,13 +186,11 @@ module Paginable
     @args.except(*PAGINATION_QUERY_PARAMS).to_param
   end
 
-  # TODO: We would be better served here passing these arguments as a Ruby double splat
-  # rubocop:disable Lint/UnusedMethodArgument
   def stringify_query_params(page: 1, search: @args[:search],
                              sort_field: @args[:sort_field],
                              sort_direction: nil)
 
-    query_string = {}
+    query_string = { page: page }
     query_string[""search""] = search if search.present?
     if sort_field.present?
       query_string[""sort_field""] = sort_field",this was a separate issue that I stumbled across while testing,rb,0,1,0
"@@ -25,6 +25,9 @@ public interface Span extends AutoCloseable, TraceContext {
   Span setAttribute(String key, Number value);
   Span setAttribute(String key, String value);
 
+  Span addEvent(String name);
+  Span addEvent(String name, long timestamp);
+
   Span setStatus(Status status);
 
   @Override",We don't need this additional method.,rb,1,0,1
"@@ -1,12 +1,8 @@
 <% org = template.org.abbreviation.present? ? template.org.abbreviation : template.org.name %>
-<% if example_answer.present? || guidance.present? %>
+<% if guidance.present? %>
   <dl<%= for_plan ? ' class=""dl-horizontal""' : '' %>>
-    <% if example_answer.present? %>
-      <dt><%= _('Example answer') %></dt>
-      <dd><%= raw example_answer.text %><dd>
-    <% end %>
     <% if guidance.present? %>
-      <dt><%= _('Guidance') %></dt>
+      <dt><%= template.customization_of.nil? ? _('Guidance') : _('%{org} Guidance') % { org: guidance.org.short_name } %></dt>
       <dd><%= raw guidance.text %></dd>
     <% end %>
   </dl>",this if is no longer needed,rb,1,1,0
"@@ -28,7 +28,17 @@ class Dispatcher
   end
 
   def requires_approval_notice?(approval)
-    true
+    if approval.cart.getProp('origin') == 'ncr'
+      self.with_approval_notice_requirements { approval.is_final_approval? }
+    else
+      true
+    end
+  end
+
+  def with_approval_notice_requirements &requirements
+    if block_given?
+      requirements.call
+    end
   end
 
   def self.initialize_dispatcher(cart)","This could turn into a rules block that we pull out of here, potentially covering all of the different clients and addressing other client-specific functions",rb,1,1,1
"@@ -70,7 +70,7 @@ public class NodeOptions {
       Capabilities caps = info.getCanonicalCapabilities();
       builders.stream()
           .filter(builder -> builder.score(caps) > 0)
-          .peek(builder -> LOG.info(String.format(""Adding %s %d times"", caps, info.getMaximumSimultaneousSessions())))
+          .peek(builder -> LOG.finest(String.format(""Adding %s %d times"", caps, info.getMaximumSimultaneousSessions())))
           .forEach(builder -> {
             DriverService.Builder freePortBuilder = builder.usingAnyFreePort();
 ",This is an informational message that allows someone to read the console output and understand how the grid node is configured. Please leave.,rb,1,1,1
"@@ -15,6 +15,10 @@ describe Bolt::SSH do
   let(:port) { 2224 }
   let(:command) { ""pwd"" }
   let(:ssh) { Bolt::SSH.new(hostname, port, user, password) }
+  let(:key) {
+    { config: Bolt::Config.new(key: Dir["".vagrant/**/private_key""],
+                               insecure: true) }
+  }
   let(:insecure) { { config: Bolt::Config.new(insecure: true) } }
   let(:echo_script) { <<BASH }
 for var in ""$@""","It looks like this depends on an external file, so probably won't work for anyone else? Note we don't run tests marked with `vagrant: true` in appveyor or travis, but only when running `bundle exec rake test`.",rb,1,1,1
"@@ -14,11 +14,9 @@ class HomeController < ApplicationController
   def index
     if user_signed_in?
       name = current_user.name(false)
-      # TODO: Investigate if this is even relevant anymore.
-      # The name var will never be blank here because the logic in
-      # User says to return the email if the firstname and surname are empty
-      # regardless of the flag passed in
-      if name.blank?
+      # The RolesController defaults the firstname and surname (both required fields)
+      # to 'FirstName' and 'Surname' when a plan is shared with an unknown user
+      if name == ""First Name Surname""
         redirect_to edit_user_registration_path
       else
         redirect_to plans_url",Came across this recently in DMPTool and decided to just fix here,rb,0,1,0
"@@ -83,7 +83,7 @@ module Bolt
           raise Bolt::Error.unknown_task(task_name) unless tasksig
 
           Bolt::Task::Run.validate_params(tasksig, params) if params
-          Bolt::Task.new(tasksig.task_hash)
+          Bolt::Task.from_task_signature(tasksig)
         end
       end
 ",Do we still need this line (or function) with these changes?,rb,1,1,1
"@@ -25,3 +25,4 @@ class ChromeRemoteConnection(RemoteConnection):
         self._commands[""launchApp""] = ('POST', '/session/$sessionId/chromium/launch_app')
         self._commands[""setNetworkConditions""] = ('POST', '/session/$sessionId/chromium/network_conditions')
         self._commands[""getNetworkConditions""] = ('GET', '/session/$sessionId/chromium/network_conditions')
+        self._commands['ExecuteCDP'] = ('POST', '/session/$sessionId/goog/cdp/execute')",Should this be camelCase to match the above commands? I am not the expert here so maybe Lucas or David can chime in.,rb,0,1,1
"@@ -115,7 +115,8 @@ module.exports = function exec(command, opt_options) {
 
   var proc = childProcess.spawn(command, options.args || [], {
     env: options.env || process.env,
-    stdio: options.stdio || 'ignore'
+    stdio: options.stdio || 'ignore',
+    detached: true
   });
 
   // This process should not wait on the spawned child, however, we do","You're welcome to surface this option through the API, but I'm not going to make this the default behavior.",rb,1,1,1
"@@ -0,0 +1,19 @@
+<% reports.each do |report| %>
+  <div class=""reports"">
+    <div style=""float:left"">
+      <%= link_to user_thumbnail(report.user), :controller => :user, :action =>:view, :display_name => report.user.display_name %>
+    </div>
+    <%= t("".reported_by_html"", :user_name => report.user.display_name, :user_url => url_for(:controller => :user, :action => :view, :display_name => report.user.display_name)) %> <br/>
+    <span class=""deemphasize"">
+      <%= t("".updated_at"", :datetime => l(report.updated_at.to_datetime, :format => :friendly)) %>
+    </span>
+    <br/>
+    <span class=""deemphasize"">
+      <%= t "".category"", category: report.category %>
+    </span>
+    <br/>
+    <%= report.details %>
+    <br/>
+  </div>
+  <hr>
+<% end %>","As this is inside the loop, and hence only contains one report, this seems like the wrong class name to use?",rb,1,1,1
"@@ -3,12 +3,12 @@ module Subscriber
     before_filter :authorize
 
     def index
-      @invoices = SubscriptionInvoice.
+      @invoices = Invoice.
         find_all_by_stripe_customer_id(current_user.stripe_customer_id)
     end
 
     def show
-      @invoice = SubscriptionInvoice.new(params[:id])
+      @invoice = Invoice.new(params[:id])
       ensure_invoice_belongs_to_user
     end
 ","Place the . on the next line, together with the method name.",rb,1,1,1
"@@ -48,6 +48,10 @@ module RSpec::Core
           options[:libs] << dir
         end
 
+        parser.on('-i') do
+          raise OptionParser::InvalidOption.new
+        end
+
         parser.on('-r', '--require PATH', 'Require a file.') do |path|
           options[:requires] ||= []
           options[:requires] << path","In @fj's example he had put `--I`. I'm curious why you put `-i` here? Actually, I think maybe both should raise an error.",rb,0,1,1
"@@ -0,0 +1,19 @@
+<% modifiable = !template.customization_of.present? && template.id.present? && (template.org_id = current_user.org.id) %>
+<% details_path = modifiable ? edit_org_admin_template_path(template.id) : template.id.present? ? org_admin_template_path(template.id) : org_admin_templates_path %>
+<ul class=""nav nav-tabs"" role=""tablist"">
+  <li role=""presentation"" <%= isActivePage(details_path) ? ' class=active' : '' %>>
+    <%= link_to(_('Template details'), details_path, { 'aria-controls': 'show_template', role: 'tab' }) %>
+  </li>
+  <% template.phases.each do |phase| %>
+    <% phase_path = phase.modifiable? ? edit_org_admin_template_phase_path(template.id, phase.id) : org_admin_template_phase_path(template.id, phase.id) %>
+    <li role=""presentation"" <%= isActivePage(phase_path) ? ' class=active' : '' %>>
+      <%= link_to(phase.title, phase_path, { 'aria-controls': ""#{phase.id}"", role: 'tab' }) %>
+    </li>
+  <% end %>
+  <!-- Add another phase button -->
+  <% if modifiable %>
+    <li role=""presentation"" <%= isActivePage(new_org_admin_template_phase_path(template.id)) ? ' class=active' : '' %>>
+      <%= link_to(_('Add new phase'), new_org_admin_template_phase_path(template.id), { 'aria-controls': 'add_phase', role: 'tab' }) %>
+    </li>
+  <% end %>
+</ul>",why don't we add modifiable? method into template model instead?,rb,1,1,1
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -67,11 +67,11 @@ public abstract class AbstractWebDriverEventListener implements WebDriverEventLi
     // Do nothing.
   }
 
-  public void beforeChangeValueOf(WebElement element, WebDriver driver) {
+  public void beforeChangeValueOf(WebElement element, WebDriver driver, CharSequence[] value) {
     // Do nothing.
   }
 
-  public void afterChangeValueOf(WebElement element, WebDriver driver) {
+  public void afterChangeValueOf(WebElement element, WebDriver driver, CharSequence[] value) {
     // Do nothing.
   }
 ","change 'value' to keysToSend, here and in other references in this commit. 'value' implies the user is getting the value of the element, rather than just the keys we're sending to it.",rb,1,1,1
"@@ -0,0 +1,18 @@
+RSpec::Support.require_rspec_core ""formatters/base_formatter""
+
+module RSpec
+  module Core
+    module Formatters
+      # @private
+      class CFormatter < BaseFormatter
+        Formatters.register self, :example_failed, :dump_profile
+
+        def example_failed(failure)
+          output.puts ""#{failure.example.location}:#{failure.example.description}""
+        end
+
+        def dump_profile(_profile); end
+      end
+    end
+  end
+end",You don't need to do this if you don't register `dump_profile`,rb,1,1,1
"@@ -601,7 +601,8 @@ module Travis
           when 'bioc-devel'
             config[:bioc_required] = true
             config[:bioc_use_devel] = true
-            normalized_r_version('devel')
+            config[:r] = 'release'
+            normalized_r_version
           when 'bioc-release'
             config[:bioc_required] = true
             config[:bioc_use_devel] = false",Is there a reason you aren't using `normalized_r_version('release')`?,rb,1,1,1
"@@ -35,7 +35,13 @@ describe AuthHashService, '#find_or_create_user_from_auth_hash' do
   end
 
   context 'with an existing user' do
-    it 'finds the user' do
+    it ""finds the user by email"" do
+      existing_user = create(:user, email: auth_hash[""info""][""email""])
+
+      expect(existing_user).to eq AuthHashService.new(auth_hash).find_or_create_user_from_auth_hash
+    end
+
+    it ""finds the user by auth_provider and auth_uid"" do
       existing_user = create(:user, auth_provider: 'github', auth_uid: 1)
 
       expect(existing_user).to eq AuthHashService.new(auth_hash).find_or_create_user_from_auth_hash",Line is too long. [99/80],rb,1,1,1
"@@ -0,0 +1,16 @@
+module VanityHelpers
+  def vanity_signup_count
+    tracked_events_for(Vanity.playground.metric(:signups))
+  end
+
+  def tracked_events_for(metric)
+    events_from_today =
+      Vanity::Metric.data(metric, Date.today, Date.today).first
+    count_of_todays_events = events_from_today.second
+  end
+
+  def stub_ab_test_result(experiment, choice)
+    Vanity.playground.experiment(experiment).identify {}
+    Vanity.playground.experiment(experiment).chooses(choice)
+  end
+end",Useless assignment to variable - `count_of_todays_events`.,rb,1,1,1
"@@ -93,7 +93,7 @@ public class Docker {
       throw new WebDriverException(""Unable to pull container: "" + name);
     }
 
-    LOG.info(String.format(""Pull of %s:%s complete"", name, tag));
+    LOG.fine(String.format(""Pull of %s:%s complete"", name, tag));
 
     return findImage(new ImageNamePredicate(name, tag))
         .orElseThrow(() -> new DockerException(",Waiting for the pull takes a long time. This message informs the user that at least one of the images being pulled is available. Please leave.,rb,1,1,1
"@@ -7,4 +7,8 @@ RSpec.configure do |config|
   config.before(:suite) do
     # FactoryBot.lint
   end
+
+  config.append_after(:each) do
+    FactoryBot.rewind_sequences
+  end
 end","This ensures that all of our `sequence` calls in factories get reset to 1 between tests. I noticed that section numbers were generated sequentially, but would not match the customized version as the original template would be in the 60's and the customized template would always start at 1 as it's generated by our logic.",rb,1,1,1
"@@ -0,0 +1,9 @@
+class KissmetricsClientFactory
+  def self.client
+    if Rails.env.test?
+      FakeKissmetrics::HttpClient.new('fake-api-key')
+    else
+      Kissmetrics::HttpClient.new(KISSMETRICS_API_KEY)
+    end
+  end
+end",Do we really need the Factory in this class name?,rb,1,1,1
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -31,8 +31,7 @@ module LinkAccessors
           cleaned_uri = String.clean_url(uri)
           cached_uri = send cache_method
           return if !cached_uri.nil? && cleaned_uri == cached_uri
-          update_link_uri(accessor, links.of_category(Link::CATEGORIES[link_category]).first_or_initialize,
-                          cleaned_uri, link_category.to_s)
+          update_link_uri(accessor, obtain_link(link_category), cleaned_uri, link_category.to_s)
         end
       end
     end","using ""links....first_or_initialize"" is adding the link to the project.links now. We don't want that as it is possible that the setting of the uri to '' is used to delete the link from the array (or never create it in the first place on projects#create). We need to break that out into the method below.",rb,1,1,1
"@@ -34,6 +34,7 @@
 #  image_content_type  :string
 #  auth_provider       :string
 #  home_tile           :integer
+#  tou_agreed          :datetime
 #
 # Indexes
 #",What does this map in PostgreSQL? We should be using `timestamp with time zone` for a purpose like this.,rb,1,1,1
"@@ -102,8 +102,17 @@ module Ncr
         # skip state machine
         self.proposal.update(status: 'approved')
       else
-        approvers = emails.map{|e| User.for_email(e)}
-        self.proposal.approvers = approvers
+        individuals = emails.map do |email|
+          user = User.for_email(email)
+          # Reuse existing approvals, if present
+          if existing = self.proposal.existing_approval_for(user)
+            existing
+          else
+            Approvals::Individual.new(user: user)
+          end
+        end
+
+        self.proposal.root_approval = Approvals::Serial.new(child_approvals: individuals)
       end
     end
 ","Do we need to worry about a `root_approval` already existing here, or can we safely assume this will only be called on the initial setup?",rb,1,1,1
"@@ -76,7 +76,7 @@ describe CatalogController do
           expect(session[:search].keys).to include :id
           
           search = Search.find(session[:search][:id])
-          expect(search.query_params[:q]).to eq @user_query
+          expect(search.query_params['q']).to eq @user_query
         end
       end
 ","There isn't a backwards-compat issue here, right? The old hash was a HWIA, and now we're stuck with a stringified hash?",rb,1,1,0
"@@ -1,4 +1,4 @@
 <% showusername = true if showusername.nil? %>
 <table id=""changeset_list"">
-  <%= render :partial => 'changeset', :locals => {:showusername => showusername}, :collection => @edits unless @edits.nil? %>
+  <%= render :partial => 'changeset/changeset', :locals => {:showusername => showusername}, :collection => @edits unless @edits.nil? %>
 </table>",This change should be unnecessary - rendering the `changset` partial from a changeset view should default to the one in the same view.,rb,1,1,1
"@@ -11,6 +11,7 @@
 #
 # Indexes
 #
+#  fk_rails_fe95df7db0                (identifier_scheme_id)
 #  index_user_identifiers_on_user_id  (user_id)
 #
 # Foreign Keys",Is the UserIdentifier model sticking around for a release to migrate the objects over to the new Identifier model?,rb,1,1,1
"@@ -13,13 +13,14 @@ module RSpec
       # @overload before(scope, &block)
       #   @param scope [Symbol] `:example`, `:context`, or `:suite`
       #     (defaults to `:example`)
-      # @overload before(scope, conditions, &block)
+      # @overload before(scope, *conditions, &block)
       #   @param scope [Symbol] `:example`, `:context`, or `:suite`
       #     (defaults to `:example`)
-      #   @param conditions [Hash]
-      #     constrains this hook to examples matching these conditions e.g.
+      #   @param conditions [Array<Symbol>, Hash] constrains this hook to
+      #     examples matching these conditions e.g.
       #     `before(:example, :ui => true) { ... }` will only run with examples
-      #     or groups declared with `:ui => true`.
+      #     or groups declared with `:ui => true`. Symbols will be transformed
+      #     into hash entries with `true` values.
       # @overload before(conditions, &block)
       #   @param conditions [Hash]
       #     constrains this hook to examples matching these conditions e.g.","I'm still unsure about the changes in all this file, can you show some sample renders before / after? They imply the main use case is an array of symbols with a hash as an afterthought when really we expect this to be a hash 99% of the time.",rb,1,1,1
"@@ -1,6 +1,18 @@
 require ""rails_helper""
 
+include ActionView::Helpers::DateHelper
+
 feature ""Subscriber views decks"" do
+  scenario ""and hasn't started a deck"" do
+    flashcard = create(:flashcard)
+
+    visit decks_path(as: create(:subscriber))
+
+    within("".decks-area"") do
+      expect(page).to have_content(never_attempted)
+    end
+  end
+
   scenario ""and starts a deck"" do
     flashcard = create(:flashcard)
 ",Useless assignment to variable - `flashcard`.,rb,1,1,1
"@@ -1,5 +1,11 @@
 class TeamsController < ApplicationController
-  before_filter :must_be_team_owner
+  before_filter :must_be_team_owner, only: :edit
+
+  def index
+    @catalog = Catalog.new
+
+    render layout: 'empty-body'
+  end
 
   def edit
     @team = current_team",Should this be `teams#new`? We're not displaying a list of teams.,rb,1,1,1
"@@ -27,6 +27,7 @@ module Beaker
     # @option opts [Beaker::Logger] :logger A {Beaker::Logger} object
     def timesync host, opts
       logger = opts[:logger]
+      ntp_server = opts[:ntp_server] ? opts[:ntp_server] : NTPSERVER
       block_on host do |host|
         logger.notify ""Update system time sync for '#{host.name}'""
         if host['platform'].include? 'windows'",Any possible value in having an ntp server per host? @branan ?,rb,0,1,1
"@@ -1,4 +1,6 @@
 $_rspec_core_load_started_at = Time.now
+require 'thread'
+
 require 'rbconfig'
 
 require ""rspec/support""","If possible, this needs delaying until someone actively uses the feature, reason being is we try **very** hard not to pollute a users code base with std library stuff, which this would.",rb,1,1,1
"@@ -343,9 +343,7 @@ module Bolt
     end
 
     def list_tasks
-      outputter.print_table(pal.list_tasks)
-      outputter.print_message(""\nUse `bolt task show <task-name>` to view ""\
-                              ""details and parameters for a specific task."")
+      outputter.print_tasks(pal.list_tasks, pal.list_modulepath)
     end
 
     def show_plan(plan_name)","Can we just override ""list_tasks"" in the human outputter instead of adding a new method?",rb,1,1,1
"@@ -4,11 +4,15 @@
 
 <header>
   <div class=""topic-image"">
-    <%= image_tag ""topics/#{topic.slug}.svg"" %>
+    <%= link_to topic do %>
+      <%= image_tag ""topics/#{topic.slug}.svg"" %>
+    <% end %>
   </div>
 
   <div class=""topic-title"">
-    <h2><%= trail.topic_name %></h2>
+    <div class=""trail-topic-name"">
+      <%= render topic %>
+    </div>
     <h1><%= trail.name %></h1>
     <p><%= trail.description %></p>
   </div>","This doesn't seem super semantic. How do you feel about it, @Magnus-G ?",rb,0,1,1
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -1,6 +1,6 @@
 C2::Application.routes.draw do
   ActiveAdmin.routes(self)
-  root :to => 'home#index'
+  root to: ""home#index""
   get '/error' => 'home#error'
   get '/profile'  => 'profile#show'
   post '/profile' => 'profile#update'","If you're going to change that one, why not change them all and get it done with?",rb,1,1,1
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -83,6 +83,14 @@ class User < ActiveRecord::Base
     [purchased_subscription, team_subscription].compact.detect(&:active?)
   end
 
+  def annualized_payment
+    plan.annualized_payment
+  end
+
+  def discounted_annual_payment
+    plan.discounted_annual_payment
+  end
+
   private
 
   def team_subscription","Had a thought about this: we could make the upgrade route `/individual_plan/:id/annual_billing`, and then I could avoid these delegators. Worth it?",rb,0,1,1
"@@ -1,13 +1,13 @@
 <!DOCTYPE html>
 <html>
   <head>
-    <meta charset=""utf-8"">
     <title>C2</title>
-    <meta name=""viewport"" content=""width=device-width, initial-scale=1"" />
+    <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" />
+    <meta name=""viewport"" content=""width=device-width"" />
     <link rel=""stylesheet"" type=""text/css"" href=""<%= stylesheet_url(""mailer_new.css"") %>"" />
+    <%= render 'mail_shared/outlook_fix' %>
   </head>
   <body>
     <%= yield %>
-    <%= render partial: ""mail_shared/footer"" %>
   </body>
 </html>",why not put the footer code into a shared partial? I think we will be using it for all emails so good to just have in layout. can take lines 142 -> 157 from attachment template and put it in `mail_shared/_footer.html.haml`,rb,0,1,1
"@@ -400,7 +400,8 @@ module RSpec::Core
     # @attr duration [Float] the time taken (in seconds) to run the suite
     # @attr examples [Array<RSpec::Core::Example>] the examples run
     # @attr number_of_examples [Fixnum] the number of examples to profile
-    ProfileNotification = Struct.new(:duration, :examples, :number_of_examples)
+    # @attr profiler [RSpec::Core::Profiler] the profiler used to capture examples
+    ProfileNotification = Struct.new(:duration, :examples, :number_of_examples, :profiler)
     class ProfileNotification
       # @return [Array<RSpec::Core::Example>] the slowest examples
       def slowest_examples","I don't think the profiler formatter needs to be exposed of profile notification. Seems like once you merge the example/example group event handling into the existing profiler formatter this will no longer be needed on the notification object anymore, right?",rb,1,1,1
"@@ -135,7 +135,8 @@ class PathResolver
   # This operation considers posix paths, windows paths, and file URLs.
   #
   # Unix absolute paths and UNC paths start with slash. Windows roots can start
-  # with a drive letter. Absolute paths in the browser start with file://.
+  # with a drive letter. Absolute paths may start with file://, http://, or
+  # https:// when the IO module is xmlhttprequest (Opal runtime only).
   #
   # path - the String path to check
   #",I didn't know that `start_with?` accepts a list of arguments! It's good to know :smile:,rb,0,1,0
"@@ -1,13 +1,14 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX - License - Identifier: Apache - 2.0
+# SPDX-License-Identifier: Apache-2.0
 
+# Purpose:
 # This code example allows a federated user with a limited set of
-# permissions to list the objects in an Amazon S3 bucket.
+# permissions to list the objects in an Amazon Simple Storage Solution (Amazon S3) bucket.
 
+# snippet-start:[s3.ruby.auth_federation_token_request_test.rb]
 # Prerequisites:
 #  - An existing Amazon S3 bucket.
 
-# snippet-start:[s3.ruby.auth_federation_token_request_test.rb]
 require 'aws-sdk-s3'
 require 'aws-sdk-iam'
 require 'json'",Simple Storage **Service**,rb,0,0,0
"@@ -0,0 +1,8 @@
+require 'spec_helper'
+
+describe 'Purchases' do
+  it 'raise not found if no purchase exists' do
+    visit purchase_path('robots.txt')
+    expect(page.status_code).to eq(404)
+  end
+end",I'd try writing this as a controller spec.,rb,0,1,0
"@@ -6,6 +6,10 @@ feature ""User creates a subscription"" do
     sign_in
   end
 
+  after do
+    clean_up_stripe_coupons
+  end
+
   scenario ""doesn't create a Stripe subscription with an invalid credit card"" do
     subscribe_with_invalid_credit_card
     expect(current_user).not_to have_active_subscription",Thoughts on having this as a global `after` hook in the file with the Stripe fake?,rb,1,1,1
"@@ -0,0 +1,16 @@
+<% 
+  tool_name = Rails.configuration.branding[:application][:name]
+  helpdesk_email = Rails.configuration.branding[:organisation][:helpdesk_email]
+
+  # Override the default Rails route helper for the contact_us page IF an alternate contact_us url was defined
+  # in the branding config file
+  contact_us = Rails.application.config.branding[:organisation][:contact_us_url] || contact_us_url
+%>
+<p>
+  <%= _('All the best') %>
+  <br />
+  <%= _('The %{tool_name} team') %{:tool_name => tool_name} %>
+</p>
+<p>
+  <%= _('You may change your notification preferences on your profile page.') %>&nbsp;<%= _('Please do not reply to this email.') %>&nbsp;<%= raw(_('If you have any questions or need help, please contact us at %{helpdesk_email} or visit %{contact_us}') %{ :helpdesk_email => mail_to(helpdesk_email, helpdesk_email, subject: email_subject), :contact_us => link_to(contact_us, contact_us) }) %>
+</p>","Nice partial, it was copied/pasted across many mails...",rb,1,1,0
"@@ -53,6 +53,13 @@ describe Mentor do
 
       expect(mentor.active_mentees).to eq [active]
     end
+
+    it 'eager loads mentees' do
+      mentor = create(:mentor)
+
+      expect { mentor.reload.active_mentees }.
+        to eager_load { create(:subscriber, :includes_mentor, mentor: mentor) }
+    end
   end
 
   describe '#active_mentee_count' do","Place the . on the next line, together with the method name.",rb,1,1,1
"@@ -44,7 +44,7 @@ public abstract class NewSessionQueue implements HasReadyState {
 
   public abstract boolean offerFirst(HttpRequest request, RequestId requestId);
 
-  public abstract Optional<HttpRequest> poll();
+  public abstract Optional<HttpRequest> poll(RequestId requestId);
 
   public abstract int clear();
 ","The expected behaviour for `poll` would be to match what `Deque` does, which is: > Retrieves and removes the head of the queue represented by this deque As such, you shouldn't need the `RequestId` here.",rb,1,1,1
"@@ -12,7 +12,9 @@ class ProposalsController < ApplicationController
 
   def show
     @proposal = proposal.decorate
-    cookies[:detail] = params[:detail]
+    if !params[:detail].blank?
+      cookies[:detail] = params[:detail]
+    end
     mode = cookies[:detail]
     if mode == ""new""
       @client_data_instance ||= proposal.client_data",@jessieay I had to re-add this check because the cookie was getting wiped when the query wasnt set.,rb,0,1,0
"@@ -0,0 +1,11 @@
+class AddReadEmailPermission < ActiveRecord::Migration
+  def up
+    add_column :oauth_tokens, :allow_read_email, :boolean, :null => false, :default => false
+    add_column :client_applications, :allow_read_email, :boolean, :null => false, :default => false
+  end
+
+  def down
+    remove_column :client_applications, :allow_read_email
+    remove_column :oauth_tokens, :allow_read_email
+  end
+end",If you make that `def change` then you won't need the `down` routine at all.,rb,1,1,1
"@@ -21,9 +21,12 @@ class PurchasesController < ApplicationController
     end
 
     if @purchase.save
+      create_subscription if @purchaseable.subscription?
+
       km_http_client.record(@purchase.email, ""Submit Payment"", { ""Product Name"" => @purchaseable.name, ""Order Total"" => @purchase.price })
       track_purchase_if_paid(@purchase)
-      redirect_to @purchase.success_url
+
+      redirect_to success_url
     else
       @active_card = retrieve_active_card
       render :new","To follow Tell, Don't Ask here: tell the purchaseable to do something (`@purchaseable.add_to current_user`) and then implement the correct behavior for each type. Inflecting on the `@purchaseable` and then varying behavior here tightly couples the controller to the behavior for this specific purchaseable, and means you'll have to special case every purchaseable type as you add them.",rb,1,0,1
"@@ -0,0 +1,18 @@
+require 'travis/build/appliances/base'
+module Travis
+  module Build
+    module Appliances
+      class MavenCentralMirror < Base
+        GOOGLE_MAVEN_MIRROR='https://maven-central.storage-download.googleapis.com/repos/central/data/'
+        def apply
+          sh.raw bash('travis_maven_central_mirror')
+          sh.raw ""travis_maven_central_mirror #{GOOGLE_MAVEN_MIRROR}""
+        end
+
+        def apply?
+          config[:os] != 'windows'
+        end
+      end
+    end
+  end
+end",can this please be configurable via config as we might not want to set a mirror by default,rb,1,1,1
"@@ -56,6 +56,8 @@ module Travis
           const = self.class.const_get(name.to_s.camelize)
           const.new(script, sh, data, config) if const && run_addon?(const)
         rescue NameError
+        rescue
+          raise Travis::Build::AddonConfigError.new(name)
         end
 
         def addon_config",Does this need to be a bare `rescue`? Would `rescue StandardError => e` with `e` _at least_ being logged be acceptable?,rb,1,1,1
"@@ -16,7 +16,7 @@ describe ClientSummarizer do
 
   describe ""Ncr::WorkOrder"" do
     it ""builds summary"" do
-      wo = create(:ncr_work_order, amount: 123)
+      create(:ncr_work_order, amount: 123)
       summarizer = ClientSummarizer.new(client_namespace: ""Ncr"")
       summary = summarizer.run
       expect(summary.total).to eq(123)",why throw away the variable assignment? and why in this PR?,rb,0,1,1
"@@ -35,6 +35,7 @@ describe ForumsController do
   end
 
   it 'admin show with pagination' do
+    skip 'TODO: This test never ran correctly. It silently failed due to no assertions.'
     create_list(:topic, 20)
     login_as user
     get :show, id: forum.id",These really should be fixed for real.,rb,0,1,0
"@@ -1,4 +1,13 @@
+require 'logger'
+
 module Bolt
+  class << self
+    attr_accessor :log_level
+    attr_accessor :config
+  end
+
+  @config = {}
+
   require 'bolt/executor'
   require 'bolt/node'
 end","thanks for moving this up here, seems like a much more intuitive place",rb,1,1,0
"@@ -2,7 +2,10 @@ class ShowsController < ApplicationController
   layout ""landing_pages""
 
   def show
-    @show = Show.friendly.find(params[:id])
+    @show = ShowListing.new(
+      Show.friendly.find(params[:id]),
+      current_user,
+    )
 
     respond_to do |format|
       format.html do",Put a comma after the last parameter of a multiline method call.,rb,1,1,1
"@@ -21,14 +21,13 @@ class SubscriptionMailer < BaseMailer
     )
   end
 
-  def subscription_receipt(email, plan_name, amount, stripe_invoice_id)
-    @plan_name = plan_name
+  def subscription_receipt(email, amount, stripe_invoice_id)
     @amount = amount
     @stripe_invoice_id = stripe_invoice_id
 
     mail(
       to: email,
-      subject: ""[Learn] Your #{plan_name} receipt and some tips""
+      subject: '[Learn] Your receipt and some tips'
     )
   end
 ",Prefer single-quoted strings when you don't need string interpolation or special symbols.,rb,1,1,1
"@@ -218,7 +218,8 @@ class Plan < ActiveRecord::Base
 
         if self.save!
           # Send an email confirmation to the owners and co-owners
-          deliver_if(recipients: self.owner_and_coowners, key: 'users.feedback_requested') do |r|
+          owners = User.joins(:roles).where('roles.plan_id =? AND roles.access IN (?)', self.id, Role.access_values_for(:administrator))
+          deliver_if(recipients: owners, key: 'users.feedback_requested') do |r|
             UserMailer.feedback_confirmation(r, self, user).deliver_now
           end
           # Send an email to all of the org admins as well as the Org's administrator email","owner_and_coowners class method is still used after the change? If not, please remove it!",rb,1,1,1
"@@ -2,6 +2,9 @@ class DashboardsController < ApplicationController
   before_action :authorize
 
   def show
-    @catalog = Catalog.new
+    @topics = TopicsWithResources.new(
+      topics: Topic.dashboard,
+      factory: TopicWithResourcesFactory.new(catalog: Catalog.new)
+    )
   end
 end",There's some duplication in dependency management here which I'd like to resolve in a subsequent pull request by introducing Payload.,rb,1,1,1
"@@ -66,4 +66,15 @@ describe Practice do
       expect(result.map(&:name)).to eq([""Started""])
     end
   end
+
+  describe ""#quizzes"" do
+    it ""returns all the quizzes"" do
+      user = build_stubbed(:user)
+      quiz = create(:quiz)
+
+      practice = Practice.new(user)
+
+      expect(practice.quizzes).to eq([quiz])
+    end
+  end
 end","Since there's only one `quiz`, do you think using `eq` is more direct?",rb,1,1,1
"@@ -76,6 +76,13 @@ describe 'apply_prep' do
       end
     end
 
+    it 'fails if version task is not found' do
+      Puppet::Pal::ScriptCompiler.any_instance.expects(:task_signature).with('puppet_agent::version')
+      is_expected.to run.with_params(hostnames).and_raise_error(
+        Bolt::Error, 'puppet_agent::version could not be found'
+      )
+    end
+
     it 'fails if version check fails' do
       failed_results = Bolt::ResultSet.new(
         targets.map { |t| Bolt::Result.new(t, error: { 'msg' => 'could not get version' }) }",We expect this to happen because users may have used their own puppet_agent package?,rb,1,1,1
"@@ -110,7 +110,7 @@ class ErrorHandler(object):
                             value = message
                             try:
                                 message = message['message']
-                            except TypeError:
+                            except KeyError:
                                 message = None
                     else:
                         message = value.get('message', None)",could you change this to instead of being a `try.. except` be `message = message.get('message')`,rb,1,1,1
"@@ -0,0 +1,3 @@
+<h2><%= t ""changeset.rss.comment"", :author => comments_entry.author.display_name, 
+  :changeset_id => comments_entry.changeset.id.to_s %></h2>
+<%= render :partial => 'comment', :object => comments_entry %>",What's the point of extracting this into a partial? It doesn't look like it's used anywhere else?,rb,1,1,1
"@@ -1,17 +1,11 @@
 <li class=""subscription"">
   <% if subscription.active? %>
     <p><strong><%= subscription.plan.name %></strong> <br /> Active since <%= subscription.created_at.to_s(:simple) %></p>
-    <% if subscription.scheduled_for_cancellation_on %>
+    <% if subscription.scheduled_for_cancellation? %>
       <p><%= t('subscriptions.cancellation_scheduled_on', date: subscription.scheduled_for_cancellation_on.to_s(:simple)) %></p>
     <% end %>
   <% else %>
     <p>Canceled on <%= subscription.deactivated_on.to_s(:simple) %></p>
   <% end %>
-  <% if subscription.active? && subscription.scheduled_for_cancellation_on.blank? %>
-    <%= link_to t('subscriptions.change_plan'), edit_subscription_path %>
-  <% end %>
-  <%= link_to 'View all invoices', subscriber_invoices_path, class: 'invoices' %>
-  <% if subscription.active? && subscription.scheduled_for_cancellation_on.blank? %>
-    <%= link_to t('subscriptions.cancel'), new_subscriber_cancellation_path, class: 'cancel' %>
-  <% end %>
+  <%= render 'subscriptions/management', subscription: subscription %>
 </li>",This compound condition is duplicated above.,rb,1,1,1
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -2,6 +2,10 @@
 
 require_relative '../../../vendored/require_vendored.rb'
 
+# Add bolt spec helpers
+bolt_dir = Gem::Specification.find_by_name('bolt').gem_dir
+$LOAD_PATH.unshift(File.join(bolt_dir, 'spec', 'lib'))
+
 # Ensure tasks are enabled when rspec-puppet sets up an environment
 # so we get task loaders.
 Puppet[:tasks] = true","Seems inconsistent with the `require_relative` above. If the module is moved out of bolt, the relative require will need to reflect that too.",rb,1,1,1
"@@ -77,6 +77,6 @@ feature 'An OAuth client authenticates', js: true do
 
   def verify_signed_in_user_details(json, checked_user)
     user = json['user']
-    user['email'].should eq checked_user.email
+    expect(user['email']).to eq checked_user.email
   end
 end",Prefer double-quoted strings unless you need single quotes to avoid extra backslashes for escaping.,rb,1,1,1
"@@ -61,7 +61,9 @@
     <article>
       <figure id=""bullet-3"" class=""journey-bullet"">3.</figure>
       <h2>Enroll in premium, hands-on video tutorials</h2>
-      <p>Our video tutorials are more than just video tutorials. You&rsquo;ll build real apps and communicate directly with a thoughtbot developer or designer. Begin an online video tutorial as soon as you sign up.</p>
+      <p>Our video tutorials go beyond passive learning. You&rsquo;ll build
+      real apps and communicate directly with a thoughtbot developer or
+      designer. You can begin one as soon as you sign up.</p>
     </article>
     <figure class=""supporting-visual two-stacked"">
       <div>",`You can begin as soon as you sign up.`?,rb,1,0,0
"@@ -0,0 +1,10 @@
+require 'test_helper'
+
+describe 'FeedbacksController' do
+  it 'creates feedback' do
+    assert_difference('Feedback.count') do
+      post :create, feedback: { rating: 5, uuid: 'e91fc264-12345', more_info: 1, project_name: 'Ruby On Rails' }
+    end
+    assert_response :success
+  end
+end",This can be expanded to include the `project_id` and the `ip_address`.,rb,1,1,1
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,rb,1,1,1
"@@ -29,7 +29,7 @@ class User < ActiveRecord::Base
   end
 
   def first_name
-    name.split("" "").first
+    name.split(' ').first
   end
 
   def last_name",Prefer double-quoted strings unless you need single quotes to avoid extra backslashes for escaping.,rb,1,1,1
"@@ -1,2 +1,16 @@
 class PagesController < HighVoltage::PagesController
+  include HighVoltage::StaticPage
+
+  layout :layout_for_page
+
+  private
+
+  def layout_for_page
+    case params[:id]
+    when ""tapas-for-teams""
+      ""splash""
+    when ""tapas-for-one""
+      ""splash""
+    end
+  end
 end",Prefer double-quoted strings unless you need single quotes to avoid extra backslashes for escaping.,rb,1,1,1
"@@ -48,4 +48,8 @@ module ProposalDelegate
   def client
     self.class.client
   end
+
+  def slug_matches?(user)
+    user.client_slug == client
+  end
 end",should we write a little unit test for this so that if it changes we have a test failure?,rb,1,1,1
"@@ -1,5 +1,5 @@
 <div id=""blacklight-modal"" class=""modal fade"" tabindex=""-1"" role=""dialog"" aria-labelledby=""modal menu"" aria-hidden=""true"">
-  <div class=""modal-dialog"" role=""document"">
+  <div class=""modal-dialog modal-lg"" role=""document"">
     <div class=""modal-content"">
     </div>
   </div>",Would it be useful for us to make this configurable/easily overridable in some way? It might be useful to have smaller modals particularly if a dev never configures a facet to use the A-Z pagination. \\_()_/,rb,1,1,1
"@@ -1,5 +1,5 @@
 module DashboardsHelper
-  def learn_live_link(&block)
+  def upcase_live_link(&block)
     if current_user_has_access_to?(:office_hours)
       link_to OfficeHours.url, target: ""_blank"", &block
     else",maybe just `chat_room_link`?,rb,1,1,1
"@@ -600,7 +600,7 @@ img.intercom-interblocks-article-author-avatar-image {
 
 <p>Hi <%= @user.first_name %>,</p>
 
-<p><%= @video.email_body_text %></p>
+<p><%= @html_content %></p>
 
 <p style=""text-align: center"">
 <ic-block data-generated-at=""14775965965790.22154604114587806"" data-type=""button"" data-link-url=""<%= video_url(@video, @utm_params) %>"" data-text=""Check it Out"" data-id=""block-ember4053"" data-align=""center""><zws>&#8203;</zws><insert contenteditable=""false""><insert-point></insert-point></insert><a class=""intercom-h2b-button"" href=""<%= video_url(@video, @utm_params) %>"" contenteditable=""false""><%= @video.email_cta_label %></a><insert contenteditable=""false""><insert-point></insert-point></insert><zws>&#8203;</zws></ic-block>",I think you'll need an HTML safe somewhere to get the uneacapef HTML.,rb,1,1,1
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -374,6 +374,14 @@ module Asciidoctor
       result = []
       pgwide_attribute = (node.option? 'pgwide') ? ' pgwide=""1""' : nil
       result << %(<#{tag_name = node.title? ? 'table' : 'informaltable'}#{common_attributes node.id, node.role, node.reftext}#{pgwide_attribute} frame=""#{node.attr 'frame', 'all'}"" rowsep=""#{['none', 'cols'].include?(node.attr 'grid') ? 0 : 1}"" colsep=""#{['none', 'rows'].include?(node.attr 'grid') ? 0 : 1}"">)
+
+      if (node.option? 'breakable')
+        result << %(<?dbfo keep-together=""auto""?>)
+      end 
+      else if (node.option? 'unbreakable')
+        result << %(<?dbfo keep-together=""always""?>)
+      end 
+
       result << %(<title>#{node.title}</title>) if tag_name == 'table'
       if (width = (node.attr? 'width') ? (node.attr 'width') : nil)
         TABLE_PI_NAMES.each do |pi_name|",Could you remove this `end` and use `elseif` on the next line instead of `else if`? You can see similar examples elsewhere in this file.,rb,1,1,1
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -3,6 +3,7 @@ require 'rspec/support/spec/library_wide_checks'
 RSpec.describe RSpec do
   fake_libs = File.expand_path('../../support/fake_libs', __FILE__)
   allowed_loaded_features = [
+    /open3.rb/,       # Used by Bisect::Runner, which is not normally loaded
     /optparse\.rb/,   # Used by OptionParser.
     /rbconfig\.rb/,   # loaded by rspec-support for OS detection.
     /shellwords\.rb/, # used by ConfigurationOptions and RakeTask.","My reading of this is that this would not be loaded except in specs utilising the bisect feature, can we not use the isolated environment stuff to test that feature avoiding this?",rb,1,1,1
"@@ -0,0 +1,17 @@
+RSpec.configure do |config|
+  config.before do
+    allow(Kernel).to receive(:srand).and_raise NotImplementedError,
+      ""#{Kernel}.srand should always be stubbed or mocked. "" +
+      ""This appears to be an unintended call.""
+
+    allow(RSpec::Core::Random).to receive(:srand).and_raise NotImplementedError,
+      ""#{RSpec::Core::Random}.srand should always be stubbed or mocked. "" +
+      ""This appears to be an unintended call.""
+
+    if defined?(::Random)
+      allow(::Random).to receive(:srand).and_raise NotImplementedError,
+        ""#{::Random}.srand should always be stubbed or mocked. "" +
+        ""This appears to be an unintended call.""
+    end
+  end
+end",Why did you feel the need to add these checks? I'm not sure what I think of them yet....,rb,1,1,0
"@@ -0,0 +1,15 @@
+require 'beaker/tasks/rake_task'
+
+Beaker::Tasks::RakeTask.new
+
+desc ""Run Beaker PE tests""
+Beaker::Tasks::RakeTask.new(""beaker:test:pe"",:hosts) do |t,args|
+  t.type = 'pe'
+  t.hosts = args[:hosts]
+end
+
+desc ""Run Beaker Git tests""
+Beaker::Tasks::RakeTask.new(""beaker:test:git"",:hosts) do |t,args|
+  t.type = 'git'
+  t.hosts = args[:hosts]
+end",The task created by this line doesn't seem to work. I get NameError: undefined local variable or method `failure_message` whenever I run it. It also doesn't seem to actually use the :hosts and :type argument that I pass to it whereas the tasks defined below seem to work fine.,rb,0,1,0
"@@ -36,7 +36,7 @@ feature ""Visitor"" do
 
   def expect_page_to_have_preview_cta
     expect(page.body).to include(
-      I18n.t(""watchables.preview.cta"", subscribe_url: subscribe_path).html_safe
+      I18n.t(""watchables.preview.cta"", subscribe_url: join_path).html_safe
     )
   end
 end",Put a comma after the last parameter of a multiline method call.,rb,1,1,1
"@@ -83,7 +83,7 @@ describe Query::Proposal::Search, elasticsearch: true do
       user = create(:user, client_slug: ""test"")
 
       proposal1 = create(:proposal, id: 199, requester: user)
-      test_client_request1 = create(:test_client_request, proposal: proposal1)
+      create(:test_client_request, proposal: proposal1)
       proposal1.reindex
 
       test_client_request2 = create(:test_client_request, project_title: ""199 rolly chairs for 1600 Penn Ave"")",why throw away the return value?,rb,1,1,1
"@@ -258,6 +258,10 @@ module Travis
           # information.
           dump_log(""out"")
 
+          # If a fold (like dump log) is the last command it is not folded, so
+          # add a dummy command
+          sh.cmd 'TRUE', echo: false
+
           # Check revdeps, if requested.
           if @devtools_installed and config[:r_check_revdep]
             sh.echo ""Checking reverse dependencies""","I don't think this works. If you want a command that does nothing, you can try `true`, `;`, or `:`.",rb,1,1,1
"@@ -1,5 +1,7 @@
 module Gsa18f
   class DashboardController < ApplicationController
+    before_action :check_disabled_client
+
     def index
       @rows = self.format_results(self.queryset)
     end","seems like this `check_disabled_client` check should be in `application_controller` and just selectively skipped? (I think the only page we want disabled clients to be able to see is the home page, right?) That would ensure that future controllers also use the check rather than needing to explicitly add it to each controller",rb,1,1,1
"@@ -0,0 +1,5 @@
+class AddUuiDtoProject < ActiveRecord::Migration
+  def change
+    add_column :projects, :uuid, :string
+  end
+end",This class name is a bit odd. Shouldn't it be `AddUuidToProject` (note capitalization),rb,1,1,1
"@@ -1,4 +1,7 @@
 class SubscribeOldChangesets < ActiveRecord::Migration[4.2]
+  class Changeset < ActiveRecord::Base
+  end
+
   def up
     Changeset.find_each do |changeset|
       changeset.subscribers << changeset.user unless changeset.subscribers.exists?(changeset.user.id)",I think this will fail if there are changesets in the database as the migration relies on the `subscribers` and `user` associations on the changeset.,rb,1,1,1
"@@ -120,8 +120,8 @@ describe Mongoid::Clients::Factory do
 
             let(:config) do
               {
-                default: { hosts: [ ""127.0.0.1:27017"" ], database: database_id },
-                secondary: { uri: ""mongodb://127.0.0.1:27017,127.0.0.1:27018/mongoid_test"" }
+                default: { hosts: [ ""127.0.0.1:30000"" ], database: database_id },
+                secondary: { uri: ""mongodb://127.0.0.1:30000,127.0.0.1:30001/mongoid_test"" }
               }
             end
 ","Because of the SDAM changes in the driver since the last release, this test broke when run with the master branch of the driver due to the host on localhost:27017 being removed (the warning said it was because it was a standalone and there were multiple seeds). Given that the tests don't actually need to do anything with the server, I figured it was easier to just change the ports to ones that we never actually run tests against.",rb,1,1,1
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -26,7 +26,7 @@ module Unix
         'puppetbin'        => '/opt/puppet/bin/puppet',
         'puppetbindir'     => '/opt/puppet/bin',
         'puppetsbindir'    => '/opt/puppet/sbin',
-        'systembindir'     => '/opt/puppet/bin',
+        'privatebindir'    => '/opt/puppet/bin',
         'puppetvardir'     => '/var/opt/lib/pe-puppet',
         'hieradatadir'     => '/var/lib/hiera',
         'hieraconf'        => '/etc/puppetlabs/puppet/hiera.yaml',","@kevpl I just noticed the PE default is wrong, it needs to be the same as AIO (/opt/puppetlabs/puppet/bin). Not an issue currently, but something we'll need to come back to.",rb,0,1,0
"@@ -25,8 +25,14 @@ module Bolt
     # hierarchy, falling back to the default if we reach the root.
     def self.find_boltdir(dir)
       dir = Pathname.new(dir)
-      if (dir + BOLTDIR_NAME).directory?
-        new(dir + BOLTDIR_NAME, 'embedded')
+      # allows for any case of Boltdir, BoltDir, boltdir, etc
+      # note: we're sorting the directories here so that we consistently pick the
+      #       same Boltdir between runs, and we always choose the lexicographical ""less""
+      #       Boltdir name rather than whatever the first name we run into as returned by
+      #       the filesystem
+      boltdirs = dir.children.sort.select { |c| c.directory? && c.basename.to_s.casecmp?(BOLTDIR_NAME) }
+      if !boltdirs.empty?
+        new(boltdirs.first, 'embedded')
       elsif (dir + 'bolt.yaml').file? || (dir + 'bolt-project.yaml').file?
         new(dir, 'local')
       elsif dir.root?",We should issue a warning and say which one we're using if more than one is found.,rb,1,1,1
"@@ -0,0 +1,19 @@
+class NameUnnamedRedactions < ActiveRecord::Migration[5.0]
+  def self.up
+  	# after titles are fixed we change the column so to not be null
+    change_column_null ""redactions"", ""title"", false
+    # gets each redaction
+    # sets redaction title equal to a string of the id if there is no title
+    Redaction.find_each do |redaction|
+      if redaction.title.empty?
+        redaction.title = redaction.id.to_s
+        redaction.save!
+      end
+    end
+  end
+
+  def self.down
+  	# for down-migration we allow title column to be null
+    change_column_null ""redactions"", ""title"", true
+  end
+end","I think you might need to fill in the titles first, and then change the column constraint afterwards.",rb,1,1,1
"@@ -33,13 +33,14 @@
     <div class=""panel-group"" id=""phases_accordion"" role=""tablist"">
       <!-- If template has phases-->
       <% if template_hash[:template][:phases].present? %>
+        <% i = 0 %>
         <% template_hash[:template][:phases].each do |phase_no, phase_hash| %>
           <% phase = phase_hash[:data] %>
             <div class=""panel panel-default"">
               <div class=""heading-button"" role=""button"" data-toggle=""collapse""
                    data-parent=""phases_accordion"" 
                    href=""#collapsePhase<%= phase.id %>""
-                   aria-expanded=""false"" 
+                   aria-expanded=""<%= i == 0 ? 'true' : 'false' %>"" 
                    aria-controls=""#collapsePhase<%= phase.id %>"">
                    
                 <div class=""panel-heading"" role=""tab"" id=""<%= ""headingPhase#{phase.id}"" %>"">","We could check for first instead of adding an extra variable and its counter ``` template_hash[:template][:phases].each do |o| aria-expanded=""<%= template_hash[:template][:phases].first == o ? 'true' : 'false' %>"" end",rb,1,1,1
"@@ -7,12 +7,13 @@ class PostsController < ApplicationController
   before_action :find_forum_and_topic_records, only: [:create]
 
   def index
-    @posts = Post.paginate(page: params[:page], per_page: 10)
+    all_posts = Post.all
+    @posts = all_posts.paginate(page: params[:page], per_page: 10)
   end
 
   def create
     @post = build_new_post
-    if verify_recaptcha(model: @post) && @post.save
+    if @post.save
       post_notification(@post)
       redirect_to topic_path(@topic)
     else",This looks better the previous way.,rb,1,1,0
"@@ -1,7 +1,7 @@
 require 'test_helper'
 
 class PersonTest < ActiveSupport::TestCase
-  before { Rails.cache }
+  before { Person::Cached.stubs(:count).returns(Person.count) }
 
   describe 'searchable_factor' do
     let(:person) { create(:account).person }",I thought we were going to remove the `Person::Cached` class based upon our decision to not implement caching in the ohloh-ui code at this time and that we would like to try relying on the Rails 4 Russian Doll Caching model of view fragments.,rb,1,1,1
"@@ -20,7 +20,7 @@ module RSpec
         # @example
         #    format_duration(1) #=>  ""1 minute 1 second""
         #    format_duration(135.14) #=> ""2 minutes 15.14 seconds""
-        def format_duration(duration)
+        def self.format_duration(duration)
           precision = case
                       when duration < 1;    SUB_SECOND_PRECISION
                       when duration < 120;  DEFAULT_PRECISION","Should these be module functions instead, so `Helpers` can still act like a module? ""Class"" methods on modules have always confused me.",rb,1,1,1
"@@ -98,7 +98,7 @@ class ProposalPolicy
 
   def pending_approval!
     check(self.pending_approver? || self.pending_delegate?,
-          ""A response has already been logged a response for this proposal"")
+          ""A response has already been logged for this proposal"")
   end
 
   def visible_proposals","would it be possible to do something like`""This proposal has already been approved by #{approver.email_address}""` ? are there situations other than an already approved proposal where someone would see this error msg?",rb,1,1,1
"@@ -45,7 +45,8 @@ public class Grid {
 
   public List<Node> getNodes() {
     return distributorStatus.get().getNodes().stream()
-      .map(summary -> new Node(summary.getNodeId(), summary.getUri(), summary.isUp(), summary.getMaxSessionCount()))
+      .map(summary -> new Node(summary.getNodeId(), summary.getUri(), summary.isUp(),
+                               summary.getMaxSessionCount(), summary.getStereotypes()))
       .collect(ImmutableList.toImmutableList());
   }
 ",Break things on to one parameter per line now.,rb,1,1,1
"@@ -91,6 +91,14 @@ module Bolt
       Logging.logger[:root].appenders.any?
     end
 
+    def self.stream
+      @stream
+    end
+
+    def self.stream=(stream)
+      @stream = stream
+    end
+
     # A helper to ensure the Logging library is always initialized with our
     # custom log levels before retrieving a Logger instance.
     def self.logger(name)","If `@stream` is set from `configure`, then we could probably just update this to be a single `stream?` method that can be called from the shell classes?",rb,1,1,1
"@@ -134,5 +134,9 @@ class UserRolesControllerTest < ActionController::TestCase
     end
     assert_redirected_to user_path(target_user.display_name)
     assert_equal ""The string `no_such_role' is not a valid role."", flash[:error]
+
+    # Revoking administrator role from current user should fail
+    post :revoke, :params => { :display_name => administrator_user.display_name, :role => ""administrator"" }
+    assert_redirected_to user_path(administrator_user.display_name)
   end
 end",Can we assert that the flash message is shown here... I think there some examples of doing it in other tests.,rb,1,1,1
"@@ -0,0 +1,17 @@
+require 'travis/build/appliances/base'
+
+module Travis
+  module Build
+    module Appliances
+      class NpmRegistry < Base
+        def apply
+          if data[:npm_registry]
+            sh.fold ""npm_registry"" do
+              sh.export 'NPM_CONFIG_REGISTRY', data[:npm_registry], echo: true
+            end
+          end
+        end
+      end
+    end
+  end
+end",This logic should be moved to `apply?`.,rb,0,1,1
"@@ -117,7 +117,7 @@ Puppet::Functions.create_function(:run_plan, Puppet::Functions::InternalFunction
         # undef/nil
         result = catch(:return) do
           scope.with_global_scope do |global_scope|
-            closure.call_by_name_with_scope(global_scope, params, true)
+            executor.run_plan(global_scope, closure, params)
           end
           nil
         end&.value",@McdonaldSeanp I think this will help you longterm too but heads up.,rb,0,1,0
"@@ -7,12 +7,14 @@ class Cart < ActiveRecord::Base
   has_many :approvals
   has_many :approval_users, through: :approvals, source: :user
   has_one :approval_group
+  has_many :user_roles, through: :approval_group
   has_one :api_token
   has_many :comments, as: :commentable
   has_many :properties, as: :hasproperties
 
   #TODO: after_save default status
   #TODO: validates_uniqueness_of :name
+  validates :flow, presence: true, inclusion: {in: ApprovalGroup::FLOWS}
 
 
   def update_approval_status","Consider adding a validation for flow on ApprovalGroup too. Looking ahead to building out the UI for adding an approval group, we would likely need to give the admins the ability to indicate it there.",rb,1,1,1
"@@ -8,7 +8,12 @@ module Blacklight
       # @param [Array<String>] options explicit spellcheck options to render
       def initialize(response:, options: nil)
         @response = response
-        @options = options || @response&.spelling&.words
+        @options = options
+        if @response&.spelling&.collation
+          @options = [@response.spelling.collation]
+        elsif @response&.spelling&.words
+          @options = response.spelling.words
+        end
       end
 
       def link_to_query(query)","There's a change in behavior here that I don't think is intentional: Prior to the PR, a passed options param will always provide the value of `@options`; here, either form of spelling suggestion will override it. Was this intentional?",rb,0,1,1
"@@ -20,7 +20,7 @@ class Coupon
   end
 
   def valid?
-    stripe_coupon.present?
+    stripe_coupon.present? && stripe_coupon.valid
   end
 
   private","Just to be sure, the `stripe_coupon` has the method `valid`, not `valid?`?",rb,1,1,1
"@@ -255,7 +255,7 @@ module Blacklight::UrlHelperBehavior
 
     # Delete any request params from facet-specific action, needed
     # to redir to index action properly. 
-    new_params.except! *Blacklight::Solr::FacetPaginator.request_keys.values
+    new_params.except! *blacklight_config.facet_paginator_class.request_keys.values
 
     new_params 
   end",Line is too long. [83/80],rb,1,1,1
"@@ -1,6 +1,6 @@
 FactoryGirl.define do
   factory :user do
-    client_slug { ENV['CLIENT_SLUG_DEFAULT'] || 'ncr' }
+    client_slug { ENV['CLIENT_SLUG_DEFAULT'] || nil }
     sequence(:email_address) {|n| ""user#{n}@example.com"" }
     sequence(:first_name) {|n| ""FirstName#{n}"" }
     sequence(:last_name) {|n| ""LastName#{n}"" }","maybe we should just set to `nil` rather than using env var? I haven't ever set it, so not sure what the use case for env var is.",rb,1,1,1
"@@ -526,6 +526,7 @@ module Bolt
     end
 
     def apply_manifest(code, targets, filename = nil, noop = false)
+      Puppet[:tasks] = false
       ast = pal.parse_manifest(code, filename)
 
       executor = Bolt::Executor.new(config.concurrency, analytics, noop)",Was this a bug?,rb,1,1,0
"@@ -0,0 +1,15 @@
+# frozen_string_literal: truer
+
+equire_relative 'test_helper'
+
+def setup
+  @tester = Faker::GratefulDead
+end
+
+def test_player
+  assert @tester.player.match(/\w/)
+end
+
+def test_song
+  assert @tester.song.match(/\w/)
+end",It should be `true` instead of `truer`.,rb,1,1,1
"@@ -27,10 +27,11 @@ class IdentifierPresenter
     return _(""None defined"") if id.new_record? || id.value.blank?
 
     without = id.value_without_scheme_prefix
-    return id.value unless without != id.value && !without.starts_with?(""http"")
+    prefix = with_scheme_name ? id.identifier_scheme.description + "": "" : ''
+    return prefix + id.value unless without != id.value && !without.starts_with?(""http"")
 
     ""<a href=\""#{id.value}\"" class=\""has-new-window-popup-info\""> "" \
-      ""#{with_scheme_name ? id.identifier_scheme.description : ''}: #{without}</a>""
+      ""#{prefix} #{without}</a>""
   end
 
   private",Looks like rubocop prefers double quotes for the final `''` here,rb,1,1,1
"@@ -20,9 +20,17 @@ module Mongoid
   # against the database.
   class Criteria
     include Enumerable
+
+    # @api private
+    alias :_enumerable_find :find
+
     include Contextual
     include Queryable
     include Findable
+
+    # @api private
+    alias :_findable_find :find
+
     include Inspectable
     include Includable
     include Marshalable",why not put the aliases in the `Findable` module (inside the `included do` block)?,rb,1,1,1
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -11,6 +11,10 @@ module ProductsHelper
     ""https://upcase.com/video_tutorials/21-intermediate-ruby-on-rails""
   end
 
+  def state_class_for(exercise)
+    exercise.status_for(current_user).state.parameterize
+  end
+
   def exercise_link(url, options = {}, &block)
     if current_user_has_access_to?(:exercises)
       link_to url, options, &block","This is going to run a lot of queries on the dashboard and products index; I'm not sure it will perform acceptably. When displaying the tooltips for trails, we'll have an `ExerciseWithProgress`, which will respond to `state`. One option would be to use this and define a default, empty `state` on `Exercise`. Thoughts?",rb,1,1,1
"@@ -0,0 +1,7 @@
+# frozen_string_literal: true
+# encoding: utf-8
+
+class Order
+  include Mongoid::Document
+  field :status, type: Mongoid::StringifiedSymbol
+end",Please add a newline a the end of file.,rb,1,1,1
"@@ -3,7 +3,7 @@ FactoryGirl.define do
 
   factory :api_token do
     access_token
-    step
+    step { create(:approval_step) }
     expires_at { Time.current + 7.days }
   end
 end",this is the actual fix?,rb,1,1,0
"@@ -34,5 +34,6 @@
     <%= if_administrator(:li) do %>
       <%= link_to t('diary_entry.diary_entry.hide_link'), hide_diary_entry_path(:display_name => diary_entry.user.display_name, :id => diary_entry.id), :method => :post, :data => { :confirm => t('diary_entry.diary_entry.confirm') } %>
     <% end %>
+
   </ul>
 </div>",The whole change for this file is this empty line. Is it right?,rb,1,1,1
"@@ -14,7 +14,7 @@ HTTP_ERRORS = [Timeout::Error,
                Net::HTTPHeaderSyntaxError,
                Net::ProtocolError]
 
-SMTP_SERVER_ERRORS = [TimeoutError,
+SMTP_SERVER_ERRORS = [Timeout::Error,
                       IOError,
                       Net::SMTPUnknownError,
                       Net::SMTPServerBusy,",Freeze mutable objects assigned to constants.,rb,1,1,0
"@@ -1,5 +1,11 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX - License - Identifier: Apache - 2.0
+# SPDX-License-Identifier: Apache-2.0
+
+# Purpose
+# s3-ruby-example-access-permissions.rb demonstrates how to set the access control list (ACL) for an
+# Amazon Simple Storage Solution (Amazon S3) bucket for public access.
+
+# snippet-start:[s3.ruby.s3-ruby-example-access-permissions]
 
 require 'aws-sdk-s3'
 require 'net/http'",Simple Storage **Service**,rb,0,0,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -1,5 +1,18 @@
 feature ""Approve a Gsa18F procurement"" do
   context ""when signed in as the approver"" do
+    context ""last step is completed"" do
+      it ""sends one email to the requester"" do
+        procurement.individual_steps.first.complete!
+        deliveries.clear
+
+        login_as(purchaser)
+        visit proposal_path(proposal)
+        click_on(""Mark as Purchased"")
+
+        expect(deliveries.length).to eq(1)
+      end
+    end
+
     it ""the step execution button is correctly marked"" do
       login_as(approver)
 ",Would it be useful to ensure it sent the message to the right person?,rb,1,1,1
"@@ -0,0 +1,13 @@
+<!-- We participate in the US government's analytics program. See the data at analytics.usa.gov. -->
+<script id=""_fed_an_ua_tag"" src=""https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js""></script>
+<!-- 18F analytics -->
+<script>
+  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
+  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
+  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
+  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
+
+  ga('create', 'UA-48605964-27', 'auto');
+  ga('set', 'anonymizeIp', true);
+  ga('send', 'pageview');
+</script>","Probably a good idea to set this as an environmental variable/setting, if only to allow us swap it out in different environments.",rb,1,1,1
"@@ -0,0 +1,7 @@
+class CompareRepositoriesController < ApplicationController
+  before_action :tool_context, only: :index
+
+  def chart
+    render json: RepositoryComparisionChart.build.to_json, layout: false
+  end
+end","Hey Alex, if RepositoryComparisonChart is a module why is it that line 5 does not fail if it wasn't included in this file?",rb,0,1,1
"@@ -1,4 +1,4 @@
-class ReplaceRegistrationLinkWithChargifyIdOnSections < ActiveRecord::Migration
+class ReplaceRegistrationLinkWithChargifyIdOnSections < ActiveRecord::Migration[4.2]
   def self.up
     remove_column :sections, :registration_link
     add_column :sections, :chargify_id, :string",Metrics/LineLength: Line is too long. [84/80],rb,1,1,1
"@@ -26,6 +26,7 @@ module Ncr
     before_validation :normalize_values
     before_update :record_changes
 
+    validates :amount, presence: true
     validates :cl_number, format: {
       with: /\ACL\d{7}\z/,
       message: ""must start with 'CL', followed by seven numbers""",spec for this? Looks like we don't have any validation specs in the spec file for this model -- would love to hear about why! Is there a philosophical opposition to specs for AR validations (I know many hold the view that they are not important because it's basically just double checking that you wrote a validation rather than testing behavior),rb,1,0,1
"@@ -41,6 +41,16 @@ describe RSpec do
     end
   end
 
+  describe "".current_example"" do
+    it ""sets the example being executed"" do
+      group = RSpec::Core::ExampleGroup.describe(""an example group"")
+      example = group.example(""an example"")
+
+      RSpec.current_example = example
+      expect(RSpec.current_example).to be(example)
+    end
+  end
+
   describe ""::reset"" do
     it ""resets the configuration and world objects"" do
       config_before_reset = RSpec.configuration",This spec seems to duplicate the one above (IMO) -- is there anything new being tested here?,rb,1,1,1
"@@ -318,4 +318,11 @@ public interface DriverCommand {
   // Mobile API
   String GET_NETWORK_CONNECTION = ""getNetworkConnection"";
   String SET_NETWORK_CONNECTION = ""setNetworkConnection"";
+
+  // Cast Media Router API
+  String GET_CAST_SINKS = ""getCastSinks"";
+  String SET_CAST_SINK_TO_USE = ""selectCastSink"";
+  String START_CAST_TAB_MIRRORING = ""startCastTabMirroring"";
+  String GET_CAST_ISSUE_MESSAGE = ""getCastIssueMessage"";  
+  String STOP_CASTING = ""stopCasting"";    
 }",These command names are specific to Chromium-based browsers. Please move to `ChromiumDriverCommand`,rb,1,1,1
"@@ -20,6 +20,7 @@ from selenium.common.exceptions import NoSuchFrameException
 from selenium.common.exceptions import StaleElementReferenceException
 from selenium.common.exceptions import WebDriverException
 from selenium.common.exceptions import NoAlertPresentException
+from selenium.common.exceptions import ElementNotVisibleException
 
 """"""
  * Canned ""Expected Conditions"" which are generally useful within webdriver",Is this an oversight for some code in the body?,rb,1,1,1
"@@ -28,11 +28,15 @@
 #  template_id                       :integer
 #  org_id                            :integer
 #  funder_id                         :integer
+#  grant_id                          :integer
+#  api_client_id                     :integer
 #
 # Indexes
 #
-#  index_plans_on_template_id  (template_id)
-#  index_plans_on_funder_id    (funder_id)
+#  index_plans_on_template_id   (template_id)
+#  index_plans_on_funder_id     (funder_id)
+#  index_plans_on_grant_id      (grant_id)
+#  index_plans_on_api_client_id (api_client_id)
 #
 # Foreign Keys
 #",We can do a pass through the code for all these TODO's after the Rails 5 migration. Thanks for keeping these up to date,rb,1,1,1
"@@ -4,6 +4,8 @@ class OrgsController < ApplicationController
 
   include OrgSelectable
 
+  skip_before_action :verify_authenticity_token, only: %w[search]
+
   after_action :verify_authorized, except: %w[
     shibboleth_ds shibboleth_ds_passthru search
   ]",switch to pass auth token,rb,1,1,0
"@@ -82,7 +82,7 @@ module Mongoid
     def extract_embedded_attributes(attributes)
       atomic_position.split(""."").inject(attributes) do |attrs, part|
         attrs = attrs[part =~ /\d/ ? part.to_i : part]
-        attrs
+        attrs || {}
       end
     end
   end","I don't think this is correct. If there are not attributes at the specified path (`atomic_position`), this method should probably return nil and the docstring should be updated to reflect that.",rb,1,1,1
"@@ -53,6 +53,7 @@ class Topic < ActiveRecord::Base
       raw_trail_map = http.body_str
       self.trail_map = JSON.parse(raw_trail_map)
       self.summary = trail_map['description']
+      self.name = trail_map['name']
       if trail_map['prerequisites'].present?
         trail_map['prerequisites'].each do |related|
           self.related_topics << Topic.find_by_slug(related)",We should clean up this method by using the extract method pattern.,rb,1,1,1
"@@ -4,12 +4,13 @@ module Travis
       class Test
         class Scala < Test
           class Config < Hashr
-            define :scala => '2.9.1'
+            define :scala => 'undefined'
           end
 
           def setup
             super
-            shell.echo(""Using Scala #{config.scala}"")
+            # Tell what version of Scala is expected (or display 'undefined' if managed by build tool)
+            shell.echo(""Expect to run tests with Scala version '#{config.scala}'"")
           end
 
           def install",Should we find a better naming ? I think it's not so bad...,rb,1,1,1
"@@ -18,6 +18,8 @@ module RSpec::Core
       @failed_examples = []
       @pending_examples = []
       @duration = @start = @load_time = nil
+      @profiler = Profiler.new
+      register_listener @profiler, *Profiler::NOTIFICATIONS
     end
 
     # @private",:+1: I much prefer having this owned by the reporter rather than config.,rb,1,1,1
"@@ -1,9 +1,13 @@
 class ProductsController < ApplicationController
   def index
-    @courses = Course.only_public.by_position
+    @courses = Course.only_public.by_position.in_person
+    @online_courses = Course.only_public.by_position.online
+    # This @workshops line can be removed on 2013-01-16, when Product.workshops
+    # will be empty and all online workshops will be in Course. Remember to edit
+    # index.html.erb and remove @workshops there, too.
+    @workshops = Product.workshops.active.ordered
     @books = Product.books.active.ordered
     @videos = Product.videos.active.ordered
-    @workshops = Product.workshops.active.ordered
   end
 
   def show",Should we have integration coverage for this functionality?,rb,1,1,1
"@@ -0,0 +1,5 @@
+package org.openqa.selenium.grid.session.remote;
+
+public class SessionTest {
+
+}",And another empty test. Please remove until there's content.,rb,1,1,1
"@@ -450,6 +450,14 @@ class Plan < ActiveRecord::Base
     end
   end
 
+  ## Update plan identifier.
+  #
+  # Returns Boolean
+  def add_identifier!(identifier)
+    self.update(identifier: identifier)
+    save!
+  end
+
   ##
   # Whether or not the plan is associated with users other than the creator
   #",I like this being a function on the plan model so we can update it's behavior if we decide to go with some kind of identifier other than the plan's ID,rb,1,1,1
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -1,7 +1,7 @@
 Puppet::DataTypes.create_type('Target') do
   interface <<-PUPPET
     attributes => {
-      host => String[1],
+      uri => String[1],
       options => { type => Hash[String[1], Data], value => {} }
     }
     PUPPET",I don't think we have any tests that use this.,rb,0,1,1
"@@ -227,14 +227,14 @@ module RSpec
               rescue Pending::SkipDeclaredInExample
                 # no-op, required metadata has already been set by the `skip`
                 # method.
-              rescue Exception => e
+              rescue AllExceptionsExcludingDangerousOnesOnRubiesThatAllowIt => e
                 set_exception(e)
               ensure
                 run_after_example
               end
             end
           end
-        rescue Exception => e
+        rescue Support::AllExceptionsExceptOnesWeMustNotRescue => e
           set_exception(e)
         ensure
           @example_group_instance = nil # if you love something... let it go",Namespaced here but not above?,rb,0,1,1
"@@ -14,12 +14,12 @@ module CommunicartMailerHelper
     end
   end
 
-  def approve_all_url(approval)
+  def approve_all_url(approval, action = 'approve')
     approval_response_url(
       cart_id: approval.cart_id,
       user_id: approval.user_id,
       cch: approval.api_token.access_token,
-      approver_action: 'approve'
+      approver_action: action
     )
   end
 end","Last thing! Can we update the method name, since it's not always for approvals?",rb,1,1,1
"@@ -2,6 +2,7 @@
 
 require 'pathname'
 require 'bolt/pal'
+require 'bolt/config'
 
 module Bolt
   class Project","This circular dependency seems weird, but I don't think we can remove the project dependency from config and I'm not sure where else to put `system_path` that makes sense...",rb,1,1,1
"@@ -161,6 +161,17 @@ module Beaker
       FileUtils.rm_rf(@vagrant_path)
     end
 
+    #snapshotting depends on https://github.com/scalefactory/vagrant-multiprovider-snap
+    def take_snapshot(hostname,snapshot_name)
+      @logger.debug ""Creating snapshot of #{hostname}""
+      vagrant_cmd(""snap take #{hostname} --name=#{snapshot_name}"")
+    end
+
+    def restore_snapshot(hostname,snapshot_name)
+      @logger.debug ""Restoring snapshot of #{hostname}""
+      vagrant_cmd(""snap rollback #{hostname} --name=#{snapshot_name}"")
+    end
+
     def vagrant_cmd(args)
       Dir.chdir(@vagrant_path) do
         exit_status = 1","I know that the rest of this file isn't properly yard doc-ed, but please include yard docs for any new methods.",rb,1,1,1
"@@ -0,0 +1,15 @@
+class HelpController < ApplicationController
+  layout 'help'
+
+  def index
+    dir = Rails.root.join('app', 'views', 'help', '*.md')
+    files = Dir.glob(dir)
+    @pages = files.map{|file| File.basename(file, '.md') }.sort
+  end
+
+  def show
+    page = params[:id]
+    # TODO make sure this isn't a security hole
+    render ""help/#{page}""
+  end
+end",Probably best to use a whitelist. Maybe pull out the listing logic in `index` into a shared function (or class var) to get such a list. Only render if `page` is a member of that list (404 otherwise)?,rb,1,1,1
"@@ -0,0 +1,17 @@
+require ""rails_helper""
+
+feature ""Subscriber switches to discounted subscription"" do
+  scenario ""by accepting alternate offer"" do
+    discounted_annual_plan = create(:discounted_annual_plan)
+
+    sign_in_as_user_with_subscription
+    visit my_account_path
+    click_link I18n.t(""subscriptions.cancel"")
+    click_button I18n.t(""subscriptions.accept_discounted_annual_subscription"")
+
+    expect(page).to(
+      have_content(I18n.t(""subscriptions.flashes.discount.success""))
+    )
+    expect(@current_user.reload.plan).to eq discounted_annual_plan
+  end
+end",Line is too long. [82/80],rb,1,1,1
"@@ -171,7 +171,9 @@ def verify_no_deny_list_words(file_contents, file_location):
 
 def verify_no_secret_keys(file_contents, file_location):
     """"""Verify the file does not contain 20- or 40- length character strings,
-    which may be secret keys. Allow strings in the allow list.""""""
+    which may be secret keys. Allow strings in the allow list in
+    https://github.com/awsdocs/aws-doc-sdk-examples/blob/master/scripts/checkin_tests.py,
+    and in and in src/allow.list.xml in the AWSDocsChecklistCodeSampleCatalog GitFarm repo.""""""
     error_count = 0
     twenties = re.findall(""[^A-Z0-9][A][ACGIKNPRS][A-Z]{2}[A-Z0-9]{16}[^A-Z0-9]"",
                           file_contents)","""and in and in"" -> ""and in"" (make same change to all occurrences in this doc).",rb,1,1,1
"@@ -94,6 +94,12 @@ module Beaker
             @cmd_options[:debug_errors] = bool
           end
 
+          opts.on '--exec-manual-tests',
+                  'Execute manual tests',
+                  '(default: false)' do |bool|
+            @cmd_options[:exec_manual_tests] = bool
+          end
+
           opts.on '--root-keys',
                   'Install puppetlabs pubkeys for superuser',
                   '(default: false)' do |bool|","In the current implementation of subcommands, this option will need to be copied over the `beaker test run` group.",rb,1,1,1
"@@ -65,10 +65,6 @@ class Product < ActiveRecord::Base
     type.underscore
   end
 
-  def fulfilled_with_github?
-    github_team.present?
-  end
-
   def to_aside_partial
     ""#{self.class.name.underscore.pluralize}/aside""
   end","This was actually unused on `master`, so I removed it instead of fixing it with this change.",rb,0,1,0
"@@ -16,6 +16,10 @@ class Topic < ActiveRecord::Base
 
   friendly_id :name, use: [:slugged, :finders]
 
+  def self.explorable
+    where(explorable: true)
+  end
+
   def to_s
     name
   end","I don't see this mentioned in the PR description. What does ""explorable"" mean?",rb,0,1,1
"@@ -8,6 +8,7 @@ class UserRolesController < ApplicationController
   before_action :require_valid_role
   before_action :not_in_role, :only => [:grant]
   before_action :in_role, :only => [:revoke]
+  before_action :not_revoke_admin_current_user
 
   def grant
     @this_user.roles.create(:role => @role, :granter => current_user)",This should only be applied to the `revoke` method but in fact this is so specific that I don't think there's any point making it a filter - the point of filters is that they can be shared across multiple methods but these even has the method name in it's name so clearly it only ever makes sense to apply it to revoke. As such I would just put the logic in the `revoke` method and get rid of the filter.,rb,1,1,1
"@@ -0,0 +1,13 @@
+require 'travis/build/appliances/base'
+
+module Travis
+  module Build
+    module Appliances
+      class AddGithubHostKey < Base
+        def apply
+          sh.raw %(grep '^github\\.com,' ~/.ssh/known_hosts >&/dev/null || echo 'github.com,204.232.175.90 ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==' >> ~/.ssh/known_hosts)
+        end
+      end
+    end
+  end
+end",Can you use `ssh-keyscan` instead of a hardcoded key?,rb,1,1,1
"@@ -57,8 +57,7 @@ class TestFakerInternetOmniauth < Test::Unit::TestCase
     auth                  = @tester.google(name: custom_name)
     info                  = auth[:info]
     extra_raw_info        = auth[:extra][:raw_info]
-    id_info               = auth[:id_info]
-
+    
     assert_instance_of String, info[:name]
     assert_equal 2, word_count(info[:name])
     assert_equal custom_name, info[:name]",These variables are not being used. Why are we still declaring them? Copy and   again?,rb,1,1,1
"@@ -0,0 +1,19 @@
+require_relative ""../../../db/chores/roles_conversion""
+
+describe RolesConversion do
+  describe ""#ncr_budget_approvers"" do
+    it ""should convert NCR budget approvers"" do
+      expect {
+        RolesConversion.new.ncr_budget_approvers
+      }.to_not change { User.count }
+    end
+
+    it ""should be idempotent based on client_slug+role"" do
+      with_env_var('NCR_BA61_TIER1_BUDGET_MAILBOX', 'someoneelse@example.com') do
+        expect {
+          RolesConversion.new.ncr_budget_approvers
+        }.to_not change { User.count }
+      end
+    end
+  end
+end",this seems brittle. what happens when we (inevitably) reorganize the file structure of the tests?,rb,1,1,1
"@@ -20,13 +20,15 @@ Workshops::Application.routes.draw do
     resource :team, only: :edit
   end
 
-  get '/pages/tmux' => redirect('/products/4-humans-present-tmux')
+  get '/pages/tmux' => redirect('https://www.youtube.com/watch?v=CKC8Ph-s2F4')
 
   if Rails.env.staging? || Rails.env.production?
     get '/products/:id' => redirect('/workshops/18-test-driven-rails'),
       constraints: { id: /(10|12).*/ }
     get '/products/:id' => redirect('/workshops/19-design-for-developers'),
       constraints: { id: /(9|11).*/ }
+    get '/products/:id' => redirect('https://www.youtube.com/watch?v=CKC8Ph-s2F4'),
+      constraints: { id: /(4).*/ }
     get '/products/14' => redirect('/prime')
     get '/products/14-prime' => redirect('/prime')
   end",Align the elements of a hash literal if they span more than one line.,rb,1,1,1
"@@ -2,7 +2,7 @@
   tool_name = Rails.configuration.branding[:application][:name]
   link = accept_invitation_url(@resource, :invitation_token => @token)
   helpdesk_email = Rails.configuration.branding[:organisation][:helpdesk_email]
-  contact_us_url = Rails.configuration.branding[:organisation][:contact_us_url] || contact_us_url
+  contact_us = (Rails.configuration.branding[:organisation][:contact_us_url] || contact_us_url)
   email_subject = _('Query or feedback related to %{tool_name}') %{ :tool_name => tool_name }
 %>
 <% FastGettext.with_locale FastGettext.default_locale do %>","thanks for changing it, the rename is for sure safer!",rb,1,1,0
"@@ -27,7 +27,7 @@ describe 'episodes/index.xml.builder' do
     end
 
     it 'has an updated date of the most recently published episode' do
-      @xml.css('channel pubDate').first.text.should == 1.day.ago.xmlschema.to_s
+      @xml.css('channel pubDate').first.text.should == 1.day.ago.to_s(:rfc822)
     end
 
     it 'includes both episodes' do",Its unfortunate that the previous tests didn't catch the incorrect format because we're just testing against itself. This change has the same problem. Do you think it'd be better to actually check the string has the right format more manually?,rb,1,1,1
"@@ -6,6 +6,15 @@ RSpec.describe RSpec::Core::Formatters::BaseFormatter do
   let(:output)    { StringIO.new }
   let(:formatter) { RSpec::Core::Formatters::BaseFormatter.new(output) }
 
+  describe '#notifications' do
+    it 'knows which notifications it responds to' do
+      expect(formatter.notifications).to eq([
+        :start, :example_group_started, :example_started, :example_pending,
+        :example_failed, :dump_summary, :close
+      ])
+    end
+  end
+
   describe ""read_failed_line"" do
     it ""deals gracefully with a heterogeneous language stack trace"" do
       exception = double(:Exception, :backtrace => [",This exact list seems to make for a brittle spec. What value do you find in listing them all out here? It's duplicating what's already in the `notifications` method...,rb,1,1,1
"@@ -146,7 +146,7 @@ module RSpec::Core
       # Returns the message generated for this failure line by line.
       #
       # @return [Array(String)] The example failure message
-      def message_lines
+      def message_lines(default_color_proc=lambda {|x| x })
         @lines ||=
           begin
             lines = [""Failure/Error: #{read_failed_line.strip}""]",This seems more convoluted then what you had before :(. @JonRowe -- can you suggest a way to do this that you'd be satisfied with?,rb,0,1,0
"@@ -13,6 +13,7 @@ module Beaker
 
       aws
     }
+    let( :options ) { make_opts.merge({ 'logger' => double().as_null_object }) }
     let(:amispec) {{
       ""centos-5-x86-64-west"" => {
         :image => {:pe => ""ami-sekrit1""},","Your spacing style differs from the rest of the file, see the ( :options ) you have here. I can see it in other places in the patch.",rb,0,1,1
"@@ -4,7 +4,7 @@ MYUSA_URL = ENV['MYUSA_URL'] || 'https://alpha.my.usa.gov'
 
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :myusa, MYUSA_KEY, MYUSA_SECRET, {
-    scope: 'profile.email',
+    scope: 'profile.email profile.first_name profile.last_name',
     client_options: {
       site: MYUSA_URL,
       token_url: ""/oauth/authorize""",That Was Easy:tm:,rb,0,1,0
"@@ -110,7 +110,7 @@ describe RSpec::Core::Formatters::BaseTextFormatter do
     context 'for #share_examples_for' do
       it 'outputs the name and location' do
 
-        share_examples_for 'foo bar' do
+        group.share_examples_for 'foo bar' do
           it(""example name"") { expect(""this"").to eq(""that"") }
         end
 ",Why the need to change from `share_examples_for` to `group.share_examples_for` here and elsewhere? It suggests that you've made this much more of a breaking change...,rb,1,1,1
"@@ -17,7 +17,7 @@ class ManagersControllerTest < ActionController::TestCase
     login_as accounts(:admin)
     get :index, project_id: @proj.to_param
     must_respond_with :success
-    assert_tag tag: 'a', attributes: { class: 'btn btn-primary' }
+    must_select 'a.btn.btn-primary'
     assert_select '.col-md-4 a.btn.btn-primary', text: 'I manage this project on Open Hub'
   end
 ",assert_tag is missing. Must switch to assert_select syntax.,rb,1,1,1
"@@ -84,9 +84,12 @@ module Travis
 
           def submodules
             self.if '-f .gitmodules' do
+              if config[:git][:submodules_depth]
+                depth_opt = "" --depth=#{config[:git][:submodules_depth]}""
+              end
               cmd 'echo -e ""Host github.com\n\tStrictHostKeyChecking no\n"" >> ~/.ssh/config', echo: false
               cmd 'git submodule init', fold: ""git.#{next_git_fold_number}""
-              cmd 'git submodule update', assert: true, fold: ""git.#{next_git_fold_number}"", retry: true
+              cmd ""git submodule update #{depth_opt}"", assert: true, fold: ""git.#{next_git_fold_number}"", retry: true
             end
           end
 ",won't this explode if `depth_opt` isn't set?,rb,1,1,1
"@@ -4,3 +4,5 @@
 
 <%= t(""mailer.cancelation_mailer.cta"") %>
 <%= proposal_url(@proposal) %>
+
+<%= t(""mailer.footer"", feedback_url: feedback_url) %>",Just to make sure - This is a template that needs a second pass right? The footer is a part of the actual base template again.,rb,1,1,1
"@@ -1,6 +1,8 @@
 module EnvironmentSpecHelper
   # @todo rewrite using with_env_vars
   def with_18f_procurement_env_variables
+    ENV['DISABLE_SANDBOX_WARNING'] = 'true'
+
     old_approver_email = ENV['GSA18F_APPROVER_EMAIL']
     old_purchaser_email = ENV['GSA18F_PURCHASER_EMAIL']
 ","I know you were just following what the rest of the rest of the method is doing, but mind converting all of them to use `with_env_vars`?",rb,1,1,1
"@@ -201,6 +201,9 @@ r lw(\n(.lu*75u/100u).'
         result << %(.sp
 #{counter}. #{manify terms.map {|dt| dt.text }.join ' '}
 .RS 4)
+      when 'horizontal'
+        result << %(.TP
+#{manify terms.map {|dt| dt.text }.join(', '), whitespace: :normalize})
       else
         result << %(.sp
 #{manify terms.map {|dt| dt.text }.join(', '), whitespace: :normalize}",I tried this and it doesn't seem to have any effect. Can you clarify how the TP macro works?,rb,1,1,1
"@@ -544,7 +544,7 @@ module RSpec
       def reporter
         @reporter ||= begin
                         add_formatter('progress') if formatters.empty?
-                        add_formatter(RSpec::Core::Formatters::DeprecationFormatter, deprecation_stream, output_stream)
+                        formatters << RSpec::Core::Formatters::DeprecationFormatter[deprecation_stream, output_stream]
                         Reporter.new(*formatters)
                       end
       end",Wait what are the `[` brackets doing here?,rb,1,1,1
"@@ -1,7 +1,5 @@
 class Exercise < ActiveRecord::Base
-  has_many :classifications, as: :classifiable, dependent: :destroy
   has_many :statuses, as: :completeable, dependent: :destroy
-  has_many :topics, through: :classifications
   has_one :trail, through: :step, as: :completeables
   has_one :step, dependent: :destroy, as: :completeable
 ",Should we have a migration to delete classification data for exercises? Is there any?,rb,1,1,1
"@@ -322,9 +322,13 @@ HELP
 
     def execute_plan(options)
       Bolt.config = options
-      result = run_plan(options[:object],
-                        options[:task_options],
-                        options[:modules])
+      begin
+        result = run_plan(options[:object],
+                          options[:task_options],
+                          options[:modules])
+      rescue Puppet::Error
+        raise Bolt::CLIError, ""Exiting because of an error in Puppet code""
+      end
       puts result
     end
 ",if you raise Bolt::CLIError here it will also set a failure exit code,rb,1,1,1
"@@ -0,0 +1,18 @@
+#!/usr/bin/env ruby
+# frozen_string_literal: true
+
+def facter_executable
+  if ENV.key? 'Path'
+    ENV['Path'].split(';').each do |p|
+      if p =~ /Puppet\\bin\\?$/
+        return File.join(p, 'facter')
+      end
+    end
+    'C:\Program Files\Puppet Labs\Puppet\bin\facter'
+  else
+    '/opt/puppetlabs/puppet/bin/facter'
+  end
+end
+
+# Delegate to facter
+exec(facter_executable, '--json')","I want to double check this works, but this all makes sense to me.",rb,1,1,1
"@@ -509,7 +509,8 @@ module Blacklight::SolrHelper
     # override any field-specific default in the solr request handler. 
     solr_params[:""f.#{facet_field}.facet.limit""]  = limit + 1
     solr_params[:""f.#{facet_field}.facet.offset""] = ( input.fetch(Blacklight::Solr::FacetPaginator.request_keys[:page] , 1).to_i - 1 ) * ( limit )
-    solr_params[:""f.#{facet_field}.facet.sort""] = input[  Blacklight::Solr::FacetPaginator.request_keys[:sort] ] if  input[  Blacklight::Solr::FacetPaginator.request_keys[:sort] ]   
+    solr_params[:""f.#{facet_field}.facet.sort""] = input[  Blacklight::Solr::FacetPaginator.request_keys[:sort] ] if  input[  Blacklight::Solr::FacetPaginator.request_keys[:sort] ]
+    solr_params[:""f.#{facet_field}.facet.prefix""] = input.fetch(Blacklight::Solr::FacetPaginator.request_keys[:prefix] , """") 
     solr_params[:rows] = 0
 
     return solr_params","I think it'd be better not to send the facet.prefix at all, if no prefix is required (although I supposed solr probably checks if the string is null or empty when applying defaults?)",rb,1,1,1
"@@ -163,8 +163,10 @@ module Blacklight::FacetsHelperBehavior
   # @option options [Array<String>]  an array of classes to add to count span.
   # @return [String]
   def render_facet_count(num, options = {})
-    classes = (options[:classes] || []) << ""facet-count""
-    content_tag(""span"", t('blacklight.search.facets.count', :number => number_with_delimiter(num)), :class => classes)
+    classes = (options[:classes] || [])
+    content_tag(""div"", :class => ""facet-count"") do
+      content_tag(""span"", t('blacklight.search.facets.count', :number => number_with_delimiter(num)), :class => classes)
+    end
   end
   
   ##",What benefit does the new `div` give us?,rb,1,1,1
"@@ -1,5 +1,5 @@
 # Load the Rails application.
-require File.expand_path('../application', __FILE__)
+require_relative 'application'
 
 # Initialize the Rails application.
-Upcase::Application.initialize!
+Rails.application.initialize!",Style/StringLiterals: Prefer double-quoted strings unless you need single quotes to avoid extra backslashes for escaping.,rb,0,1,1
"@@ -1,13 +1,13 @@
 class Loader
   def self.import_articles_and_topics(posts)
     posts.each do |post|
+      next if post[:tags].include?(""this week in open source"")
       article = Article.find_or_initialize_by_title_and_published_on(post[:title],post[:published_at])
       unless article.persisted?
         article.body_html = post[:body_html]
         article.tumblr_url = post[:tumblr_url]
         article.save!
         post[:tags].each do |tag|
-          puts tag.downcase
           topic = Topic.find_by_slug(tag.downcase.parameterize)
           if topic.nil?
             topic = Topic.new",Can we make this more generic and create an array of potential tags to be excluded from the import? There will be more.,rb,1,1,1
"@@ -0,0 +1,13 @@
+ActiveAdmin.register ScheduledReport do
+  permit_params :name, :report_id, :frequency, :user_id
+
+  form do |f|
+    f.inputs ""Scheduled Report"" do
+      f.input :name
+      f.input :report
+      f.input :user
+      f.input :frequency, as: :select, collection: [""daily"", ""weekly"", ""monthly""]
+    end
+    f.actions
+  end
+end",should we clarify in the UI when each of these types of reports is sent out?,rb,1,1,1
"@@ -64,6 +64,19 @@ describe ""when running a plan that manipulates an execution result"", ssh: true d
       end
     end
 
+    context 'with $future flag' do
+      it 'exposes `status` method for result and renames `result` to `value`' do
+        with_tempfile_containing('conf', { future: true }.to_json) do |conf|
+          params = { nodes: uri }.to_json
+          additional_flags = config_flags + ['--configfile', conf.path.to_s]
+          result = run_cli(['plan', 'run', 'results::test_result', ""--params"", params] + additional_flags)
+          expect(@log_output.readlines)
+            .to include(""NOTICE  Puppet : Result status: success\n"")
+          expect(JSON.parse(result).first).to include('value')
+        end
+      end
+    end
+
     it 'exposes errrors for results' do
       params = { target: uri }.to_json
       output = run_cli(['plan', 'run', 'results::test_error', ""--params"", params] + config_flags)",We should update run_cli to unset `$future`,rb,1,1,1
"@@ -0,0 +1,17 @@
+module Blacklight
+  module Rendering
+    class Microdata < AbstractStep
+      include ActionView::Helpers::TagHelper
+      def render
+        return next_step(values) unless config.itemprop
+        next_step(values.map { |x| itemprop(x, config.itemprop) })
+      end
+
+      private
+
+        def itemprop(val, itemprop)
+          content_tag :span, val, itemprop: itemprop
+        end
+    end
+  end
+end",2 trailing blank lines detected.,rb,1,1,0
"@@ -378,6 +378,18 @@ describe RSpec::Core::ConfigurationOptions, :isolated_directory => true, :isolat
       expect(parse_options[:formatters]).to eq([['local']])
     end
 
+    it ""parses options file correctly if erb code has trimming options"" do
+      File.open(""./.rspec"", ""w"") do |f|
+        f << ""<% if 1 == 1 -%>\n""
+        f << ""--format local\n""
+        f << ""<%- end %>\n""
+      end
+
+      expect do
+        expect(parse_options[:formatters]).to eq([['local']])
+      end.to_not raise_error(SyntaxError)
+    end
+
     context ""with custom options file"" do
       it ""ignores project and global options files"" do
         File.open(""./.rspec"", ""w"") {|f| f << ""--format project""}","`if 1 == 1` seems like a convulated way to have an `if true` conditional...any reason not to just use `if true`? That more clearly states the intention, I think.",rb,1,1,1
"@@ -40,6 +40,9 @@ module Travis
             sh.cmd 'CURL_USER_AGENT=""Travis-CI $(curl --version | head -n 1)""'
             case config[:os]
             when 'linux'
+              if config[:julia] == 'nightly' && config[:arch] == 'arm64'
+                sh.failure 'Nightly Julia binaries are not available for AArch64'
+              end
               sh.cmd 'mkdir -p ~/julia'
               sh.cmd %Q{curl -A ""$CURL_USER_AGENT"" -s -L --retry 7 '#{julia_url}' } \
                        '| tar -C ~/julia -x -z --strip-components=1 -f -'",Is this a typo?,rb,1,1,0
"@@ -327,6 +327,16 @@ class FirefoxProfile(object):
                     rc.append(node.data)
             return ''.join(rc).strip()
 
+        def parse_manifest_json(content):
+            """"""Extracts the details from the contents of a WebExtensions `manifest.json` file.""""""
+            manifest = json.loads(content)
+            return {
+                'id': manifest['applications']['gecko']['id'],
+                'version': manifest['version'],
+                'name': manifest['version'],
+                'unpack': False,
+            }
+
         if not os.path.exists(addon_path):
             raise IOError('Add-on path does not exist: %s' % addon_path)
 ",The id is not mandatory for web extensions. Could you update this to support a web extension without an id?,rb,1,1,1
"@@ -33,6 +33,7 @@ module Travis
           # easier to find and our `git clone`'d libraries are found by the
           # `go` commands.
           set 'GOPATH', ""#{HOME_DIR}/gopath:$GOPATH""
+          set 'PATH', ""$PATH:$GOPATH/bin""
           cmd ""mkdir -p #{HOME_DIR}/gopath/src/#{data.source_host}/#{data.slug}"", assert: false, timing: false
           cmd ""rsync -az ${TRAVIS_BUILD_DIR}/ #{HOME_DIR}/gopath/src/#{data.source_host}/#{data.slug}/"", assert: false, timing: false
           set ""TRAVIS_BUILD_DIR"", ""#{HOME_DIR}/gopath/src/#{data.source_host}/#{data.slug}""",does GVM do this for us?,rb,1,1,1
"@@ -9,10 +9,15 @@ FactoryGirl.define do
     rwa_number ""R1234567"" # TODO remove, since it's not applicable for BA61
     org_code Ncr::Organization.all[0].to_s
     project_title ""NCR Name""
+    sequence(:approving_official_email) {|n| ""approver#{User.count}@some-cartoon-show.com"" }
     association :proposal, flow: 'linear'
 
     trait :with_approvers do
+      # TODO use wo.setup_approvals_and_observers instead
       association :proposal, :with_serial_approvers, flow: 'linear'
+      after :create do |wo|
+        wo.approving_official_email = wo.approving_official.email_address
+      end
     end
 
     trait :is_emergency do",PT story for this?,rb,0,0,0
"@@ -95,6 +95,16 @@ module Rails
         end
       end
 
+      # Expose database runtime to controller for logging.
+      initializer ""mongoid.log_runtime"" do
+        require ""mongoid/railties/controller_runtime""
+        ActiveSupport.on_load(:action_controller) do
+          include ::Mongoid::Railties::ControllerRuntime
+        end
+      end
+
+
+
       config.after_initialize do
         # Unicorn clears the START_CTX when a worker is forked, so if we have
         # data in START_CTX then we know we're being preloaded. Unicorn does",:scissors: empty spaces please.,rb,1,0,1
"@@ -40,7 +40,7 @@ public class BazelBuild {
     if (target == null || """".equals(target)) {
       throw new IllegalStateException(""No targets specified"");
     }
-    log.info(""\nBuilding "" + target + "" ..."");
+    log.finest(""\nBuilding "" + target + "" ..."");
 
     ImmutableList.Builder<String> builder = ImmutableList.builder();
     builder.add(""bazel"", ""build"", target);",This is to let people know that the tooling is doing something during a build. Please leave.,rb,1,1,1
"@@ -27,7 +27,7 @@ import org.openqa.selenium.internal.Locatable;
  */
 public abstract class SingleKeyAction extends KeysRelatedAction {
   protected final Keys key;
-  private static final Keys[] MODIFIER_KEYS = {Keys.SHIFT, Keys.CONTROL, Keys.ALT};
+  private static final Keys[] MODIFIER_KEYS = {Keys.SHIFT, Keys.CONTROL, Keys.ALT, Keys.META, Keys.COMMAND, Keys.LEFT_ALT, Keys.LEFT_CONTROL, Keys.LEFT_SHIFT};
 
   protected SingleKeyAction(Keyboard keyboard, Mouse mouse, Keys key) {
     this(keyboard, mouse, null, key);","LEFT_ALT, LEFT_CONTROL, and LEFT_SHIFT should already be aliases. META could be an alias for ALT but probably isn't yet.",rb,1,1,1
"@@ -201,7 +201,9 @@ module RSpec
         attr_reader :example
 
         Example.public_instance_methods(false).each do |name|
-          define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          unless name.to_sym == :run
+            define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          end
         end
 
         Proc.public_instance_methods(false).each do |name|","I tend to prefer using a `next` guard clause, but that's just subjective preference :). Not a merge blocker.",rb,0,1,0
"@@ -449,7 +449,11 @@ module Beaker
             if host.is_pe?
               bounce_service( host, 'pe-httpd' )
             else
-              stop_puppet_from_source_on( host ) if puppet_master_started
+              if puppet_master_started
+                stop_puppet_from_source_on( host )
+              else
+                dump_puppet_log(host)
+              end
             end
 
           rescue Exception => teardown_exception",If I understand this correctly `puppet_master_started` won't be set if backing up the puppet.conf or laying down the new puppet.conf errors and so in those cases there will always be a `teardown_exception` of `NoMethodError`. Does that seem correct? I think we should probably initialize `puppet_master_started` to `false` before the begin block if my reading of this is correct.,rb,1,1,1
"@@ -0,0 +1,14 @@
+MAIL_SETTINGS = {
+  :address        => 'smtp.sendgrid.net',
+  :port           => '587',
+  :authentication => :plain,
+  :user_name      => ENV['SENDGRID_USERNAME'],
+  :password       => ENV['SENDGRID_PASSWORD'],
+  :domain         => 'heroku.com'
+}
+
+if ENV[""EMAIL_RECIPIENTS""]
+  Mail.register_interceptor(
+    RecipientInterceptor.new(ENV.fetch(""EMAIL_RECIPIENTS""))
+  )
+end",Put a comma after the last parameter of a multiline method call.,rb,1,1,1
"@@ -72,7 +72,8 @@ RSpec.describe ""FailedExampleNotification"" do
     let(:exception) { instance_double(Exception, :backtrace => [ ""#{__FILE__}:#{__LINE__}""], :message => 'Test exception') }
 
     before do
-      allow(example).to receive(:example_group) { class_double(RSpec::Core::ExampleGroup, :metadata => {}, :parent_groups => []) }
+      metadata = {:shared_group_name => 'double shared group'}
+      allow(example).to receive(:example_group) { class_double(RSpec::Core::ExampleGroup, :metadata => metadata, :parent_groups => [], location: ""#{__FILE__}:#{__LINE__}"") }
     end
 
     it 'should return failure_lines without color' do","You need to use hash rocket syntax here, as we support `1.8.7` and this breaks the travis build. Also why is this necessary, it's not clear to me...",rb,1,1,1
"@@ -29,7 +29,7 @@ import org.openqa.selenium.remote.service.DriverService;
  *
  * @see <a href=""https://chromium.googlesource.com/chromium/src/+/master/chrome/test/chromedriver/client/command_executor.py"">List of ChromeWebdriver commands</a>
  */
-class ChromeDriverCommandExecutor extends DriverCommandExecutor {
+public class ChromeDriverCommandExecutor extends DriverCommandExecutor {
 
   private static final ImmutableMap<String, CommandInfo> CHROME_COMMAND_NAME_TO_URL = ImmutableMap.of(
       ChromeDriverCommand.LAUNCH_APP,",This states very clearly that this is a derivative of Chrome and not Chromium. Do we need to extract an abstract `ChromiumCommandExecutor` and have both Edge and Chrome derive from that?,rb,1,1,1
"@@ -5,10 +5,14 @@ class AuthController < ApplicationController
   def oauth_callback
     auth = request.env[""omniauth.auth""]
     return_to_path = fetch_return_to_path
-    do_user_auth(auth)
-    session[:token] = auth.credentials.token
-    flash[:success] = ""You successfully signed in""
-    redirect_to return_to_path || proposals_path
+    begin
+      do_user_auth(auth)
+      session[:token] = auth.credentials.token
+      flash[:success] = ""You successfully signed in""
+      redirect_to return_to_path || proposals_path
+    rescue => _error
+      render :failure
+    end
   end
 
   def failure",is it possible to rescue a particular error rather than any error? Ideally we do not rescue all errors so we can surface errors we care about and rescue those we want to ignore.,rb,1,1,1
"@@ -23,4 +23,14 @@ module RSpecHelpers
     end
   end
 
+  def expect_deprecation_with_call_site(file, line)
+    expect(RSpec.configuration.reporter).to receive(:deprecation) do |options|
+      expect(options[:call_site]).to include([file, line].join(':'))
+    end
+  end
+
+  def allow_deprecation
+    allow(RSpec.configuration.reporter).to receive(:deprecation)
+  end
+
 end","I can't get this helper to fail. I've passed incorrect line numbers and it always passes. I see the block get run, but it doesn't seem this inner expectation is properly raised.",rb,0,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -1,10 +1,13 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 # SPDX - License - Identifier: Apache - 2.0
 
+# Purpose
+# This code example demonstrates how to configure an Amazon Simple Storage Solution (Amazon S3) bucket as a static website.
+
+# snippet-start:[s3.s3_ruby_bucket_website.rb]
+
 require 'aws-sdk-s3'
 
-# Configures an Amazon S3 bucket as a static website.
-#
 # Prerequisites:
 #
 # - An Amazon S3 bucket.",Simple Storage **Service**,rb,0,0,0
"@@ -12,6 +12,9 @@
     <h2 class=""parent-collection"">
       <%= link_to @video.watchable_name, @video.watchable %>
     </h2>
+    <h3 class=""page-header__time-to-complete"">
+      <%= ""#{@video.length_in_minutes} minutes"" %>
+    </h3>
   </header>
 <% end %>
 ","Do we want to wrap this block with `video.show_timing?`. Tbh I'm okay with the video length on all videos, so maybe we don't need `video.show_timing?` at all? I do still want to limit showing the trail timing to the RoR5 trail, since our exercise time estimate isn't precise and it seems like a less expected feature",rb,1,1,1
"@@ -201,6 +201,14 @@ module RSpec
           end
         end
 
+        # Just like `subject`, except the block is invoked by an implicit `before`
+        # hook. This serves a dual purpose of setting up state and providing a
+        # memoized reference to that state.
+        def subject!(name=nil, &block)
+          subject(name, &block)
+          before { __send__(:subject) }
+        end
+
         attr_reader :explicit_subject_block
 
         private",It'd be good to have full yard docs for this....care to take a stab at that?,rb,1,1,1
"@@ -7,3 +7,9 @@ get(
   as: :book,
   constraints: LicenseableConstraint.new(Book)
 )
+
+get '/backbone-js-on-rails' => redirect('https://gumroad.com/l/backbone-js-on-rails')
+get '/geocoding-on-rails' => redirect('https://gumroad.com/l/geocoding-on-rails')
+get '/ios-on-rails' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ios-on-rails-beta' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ruby-science' => redirect('https://gumroad.com/l/ruby-science')",I actually think this is `ios-on-rails-beta`,rb,1,1,0
"@@ -4,6 +4,12 @@
 <div class=""text-box-wrapper"">
   <div class=""text-box"">
     <p>Thank you for purchasing <%= @purchaseable.name %>.</p>
+
+    <% if subscription = current_user.subscription and !subscription.active? %>
+      <p>It appears you stopped subscribing to <%= @purchaseable.name %> on
+      <%= l subscription.deactivated_on, format: :long %>. If you would like
+      to resubscribe, please <%= mail_to 'learn@thoughtbot.com', 'contact us' %>.</p>
+    <% end %>
   </div>
 </div>
 ",What do you think about extracting this conditional into a method?,rb,1,1,1
"@@ -47,7 +47,7 @@ public class DeleteNamedQueryExample {
             System.exit(1);
         }
 
-        String name = args[0];
+        String name =""sampleQuery"" ;  //args[0];
         AthenaClient athenaClient = AthenaClient.builder()
                 .region(Region.US_WEST_2)
                 .build();",Did you intend to ignore the command line arg?,rb,1,1,1
"@@ -93,6 +93,19 @@ describe TeamPlan do
     end
   end
 
+  describe '#fulfill' do
+    it 'starts a subscription' do
+      user = build_stubbed(:user)
+      purchase = build_stubbed(:purchase, user: user)
+      plan = build_stubbed(:team_plan)
+      fulfillment = stub_subscription_fulfillment(purchase)
+
+      plan.fulfill(purchase, user)
+
+      expect(fulfillment).to have_received(:fulfill)
+    end
+  end
+
   def team_plan
     build(:team_plan)
   end",Looks like one more instance of the method pointed out above.,rb,0,1,0
"@@ -72,8 +72,6 @@ class ApiKeysController < ApplicationController
     @api_key = ApiKey.find params[:id]
   rescue ActiveRecord::RecordNotFound
     raise ParamRecordNotFound
-  rescue e
-    raise e
   end
 
   def find_models","Is this a part of the effort of masking `ActiveRecord::RecordNotFound` reports in our monitoring software? If so, I suspect it may not do what we want. I think the monitoring software will detect the creation of any error. After all, we handle `ActiveRecord::RecordNotFound` errors and show a 404 page in most instances. The exception is being handled, but is still being reported. I suspect that to really prevent non-error exceptions, like when users ask for non-existent records, we will need to use ActiveRecord to find records without raising exceptions; i.e.: using `Account.find_by login: params[login]`",rb,1,0,1
"@@ -29,10 +29,9 @@ module Faker
         fetch('elder_scrolls.first_name')
       end
 
-      def first_name
+      def last_name
         fetch('elder_scrolls.last_name')
       end
-
     end
   end
 end",Fixing duplicated methods. Copy and   and adding specs for the new methods,rb,0,1,0
"@@ -1848,7 +1848,7 @@ function fullyResolveKeys(obj) {
  * If there are no listeners registered with the flow, the error will be
  * rethrown to the global error handler.
  *
- * Refer to the {@link ./promise} module documentation fora  detailed
+ * Refer to the {@link ./promise} module documentation for a  detailed
  * explanation of how the ControlFlow coordinates task execution.
  *
  * @final",there is still `2` spaces after `a` here.. :P,rb,1,1,1
"@@ -1,4 +1,5 @@
 module Reverification
+  # rubocop:disable ClassLength
   class Process
     PILOT_AMOUNT = 5000
     class << self","Would be great, if we can avoid disabling/enabling the `ClassLength`",rb,1,1,1
"@@ -1171,6 +1171,18 @@ You can use icons for admonitions by setting the 'icons' attribute.
       output = render_string input, :safe => Asciidoctor::SafeMode::SAFE, :attributes => {'docdir' => File.dirname(__FILE__)}
       assert_xpath '//*[@class=""admonitionblock tip""]//*[@class=""icon""]/img[@src=""data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=""][@alt=""Tip""]', output, 1
     end
+
+    test 'can use font-based icons' do
+      input = <<-EOS
+:icons: font
+
+[TIP]
+You can use icons for admonitions by setting the 'icons' attribute.
+      EOS
+
+      output = render_string input, :safe => Asciidoctor::SafeMode::SERVER
+      assert_xpath '//*[@class=""admonitionblock tip""]//*[@class=""icon""]/i[@class=""icon-tip""]', output, 1
+    end
   end
 
   context 'Image paths' do","That is one nasty xpath, can you clean that up any?",rb,1,1,1
"@@ -0,0 +1,18 @@
+# frozen_string_literal: true
+
+require 'bolt/error'
+require 'bolt/config/transport'
+
+module Bolt
+  class Config
+    class Sudoable < Transport
+      private def validate
+        run_as_cmd = config['run-as-command']
+        if run_as_cmd && (!run_as_cmd.is_a?(Array) || run_as_cmd.any? { |n| !n.is_a?(String) })
+          raise Bolt::ValidationError,
+                ""run-as-command must be an Array of Strings, received #{run_as_cmd.class} #{run_as_cmd.inspect}""
+        end
+      end
+    end
+  end
+end","I don't think this class provides enough value to be worth the extra complexity, especially since it's only performing half its job (it should also be _defining_ the options associated with `sudo` not just validating them).",rb,1,1,1
"@@ -97,8 +97,13 @@ module Travis
           set 'CI', 'true', echo: false
           set 'CONTINUOUS_INTEGRATION', 'true', echo: false
           set 'HAS_JOSH_K_SEAL_OF_APPROVAL', 'true', echo: false
-          data.env_vars.each do |var|
-            set var.key, var.value, echo: var.to_s
+          data.env_vars_groups.each do |group|
+            if group.announce?
+              cmd ""echo -e \""\033[33;1mSetting environment variables from #{group.source}\033[0m\""; "", assert: false, echo: false
+            end
+            group.vars.each do |var|
+              set var.key, var.value, echo: var.to_s
+            end
           end
           if data.env_vars.any?
             # adds a newline to the log",won't this also echo Travis vars? maybe it should be something like: `echo: group.announce?`,rb,1,1,1
"@@ -0,0 +1,9 @@
+FactoryGirl.define do
+  factory :twelve_month_summary do
+    association :analysis
+    affiliated_committers_count 2
+    affiliated_commits_count 2
+    outside_committers_count 2
+    outside_commits_count 2
+  end
+end",Why all the count attributes set to static values? Shouldn't these be random?,rb,1,0,1
"@@ -77,14 +77,16 @@ module Beaker
       # @return [Result]   An object representing the outcome of *command*.
       # @raise  [FailTest] Raises an exception if *command* obviously fails.
       def on(host, command, opts = {}, &block)
-        unless command.is_a? Command
+        block_on host do | host |
+          if command.is_a? Command
+            command = command.cmd_line(host)
+          end
           cmd_opts = {}
+          #add any additional environment variables to the command
           if opts[:environment]
             cmd_opts['ENV'] = opts[:environment]
           end
           command = Command.new(command.to_s, [], cmd_opts)
-        end
-        block_on host do | host |
           @result = host.exec(command, opts)
 
           # Also, let additional checking be performed by the caller.","I understand that `Beaker::Command` is in scope here as `Command` and that it is relatively common to use the unqualified in-scope name of a class/module both in the Ruby community and in Beaker, but I am curious if you are aware of any reasons not to use the fully-qualified version? I personally prefer less ambiguity where possible, but I'm not suggesting a change should be made--just interested in discussion about coding conventions within Beaker.",rb,1,0,1
"@@ -0,0 +1,7 @@
+describe Searchable do
+  describe "".rebuild_index"" do
+    it ""should rebuild the index"" do
+      expect(Proposal.rebuild_index).not_to raise
+    end
+  end
+end",should probably `create(:proposal)` here at least once so there is something to index.,rb,1,1,1
"@@ -9,9 +9,7 @@ module Beaker
     |   V   |
     |   |   | ""
 
-    attr_reader :options, :logger
-
-
+    attr_reader :logger, :options, :network_manager
     def initialize
       @timestamp = Time.now
       # Initialize a logger object prior to parsing; this should be overwritten whence",I'm also pretty sure that we no longer need to have this as a readable class var.,rb,0,1,1
"@@ -13,7 +13,7 @@ module Beaker
     SLEEPWAIT = 5
     TRIES = 5
     UNIX_PACKAGES = ['curl', 'ntpdate']
-    FREEBSD_PACKAGES = ['curl']
+    FREEBSD_PACKAGES = ['curl', 'perl5']
     WINDOWS_PACKAGES = ['curl']
     PSWINDOWS_PACKAGES = []
     SLES10_PACKAGES = ['curl']","Not sure how neccesary this is, as perl is included by default on all bsd builds apparently, but cant hurt (only takes a few secs to check it)",rb,1,1,1
"@@ -45,17 +45,6 @@ namespace Microsoft.CodeAnalysis.Sarif
 
         private static string[] InvalidFiles = new string[]
         {
-            @""ClangAnalyzer\ArrayDataTypes.xml.sarif"",
-            @""ClangAnalyzer\BadMissingString.xml.sarif"",
-            @""ClangAnalyzer\ClangAnalyzer_issueLog1_raw.xml.sarif"",
-            @""ClangAnalyzer\DictionaryDataTypes.xml.sarif"",
-            @""ClangAnalyzer\DivByZero.xml.sarif"",
-            @""ClangAnalyzer\FileNumberCoverage.xml.sarif"",
-            @""ClangAnalyzer\GarbageValueLog.xml.sarif"",
-            @""ClangAnalyzer\MediumLog.xml.sarif"",
-            @""ClangAnalyzer\MissingLocation.xml.sarif"",
-            @""ClangAnalyzer\RealLog.xml.sarif"",
-            @""CppCheck\CppCheck_issueLog1_raw.xml.sarif""
         };
 
         public static IEnumerable<object[]> TestCases",I like that you left the empty array in there.,.cs,1,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -406,6 +406,8 @@ namespace Nethermind.State
                     Set(cellByAddress.Key, _zeroValue);
                 }
             }
+
+            _storages[address] = new StorageTree(_stateDb, Keccak.EmptyTreeHash);
         }
 
         private enum ChangeType",this is the fix,.cs,1,0,0
"@@ -124,9 +124,11 @@ public abstract class FlatteningConfig {
     // flattening.
     Map<String, FlatteningConfig> flatteningConfigs = new LinkedHashMap<>();
 
-    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
-    // Let flattenings from proto annotations override flattenings from GAPIC config.
+    // Let flattenings from GAPIC config override flattenings from proto annotations.
     flatteningConfigs.putAll(flatteningConfigsFromProtoFile);
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
+
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
 
     return ImmutableList.copyOf(flatteningConfigs.values());
   }",Why duplicate this on line 131?,java,1,1,0
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -1,6 +1,7 @@
 // unit tests creating LAMMPS instances via the library interface
 
 #include ""lammps.h""
+#define LAMMPS_LIB_MPI 1
 #include ""library.h""
 #include <cstdio> // for stdin, stdout
 #include <mpi.h>",Should this be here?,cpp,1,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -22,6 +22,7 @@ from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
 
 
 class Options(object):
+    KEY = ""goog:chromeOptions""
 
     def __init__(self):
         self._binary_location = ''",nice touch since Google likes to change things every now and then.,py,1,0,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -33,13 +33,13 @@ export function createComponent(Ctor, props, context) {
 		inst;
 
 	if (Ctor.prototype && Ctor.prototype.render) {
-		inst = new Ctor(props, context);
+		inst = new /** @type {(props, context) => void} */(Ctor)(props, context);
 		Component.call(inst, props, context);
 	}
 	else {
 		inst = new Component(props, context);
 		inst.constructor = Ctor;
-		inst.render = doRender;
+		inst['render'] = doRender;
 	}
 
 ",This seems strange to me. @rbiggs Can you elaborate on the thinking behind it?,js,0,1,0
"@@ -143,3 +143,7 @@ type wsProjectManager interface {
 type artifactPutter interface {
 	PutArtifact(bucket, fileName string, data io.Reader) (string, error)
 }
+
+type port interface {
+	Set(number int) error
+}",Is this interface used anywhere?,go,1,1,0
"@@ -27,11 +27,8 @@ final class ForbiddenSuperGlobalSniff implements Sniff
     {
         return [T_VARIABLE];
     }
-
-    /**
-     * @param int $position
-     */
-    public function process(File $file, $position): void
+    
+    public function process(File $file, int $position): void
     {
         $currentToken = $file->getTokens()[$position];
 ",Should be fixed,php,1,1,0
"@@ -116,6 +116,11 @@ namespace OpenTelemetry.Trace
                 + ""}"";
         }
 
+        public override Type GetType()
+        {
+            return this.GetType();
+        }
+
         /// <inheritdoc/>
         public override TReturn Match<TReturn>(
             Func<string, TReturn> stringFunction,",is this needed?,.cs,1,0,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -1,5 +1,11 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX - License - Identifier: Apache - 2.0
+# SPDX-License-Identifier: Apache-2.0
+
+# Purpose
+# s3-ruby-example-access-permissions.rb demonstrates how to set the access control list (ACL) for an
+# Amazon Simple Storage Solution (Amazon S3) bucket for public access.
+
+# snippet-start:[s3.ruby.s3-ruby-example-access-permissions]
 
 require 'aws-sdk-s3'
 require 'net/http'",Simple Storage **Service**,rb,0,0,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -349,9 +349,13 @@ public class Camera2 extends android.support.v4.app.Fragment {
                 		Camera.Parameters parameters = preview.mCamera.getParameters();
                 		switch (HDR_STATE){
                     			case HDR_OFF:
-                        			HDR_STATE = HDR_ON;
-                        			camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
-                        			parameters.setSceneMode(SCENE_MODE_HDR);
+                        			if (preview.getSupportSceneModes().contains(SCENE_MODE_HDR)) {
+                                        HDR_STATE = HDR_ON;
+                                        camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
+                                        parameters.setSceneMode(SCENE_MODE_HDR);
+                                    }else {
+                                        Toast.makeText(ctx, R.string.hdr_unsupported_error,Toast.LENGTH_SHORT).show();
+                                    }
                         			break;
                     			case HDR_ON:
                         			HDR_STATE = HDR_OFF;",Properly intend the code pls.,java,1,1,0
"@@ -13,7 +13,7 @@ namespace Datadog.Trace
 
         private readonly DateTimeOffset _utcStart = DateTimeOffset.UtcNow;
         private readonly long _timestamp = Stopwatch.GetTimestamp();
-        private readonly List<Span> _spans = new List<Span>();
+        private List<Span> _spans = new List<Span>();
 
         private int _openSpans;
         private SamplingPriority? _samplingPriority;",Doesn't look like we needed to remove the `readonly`.,.cs,1,0,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -4,7 +4,7 @@ MYUSA_URL = ENV['MYUSA_URL'] || 'https://alpha.my.usa.gov'
 
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :myusa, MYUSA_KEY, MYUSA_SECRET, {
-    scope: 'profile.email',
+    scope: 'profile.email profile.first_name profile.last_name',
     client_options: {
       site: MYUSA_URL,
       token_url: ""/oauth/authorize""",That Was Easy:tm:,rb,0,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -116,8 +116,7 @@ func fieldsByName(example interface{}) map[string]reflect.StructField {
 var _ = DescribeTable(""Config parsing"",
         func(key, value string, expected interface{}, errorExpected ...bool) {
                 config := New()
-                config.UpdateFrom(map[string]string{key: value},
-                        EnvironmentVariable)
+                config.UpdateFrom(map[string]string{key: value}, EnvironmentVariable)
                 configPtr := reflect.ValueOf(config)
                 configElem := configPtr.Elem()
                 fieldRef := configElem.FieldByName(key)","Note, another possibly unnecessary change here.",c,1,1,0
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -116,6 +116,11 @@ namespace OpenTelemetry.Trace
                 + ""}"";
         }
 
+        public override Type GetType()
+        {
+            return this.GetType();
+        }
+
         /// <inheritdoc/>
         public override TReturn Match<TReturn>(
             Func<string, TReturn> stringFunction,",is this needed?,.cs,1,0,0
"@@ -15,12 +15,12 @@
 """"""Scanner for Enabled APIs.""""""
 
 import json
-import sys
 
 from google.cloud.forseti.common.gcp_type.project import Project
 from google.cloud.forseti.common.util import logger
 from google.cloud.forseti.scanner.audit import enabled_apis_rules_engine
 from google.cloud.forseti.scanner.scanners import base_scanner
+from google.cloud.forseti.common.util import errors as util_errors
 
 LOGGER = logger.get_logger(__name__)
 ",Can you please alpha-sort this import?,py,1,1,0
"@@ -332,7 +332,7 @@ TEST_F(UDPv4Tests, send_to_allowed_interface)
 
         if (IsAddressDefined(locator))
         {
-            descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
+            // descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
             descriptor.interfaceWhiteList.emplace_back(IPLocator::toIPv4string(locator));
             UDPv4Transport transportUnderTest(descriptor);
             transportUnderTest.init();","Can we remove this line, please?",cpp,1,1,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -694,7 +694,13 @@ class ColorbarPlot(ElementPlot):
             self._cbar_extend = 'max'
 
         # Define special out-of-range colors on colormap
-        cmap = copy.copy(plt.cm.get_cmap(opts.get('cmap')))
+        cmap = opts.get('cmap')
+        if isinstance(cmap, list):
+            cmap = mpl_colors.ListedColormap(cmap)
+        elif isinstance(cmap, util.basestring):
+            cmap = copy.copy(plt.cm.get_cmap(cmap))
+        else:
+            cmap = copy.copy(cmap)
         colors = {}
         for k, val in self.clipping_colors.items():
             if isinstance(val, tuple):",What is all the copying about?,py,1,1,0
"@@ -3,7 +3,7 @@ FactoryGirl.define do
 
   factory :api_token do
     access_token
-    step
+    step { create(:approval_step) }
     expires_at { Time.current + 7.days }
   end
 end",this is the actual fix?,rb,1,1,0
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -521,7 +521,7 @@ class Package(object):
         return cls._browse(name=name, registry=registry, top_hash=top_hash)
 
     @classmethod
-    def _browse(cls, name, registry, top_hash):
+    def _browse(cls, name, registry=None, top_hash=None):
         validate_package_name(name)
         if registry is None:
             registry = get_from_config('default_local_registry')",Is this change needed for the fix?,py,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -47,6 +47,9 @@ def molecule_provisioner_section_data():
                 'instance-1': [{
                     'foo': 'bar'
                 }],
+                'localhost': [{
+                    'foo': 'baz'
+                }]
             },
             'group_vars': {
                 'example_group1': [{",This and line 156 below adds coverage for the special case of localhost host_vars,py,0,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -1,13 +1,14 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX - License - Identifier: Apache - 2.0
+# SPDX-License-Identifier: Apache-2.0
 
+# Purpose:
 # This code example allows a federated user with a limited set of
-# permissions to list the objects in an Amazon S3 bucket.
+# permissions to list the objects in an Amazon Simple Storage Solution (Amazon S3) bucket.
 
+# snippet-start:[s3.ruby.auth_federation_token_request_test.rb]
 # Prerequisites:
 #  - An existing Amazon S3 bucket.
 
-# snippet-start:[s3.ruby.auth_federation_token_request_test.rb]
 require 'aws-sdk-s3'
 require 'aws-sdk-iam'
 require 'json'",Simple Storage **Service**,rb,0,0,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -1178,6 +1178,8 @@ static void CreateDirectoryRecursively(PJ_CONTEXT *ctx,
 
 std::string pj_context_get_user_writable_directory(PJ_CONTEXT *ctx,
                                                    bool create) {
+    if (!ctx)
+        ctx = pj_get_default_ctx();
     if (ctx->user_writable_directory.empty()) {
         // For testing purposes only
         const char *env_var_PROJ_USER_WRITABLE_DIRECTORY =",Was this missing before?,cpp,1,1,0
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -44,12 +44,10 @@ import org.tikv.kvproto.Metapb.Store;
 public class Snapshot {
   private final TiTimestamp timestamp;
   private final TiSession session;
-  private final TiConfiguration conf;
 
   public Snapshot(TiTimestamp timestamp, TiSession session) {
     this.timestamp = timestamp;
     this.session = session;
-    this.conf = session.getConf();
   }
 
   public TiSession getSession() {",why delete this conf?,java,1,1,0
"@@ -33,6 +33,18 @@ public class TransactionPoolOptions
   private static final String ETH65_TX_ANNOUNCED_BUFFERING_PERIOD_FLAG =
       ""--Xeth65-tx-announced-buffering-period-milliseconds"";
 
+  private static final String STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG =
+      ""--strict-tx-replay-protection-enabled"";
+
+  @CommandLine.Option(
+      names = {STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG},
+      paramLabel = ""<Boolean>"",
+      description =
+          ""Require transactions submitted via JSON-RPC to use replay protection in accordance with EIP-155 (default: ${DEFAULT-VALUE})"",
+      fallbackValue = ""true"",
+      arity = ""0..1"")
+  private Boolean strictTxReplayProtectionEnabled = false;
+
   @CommandLine.Option(
       names = {TX_MESSAGE_KEEP_ALIVE_SEC_FLAG},
       paramLabel = ""<INTEGER>"",","Ah, so it IS unstable already. Cool, lets prefix with X.",java,1,0,0
"@@ -193,7 +193,7 @@ class SparkSubmitTaskTest(unittest.TestCase):
         def interrupt():
             raise KeyboardInterrupt()
 
-        proc.return_value.poll = interrupt
+        proc.return_value.wait = interrupt
         try:
             job = TestSparkSubmitTask()
             job.run()",btw ideally we should use the mock library for this. but that's prob outside the scope of this PR,py,0,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -345,7 +345,7 @@ class GFLHead(AnchorHead):
          bbox_weights_list, num_total_pos, num_total_neg) = cls_reg_targets
 
         num_total_samples = reduce_mean(
-            torch.tensor(num_total_pos).cuda()).item()
+            torch.tensor(num_total_pos).float().cuda()).item()
         num_total_samples = max(num_total_samples, 1.0)
 
         losses_cls, losses_bbox, losses_dfl,\","`torch.tensor(num_total_pos, dtype=torch.float, device=device)`",py,1,0,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -52,10 +52,7 @@ namespace NLog
 
         private static readonly IDictionary<string, object> EmptyDefaultDictionary = new SortHelpers.ReadOnlySingleBucketDictionary<string, object>();
 
-        /// <summary>
-        /// 
-        /// </summary>
-        private class ItemRemover : IDisposable
+        private sealed class ItemRemover : IDisposable
         {
             private readonly string _item;
             private bool _disposed;",note: sealed for keep Sonar stop warning about IDisposable,.cs,0,1,0
"@@ -77,8 +77,8 @@ public class LocalNewSessionQueuer extends NewSessionQueuer {
   }
 
   @Override
-  public Optional<HttpRequest> remove() {
-    return sessionRequests.poll();
+  public Optional<HttpRequest> remove(RequestId id) {
+    return sessionRequests.poll(id);
   }
 
   @Override",`poll` and `remove` have different meanings.,js,1,1,0
"@@ -9,10 +9,15 @@ FactoryGirl.define do
     rwa_number ""R1234567"" # TODO remove, since it's not applicable for BA61
     org_code Ncr::Organization.all[0].to_s
     project_title ""NCR Name""
+    sequence(:approving_official_email) {|n| ""approver#{User.count}@some-cartoon-show.com"" }
     association :proposal, flow: 'linear'
 
     trait :with_approvers do
+      # TODO use wo.setup_approvals_and_observers instead
       association :proposal, :with_serial_approvers, flow: 'linear'
+      after :create do |wo|
+        wo.approving_official_email = wo.approving_official.email_address
+      end
     end
 
     trait :is_emergency do",PT story for this?,rb,0,0,0
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -260,9 +260,9 @@ func (d decoder) MapLen() (int, bool) {
 	return len(d.av.M), true
 }
 
-func (d decoder) DecodeMap(f func(key string, vd driver.Decoder) bool) {
+func (d decoder) DecodeMap(f func(key string, vd driver.Decoder, exactMatch bool) bool) {
 	for k, av := range d.av.M {
-		if !f(k, decoder{av}) {
+		if !f(k, decoder{av}, true) {
 			break
 		}
 	}",why not use `exactMatch` here?,go,1,1,0
"@@ -40,7 +40,8 @@ export function setAccessor(node, name, old, value, isSvg) {
 		}
 		if (value && typeof value==='object') {
 			if (!isString(old)) {
-				for (let i in old) if (!(i in value)) node.style[i] = '';
+				for (let i in old)
+					if (!(i in value) || value[i] == null || value[i] === false) node.style[i] = '';
 			}
 			for (let i in value) {
 				node.style[i] = typeof value[i]==='number' && !NON_DIMENSION_PROPS[i] ? (value[i]+'px') : value[i];",Can skip the `in` check now I think,js,1,1,0
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -295,7 +295,7 @@ public class SmartStoreReactBridge extends ReactContextBaseJavaModule {
 			final IndexSpec[] indexSpecs = IndexSpec.fromJSON(indexesJson);
 
             // Get soup spec if available.
-            final ReadableMap soupSpecObj = args.getMap(SOUP_SPEC);
+            final ReadableMap soupSpecObj = (args.hasKey(SOUP_SPEC) ? args.getMap(SOUP_SPEC) : null);
             if (soupSpecObj != null) {
 
                 // Get soup name.",getMap throws an exception if key doesn't exist,java,1,1,0
"@@ -0,0 +1,9 @@
+<?php
+
+namespace Psalm\Issue;
+
+class InvalidTypeImport extends CodeIssue
+{
+    const ERROR_LEVEL = 7;
+    const SHORTCODE = 233;
+}","Not sure about the level, feel free to adjust.",php,1,1,0
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -45,17 +45,6 @@ namespace Microsoft.CodeAnalysis.Sarif
 
         private static string[] InvalidFiles = new string[]
         {
-            @""ClangAnalyzer\ArrayDataTypes.xml.sarif"",
-            @""ClangAnalyzer\BadMissingString.xml.sarif"",
-            @""ClangAnalyzer\ClangAnalyzer_issueLog1_raw.xml.sarif"",
-            @""ClangAnalyzer\DictionaryDataTypes.xml.sarif"",
-            @""ClangAnalyzer\DivByZero.xml.sarif"",
-            @""ClangAnalyzer\FileNumberCoverage.xml.sarif"",
-            @""ClangAnalyzer\GarbageValueLog.xml.sarif"",
-            @""ClangAnalyzer\MediumLog.xml.sarif"",
-            @""ClangAnalyzer\MissingLocation.xml.sarif"",
-            @""ClangAnalyzer\RealLog.xml.sarif"",
-            @""CppCheck\CppCheck_issueLog1_raw.xml.sarif""
         };
 
         public static IEnumerable<object[]> TestCases",I like that you left the empty array in there.,.cs,1,1,0
"@@ -107,6 +107,13 @@ import javax.ws.rs.WebApplicationException;
 import javax.ws.rs.core.Response;
 import static javax.ws.rs.core.Response.Status.BAD_REQUEST;
 import javax.ws.rs.core.StreamingOutput;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
 
 /*
     Custom API exceptions [NOT YET IMPLEMENTED]",Looks like glassfish went a bit nuts doing a refactor,java,1,0,0
"@@ -37,6 +37,18 @@ func (f *CreateRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) bin
         return validate(errs, ctx.Data, f, ctx.Locale)
 }
 
+type ConvertRepoForm struct {
+        Uid         int64  `binding:""Required""`
+        RepoId      int64  `binding:""Required""`
+        RepoName    string `binding:""Required;AlphaDashDot;MaxSize(100)""`
+        Private     bool
+        Description string `binding:""MaxSize(255)""`
+}
+
+func (f *ConvertRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) binding.Errors {
+        return validate(errs, ctx.Data, f, ctx.Locale)
+}
+
 type MigrateRepoForm struct {
         CloneAddr    string `json:""clone_addr"" binding:""Required""`
         AuthUsername string `json:""auth_username""`",Why do you need this?,go,1,1,0
"@@ -37,6 +37,12 @@ module Selenium
         def bridge_class
           Bridge
         end
+
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
       end # Driver
     end # Firefox
   end # WebDriver",Same here. and all others.,java,0,1,0
"@@ -17,7 +17,9 @@
 #include ""oneapi/dal/test/engine/config.hpp""
 
 #include <stdexcept>
-#include ""oneapi/dal/test/engine/common.hpp""
+#include ""oneapi/dal/test/engine/common_base.hpp""
+
+#include <iostream>
 
 namespace oneapi::dal::test::engine {
 ",Is it necessary?,cpp,1,1,0
"@@ -105,8 +105,7 @@ public class RegionStoreClient extends AbstractGRPCClient<TikvBlockingStub, Tikv
   // lockResolverClient, after implements the
   // write implementation of tispark, we can change
   // it to private
-  @VisibleForTesting
-  public final LockResolverClient lockResolverClient;
+  @VisibleForTesting public final LockResolverClient lockResolverClient;
   private TikvBlockingStub blockingStub;
   private TikvStub asyncStub;
 ",please undo this change,java,1,1,0
"@@ -108,7 +108,11 @@ class NdWidget(param.Parameterized):
         super(NdWidget, self).__init__(**params)
         self.id = plot.comm.target if plot.comm else uuid.uuid4().hex
         self.plot = plot
-        self.dimensions, self.keys = drop_streams(plot.streams,
+        streams = []
+        for stream in plot.streams:
+            if any(k in plot.dimensions for k in stream.contents):
+                streams.append(stream)
+        self.dimensions, self.keys = drop_streams(streams,
                                                   plot.dimensions,
                                                   plot.keys)
 ",I assume this bit is simply a bug fix and otherwise unrelated?,py,0,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
-        # Training state
-        if self.training:
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_train_or_val_workflow = (coeff_pred[0].dim() == 4)
+
+        # Train or val workflow
+        if is_train_or_val_workflow:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",self.is_training or self.training?,py,1,1,0
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -512,9 +512,14 @@ folly::Future<Status> AdminClient::createSnapshot(GraphSpaceID spaceId, const st
 
     folly::Promise<Status> pro;
     auto f = pro.getFuture();
+
+    /**
+     * Don't need retry.
+     * Because existing checkpoint directories leads to fail again.
+     **/
     getResponse(allHosts, 0, std::move(req), [] (auto client, auto request) {
         return client->future_createCheckpoint(request);
-    }, 0, std::move(pro), 1 /*The snapshot operation only needs to be retried twice*/);
+    }, 0, std::move(pro), 0);
     return f;
 }
 ",What if there are some connection failure?,cpp,1,1,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -349,11 +349,7 @@ public interface Future<T> extends Value<T> {
      * @throws NullPointerException if unit is null.
      */
     static Future<Void> run(CheckedRunnable unit) {
-        Objects.requireNonNull(unit, ""unit is null"");
-        return Future.of(DEFAULT_EXECUTOR_SERVICE, () -> {
-            unit.run();
-            return null;
-        });
+        return run(DEFAULT_EXECUTOR_SERVICE, unit);
     }
 
     /**",only deleted code is good code :-),java,1,0,0
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -117,7 +117,7 @@ Puppet::Functions.create_function(:run_plan, Puppet::Functions::InternalFunction
         # undef/nil
         result = catch(:return) do
           scope.with_global_scope do |global_scope|
-            closure.call_by_name_with_scope(global_scope, params, true)
+            executor.run_plan(global_scope, closure, params)
           end
           nil
         end&.value",@McdonaldSeanp I think this will help you longterm too but heads up.,rb,0,1,0
"@@ -498,6 +498,7 @@ void Sol2ScriptingEnvironment::ProcessElements(
         [&](const tbb::blocked_range<std::size_t> &range) {
             ExtractionNode result_node;
             ExtractionWay result_way;
+            std::vector<boost::optional<InputRestrictionContainer>> result_res;
             auto &local_context = this->GetSol2Context();
 
             for (auto x = range.begin(), end = range.end(); x != end; ++x)",Remove the `optional`.,cpp,1,1,0
"@@ -61,13 +61,13 @@ var once sync.Once
 var CloudhubHandler *MessageHandle
 
 // InitHandler create a handler for websocket and quic servers
-func InitHandler(config *hubconfig.Configure, eventq *channelq.ChannelMessageQueue) {
+func InitHandler(eventq *channelq.ChannelMessageQueue) {
 	once.Do(func() {
 		CloudhubHandler = &MessageHandle{
-			KeepaliveInterval: config.KeepaliveInterval,
-			WriteTimeout:      config.WriteTimeout,
+			KeepaliveInterval: int(hubconfig.Get().KeepaliveInterval),
+			WriteTimeout:      int(hubconfig.Get().WriteTimeout),
 			MessageQueue:      eventq,
-			NodeLimit:         config.NodeLimit,
+			NodeLimit:         int(hubconfig.Get().NodeLimit),
 		}
 
 		CloudhubHandler.KeepaliveChannel = make(map[string]chan struct{})",Why need the type conversion here?,go,1,1,0
"@@ -40,6 +40,9 @@ module Travis
             sh.cmd 'CURL_USER_AGENT=""Travis-CI $(curl --version | head -n 1)""'
             case config[:os]
             when 'linux'
+              if config[:julia] == 'nightly' && config[:arch] == 'arm64'
+                sh.failure 'Nightly Julia binaries are not available for AArch64'
+              end
               sh.cmd 'mkdir -p ~/julia'
               sh.cmd %Q{curl -A ""$CURL_USER_AGENT"" -s -L --retry 7 '#{julia_url}' } \
                        '| tar -C ~/julia -x -z --strip-components=1 -f -'",Is this a typo?,rb,1,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -202,6 +202,19 @@ namespace Microsoft.AspNetCore.Server.KestrelTests
             }
         }
 
+        [Fact]
+        public async Task BadRequestIfContentLengthInvalid()
+        {
+            using (var server = new TestServer(context => { return Task.FromResult(0); }))
+            {
+                using (var connection = server.CreateConnection())
+                {
+                    await connection.Send(""GET / HTTP/1.1\r\nContent-Length: NaN\r\n\r\n"");
+                    await ReceiveBadRequestResponse(connection, ""400 Bad Request"", server.Context.DateHeaderValue);
+                }
+            }
+        }
+
         private async Task ReceiveBadRequestResponse(TestConnection connection, string expectedResponseStatusCode, string expectedDateHeaderValue)
         {
             await connection.ReceiveForcedEnd(",Test with negative value too.,.cs,1,1,0
"@@ -65,10 +65,6 @@ class Product < ActiveRecord::Base
     type.underscore
   end
 
-  def fulfilled_with_github?
-    github_team.present?
-  end
-
   def to_aside_partial
     ""#{self.class.name.underscore.pluralize}/aside""
   end","This was actually unused on `master`, so I removed it instead of fixing it with this change.",rb,0,1,0
"@@ -170,6 +170,6 @@ public class TableProperties {
   public static final String MERGE_MODE = ""write.merge.mode"";
   public static final String MERGE_MODE_DEFAULT = ""copy-on-write"";
 
-  public static final String MERGE_WRITE_CARDINALITY_CHECK = ""write.merge.cardinality-check.enabled"";
-  public static final boolean MERGE_WRITE_CARDINALITY_CHECK_DEFAULT = true;
+  public static final String MERGE_CARDINALITY_CHECK_ENABLED = ""write.merge.cardinality-check.enabled"";
+  public static final boolean MERGE_CARDINALITY_CHECK_ENABLED_DEFAULT = true;
 }",To match the property name above.,java,0,1,0
"@@ -27,11 +27,8 @@ final class ForbiddenSuperGlobalSniff implements Sniff
     {
         return [T_VARIABLE];
     }
-
-    /**
-     * @param int $position
-     */
-    public function process(File $file, $position): void
+    
+    public function process(File $file, int $position): void
     {
         $currentToken = $file->getTokens()[$position];
 ",Should be fixed,php,1,1,0
"@@ -24,12 +24,16 @@ const test = (suite, buildConfig = config.defaultBuildConfig, options) => {
   config.update(options)
 
   const braveArgs = [
-    '--enable-logging'
+    '--enable-logging=stderr'
   ]
 
   // Android doesn't support --v
   if (config.targetOS !== 'android') {
     braveArgs.push('--v=' + options.v)
+
+    if (options.vmodule) {
+      braveArgs.push('--vmodule=' + options.vmodule)
+    } 
   }
 
   if (options.filter) {",logs are only exposed if test fails,js,1,1,0
"@@ -40,6 +40,12 @@ public abstract class MethodDescriptorView {
 
   public abstract List<HeaderRequestParamView> headerRequestParams();
 
+  @Nullable
+  public abstract String requestFormatterName();
+
+  @Nullable
+  public abstract String responseFormatterName();
+
   public boolean hasHeaderRequestParams() {
     return headerRequestParams() != null && !headerRequestParams().isEmpty();
   }","These names aren't needed any more, right?",java,1,1,0
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -2971,6 +2971,15 @@ void rai::add_node_options (boost::program_options::options_description & descri
 bool rai::handle_node_options (boost::program_options::variables_map & vm)
 {
 	auto result (false);
+	boost::filesystem::path data_path;
+	if (vm.count (""data_path""))
+	{
+		data_path = boost::filesystem::path (vm [""data_path""].as <std::string> ());
+	}
+	else
+	{
+		data_path = rai::working_path ();
+	}
 	if (vm.count (""account_create""))
 	{
 		if (vm.count (""wallet"") == 1)",This would be better as a ternary IMO.,cpp,1,1,0
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -186,13 +186,11 @@ module Paginable
     @args.except(*PAGINATION_QUERY_PARAMS).to_param
   end
 
-  # TODO: We would be better served here passing these arguments as a Ruby double splat
-  # rubocop:disable Lint/UnusedMethodArgument
   def stringify_query_params(page: 1, search: @args[:search],
                              sort_field: @args[:sort_field],
                              sort_direction: nil)
 
-    query_string = {}
+    query_string = { page: page }
     query_string[""search""] = search if search.present?
     if sort_field.present?
       query_string[""sort_field""] = sort_field",this was a separate issue that I stumbled across while testing,rb,0,1,0
"@@ -295,7 +295,7 @@ public class SmartStoreReactBridge extends ReactContextBaseJavaModule {
 			final IndexSpec[] indexSpecs = IndexSpec.fromJSON(indexesJson);
 
             // Get soup spec if available.
-            final ReadableMap soupSpecObj = args.getMap(SOUP_SPEC);
+            final ReadableMap soupSpecObj = (args.hasKey(SOUP_SPEC) ? args.getMap(SOUP_SPEC) : null);
             if (soupSpecObj != null) {
 
                 // Get soup name.",getMap throws an exception if key doesn't exist,java,1,1,0
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -435,7 +435,7 @@ describe('ReadConcern', function() {
   });
 
   it('Should set majority readConcern aggregate command but ignore due to out', {
-    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2' } },
+    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2 < 4.1' } },
 
     test: function(done) {
       var listener = require('../..').instrument(function(err) {",I didn't realize we could do this!,js,1,1,0
"@@ -237,10 +237,6 @@ define([""appSettings"", ""browser"", ""events"", ""htmlMediaHelper"", ""webSettings""], f
             features.push(""voiceinput"");
         }
 
-        if (!browser.tv && !browser.xboxOne) {
-            browser.ps4;
-        }
-
         if (supportsHtmlMediaAutoplay()) {
             features.push(""htmlaudioautoplay"");
             features.push(""htmlvideoautoplay"");",What was this even doing?,js,1,0,0
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -61,7 +61,9 @@
     <article>
       <figure id=""bullet-3"" class=""journey-bullet"">3.</figure>
       <h2>Enroll in premium, hands-on video tutorials</h2>
-      <p>Our video tutorials are more than just video tutorials. You&rsquo;ll build real apps and communicate directly with a thoughtbot developer or designer. Begin an online video tutorial as soon as you sign up.</p>
+      <p>Our video tutorials go beyond passive learning. You&rsquo;ll build
+      real apps and communicate directly with a thoughtbot developer or
+      designer. You can begin one as soon as you sign up.</p>
     </article>
     <figure class=""supporting-visual two-stacked"">
       <div>",`You can begin as soon as you sign up.`?,rb,1,0,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -124,9 +124,11 @@ public abstract class FlatteningConfig {
     // flattening.
     Map<String, FlatteningConfig> flatteningConfigs = new LinkedHashMap<>();
 
-    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
-    // Let flattenings from proto annotations override flattenings from GAPIC config.
+    // Let flattenings from GAPIC config override flattenings from proto annotations.
     flatteningConfigs.putAll(flatteningConfigsFromProtoFile);
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
+
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
 
     return ImmutableList.copyOf(flatteningConfigs.values());
   }",Why duplicate this on line 131?,java,1,1,0
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -394,6 +394,8 @@ static SSL_CTX *_create_ssl_context(int is_client) {
 
         openssl_initialized = 1;
 
+        SSL_load_error_strings();
+
         if(is_client) {
                 #ifdef HAS_TLS_method
                 method = TLS_client_method();",Move to if in line 390.,c,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -15,7 +15,14 @@ namespace Thelia\Coupon;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Thelia\Condition\Implementation\ConditionInterface;
 use Thelia\Coupon\Type\CouponInterface;
+use Thelia\Log\Tlog;
+use Thelia\Model\AddressQuery;
+use Thelia\Model\Base\CouponModule;
 use Thelia\Model\Coupon;
+use Thelia\Model\CouponCountry;
+use Thelia\Model\CouponCustomerCount;
+use Thelia\Model\CouponCustomerCountQuery;
+use Thelia\Model\Order;
 
 /**
  * Manage how Coupons could interact with a Checkout","Be careful, base model is imported here.",php,1,1,0
"@@ -164,7 +164,7 @@ namespace OpenTelemetry.Instrumentation.AspNetCore.Tests
                 var response = await client.GetAsync(""/api/values/2"");
                 response.EnsureSuccessStatusCode(); // Status Code 200-299
 
-                WaitForProcessorInvocations(spanProcessor, 4);
+                WaitForProcessorInvocations(spanProcessor, 2);
             }
 
             // begin and end was called once each.",I'm probably just missing it... but what accounted for this change?,.cs,1,1,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -0,0 +1,17 @@
+<?php
+/**
+ * Copyright © Bold Brand Commerce Sp. z o.o. All rights reserved.
+ * See LICENSE.txt for license details.
+ */
+
+declare(strict_types=1);
+
+namespace Ergonode\Core\Infrastructure\Exception;
+
+class DeserializationException extends SerializerException
+{
+    public function __construct(string $message, \Throwable $previous = null)
+    {
+        parent::__construct($message, $previous);
+    }
+}",I think it should been in `SharedKernel` module.,php,1,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -201,7 +201,9 @@ module RSpec
         attr_reader :example
 
         Example.public_instance_methods(false).each do |name|
-          define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          unless name.to_sym == :run
+            define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          end
         end
 
         Proc.public_instance_methods(false).each do |name|","I tend to prefer using a `next` guard clause, but that's just subjective preference :). Not a merge blocker.",rb,0,1,0
"@@ -219,6 +219,13 @@ namespace MvvmCross.Droid.FullFragging.Caching
 			{
 				(fragInfo.CachedFragment as Fragment).Arguments.Clear();
 				(fragInfo.CachedFragment as Fragment).Arguments.PutAll(bundle);
+
+                var childViewModelCache = Mvx.GetSingleton<IMvxChildViewModelCache>();
+                if (childViewModelCache.Exists(fragInfo.CachedFragment.ViewModel.GetType()))
+                {
+                    fragInfo.CachedFragment.ViewModel = childViewModelCache.Get(fragInfo.CachedFragment.ViewModel.GetType());
+                    childViewModelCache.Remove(fragInfo.CachedFragment.ViewModel.GetType());
+                }
 			}
 			else
 			{",Again: evaluate `fragInfo.CachedFragment.ViewModel.GetType()` once.,.cs,1,1,0
"@@ -50,7 +50,7 @@ class SolrConfigStatus implements StatusProviderInterface
      *
      * @var string
      */
-    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-4-0-0--20160406';
+    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-6-0-0--20160725';
 
     /**
      * Compiles a collection of solrconfig version checks against each configured","solrconfig didn't change, did it?",php,1,1,0
"@@ -1,5 +1,6 @@
 <?php namespace Backend\Models;
 
+use BackendAuth;
 use Mail;
 use Event;
 use Backend;",Move the backend auth use statement below the backend use statement please,php,1,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -87,10 +87,19 @@ var creatablesMigration = []string{
 	`ALTER TABLE assetcreators ADD COLUMN ctype INTEGER DEFAULT 0`,
 }
 
+var createOnlineAccountIndex = []string{
+	`ALTER TABLE accountbase
+		ADD COLUMN normalizedonlinebalance INTEGER`,
+	`CREATE INDEX IF NOT EXISTS onlineaccountbals
+		ON accountbase ( normalizedonlinebalance, address, data )
+		WHERE normalizedonlinebalance>0`,
+}
+
 var accountsResetExprs = []string{
 	`DROP TABLE IF EXISTS acctrounds`,
 	`DROP TABLE IF EXISTS accounttotals`,
 	`DROP TABLE IF EXISTS accountbase`,
+	`DROP TABLE IF EXISTS onlineaccountbase`,
 	`DROP TABLE IF EXISTS assetcreators`,
 	`DROP TABLE IF EXISTS storedcatchpoints`,
 	`DROP TABLE IF EXISTS catchpointstate`,","this line can be dropped, right ?",go,1,1,0
"@@ -143,3 +143,7 @@ type wsProjectManager interface {
 type artifactPutter interface {
 	PutArtifact(bucket, fileName string, data io.Reader) (string, error)
 }
+
+type port interface {
+	Set(number int) error
+}",Is this interface used anywhere?,go,1,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -1,5 +1,6 @@
 <?php namespace Backend\Models;
 
+use BackendAuth;
 use Mail;
 use Event;
 use Backend;",Move the backend auth use statement below the backend use statement please,php,1,1,0
"@@ -2588,7 +2588,7 @@ describe('Operation (Promises)', function () {
    * @example-class Db
    * @example-method collection
    */
-  it('shouldCorrectlyAccessACollectionWithPromises', {
+  it.skip('shouldCorrectlyAccessACollectionWithPromises', {
     metadata: { requires: { topology: ['single'] } },
 
     test: function (done) {",why is this test being skipped?,js,1,1,0
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -269,6 +269,7 @@ bool nano::mdb_store::do_upgrades (nano::write_transaction & transaction_a, bool
                 case 17:
                         upgrade_v17_to_v18 (transaction_a);
                         needs_vacuuming = true;
+                        // Upgrades to v19 & v20 are both part of the v22 node release
                 case 18:
                         upgrade_v18_to_v19 (transaction_a);
                         needs_vacuuming = true;",Should we start using [[fallthrough]]; ?,cpp,1,1,0
"@@ -76,7 +76,7 @@ describe CatalogController do
           expect(session[:search].keys).to include :id
           
           search = Search.find(session[:search][:id])
-          expect(search.query_params[:q]).to eq @user_query
+          expect(search.query_params['q']).to eq @user_query
         end
       end
 ","There isn't a backwards-compat issue here, right? The old hash was a HWIA, and now we're stuck with a stringified hash?",rb,1,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -43,11 +43,6 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.System.IO.Pipelines
             {
                 var part = _enumerator.Current;
 
-                if (_end)
-                {
-                    return new ReadCursor(part.Segment, part.Start + _currentSpan.Length);
-                }
-
                 return new ReadCursor(part.Segment, part.Start + _index);
             }
         }","This is really strange, now when I look at it.",.cs,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -1,9 +1,9 @@
 'use strict';
 
-const MongoError = require('../core').MongoError;
+const MongoError = require('../core/error').MongoError;
 const Aspect = require('./operation').Aspect;
 const OperationBase = require('./operation').OperationBase;
-const ReadPreference = require('../core').ReadPreference;
+const ReadPreference = require('../core/topologies/read_preference');
 const isRetryableError = require('../core/error').isRetryableError;
 const maxWireVersion = require('../core/utils').maxWireVersion;
 const isUnifiedTopology = require('../core/utils').isUnifiedTopology;",why the diff here?,js,1,1,0
"@@ -9,6 +9,8 @@
 #include <LightGBM/utils/openmp_wrapper.h>
 #include <LightGBM/utils/text_reader.h>
 
+#include <R_ext/Rdynload.h>
+
 #include <string>
 #include <cstdio>
 #include <cstring>","ah ok, thanks! I should have looked at `cpplint` manually in the logs when I did #2911",cpp,0,1,0
"@@ -86,8 +86,7 @@ bool isValidMatch(const TurnLaneType::Mask tag, const TurnInstruction instructio
                (instruction.type ==
                     TurnType::Continue && // Forks can be experienced, even for straight segments
                 (instruction.direction_modifier == DirectionModifier::SlightLeft ||
-                 instruction.direction_modifier == DirectionModifier::SlightRight)) ||
-               instruction.type == TurnType::Suppressed;
+                 instruction.direction_modifier == DirectionModifier::SlightRight));
     }
     else if (tag == TurnLaneType::slight_left || tag == TurnLaneType::left ||
              tag == TurnLaneType::sharp_left)",we should refactor this ten line return statement ..,cpp,0,1,0
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -428,6 +428,12 @@ void encodeVectorTile(const datafacade::ContiguousInternalMemoryDataFacadeBase &
                 const auto &edge = edges[edge_index];
                 const auto geometry_id = get_geometry_id(edge);
 
+                // Get coordinates for start/end nodes of segment (NodeIDs u and v)
+                const auto a = facade.GetCoordinateOfNode(edge.u);
+                const auto b = facade.GetCoordinateOfNode(edge.v);
+                // Calculate the length in meters
+                const double length = osrm::util::coordinate_calculation::haversineDistance(a, b);
+
                 // Weight values
                 const auto forward_weight_vector =
                     facade.GetUncompressedForwardWeights(geometry_id);","when trying to refactor this I thought about this line a bit. It adds some overhead for calculating the distances. Whats is you opinion here @danpat on the potential slowdown? I feel it might be alright, but I am not entirely sure. (This length calculation is already happening further down as well)",cpp,0,1,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -59,11 +59,10 @@ func (b3 B3) Inject(ctx context.Context, supplier propagation.HTTPSupplier) {
 	if b3.SingleHeader {
 		sampled := sc.TraceFlags & core.TraceFlagsSampled
 		supplier.Set(B3SingleHeader,
-			fmt.Sprintf(""%s-%.16x-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
+			fmt.Sprintf(""%s-%s-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
 	} else {
 		supplier.Set(B3TraceIDHeader, sc.TraceIDString())
-		supplier.Set(B3SpanIDHeader,
-			fmt.Sprintf(""%.16x"", sc.SpanID))
+		supplier.Set(B3SpanIDHeader, sc.SpanID.String())
 
 		var sampled string
 		if sc.IsSampled() {",Is TraceIDString now duplicative?,go,1,1,0
"@@ -354,13 +354,10 @@ type BPFDataplane interface {
 	RemoveXDP(ifName string, mode XDPMode) error
 	UpdateCIDRMap(ifName string, family IPFamily, ip net.IP, mask int, refCount uint32) error
 	UpdateFailsafeMap(proto uint8, port uint16) error
-	loadXDPRaw(objPath, ifName string, mode XDPMode, mapArgs []string) error
 	GetBPFCalicoDir() string
 	AttachToSockmap() error
 	DetachFromSockmap(mode FindObjectMode) error
 	RemoveSockmap(mode FindObjectMode) error
-	loadBPF(objPath, progPath, progType string, mapArgs []string) error
-	LoadSockops(objPath string) error
 	LoadSockopsWithBytes(objBytes []byte) error
 	LoadSockopsAuto() error
 	RemoveSockops() error",Please can you merge master in before making these changes. I just reinstated a bunch of BPF UTs. Possible that the UTs use this code.,c,0,1,0
"@@ -96,8 +96,8 @@ namespace Examples.Console
                 catch (ArgumentOutOfRangeException e)
                 {
                     // Set status upon error
-                    activity.AddTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
-                    activity.AddTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
+                    activity.SetTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
+                    activity.SetTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
                 }
 
                 // Annotate our activity to capture metadata about our operation",Should we consider changing the return type of `SpanHelper.GetCachedCanonicalCodeString` to int?,.cs,1,1,0
"@@ -0,0 +1,11 @@
+(() => {
+  const docusaurusVersions = ['9.0'];
+  const legacyVersions = ['8.3.0', '8.2.0', '8.1.0', '8.0.0', '7.4.2', '7.4.1', '7.4.0', '7.3.0', '7.2.2', '7.2.1', '7.2.0', '7.1.1', '7.1.0', '7.0.3', '7.0.2', '7.0.1', '7.0.0', '6.2.2', '6.2.1', '6.2.0', '6.1.1', '6.1.0', '6.0.1', '6.0.0', '5.0.2', '5.0.1', '5.0.0', '4.0.0', '3.0.0', '2.0.0', ['1.18.1', '0.38.1'], ['1.18.0', '0.38.0'], ['1.17.0', '0.37.0'], ['1.16.0', '0.36.0'], ['1.15.1', '0.35.1'], ['1.15.0', '0.35.0'], ['1.14.3', '0.34.3'], ['1.14.2', '0.34.2'], ['1.14.1', '0.34.1'], ['1.14.0', '0.34.0']];
+  const versions = [...docusaurusVersions, ...legacyVersions];
+
+  if (window.location.hostname === 'dev.handsontable.com') {
+    versions.unshift('next');
+  }
+
+  docVersions && docVersions(versions);
+})();","probably redundant file, please verify",js,1,1,0
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -394,6 +394,8 @@ static SSL_CTX *_create_ssl_context(int is_client) {
 
         openssl_initialized = 1;
 
+        SSL_load_error_strings();
+
         if(is_client) {
                 #ifdef HAS_TLS_method
                 method = TLS_client_method();",Move to if in line 390.,c,1,1,0
"@@ -386,7 +386,10 @@ namespace NLog.Layouts
                         var value = ParseParameterValue(stringReader);
                         if (!string.IsNullOrEmpty(parameterName) || !StringHelpers.IsNullOrWhiteSpace(value))
                         {
-                            // TODO NLog 5.0 Should throw exception when invalid configuration (Check throwConfigExceptions)
+                            if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions == true)
+                            {
+                                throw new NLogConfigurationException(""Unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
+                            }
                             InternalLogger.Warn(""Skipping unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
                         }
                     }",Maybe this instead: `if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions ?? LogManager.ThrowExceptions)` ?,.cs,1,1,0
"@@ -894,12 +894,17 @@ var (
         RollupGasPriceOracleAddressFlag = cli.StringFlag{
                 Name:   ""rollup.gaspriceoracleaddress"",
                 Usage:  ""Address of the rollup gas price oracle"",
-                Value:  ""0x"",
+                Value:  ""0x0000000000000000000000000000000000000000"",
                 EnvVar: ""ROLLUP_GAS_PRICE_ORACLE_ADDRESS"",
         }
         RollupEnableL2GasPollingFlag = cli.BoolFlag{
                 Name:   ""rollup.enablel2gaspolling"",
-                Usage:  """",
+                Usage:  ""Poll for the L2 gas price from the L2 state"",
+                EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
+        }
+        RollupEnforceFeesFlag = cli.BoolFlag{
+                Name:   ""rollup.enforcefeesflag"",
+                Usage:  ""Disable transactions with 0 gas price"",
                 EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
         }
 )",Fix this env var,go,1,0,0
"@@ -651,9 +651,7 @@ class Algebra
 
                         $new_clause = new Clause(
                             $new_clause_possibilities,
-                            $clause->creating_conditional_id === $grouped_clause->creating_conditional_id
-                                ? $clause->creating_conditional_id
-                                : $grouped_clause->creating_conditional_id,
+                            $grouped_clause->creating_conditional_id,
                             $clause->creating_object_id,
                             false,
                             true,",On the first glance this doesn't look like exact equivalent.,php,1,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -104,7 +104,7 @@ def check_for_software_updates(flash_message=False):
     :return: True if you have latest version, else False if you need to upgrade
              or None if server was not reachable.
     """"""
-    from invenio.config import CFG_VERSION
+    from invenio.version import __version__ as invenio_version
     from invenio.base.i18n import _
     try:
         find = re.compile('Invenio v[0-9]+.[0-9]+.[0-9]+(\-rc[0-9])?'",we can use `invenio.version` instead,py,1,1,0
"@@ -86,8 +86,14 @@ public class InitCodeTransformer {
 
   private final ImportSectionTransformer importSectionTransformer;
 
-  // Whether the initialization code should include user-facing comments like TODOs. This should be
-  // false if the initialization code is being used to generate tests, rather than code samples.
+  // Whether the initialization code should include hardcoded comments like TODOs. This
+  // should only be true when generating incode samples.
+  //
+  // This field should be set to false when generating tests because tests do not need to include
+  // user facing comments.
+  //
+  // This field should be set to false when generating standalone samples because comments in
+  // standalone samples are derived from user configurations, not hardcoded.
   private final boolean generateUserFacingComments;
 
   public InitCodeTransformer() {","nits here and below: ""hard-coded"" ""in-code""",java,1,1,0
"@@ -130,14 +130,14 @@ func TestAttestorTestSuite(t *testing.T) {
 }
 
 func (s *AttestorTestSuite) linkAgentSVIDPath() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/agent_svid.der""),
                 s.config.SVIDCachePath)
         s.Require().NoError(err)
 }
 
 func (s *AttestorTestSuite) linkBundle() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/bundle.der""),
                 s.config.BundleCachePath)
         s.Require().NoError(err)",Did you run into a problem with this?,go,1,1,0
"@@ -4,6 +4,8 @@ class OrgsController < ApplicationController
 
   include OrgSelectable
 
+  skip_before_action :verify_authenticity_token, only: %w[search]
+
   after_action :verify_authorized, except: %w[
     shibboleth_ds shibboleth_ds_passthru search
   ]",switch to pass auth token,rb,1,1,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -0,0 +1,15 @@
+""""""Test case for typevar-name-missing-variance with default settings""""""
+
+from typing import TypeVar
+
+# Name set by regex pattern
+TypeVarsShouldBeLikeThis = TypeVar(""TypeVarsShouldBeLikeThis"")
+TypeVarsShouldBeLikeThis_contra = TypeVar(
+    ""TypeVarsShouldBeLikeThis_contra"", contravariant=True
+)
+TypeVarsShouldBeLikeThis_co = TypeVar(""TypeVarsShouldBeLikeThis_co"", covariant=True)
+
+# Name using the standard style
+T_GoodName = TypeVar(""T_GoodName"")  # [invalid-name]
+T_GoodName_co = TypeVar(""T_GoodName_co"", covariant=True)  # [invalid-name]
+T_GoodName_contra = TypeVar(""T_GoodName_contra"", contravariant=True)  # [invalid-name]",Better to remove the `T_` prefix,py,1,1,0
"@@ -886,6 +886,11 @@ void declare_optimization_goal(const size_t context,
 #include <cstring>
 
 namespace Kokkos {
+
+namespace Profiling {
+bool profileLibraryLoaded() { return false; }
+}  // namespace Profiling
+
 namespace Tools {
 
 bool profileLibraryLoaded() { return false; }","```diff diff --git a/core/src/impl/Kokkos_Profiling.cpp b/core/src/impl/Kokkos_Profiling.cpp index 3e593c5..387b83e 100644 --- a/core/src/impl/Kokkos_Profiling.cpp +++ b/core/src/impl/Kokkos_Profiling.cpp @@ -889,7 +889,7 @@ namespace Kokkos { namespace Profiling { bool profileLibraryLoaded() { return false; } -} +} // namespace Profiling namespace Tools {",cpp,0,0,0
"@@ -526,6 +526,7 @@ module Bolt
     end
 
     def apply_manifest(code, targets, filename = nil, noop = false)
+      Puppet[:tasks] = false
       ast = pal.parse_manifest(code, filename)
 
       executor = Bolt::Executor.new(config.concurrency, analytics, noop)",Was this a bug?,rb,1,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -4,12 +4,11 @@
 
 package net.sourceforge.pmd.lang.plsql.ast;
 
-import net.sourceforge.pmd.lang.ast.Node;
-import net.sourceforge.pmd.lang.ast.NodeStream;
+import net.sourceforge.pmd.lang.ast.impl.javacc.JjtreeNode;
 import net.sourceforge.pmd.lang.symboltable.Scope;
 import net.sourceforge.pmd.lang.symboltable.ScopedNode;
 
-public interface PLSQLNode extends Node, ScopedNode {
+public interface PLSQLNode extends ScopedNode, JjtreeNode<PLSQLNode> {
 
     /** Accept the visitor. **/
     Object jjtAccept(PLSQLParserVisitor visitor, Object data);","hm...yes, these methods are not ideal, too generic like ""getImage"". but this time on plsql...",java,1,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -1184,13 +1184,8 @@ static swift::ASTContext *SetupASTContext(
   if (disable_objc_runtime())
     swift_ast_context->GetLanguageOptions().EnableObjCInterop = false;
 
-  if (repl || playground) {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = true;
-  } else {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = false;
-  }
+  swift_ast_context->GetLanguageOptions().Playground = repl || playground;
+  swift_ast_context->GetIRGenOptions().Playground = repl || playground;
 
   // For the expression parser and REPL we want to relax the
   // requirement that you put ""try"" in front of every expression that",This was a typo that prevented the feature to work correctly.,cpp,1,1,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -886,6 +886,11 @@ void declare_optimization_goal(const size_t context,
 #include <cstring>
 
 namespace Kokkos {
+
+namespace Profiling {
+bool profileLibraryLoaded() { return false; }
+}  // namespace Profiling
+
 namespace Tools {
 
 bool profileLibraryLoaded() { return false; }","```diff diff --git a/core/src/impl/Kokkos_Profiling.cpp b/core/src/impl/Kokkos_Profiling.cpp index 3e593c5..387b83e 100644 --- a/core/src/impl/Kokkos_Profiling.cpp +++ b/core/src/impl/Kokkos_Profiling.cpp @@ -889,7 +889,7 @@ namespace Kokkos { namespace Profiling { bool profileLibraryLoaded() { return false; } -} +} // namespace Profiling namespace Tools {",cpp,0,0,0
"@@ -9,11 +9,11 @@ This module contains tools for enumerating tautomers and determining a canonical
 :license: MIT, see LICENSE file for more details.
 """"""
 
-
 import copy
 import logging
 
 from rdkit import Chem
+from rdkit.Chem.MolStandardize import rdMolStandardize
 from rdkit.Chem.rdchem import BondDir, BondStereo, BondType
 
 from .utils import memoized_property, pairwise",I don't think you need to make any edits at all to this file for this PR,cpp,0,1,0
"@@ -47,15 +47,12 @@ import json
 import random
 import tempfile
 import unittest2 as unittest
+from pkg_resources import resource_filename
 
-from nupic.data.datasethelpers import findDataset
 from nupic.data.file_record_stream import FileRecordStream
 from nupic.engine import Network
-from nupic.research import fdrutilities as fdrutils
 from nupic.encoders import MultiEncoder
-from nupic.regions.RecordSensorFilters.ModifyFields import ModifyFields
-from nupic.support.unittesthelpers.testcasebase import (TestCaseBase,
-                                                        TestOptionParser)
+from nupic.support.unittesthelpers.testcasebase import TestCaseBase
 
 _VERBOSITY = 0         # how chatty the unit tests should be
 _SEED = 35             # the random seed used throughout",Cleaned up unused imports.,py,1,1,0
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -33,13 +33,13 @@ export function createComponent(Ctor, props, context) {
 		inst;
 
 	if (Ctor.prototype && Ctor.prototype.render) {
-		inst = new Ctor(props, context);
+		inst = new /** @type {(props, context) => void} */(Ctor)(props, context);
 		Component.call(inst, props, context);
 	}
 	else {
 		inst = new Component(props, context);
 		inst.constructor = Ctor;
-		inst.render = doRender;
+		inst['render'] = doRender;
 	}
 
 ",This seems strange to me. @rbiggs Can you elaborate on the thinking behind it?,js,0,1,0
"@@ -29,14 +29,14 @@ def test_config_build_detector():
     from mmdet.models import build_detector
 
     config_dpath = _get_config_directory()
-    print('Found config_dpath = {!r}'.format(config_dpath))
+    print(f'Found config_dpath = {config_dpath!r}')
 
     import glob
     config_fpaths = list(glob.glob(join(config_dpath, '**', '*.py')))
     config_fpaths = [p for p in config_fpaths if p.find('_base_') == -1]
     config_names = [relpath(p, config_dpath) for p in config_fpaths]
 
-    print('Using {} config files'.format(len(config_names)))
+    print(f'Using {len(config_names)} config files')
 
     for config_fname in config_names:
         config_fpath = join(config_dpath, config_fname)",The `!r` is unnecessary.,py,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -75,7 +75,7 @@ namespace NLog.Targets
         /// <value>The endpoint address.</value>
         /// <docgen category='Connection Options' order='10' />
         [RequiredParameter]
-        public string EndpointAddress { get; set; }
+        public virtual string EndpointAddress { get; set; }
 
 #if WCF_SUPPORTED
         /// <summary>",This is the only line that should change. Ignore any other file changes.,.cs,1,1,0
"@@ -43,11 +43,6 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.System.IO.Pipelines
             {
                 var part = _enumerator.Current;
 
-                if (_end)
-                {
-                    return new ReadCursor(part.Segment, part.Start + _currentSpan.Length);
-                }
-
                 return new ReadCursor(part.Segment, part.Start + _index);
             }
         }","This is really strange, now when I look at it.",.cs,1,1,0
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -58,6 +58,8 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private static final String AZKABAN_FAILURE_MESSAGE =
       ""azkaban.failure.message"";
   private static final long serialVersionUID = -1;
+
+  protected String passwordPlaceholder;
   private AzkabanServer application;
   private String name;
   private String label;",Why passwordPlaceholder is added in AbstractAzkabanServlet instead of LoginAbstractAzkabanServlet?,java,1,1,0
"@@ -1,12 +1,8 @@
 <% org = template.org.abbreviation.present? ? template.org.abbreviation : template.org.name %>
-<% if example_answer.present? || guidance.present? %>
+<% if guidance.present? %>
   <dl<%= for_plan ? ' class=""dl-horizontal""' : '' %>>
-    <% if example_answer.present? %>
-      <dt><%= _('Example answer') %></dt>
-      <dd><%= raw example_answer.text %><dd>
-    <% end %>
     <% if guidance.present? %>
-      <dt><%= _('Guidance') %></dt>
+      <dt><%= template.customization_of.nil? ? _('Guidance') : _('%{org} Guidance') % { org: guidance.org.short_name } %></dt>
       <dd><%= raw guidance.text %></dd>
     <% end %>
   </dl>",this if is no longer needed,rb,1,1,0
"@@ -4,13 +4,12 @@
 
 using System;
 using System.Reflection;
-using System.Threading.Tasks;
 using MvvmCross.Exceptions;
 using MvvmCross.Logging;
 
 namespace MvvmCross.Base
 {
-    public abstract class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
+    public class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
     {
         protected static void ExceptionMaskedAction(Action action, bool maskExceptions)
         {",Please leave as abstract,.cs,1,1,0
"@@ -196,7 +196,6 @@ public abstract class SyncTarget {
                 smartStore.beginTransaction();
                 for (int i = 0; i < records.length(); i++) {
                     JSONObject record = new JSONObject(records.getJSONObject(i).toString());
-                    cleanRecord(record);
                     cleanAndSaveInSmartStore(syncManager.getSmartStore(), soupName, record, false);
                 }
                 smartStore.setTransactionSuccessful();",The next method called (cleanAndSaveInSmartStore) does a cleanRecord,java,1,1,0
"@@ -34,6 +34,15 @@ class CocoDataset(CustomDataset):
                'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush')
 
     def load_annotations(self, ann_file):
+        """"""Load annotation from COCO style annotation file
+
+        Args:
+            ann_file (str): Path of annotation file.
+
+        Returns:
+            list[dict]: Annotation info from COCO api.
+        """"""
+
         self.coco = COCO(ann_file)
         self.cat_ids = self.coco.get_cat_ids(cat_names=self.CLASSES)
         self.cat2label = {cat_id: i for i, cat_id in enumerate(self.cat_ids)}",Missing the last `.`,py,1,1,0
"@@ -7,12 +7,13 @@ class PostsController < ApplicationController
   before_action :find_forum_and_topic_records, only: [:create]
 
   def index
-    @posts = Post.paginate(page: params[:page], per_page: 10)
+    all_posts = Post.all
+    @posts = all_posts.paginate(page: params[:page], per_page: 10)
   end
 
   def create
     @post = build_new_post
-    if verify_recaptcha(model: @post) && @post.save
+    if @post.save
       post_notification(@post)
       redirect_to topic_path(@topic)
     else",This looks better the previous way.,rb,1,1,0
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -198,7 +198,7 @@ public class LocalDistributor extends Distributor {
       Host host = new Host(bus, node);
       host.update(status);
       hosts.add(host);
-      LOG.info(String.format(""Added node %s."", node.getId()));
+      LOG.finest(String.format(""Added node %s."", node.getId()));
       host.runHealthCheck();
 
       Runnable runnable = host::runHealthCheck;",This change is incorrect.,js,1,1,0
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -629,12 +629,13 @@ namespace pwiz.Skyline.Util.Extensions
             }
             for (int i = 0; i < fields.Length; ++i)
             {
-                FieldNames.Add(fields[i].Trim());
-                FieldDict[fields[i]] = i;
+                var trimmed = fields[i].Trim();
+                FieldNames.Add(trimmed);
+                FieldDict[trimmed] = i;
                 // Check to see if the given column name is actually a synonym for the internal canonical (no spaces, serialized) name
                 if (headerSynonyms != null)
                 {
-                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, fields[i], StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
+                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, trimmed, StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
                     if (!string.IsNullOrEmpty(key))
                     {
                         var syn = headerSynonyms[key];","I would name this variable ""fieldName"" instead of ""trimmed"".",.cs,1,1,0
"@@ -105,6 +105,10 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal
         {
             try
             {
+                // TODO: When we start tracking all connection middleware for shutdown, go back
+                // to logging connections tart and stop in ConnectionDispatcher so we get these
+                // logs for all connection middleware.
+                Log.ConnectionStart(ConnectionId);
                 KestrelEventSource.Log.ConnectionStart(this);
 
                 AdaptedPipeline adaptedPipeline = null;",Why did you move this?,.cs,1,1,0
"@@ -139,7 +139,12 @@ CmpContext::CmpContext(UInt32 f, CollHeap * h)
   optPCodeCache_(NULL),                       // just to be safe ...
   CDBList_(NULL),
   allControlCount_(0),
-  optSimulator_(NULL)
+  optSimulator_(NULL),
+  hosts_(h),
+  invocationInfos_(h),
+  planInfos_(h),
+  routineHandles_(h),
+  ddlObjs_(h)
 {
   SetMode(isDynamicSQL() ? STMT_DYNAMIC : STMT_STATIC);
 ","My bad, sorry for adding these leaks.",cpp,0,1,0
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -69,7 +69,7 @@ var (
 		completeJobCompleted: 9,
 	}
 
-	cancelC chan struct{}
+	cancelC = make(chan struct{})
 )
 
 func initPatch(ctx context.Context) {",why is this change needed?,go,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -24,12 +24,16 @@ const test = (suite, buildConfig = config.defaultBuildConfig, options) => {
   config.update(options)
 
   const braveArgs = [
-    '--enable-logging'
+    '--enable-logging=stderr'
   ]
 
   // Android doesn't support --v
   if (config.targetOS !== 'android') {
     braveArgs.push('--v=' + options.v)
+
+    if (options.vmodule) {
+      braveArgs.push('--vmodule=' + options.vmodule)
+    } 
   }
 
   if (options.filter) {",logs are only exposed if test fails,js,1,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -1,10 +1,13 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 # SPDX - License - Identifier: Apache - 2.0
 
+# Purpose
+# This code example demonstrates how to configure an Amazon Simple Storage Solution (Amazon S3) bucket as a static website.
+
+# snippet-start:[s3.s3_ruby_bucket_website.rb]
+
 require 'aws-sdk-s3'
 
-# Configures an Amazon S3 bucket as a static website.
-#
 # Prerequisites:
 #
 # - An Amazon S3 bucket.",Simple Storage **Service**,rb,0,0,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -135,7 +135,8 @@ class PathResolver
   # This operation considers posix paths, windows paths, and file URLs.
   #
   # Unix absolute paths and UNC paths start with slash. Windows roots can start
-  # with a drive letter. Absolute paths in the browser start with file://.
+  # with a drive letter. Absolute paths may start with file://, http://, or
+  # https:// when the IO module is xmlhttprequest (Opal runtime only).
   #
   # path - the String path to check
   #",I didn't know that `start_with?` accepts a list of arguments! It's good to know :smile:,rb,0,1,0
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -47,6 +47,9 @@ def molecule_provisioner_section_data():
                 'instance-1': [{
                     'foo': 'bar'
                 }],
+                'localhost': [{
+                    'foo': 'baz'
+                }]
             },
             'group_vars': {
                 'example_group1': [{",This and line 156 below adds coverage for the special case of localhost host_vars,py,0,1,0
"@@ -512,9 +512,14 @@ folly::Future<Status> AdminClient::createSnapshot(GraphSpaceID spaceId, const st
 
     folly::Promise<Status> pro;
     auto f = pro.getFuture();
+
+    /**
+     * Don't need retry.
+     * Because existing checkpoint directories leads to fail again.
+     **/
     getResponse(allHosts, 0, std::move(req), [] (auto client, auto request) {
         return client->future_createCheckpoint(request);
-    }, 0, std::move(pro), 1 /*The snapshot operation only needs to be retried twice*/);
+    }, 0, std::move(pro), 0);
     return f;
 }
 ",What if there are some connection failure?,cpp,1,1,0
"@@ -139,7 +139,12 @@ CmpContext::CmpContext(UInt32 f, CollHeap * h)
   optPCodeCache_(NULL),                       // just to be safe ...
   CDBList_(NULL),
   allControlCount_(0),
-  optSimulator_(NULL)
+  optSimulator_(NULL),
+  hosts_(h),
+  invocationInfos_(h),
+  planInfos_(h),
+  routineHandles_(h),
+  ddlObjs_(h)
 {
   SetMode(isDynamicSQL() ? STMT_DYNAMIC : STMT_STATIC);
 ","My bad, sorry for adding these leaks.",cpp,0,1,0
"@@ -73,7 +73,7 @@ fpga_result read_sysfs(fpga_token token, char *sysfs_path,
 		resval = res;
 		goto out_destroy;
 	}
-	printf(""size=%d \n"", size);
+
 	if (size > len) {
 		OPAE_ERR(""object size bigger then buffer size"");
 		resval = FPGA_EXCEPTION;",Could you submit this one in a separate pull request?,c,0,1,0
"@@ -21,6 +21,8 @@ import com.google.common.base.Charsets;
 import com.google.common.io.ByteStreams;
 import com.google.common.net.MediaType;
 
+import com.sun.org.glassfish.gmbal.ManagedObject;
+
 import org.apache.http.Header;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpHost;","Again, you don't want to depend on glassfish.",py,1,1,0
"@@ -31,7 +31,7 @@ namespace Nethermind.Blockchain.Producers
         private Task _producerTask;
         private readonly CancellationTokenSource _loopCancellationTokenSource = new CancellationTokenSource();
         private readonly CancellationTokenSource _stepCancellationTokenSource = new CancellationTokenSource();
-        private bool _canProduce;
+        private bool _canProduce = true;
 
         protected BaseLoopBlockProducer(
             IPendingTxSelector pendingTxSelector,","I had some nasty forks with this true as default when syncing pre-existing networks, this is under investigation",.cs,0,1,0
"@@ -1,6 +1,7 @@
 // unit tests creating LAMMPS instances via the library interface
 
 #include ""lammps.h""
+#define LAMMPS_LIB_MPI 1
 #include ""library.h""
 #include <cstdio> // for stdin, stdout
 #include <mpi.h>",Should this be here?,cpp,1,1,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -4,15 +4,17 @@
  */
 #include <LightGBM/config.h>
 
+#include <LightGBM/dataset.h>
 #include <LightGBM/utils/common.h>
 #include <LightGBM/utils/log.h>
 #include <LightGBM/utils/random.h>
+#include <LightGBM/utils/text_reader.h>
 
 #include <limits>
 
 namespace LightGBM {
 
-void Config::KV2Map(std::unordered_map<std::string, std::string>& params, const char* kv) {
+void Config::KV2Map(std::unordered_map<std::string, std::string>* params, const char* kv) {
   std::vector<std::string> tmp_strs = Common::Split(kv, '=');
   if (tmp_strs.size() == 2 || tmp_strs.size() == 1) {
     std::string key = Common::RemoveQuotationSymbol(Common::Trim(tmp_strs[0]));",Not needed anymore?,cpp,1,1,0
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -631,6 +631,8 @@ class FormatChecker(BaseTokenChecker):
             elif token[1] == ',':
                 if not bracket_level:
                     return False
+            elif token[1] == '.':
+                continue
             elif token[0] not in (tokenize.NAME, tokenize.STRING):
                 return False
         return False","Well, yes, this is one possible solution. Thanks for a fix  ",py,0,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -230,4 +230,4 @@ public class Login {
 			return 1; // L: 1317
 		}
 	}
-}
+}",Revert this file,java,1,1,0
"@@ -220,7 +220,7 @@ class JsGenerator : public BaseGenerator {
        it != sorted_namespaces.end(); it++) {
     if (lang_.language == IDLOptions::kTs) {
       if (it->find('.') == std::string::npos) {
-        code += ""import { flatbuffers } from \""./flatbuffers\""\n"";
+        code += ""import { flatbuffers } from \""flatbuffers\""\n"";
         break;
       }
     } else {",Why is this? What effect will this have on other users? @krojew @JoshGalvin,java,0,0,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -140,8 +140,8 @@ type Config struct {
         PrometheusMetricsEnabled bool `config:""bool;false""`
         PrometheusMetricsPort    int  `config:""int(0,65535);9091""`
 
-        FailsafeInboundHostPorts  []uint16 `config:""port-list;22;die-on-fail""`
-        FailsafeOutboundHostPorts []uint16 `config:""port-list;2379,2380,4001,7001;die-on-fail""`
+        FailsafeInboundHostPorts  []ProtoPort `config:""port-list;tcp:22,udp:68;die-on-fail""`
+        FailsafeOutboundHostPorts []ProtoPort `config:""port-list;tcp:2379,tcp:2380,tcp:4001,tcp:7001,udp:53,udp:67;die-on-fail""`
 
         UsageReportingEnabled bool   `config:""bool;true""`
         ClusterGUID           string `config:""string;baddecaf""`",Not a big fan of this format. We also need to update the docs - can you link me to that PR when it's ready? It should probably explain the reason for each port being included as well.,c,1,1,0
"@@ -14,11 +14,9 @@ class HomeController < ApplicationController
   def index
     if user_signed_in?
       name = current_user.name(false)
-      # TODO: Investigate if this is even relevant anymore.
-      # The name var will never be blank here because the logic in
-      # User says to return the email if the firstname and surname are empty
-      # regardless of the flag passed in
-      if name.blank?
+      # The RolesController defaults the firstname and surname (both required fields)
+      # to 'FirstName' and 'Surname' when a plan is shared with an unknown user
+      if name == ""First Name Surname""
         redirect_to edit_user_registration_path
       else
         redirect_to plans_url",Came across this recently in DMPTool and decided to just fix here,rb,0,1,0
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -1,5 +1,5 @@
 from functools import update_wrapper
-from typing import Any, Callable, Dict, List, Optional, Sequence, Set, Union
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional, Sequence, Set, Union
 
 from dagster import check
 from dagster.core.decorator_utils import format_docstring_for_description","Oops, I'm going to move these changes that don't have anything to do with asset defs to a separate PR.",py,0,1,0
"@@ -196,7 +196,6 @@ public abstract class SyncTarget {
                 smartStore.beginTransaction();
                 for (int i = 0; i < records.length(); i++) {
                     JSONObject record = new JSONObject(records.getJSONObject(i).toString());
-                    cleanRecord(record);
                     cleanAndSaveInSmartStore(syncManager.getSmartStore(), soupName, record, false);
                 }
                 smartStore.setTransactionSuccessful();",The next method called (cleanAndSaveInSmartStore) does a cleanRecord,java,1,1,0
"@@ -2971,6 +2971,15 @@ void rai::add_node_options (boost::program_options::options_description & descri
 bool rai::handle_node_options (boost::program_options::variables_map & vm)
 {
 	auto result (false);
+	boost::filesystem::path data_path;
+	if (vm.count (""data_path""))
+	{
+		data_path = boost::filesystem::path (vm [""data_path""].as <std::string> ());
+	}
+	else
+	{
+		data_path = rai::working_path ();
+	}
 	if (vm.count (""account_create""))
 	{
 		if (vm.count (""wallet"") == 1)",This would be better as a ternary IMO.,cpp,1,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -46,7 +46,7 @@ void CleanTCPSocketsEvent::event(EventCode code, const char* /*msg*/)
 {
     if(code == EVENT_SUCCESS)
     {
-        mp_transport->clean_deleted_sockets();
+        //mp_transport->clean_deleted_sockets();
     }
 }
 ","So... the whole class isn't necessary, didn't?",cpp,1,1,0
"@@ -58,8 +58,9 @@ class DeltaXYWHBBoxCoder(BaseBBoxCoder):
         """"""Apply transformation `pred_bboxes` to `boxes`.
 
         Args:
-            boxes (torch.Tensor): Basic boxes.
-            pred_bboxes (torch.Tensor): Encoded boxes with shape
+            bboxes (torch.Tensor): Basic boxes. Shape (B, N, 4) or (N, 4)
+            pred_bboxes (torch.Tensor): Encoded boxes with
+               shape (B, N, 4) or (N, 4)
             max_shape (tuple[int], optional): Maximum shape of boxes.
                 Defaults to None.
             wh_ratio_clip (float, optional): The allowed ratio between",max_shape may be tuple[tuple],py,1,1,0
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -5,7 +5,7 @@ if (ariaHeadingLevel !== null) {
 	return true;
 }
 
-var headingLevel = node.tagName.match(/H(\d)/);
+var headingLevel = node.nodeName.match(/H(\d)/);
 
 if (headingLevel) {
 	this.data(parseInt(headingLevel[1], 10));",do you need `toUpperCase()` here?,js,1,1,0
"@@ -200,4 +200,17 @@ public interface ProjectLoader {
       throws ProjectManagerException;
 
   void updateProjectSettings(Project project) throws ProjectManagerException;
+
+  /**
+   * Uploads flow file.
+   */
+  void uploadFlowFile(int projectId, int projectVersion, int flowVersion, File flowFile)
+      throws ProjectManagerException;
+
+  /**
+   * Gets flow file that's uploaded.
+   */
+  File getUploadedFlowFile(int projectId, int projectVersion, int flowVersion, String flowName)
+      throws ProjectManagerException;
+
 }",same here about the argument order.,java,1,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -12,7 +12,7 @@
  * * Redistributions in binary form must reproduce the above copyright notice,
  *   this list of conditions and the following disclaimer in the documentation
  *   and/or other materials provided with the distribution.
- *
+ *sig
  * * Neither the name of Google, Inc. nor the names of its contributors may be
  *   used to endorse or promote products derived from this software without
  *   specific prior written permission.",Please do a self-review before posting.,c,0,1,0
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -331,6 +331,7 @@ namespace NLog.UnitTests.Layouts
                         new CsvColumn(""date"", ""${longdate}""),
                         new CsvColumn(""level"", ""${level}""),
                         new CsvColumn(""message"", ""${message}""),
+                        new CsvColumn(""threadid"", ""${threadid}""),
                     },
                 QuoteChar = ""'"",
                 Delimiter = CsvColumnDelimiterMode.Semicolon,",was a new unit test not a better option?,.cs,1,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -17,7 +17,7 @@ namespace Datadog.Trace.ClrProfiler
                 DefinitionsId = ""FFAFA5168C4F4718B40CA8788875C2DA"",
 
                 // Autogenerated definitions array
-                Definitions = GetDefinitionsArray(),
+                Definitions = GetDefinitionsList().ToArray(),
             };
         }
 ",@tonyredondo for visibility,.cs,0,1,0
"@@ -1,8 +1,6 @@
-#!/usr/bin/env python
-
 # ----------------------------------------------------------------------
 # Numenta Platform for Intelligent Computing (NuPIC)
-# Copyright (C) 2013, Numenta, Inc.  Unless you have an agreement
+# Copyright (C) 2014, Numenta, Inc.  Unless you have an agreement
 # with Numenta, Inc., for a separate license for this software code, the
 # following terms and conditions apply:
 #",I think it is preferred to change to `2013-2014`.,py,1,1,0
"@@ -1195,7 +1195,7 @@ static void handle_get_app_config(GUI_RPC_CONN& grc) {
         return;
     }
     sprintf(path, ""%s/%s"", p->project_dir(), APP_CONFIG_FILE_NAME);
-    printf(""path: %s\n"", path);
+    // printf(""path: %s\n"", path);    // debug only
     int retval = read_file_string(path, s);
     if (retval) {
         grc.mfout.printf(""<error>app_config.xml not found</error>\n"");",Could be completely removed,php,1,1,0
"@@ -19,4 +19,6 @@ exports.Date = require('./date');
 
 exports.ObjectId = require('./objectid');
 
+exports.ObjectId = require('./dbref');
+
 exports.Mixed = require('./mixed');",Should be `exports.DBRef` i guess.,js,1,1,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -349,9 +349,13 @@ public class Camera2 extends android.support.v4.app.Fragment {
                 		Camera.Parameters parameters = preview.mCamera.getParameters();
                 		switch (HDR_STATE){
                     			case HDR_OFF:
-                        			HDR_STATE = HDR_ON;
-                        			camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
-                        			parameters.setSceneMode(SCENE_MODE_HDR);
+                        			if (preview.getSupportSceneModes().contains(SCENE_MODE_HDR)) {
+                                        HDR_STATE = HDR_ON;
+                                        camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
+                                        parameters.setSceneMode(SCENE_MODE_HDR);
+                                    }else {
+                                        Toast.makeText(ctx, R.string.hdr_unsupported_error,Toast.LENGTH_SHORT).show();
+                                    }
                         			break;
                     			case HDR_ON:
                         			HDR_STATE = HDR_OFF;",Properly intend the code pls.,java,1,1,0
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -18,9 +18,14 @@
 package cmd
 
 import (
+        ""encoding/json""
         ""path/filepath""
         ""time""
 
+        ""github.com/mysteriumnetwork/node/nat/traversal/config""
+
+        ""github.com/mysteriumnetwork/node/nat/traversal""
+
         ""github.com/asaskevich/EventBus""
         log ""github.com/cihub/seelog""
         ""github.com/ethereum/go-ethereum/accounts/keystore""",Something wrong with import blocks.,go,1,0,0
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -109,6 +109,7 @@ int main(int argc, char *argv[]) {
                                                                       paths);
     if (!gStorageServer->start()) {
         LOG(ERROR) << ""Storage server start failed"";
+        gStorageServer->stop();
         return EXIT_FAILURE;
     }
 ",Well done. I want to know why the daemon crash?,cpp,0,1,0
"@@ -14,11 +14,9 @@ class HomeController < ApplicationController
   def index
     if user_signed_in?
       name = current_user.name(false)
-      # TODO: Investigate if this is even relevant anymore.
-      # The name var will never be blank here because the logic in
-      # User says to return the email if the firstname and surname are empty
-      # regardless of the flag passed in
-      if name.blank?
+      # The RolesController defaults the firstname and surname (both required fields)
+      # to 'FirstName' and 'Surname' when a plan is shared with an unknown user
+      if name == ""First Name Surname""
         redirect_to edit_user_registration_path
       else
         redirect_to plans_url",Came across this recently in DMPTool and decided to just fix here,rb,0,1,0
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -987,6 +987,7 @@ class BrowseModeDocumentTextInfo(textInfos.TextInfo):
 
 	def getControlFieldSpeech(self, attrs, ancestorAttrs, fieldType, formatConfig=None, extraDetail=False, reason=None):
 		textList = []
+		role=attrs.get('role')
 		landmark = attrs.get(""landmark"")
 		if formatConfig[""reportLandmarks""] and fieldType == ""start_addedToControlFieldStack"" and landmark:
 			try:",This line is no longer necessary.,py,1,1,0
"@@ -38,7 +38,8 @@ func (p *diskInspectionProcessor) process(pd persistentDisk,
 
         ir, err := p.inspectDisk(pd.uri)
         if err != nil {
-                return pd, err
+                // Don't directly return err to avoid terminating the import.
+                return pd, nil
         }
 
         isDualBoot := ir.UEFIBootable && ir.BIOSBootableWithHybridMBROrProtectiveMBR",Log the error?,go,1,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -238,12 +238,15 @@ bool StatelessReader::matched_writer_is_matched(
 bool StatelessReader::change_received(
         CacheChange_t* change)
 {
-    // Only make visible the change if there is not other with bigger sequence number.
+    // std::cout << ""[FAST STATELESS READER] change_received"" << std::endl;
+    // Only make visible the change if there is change_received other with bigger sequence number.
     // TODO Revisar si no hay que incluirlo.
     if (!thereIsUpperRecordOf(change->writerGUID, change->sequenceNumber))
     {
         if (mp_history->received_change(change, 0))
         {
+            auto payload_length = change->serializedPayload.length;
+
             Time_t::now(change->receptionTimestamp);
             update_last_notified(change->writerGUID, change->sequenceNumber);
             ++total_unread_;",Seems this was left here unintentionally,cpp,1,1,0
"@@ -2192,8 +2192,8 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])
         return DataFrame(internal)
 
-    # TODO: add axis parameter
-    def diff(self, periods=1):
+    # TODO: axis should support 1 or 'columns' either
+    def diff(self, periods: int = 1, axis: int = 0):
         """"""
         First discrete difference of element.
 ",At this moment?,py,0,0,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -43,11 +43,6 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.System.IO.Pipelines
             {
                 var part = _enumerator.Current;
 
-                if (_end)
-                {
-                    return new ReadCursor(part.Segment, part.Start + _currentSpan.Length);
-                }
-
                 return new ReadCursor(part.Segment, part.Start + _index);
             }
         }","This is really strange, now when I look at it.",.cs,1,1,0
"@@ -140,8 +140,8 @@ type Config struct {
         PrometheusMetricsEnabled bool `config:""bool;false""`
         PrometheusMetricsPort    int  `config:""int(0,65535);9091""`
 
-        FailsafeInboundHostPorts  []uint16 `config:""port-list;22;die-on-fail""`
-        FailsafeOutboundHostPorts []uint16 `config:""port-list;2379,2380,4001,7001;die-on-fail""`
+        FailsafeInboundHostPorts  []ProtoPort `config:""port-list;tcp:22,udp:68;die-on-fail""`
+        FailsafeOutboundHostPorts []ProtoPort `config:""port-list;tcp:2379,tcp:2380,tcp:4001,tcp:7001,udp:53,udp:67;die-on-fail""`
 
         UsageReportingEnabled bool   `config:""bool;true""`
         ClusterGUID           string `config:""string;baddecaf""`",Not a big fan of this format. We also need to update the docs - can you link me to that PR when it's ready? It should probably explain the reason for each port being included as well.,c,1,1,0
"@@ -16,9 +16,16 @@ module.exports = function(environment) {
     APP: {
       // Here you can pass flags/options to your application instance
       // when it is created
+    },
+
+    'simple-auth': {
+
+    },
+    'ember-cli-mirage': {
+      enabled: false
     }
   };
-    
+
 ENV.APP.manifest = {
   enabled: true,
   appcacheFile: ""/manifest.appcache"",",remanent of cli mirage.,js,1,0,0
"@@ -109,6 +109,7 @@ int main(int argc, char *argv[]) {
                                                                       paths);
     if (!gStorageServer->start()) {
         LOG(ERROR) << ""Storage server start failed"";
+        gStorageServer->stop();
         return EXIT_FAILURE;
     }
 ",Well done. I want to know why the daemon crash?,cpp,0,1,0
"@@ -1,8 +1,6 @@
-#!/usr/bin/env python
-
 # ----------------------------------------------------------------------
 # Numenta Platform for Intelligent Computing (NuPIC)
-# Copyright (C) 2013, Numenta, Inc.  Unless you have an agreement
+# Copyright (C) 2014, Numenta, Inc.  Unless you have an agreement
 # with Numenta, Inc., for a separate license for this software code, the
 # following terms and conditions apply:
 #",I think it is preferred to change to `2013-2014`.,py,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
-        # Training state
-        if self.training:
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_train_or_val_workflow = (coeff_pred[0].dim() == 4)
+
+        # Train or val workflow
+        if is_train_or_val_workflow:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",self.is_training or self.training?,py,1,1,0
"@@ -12,7 +12,9 @@ class ProposalsController < ApplicationController
 
   def show
     @proposal = proposal.decorate
-    cookies[:detail] = params[:detail]
+    if !params[:detail].blank?
+      cookies[:detail] = params[:detail]
+    end
     mode = cookies[:detail]
     if mode == ""new""
       @client_data_instance ||= proposal.client_data",@jessieay I had to re-add this check because the cookie was getting wiped when the query wasnt set.,rb,0,1,0
"@@ -145,3 +145,14 @@ def init():
     objreg.register('command-history', command_history)
     save_manager.add_saveable('command-history', command_history.save,
                               command_history.changed)
+
+
+def init_fprompt():
+    """"""Initialize the LimitLineParser storing the history.""""""
+    save_manager = objreg.get('save-manager')
+    fprompt_history = lineparser.LimitLineParser(
+        standarddir.data(), 'fprompt-history',
+        limit='completion.fprompt_history_max_items')
+    objreg.register('fprompt-history', fprompt_history)
+    save_manager.add_saveable('fprompt-history', fprompt_history.save,
+                              fprompt_history.changed)",No need to have a separate init function for this.,py,1,1,0
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -694,7 +694,13 @@ class ColorbarPlot(ElementPlot):
             self._cbar_extend = 'max'
 
         # Define special out-of-range colors on colormap
-        cmap = copy.copy(plt.cm.get_cmap(opts.get('cmap')))
+        cmap = opts.get('cmap')
+        if isinstance(cmap, list):
+            cmap = mpl_colors.ListedColormap(cmap)
+        elif isinstance(cmap, util.basestring):
+            cmap = copy.copy(plt.cm.get_cmap(cmap))
+        else:
+            cmap = copy.copy(cmap)
         colors = {}
         for k, val in self.clipping_colors.items():
             if isinstance(val, tuple):",What is all the copying about?,py,1,1,0
"@@ -14,7 +14,7 @@ HTTP_ERRORS = [Timeout::Error,
                Net::HTTPHeaderSyntaxError,
                Net::ProtocolError]
 
-SMTP_SERVER_ERRORS = [TimeoutError,
+SMTP_SERVER_ERRORS = [Timeout::Error,
                       IOError,
                       Net::SMTPUnknownError,
                       Net::SMTPServerBusy,",Freeze mutable objects assigned to constants.,rb,1,1,0
"@@ -109,6 +109,7 @@ int main(int argc, char *argv[]) {
                                                                       paths);
     if (!gStorageServer->start()) {
         LOG(ERROR) << ""Storage server start failed"";
+        gStorageServer->stop();
         return EXIT_FAILURE;
     }
 ",Well done. I want to know why the daemon crash?,cpp,0,1,0
"@@ -19,7 +19,10 @@ package org.openqa.selenium.grid.graphql;
 
 import graphql.schema.DataFetcher;
 import graphql.schema.DataFetchingEnvironment;
+
+import org.openqa.selenium.SessionNotCreatedException;
 import org.openqa.selenium.grid.distributor.Distributor;
+import org.openqa.selenium.grid.sessionmap.SessionMap;
 import org.openqa.selenium.internal.Require;
 
 import java.net.URI;",You can safely revert changes to this file.,java,1,1,0
"@@ -64,7 +64,7 @@ abstract class MergingSnapshotProducer<ThisT> extends SnapshotProducer<ThisT> {
   private static final Set<String> VALIDATE_DATA_FILES_EXIST_SKIP_DELETE_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.REPLACE);
   // delete files can be added in ""overwrite"" or ""delete"" operations
-  private static final Set<String> VALIDATE_REPLACED_DATA_FILES_OPERATIONS =
+  private static final Set<String> VALIDATE_ADDED_DELETE_FILES_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.DELETE);
 
   private final String tableName;",I renamed it to match `VALIDATE_ADDED_FILES_OPERATIONS `.,java,1,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -47,6 +47,9 @@ def molecule_provisioner_section_data():
                 'instance-1': [{
                     'foo': 'bar'
                 }],
+                'localhost': [{
+                    'foo': 'baz'
+                }]
             },
             'group_vars': {
                 'example_group1': [{",This and line 156 below adds coverage for the special case of localhost host_vars,py,0,1,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -31,7 +31,7 @@ namespace Nethermind.Blockchain.Producers
         private Task _producerTask;
         private readonly CancellationTokenSource _loopCancellationTokenSource = new CancellationTokenSource();
         private readonly CancellationTokenSource _stepCancellationTokenSource = new CancellationTokenSource();
-        private bool _canProduce;
+        private bool _canProduce = true;
 
         protected BaseLoopBlockProducer(
             IPendingTxSelector pendingTxSelector,","I had some nasty forks with this true as default when syncing pre-existing networks, this is under investigation",.cs,0,1,0
"@@ -230,4 +230,4 @@ public class Login {
 			return 1; // L: 1317
 		}
 	}
-}
+}",Revert this file,java,1,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -32,7 +32,7 @@ namespace ddb {
 DiscoveryDataBase::DiscoveryDataBase(
         fastrtps::rtps::GuidPrefix_t server_guid_prefix)
     : server_guid_prefix_(server_guid_prefix)
-    , server_acked_by_all_(false)
+    , server_acked_by_all_(true)
 {
 }
 ",I would not change this until the list of servers is defined in the database construction. Better to change it with the implementation that @EduPonz is going to do in the pinging PR.,cpp,0,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -238,12 +238,15 @@ bool StatelessReader::matched_writer_is_matched(
 bool StatelessReader::change_received(
         CacheChange_t* change)
 {
-    // Only make visible the change if there is not other with bigger sequence number.
+    // std::cout << ""[FAST STATELESS READER] change_received"" << std::endl;
+    // Only make visible the change if there is change_received other with bigger sequence number.
     // TODO Revisar si no hay que incluirlo.
     if (!thereIsUpperRecordOf(change->writerGUID, change->sequenceNumber))
     {
         if (mp_history->received_change(change, 0))
         {
+            auto payload_length = change->serializedPayload.length;
+
             Time_t::now(change->receptionTimestamp);
             update_last_notified(change->writerGUID, change->sequenceNumber);
             ++total_unread_;",Seems this was left here unintentionally,cpp,1,1,0
"@@ -87,10 +87,19 @@ var creatablesMigration = []string{
 	`ALTER TABLE assetcreators ADD COLUMN ctype INTEGER DEFAULT 0`,
 }
 
+var createOnlineAccountIndex = []string{
+	`ALTER TABLE accountbase
+		ADD COLUMN normalizedonlinebalance INTEGER`,
+	`CREATE INDEX IF NOT EXISTS onlineaccountbals
+		ON accountbase ( normalizedonlinebalance, address, data )
+		WHERE normalizedonlinebalance>0`,
+}
+
 var accountsResetExprs = []string{
 	`DROP TABLE IF EXISTS acctrounds`,
 	`DROP TABLE IF EXISTS accounttotals`,
 	`DROP TABLE IF EXISTS accountbase`,
+	`DROP TABLE IF EXISTS onlineaccountbase`,
 	`DROP TABLE IF EXISTS assetcreators`,
 	`DROP TABLE IF EXISTS storedcatchpoints`,
 	`DROP TABLE IF EXISTS catchpointstate`,","this line can be dropped, right ?",go,1,1,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -3,7 +3,7 @@ FactoryGirl.define do
 
   factory :api_token do
     access_token
-    step
+    step { create(:approval_step) }
     expires_at { Time.current + 7.days }
   end
 end",this is the actual fix?,rb,1,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -93,6 +93,19 @@ describe TeamPlan do
     end
   end
 
+  describe '#fulfill' do
+    it 'starts a subscription' do
+      user = build_stubbed(:user)
+      purchase = build_stubbed(:purchase, user: user)
+      plan = build_stubbed(:team_plan)
+      fulfillment = stub_subscription_fulfillment(purchase)
+
+      plan.fulfill(purchase, user)
+
+      expect(fulfillment).to have_received(:fulfill)
+    end
+  end
+
   def team_plan
     build(:team_plan)
   end",Looks like one more instance of the method pointed out above.,rb,0,1,0
"@@ -40,6 +40,12 @@ public abstract class MethodDescriptorView {
 
   public abstract List<HeaderRequestParamView> headerRequestParams();
 
+  @Nullable
+  public abstract String requestFormatterName();
+
+  @Nullable
+  public abstract String responseFormatterName();
+
   public boolean hasHeaderRequestParams() {
     return headerRequestParams() != null && !headerRequestParams().isEmpty();
   }","These names aren't needed any more, right?",java,1,1,0
"@@ -17,3 +17,5 @@ var (
         GenerateCommonBinPrefixes = generateCommonBinPrefixes
         PeerPingPollTime          = &peerPingPollTime
 )
+
+type PeerFilterFunc = peerFilterFunc",is this used anywhere?,go,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -240,6 +240,12 @@ class Server extends EventEmitter {
     }
 
     wireProtocol.command(this, ns, cmd, options, (err, result) => {
+      if (err && err instanceof MongoNetworkError) {
+        if (options.session) {
+          options.session.serverSession.isDirty = true;
+        }
+      }
+
       if (err && isSDAMUnrecoverableError(err)) {
         this.emit('error', err);
       }",`if (err && err instanceof MongoNetworkError && options.session)`,js,1,0,0
"@@ -226,7 +226,7 @@ void ValidationStateTracker::PreCallRecordCmdClearColorImage(VkCommandBuffer com
                                                              uint32_t rangeCount, const VkImageSubresourceRange *pRanges) {
     if (disabled[command_buffer_state]) return;
 
-    auto cb_node = Get<CMD_BUFFER_STATE>(commandBuffer);
+    auto cb_node = GetWrite<CMD_BUFFER_STATE>(commandBuffer);
     if (cb_node) {
         cb_node->RecordTransferCmd(CMD_CLEARCOLORIMAGE, Get<IMAGE_STATE>(image));
     }",All get writes this file. Same split lock concern.,cpp,0,0,0
"@@ -76,7 +76,7 @@ public class TestEdgeDriver extends RemoteWebDriver implements WebStorage, Locat
                 .findFirst().orElseThrow(WebDriverException::new);
 
         service = (EdgeDriverService) builder.withVerbose(true).withLogFile(logFile.toFile()).build();
-        LOG.info(""edgedriver will log to "" + logFile);
+        LOG.fine(""edgedriver will log to "" + logFile);
         service.start();
         Runtime.getRuntime().addShutdownHook(new Thread(() -> service.stop()));
       }",This is deliberately at this level.,py,1,1,0
"@@ -31,7 +31,7 @@ namespace Nethermind.Blockchain.Producers
         private Task _producerTask;
         private readonly CancellationTokenSource _loopCancellationTokenSource = new CancellationTokenSource();
         private readonly CancellationTokenSource _stepCancellationTokenSource = new CancellationTokenSource();
-        private bool _canProduce;
+        private bool _canProduce = true;
 
         protected BaseLoopBlockProducer(
             IPendingTxSelector pendingTxSelector,","I had some nasty forks with this true as default when syncing pre-existing networks, this is under investigation",.cs,0,1,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -17,3 +17,5 @@ var (
         GenerateCommonBinPrefixes = generateCommonBinPrefixes
         PeerPingPollTime          = &peerPingPollTime
 )
+
+type PeerFilterFunc = peerFilterFunc",is this used anywhere?,go,1,1,0
"@@ -116,6 +116,11 @@ namespace OpenTelemetry.Trace
                 + ""}"";
         }
 
+        public override Type GetType()
+        {
+            return this.GetType();
+        }
+
         /// <inheritdoc/>
         public override TReturn Match<TReturn>(
             Func<string, TReturn> stringFunction,",is this needed?,.cs,1,0,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -89,9 +89,7 @@ final class CropResizer implements ResizerInterface
     }
 
     /**
-     * @param array<string, int> $settings
-     *
-     * @phpstan-param array{width: int, height: int} $settings
+     * @param array<string, mixed> $settings
      */
     private function createTargetBox(array $settings): Box
     {",Why losing this ?,php,1,1,0
"@@ -58,6 +58,8 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private static final String AZKABAN_FAILURE_MESSAGE =
       ""azkaban.failure.message"";
   private static final long serialVersionUID = -1;
+
+  protected String passwordPlaceholder;
   private AzkabanServer application;
   private String name;
   private String label;",Why passwordPlaceholder is added in AbstractAzkabanServlet instead of LoginAbstractAzkabanServlet?,java,1,1,0
"@@ -89,9 +89,7 @@ class ScalarTypeComparator
         }
 
         if ($container_type_part instanceof TNonspecificLiteralString
-            && ($input_type_part instanceof TLiteralString
-                || $input_type_part instanceof TNonspecificLiteralString
-                || $input_type_part instanceof TNonEmptyNonspecificLiteralString)
+            && ($input_type_part instanceof TLiteralString || $input_type_part instanceof TNonspecificLiteralString)
         ) {
             return true;
         }",TNonEmptyNonspecificLiteralString is a child of TNonspecificLiteralString just above,php,1,1,0
"@@ -46,7 +46,7 @@ void CleanTCPSocketsEvent::event(EventCode code, const char* /*msg*/)
 {
     if(code == EVENT_SUCCESS)
     {
-        mp_transport->clean_deleted_sockets();
+        //mp_transport->clean_deleted_sockets();
     }
 }
 ","So... the whole class isn't necessary, didn't?",cpp,1,1,0
"@@ -29,13 +29,13 @@ import java.util.Map;
  * Iteration order is not specified.
  * @lucene.internal
  */
-final class Multiset<T> extends AbstractCollection<T> {
+public final class Multiset<T> extends AbstractCollection<T> {
 
   private final Map<T, Integer> map = new HashMap<>();
   private int size;
 
   /** Create an empty {@link Multiset}. */
-  Multiset() {
+  public Multiset() {
     super();
   }
 ",This is used in o.a.l.sandbox.search.CoveringQuery.,java,1,1,0
"@@ -0,0 +1,9 @@
+<?php
+
+namespace Psalm\Issue;
+
+class InvalidTypeImport extends CodeIssue
+{
+    const ERROR_LEVEL = 7;
+    const SHORTCODE = 233;
+}","Not sure about the level, feel free to adjust.",php,1,1,0
"@@ -435,7 +435,7 @@ describe('ReadConcern', function() {
   });
 
   it('Should set majority readConcern aggregate command but ignore due to out', {
-    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2' } },
+    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2 < 4.1' } },
 
     test: function(done) {
       var listener = require('../..').instrument(function(err) {",I didn't realize we could do this!,js,1,1,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -31,7 +31,7 @@ import org.apache.tuweni.bytes.MutableBytes;
  *
  * <h3>Message structure</h3>
  *
- * The following describes the message structure:
+ * <p>The following describes the message structure:
  *
  * <pre>
  *   authRecipient -&gt; E(remote-pubk,","Seems unrelated, but ok.",java,1,1,0
"@@ -9,10 +9,15 @@ FactoryGirl.define do
     rwa_number ""R1234567"" # TODO remove, since it's not applicable for BA61
     org_code Ncr::Organization.all[0].to_s
     project_title ""NCR Name""
+    sequence(:approving_official_email) {|n| ""approver#{User.count}@some-cartoon-show.com"" }
     association :proposal, flow: 'linear'
 
     trait :with_approvers do
+      # TODO use wo.setup_approvals_and_observers instead
       association :proposal, :with_serial_approvers, flow: 'linear'
+      after :create do |wo|
+        wo.approving_official_email = wo.approving_official.email_address
+      end
     end
 
     trait :is_emergency do",PT story for this?,rb,0,0,0
"@@ -220,6 +220,12 @@ _options = [
             ""'plotting.sample_ratio' should be 1.0 >= value >= 0.0."",
         ),
     ),
+    Option(
+        key=""plotting.backend"",
+        doc=(""Backend to use for plotting. Default is matplotlib.""),
+        default=""matplotlib"",
+        types=str,
+    ),
 ]  # type: List[Option]
 
 _options_dict = dict(zip((option.key for option in _options), _options))  # type: Dict[str, Option]",Could you add a list of currently supported backends?,py,1,1,0
"@@ -193,7 +193,7 @@ class SparkSubmitTaskTest(unittest.TestCase):
         def interrupt():
             raise KeyboardInterrupt()
 
-        proc.return_value.poll = interrupt
+        proc.return_value.wait = interrupt
         try:
             job = TestSparkSubmitTask()
             job.run()",btw ideally we should use the mock library for this. but that's prob outside the scope of this PR,py,0,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -4,6 +4,8 @@ class OrgsController < ApplicationController
 
   include OrgSelectable
 
+  skip_before_action :verify_authenticity_token, only: %w[search]
+
   after_action :verify_authorized, except: %w[
     shibboleth_ds shibboleth_ds_passthru search
   ]",switch to pass auth token,rb,1,1,0
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -24,7 +24,12 @@ import (
 	""github.com/iotexproject/iotex-core/state/factory""
 )
 
-const testnetActionPath = ""testnet_actions.yaml""
+const (
+	testnetActionPath = ""testnet_actions.yaml""
+	// TODO: Gensis block producer's keypair should be a config. Note genesis block producer is not the creator
+	genesisProducerPublicKey  = ""0444b7ac782c60e90b1aa263fe4d61dbe73bf8260d3e773ce9f4f0dbc181e8e5f2e3b6f6d4cf47f1d53af95cf24b88b92037125c7bf6f63b55bebbb8579b3a9b24""
+	genesisProducerPrivateKey = ""bace9b2435db45b119e1570b4ea9c57993b2311e0c408d743d87cd22838ae892""
+)
 
 // Genesis defines the Genesis default settings
 type Genesis struct {",line is 161 characters (from `lll`),go,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -498,6 +498,7 @@ void Sol2ScriptingEnvironment::ProcessElements(
         [&](const tbb::blocked_range<std::size_t> &range) {
             ExtractionNode result_node;
             ExtractionWay result_way;
+            std::vector<boost::optional<InputRestrictionContainer>> result_res;
             auto &local_context = this->GetSol2Context();
 
             for (auto x = range.begin(), end = range.end(); x != end; ++x)",Remove the `optional`.,cpp,1,1,0
"@@ -5,7 +5,7 @@ if (ariaHeadingLevel !== null) {
 	return true;
 }
 
-var headingLevel = node.tagName.match(/H(\d)/);
+var headingLevel = node.nodeName.match(/H(\d)/);
 
 if (headingLevel) {
 	this.data(parseInt(headingLevel[1], 10));",do you need `toUpperCase()` here?,js,1,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -116,8 +116,7 @@ func fieldsByName(example interface{}) map[string]reflect.StructField {
 var _ = DescribeTable(""Config parsing"",
         func(key, value string, expected interface{}, errorExpected ...bool) {
                 config := New()
-                config.UpdateFrom(map[string]string{key: value},
-                        EnvironmentVariable)
+                config.UpdateFrom(map[string]string{key: value}, EnvironmentVariable)
                 configPtr := reflect.ValueOf(config)
                 configElem := configPtr.Elem()
                 fieldRef := configElem.FieldByName(key)","Note, another possibly unnecessary change here.",c,1,1,0
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -4,7 +4,7 @@ MYUSA_URL = ENV['MYUSA_URL'] || 'https://alpha.my.usa.gov'
 
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :myusa, MYUSA_KEY, MYUSA_SECRET, {
-    scope: 'profile.email',
+    scope: 'profile.email profile.first_name profile.last_name',
     client_options: {
       site: MYUSA_URL,
       token_url: ""/oauth/authorize""",That Was Easy:tm:,rb,0,1,0
"@@ -302,6 +302,13 @@ void PDPServer2::initializeParticipantProxyData(
     {
         logWarning(RTPS_PDP_SERVER, ""SERVER or BACKUP PDP requires always all EDP endpoints creation."");
     }
+
+    // Set participant type and discovery server version properties
+    participant_data->m_properties.push_back(
+        std::pair<std::string, std::string>(
+            {dds::parameter_property_participant_type, ParticipantType::SERVER}));
+    participant_data->m_properties.push_back(
+        std::pair<std::string, std::string>({dds::parameter_property_ds_version, ""2.0""}));
 }
 
 void PDPServer2::assignRemoteEndpoints(",Use new constant for current version,cpp,1,1,0
"@@ -15,7 +15,14 @@ namespace Thelia\Coupon;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Thelia\Condition\Implementation\ConditionInterface;
 use Thelia\Coupon\Type\CouponInterface;
+use Thelia\Log\Tlog;
+use Thelia\Model\AddressQuery;
+use Thelia\Model\Base\CouponModule;
 use Thelia\Model\Coupon;
+use Thelia\Model\CouponCountry;
+use Thelia\Model\CouponCustomerCount;
+use Thelia\Model\CouponCustomerCountQuery;
+use Thelia\Model\Order;
 
 /**
  * Manage how Coupons could interact with a Checkout","Be careful, base model is imported here.",php,1,1,0
"@@ -0,0 +1,16 @@
+﻿using System;
+using MvvmCross.Core.ViewModels;
+
+namespace MvvmCross.Forms.Views.Hints
+{
+    public class MvxPopToRootPresentationHint
+        : MvxPresentationHint
+    {
+        public MvxPopToRootPresentationHint(bool animated = true)
+        {
+            Animated = animated;
+        }
+
+        public bool Animated { get; set; }
+    }
+}",Same about this presentation hint,.cs,0,1,0
"@@ -31,7 +31,7 @@ namespace Nethermind.Blockchain.Producers
         private Task _producerTask;
         private readonly CancellationTokenSource _loopCancellationTokenSource = new CancellationTokenSource();
         private readonly CancellationTokenSource _stepCancellationTokenSource = new CancellationTokenSource();
-        private bool _canProduce;
+        private bool _canProduce = true;
 
         protected BaseLoopBlockProducer(
             IPendingTxSelector pendingTxSelector,","I had some nasty forks with this true as default when syncing pre-existing networks, this is under investigation",.cs,0,1,0
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -145,3 +145,14 @@ def init():
     objreg.register('command-history', command_history)
     save_manager.add_saveable('command-history', command_history.save,
                               command_history.changed)
+
+
+def init_fprompt():
+    """"""Initialize the LimitLineParser storing the history.""""""
+    save_manager = objreg.get('save-manager')
+    fprompt_history = lineparser.LimitLineParser(
+        standarddir.data(), 'fprompt-history',
+        limit='completion.fprompt_history_max_items')
+    objreg.register('fprompt-history', fprompt_history)
+    save_manager.add_saveable('fprompt-history', fprompt_history.save,
+                              fprompt_history.changed)",No need to have a separate init function for this.,py,1,1,0
"@@ -55,7 +55,7 @@ func ensureOrCreateDir(dir string) error {
         err := ensureDirExists(dir)
         if os.IsNotExist(err) {
                 log.Info(""[Directory config checker] "", ""Directory: "", dir, "" does not exit. Creating new one"")
-                return os.MkdirAll(dir, 0600)
+                return os.MkdirAll(dir, 0700)
         }
         return err
 }",Was is a debugged place??,go,0,0,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -398,7 +398,6 @@ public class UserAccountManager {
 		final String userId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USER_ID));
 		final String username = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USERNAME));
 		final String accountName = accountManager.getUserData(account, AccountManager.KEY_ACCOUNT_NAME);
-		final String clientId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_CLIENT_ID));
 		final String lastName = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_LAST_NAME));
 		final String email = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_EMAIL));
 		final String encFirstName =  accountManager.getUserData(account, AuthenticatorService.KEY_FIRST_NAME);",Unrelated - wasn't being used.,java,0,1,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -18,9 +18,14 @@
 package cmd
 
 import (
+        ""encoding/json""
         ""path/filepath""
         ""time""
 
+        ""github.com/mysteriumnetwork/node/nat/traversal/config""
+
+        ""github.com/mysteriumnetwork/node/nat/traversal""
+
         ""github.com/asaskevich/EventBus""
         log ""github.com/cihub/seelog""
         ""github.com/ethereum/go-ethereum/accounts/keystore""",Something wrong with import blocks.,go,1,0,0
"@@ -37,6 +37,12 @@ module Selenium
         def bridge_class
           Bridge
         end
+
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
       end # Driver
     end # Firefox
   end # WebDriver",Same here. and all others.,java,0,1,0
"@@ -22,6 +22,8 @@ namespace Nethermind.Consensus.Ethash
 {
     public class EthashCache : IEthashDataSet
     {
+        private ArrayPool<uint[]> _arrayPool = ArrayPool<uint[]>.Create(1024 * 1024 * 4, 50);
+        
         private uint[][] Data { get; set; }
 
         public uint Size { get; set; }",why separate pool?,.cs,1,1,0
"@@ -200,4 +200,17 @@ public interface ProjectLoader {
       throws ProjectManagerException;
 
   void updateProjectSettings(Project project) throws ProjectManagerException;
+
+  /**
+   * Uploads flow file.
+   */
+  void uploadFlowFile(int projectId, int projectVersion, int flowVersion, File flowFile)
+      throws ProjectManagerException;
+
+  /**
+   * Gets flow file that's uploaded.
+   */
+  File getUploadedFlowFile(int projectId, int projectVersion, int flowVersion, String flowName)
+      throws ProjectManagerException;
+
 }",same here about the argument order.,java,1,1,0
"@@ -76,7 +76,7 @@ describe CatalogController do
           expect(session[:search].keys).to include :id
           
           search = Search.find(session[:search][:id])
-          expect(search.query_params[:q]).to eq @user_query
+          expect(search.query_params['q']).to eq @user_query
         end
       end
 ","There isn't a backwards-compat issue here, right? The old hash was a HWIA, and now we're stuck with a stringified hash?",rb,1,1,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -894,12 +894,17 @@ var (
         RollupGasPriceOracleAddressFlag = cli.StringFlag{
                 Name:   ""rollup.gaspriceoracleaddress"",
                 Usage:  ""Address of the rollup gas price oracle"",
-                Value:  ""0x"",
+                Value:  ""0x0000000000000000000000000000000000000000"",
                 EnvVar: ""ROLLUP_GAS_PRICE_ORACLE_ADDRESS"",
         }
         RollupEnableL2GasPollingFlag = cli.BoolFlag{
                 Name:   ""rollup.enablel2gaspolling"",
-                Usage:  """",
+                Usage:  ""Poll for the L2 gas price from the L2 state"",
+                EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
+        }
+        RollupEnforceFeesFlag = cli.BoolFlag{
+                Name:   ""rollup.enforcefeesflag"",
+                Usage:  ""Disable transactions with 0 gas price"",
                 EnvVar: ""ROLLUP_ENABLE_L2_GAS_POLLING"",
         }
 )",Fix this env var,go,1,0,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -0,0 +1,16 @@
+﻿using System;
+using MvvmCross.Core.ViewModels;
+
+namespace MvvmCross.Forms.Views.Hints
+{
+    public class MvxPopToRootPresentationHint
+        : MvxPresentationHint
+    {
+        public MvxPopToRootPresentationHint(bool animated = true)
+        {
+            Animated = animated;
+        }
+
+        public bool Animated { get; set; }
+    }
+}",Same about this presentation hint,.cs,0,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -1,4 +1,13 @@
+require 'logger'
+
 module Bolt
+  class << self
+    attr_accessor :log_level
+    attr_accessor :config
+  end
+
+  @config = {}
+
   require 'bolt/executor'
   require 'bolt/node'
 end","thanks for moving this up here, seems like a much more intuitive place",rb,1,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -8,11 +8,11 @@ package account
 
 import (
 	""fmt""
-	""syscall""
+
+	""github.com/iotexproject/iotex-core/cli/ioctl/util""
 
 	""github.com/spf13/cobra""
 	""go.uber.org/zap""
-	""golang.org/x/crypto/ssh/terminal""
 
 	""github.com/iotexproject/iotex-core/cli/ioctl/cmd/alias""
 	""github.com/iotexproject/iotex-core/pkg/log""",wrong import group,go,1,1,0
"@@ -435,7 +435,7 @@ describe('ReadConcern', function() {
   });
 
   it('Should set majority readConcern aggregate command but ignore due to out', {
-    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2' } },
+    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2 < 4.1' } },
 
     test: function(done) {
       var listener = require('../..').instrument(function(err) {",I didn't realize we could do this!,js,1,1,0
"@@ -35,13 +35,13 @@ public class BaseSuite {
   public static ExternalResource testEnvironment = new ExternalResource() {
     @Override
     protected void before() {
-      log.info(""Preparing test environment"");
+      log.finest(""Preparing test environment"");
       GlobalTestEnvironment.get(SeleniumTestEnvironment.class);
       System.setProperty(""webdriver.remote.shorten_log_messages"", ""true"");
     }
     @Override
     protected void after() {
-      log.info(""Cleaning test environment"");
+      log.finest(""Cleaning test environment"");
       TestEnvironment environment = GlobalTestEnvironment.get();
       if (environment != null) {
         environment.stop();",This is in test code: understanding what we're doing is important in this context.,rb,1,1,0
"@@ -406,6 +406,8 @@ namespace Nethermind.State
                     Set(cellByAddress.Key, _zeroValue);
                 }
             }
+
+            _storages[address] = new StorageTree(_stateDb, Keccak.EmptyTreeHash);
         }
 
         private enum ChangeType",this is the fix,.cs,1,0,0
"@@ -50,7 +50,7 @@ class SolrConfigStatus implements StatusProviderInterface
      *
      * @var string
      */
-    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-4-0-0--20160406';
+    const RECOMMENDED_SOLRCONFIG_VERSION = 'tx_solr-6-0-0--20160725';
 
     /**
      * Compiles a collection of solrconfig version checks against each configured","solrconfig didn't change, did it?",php,1,1,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -9,9 +9,9 @@ import (
         ""io/ioutil""
         ""strings""
 
-        ""gopkg.in/editorconfig/editorconfig-core-go.v1""
         ""gopkg.in/macaron.v1""
 
+        ""github.com/editorconfig/editorconfig-core-go/v2""
         ""github.com/gogs/git-module""
 
         ""gogs.io/gogs/internal/db""",This import grouping should be changed.,go,1,1,0
"@@ -35,6 +35,8 @@ var cipherMap = map[string]uint16{
 
 func defaultCipherSuites() []uint16 {
 	return []uint16{
+		tls.TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,
+		tls.TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
 		tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,",I think we should put ECDSA first..,go,1,1,0
"@@ -15,12 +15,12 @@
 """"""Scanner for Enabled APIs.""""""
 
 import json
-import sys
 
 from google.cloud.forseti.common.gcp_type.project import Project
 from google.cloud.forseti.common.util import logger
 from google.cloud.forseti.scanner.audit import enabled_apis_rules_engine
 from google.cloud.forseti.scanner.scanners import base_scanner
+from google.cloud.forseti.common.util import errors as util_errors
 
 LOGGER = logger.get_logger(__name__)
 ",Can you please alpha-sort this import?,py,1,1,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -127,8 +127,8 @@ module.exports = function(config) {
 						exclude: /node_modules/,
 						loader: 'babel-loader',
 						options: {
-							comments: false,
-							compact: true,
+							// comments: false,
+							// compact: true,
 							plugins: coverage ?
 								[['istanbul', {
 									exclude: [",Note to self: Undo before checking in,js,0,1,0
"@@ -0,0 +1,17 @@
+module Blacklight
+  module Rendering
+    class Microdata < AbstractStep
+      include ActionView::Helpers::TagHelper
+      def render
+        return next_step(values) unless config.itemprop
+        next_step(values.map { |x| itemprop(x, config.itemprop) })
+      end
+
+      private
+
+        def itemprop(val, itemprop)
+          content_tag :span, val, itemprop: itemprop
+        end
+    end
+  end
+end",2 trailing blank lines detected.,rb,1,1,0
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -96,8 +96,8 @@ namespace Examples.Console
                 catch (ArgumentOutOfRangeException e)
                 {
                     // Set status upon error
-                    activity.AddTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
-                    activity.AddTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
+                    activity.SetTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
+                    activity.SetTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
                 }
 
                 // Annotate our activity to capture metadata about our operation",Should we consider changing the return type of `SpanHelper.GetCachedCanonicalCodeString` to int?,.cs,1,1,0
"@@ -269,6 +269,7 @@ bool nano::mdb_store::do_upgrades (nano::write_transaction & transaction_a, bool
                 case 17:
                         upgrade_v17_to_v18 (transaction_a);
                         needs_vacuuming = true;
+                        // Upgrades to v19 & v20 are both part of the v22 node release
                 case 18:
                         upgrade_v18_to_v19 (transaction_a);
                         needs_vacuuming = true;",Should we start using [[fallthrough]]; ?,cpp,1,1,0
"@@ -38,7 +38,8 @@ func (p *diskInspectionProcessor) process(pd persistentDisk,
 
         ir, err := p.inspectDisk(pd.uri)
         if err != nil {
-                return pd, err
+                // Don't directly return err to avoid terminating the import.
+                return pd, nil
         }
 
         isDualBoot := ir.UEFIBootable && ir.BIOSBootableWithHybridMBROrProtectiveMBR",Log the error?,go,1,1,0
"@@ -11,6 +11,13 @@ from .custom import CustomDataset
 
 @DATASETS.register_module()
 class XMLDataset(CustomDataset):
+    """"""XML dataset for detection.
+
+    Args:
+        min_size (int|float|None, optional): The minimum size of bounding
+            boxes in the images. If the size of a bounding box is less than
+            ``min_size``, it would be add to ignored field.
+    """"""
 
     def __init__(self, min_size=None, **kwargs):
         super(XMLDataset, self).__init__(**kwargs)","`int | float | None` or `int | float, optional`",py,1,0,0
"@@ -21,5 +21,6 @@ namespace Nethermind.Core.Specs.ChainSpecStyle
     public interface IChainSpecLoader
     {
         ChainSpec Load(byte[] data);
+        ChainSpec Load(string jsonData);
     }
 }",i remember there was a reason for which I had to make it byte[] only... I do not remember the exact reason. I think that not every implementation could provide a string (do not know why),.cs,1,1,0
"@@ -86,6 +86,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
         public void Start()
         {
             Log.ConnectionStart(ConnectionId);
+            KestrelEventSource.Log.ConnectionStart(this);
 
             // Start socket prior to applying the ConnectionAdapter
             _socket.ReadStart(_allocCallback, _readCallback, this);",Can we move this into `KestrelTrace`?,.cs,1,1,0
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
-        # Training state
-        if self.training:
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_train_or_val_workflow = (coeff_pred[0].dim() == 4)
+
+        # Train or val workflow
+        if is_train_or_val_workflow:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",self.is_training or self.training?,py,1,1,0
"@@ -318,7 +318,14 @@ public class ExecutionControllerUtils {
       jobLinkUrl = url.toString();
     } else {
       // If RM job link is invalid or has expired, fetch the job link from JHS or SHS.
-      if (exFlow.getExecutableNode(jobId).getType().equals(SPARK_JOB_TYPE)) {
+      final ExecutableNode node = exFlow.getExecutableNodePath(jobId);
+      if (node == null) {
+        logger.error(
+            ""Invalid job link. Job "" + jobId + "" doesn't exist in "" + exFlow.getExecutionId());
+        return null;
+      }
+
+      if (node.getType().equals(SPARK_JOB_TYPE)) {
         jobLinkUrl =
             azkProps.get(ConfigurationKeys.SPARK_HISTORY_SERVER_JOB_URL).replace
                 (APPLICATION_ID, applicationId);",In which scenario this is a possibility?,java,1,1,0
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -1276,6 +1276,7 @@ func (api *Server) getLogsInBlock(filter *LogFilter, start, count uint64) ([]*io
 	return logs, nil
 }
 
+// TODO: Since GasConsumed on the receipt may not be enough for the gas limit, we use binary search for the gas estimate. Need a better way to address it later.
 func (api *Server) estimateActionGasConsumptionForExecution(exec *iotextypes.Execution, sender string) (*iotexapi.EstimateActionGasConsumptionResponse, error) {
 	sc := &action.Execution{}
 	if err := sc.LoadProto(exec); err != nil {",line is 160 characters (from `lll`),go,1,1,0
"@@ -40,8 +40,8 @@ TEST_F(OrderByTest, SyntaxError) {
         cpp2::ExecutionResponse resp;
         auto &player = players_[""Boris Diaw""];
         auto *fmt = ""GO FROM %ld OVER serve YIELD ""
-                    ""$^[player].name as name, serve.start_year as start, $$[team].name""
-                    ""| ORDER BY $-.$$[team].name"";
+                    ""$^player.name as name, serve.start_year as start, $$[team].name""
+                    ""| ORDER BY $-.$$team.name"";
         auto query = folly::stringPrintf(fmt, player.vid());
         auto code = client_->execute(query, resp);
         ASSERT_EQ(cpp2::ErrorCode::E_SYNTAX_ERROR, code);",$$[team].name or $$team.name,cpp,1,1,0
"@@ -55,7 +55,7 @@ func ensureOrCreateDir(dir string) error {
         err := ensureDirExists(dir)
         if os.IsNotExist(err) {
                 log.Info(""[Directory config checker] "", ""Directory: "", dir, "" does not exit. Creating new one"")
-                return os.MkdirAll(dir, 0600)
+                return os.MkdirAll(dir, 0700)
         }
         return err
 }",Was is a debugged place??,go,0,0,0
"@@ -220,6 +220,12 @@ _options = [
             ""'plotting.sample_ratio' should be 1.0 >= value >= 0.0."",
         ),
     ),
+    Option(
+        key=""plotting.backend"",
+        doc=(""Backend to use for plotting. Default is matplotlib.""),
+        default=""matplotlib"",
+        types=str,
+    ),
 ]  # type: List[Option]
 
 _options_dict = dict(zip((option.key for option in _options), _options))  # type: Dict[str, Option]",Could you add a list of currently supported backends?,py,1,1,0
"@@ -269,6 +269,13 @@ def set_rate_limits(per_token_limit, per_ip_limit, window_size):
         set_rate_limits(per_token_limit, per_ip_limit, window_size)
 
 
+@cli.command(name=""update_all_user_listen_counts"")
+def update_all_user_listen_counts():
+    """""" Scans listen table and update listen counts for all users """"""
+    application = webserver.create_app()
+    with application.app_context():
+        ts_update_user_listen_counts()
+
 @cli.command(name=""recalculate_all_user_data"")
 def recalculate_all_user_data():
     """"""",Could use updating.,py,1,1,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -2192,8 +2192,8 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])
         return DataFrame(internal)
 
-    # TODO: add axis parameter
-    def diff(self, periods=1):
+    # TODO: axis should support 1 or 'columns' either
+    def diff(self, periods: int = 1, axis: int = 0):
         """"""
         First discrete difference of element.
 ",At this moment?,py,0,0,0
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -55,7 +55,15 @@ namespace Datadog.Trace
             Settings = settings ?? TracerSettings.FromDefaultSources();
             _agentWriter = agentWriter ?? new AgentWriter(new Api(Settings.AgentUri));
             _scopeManager = scopeManager ?? new AsyncLocalScopeManager();
-            Sampler = sampler ?? new RateByServiceSampler();
+            Sampler = sampler ?? new RuleBasedSampler(new RateLimiter(Settings.MaxTracesSubmittedPerSecond));
+
+            if (!string.IsNullOrEmpty(Settings.CustomSamplingRules))
+            {
+                foreach (var rule in RegexSamplingRule.BuildFromConfigurationString(Settings.CustomSamplingRules))
+                {
+                    Sampler.RegisterRule(rule);
+                }
+            }
 
             // if not configured, try to determine an appropriate service name
             DefaultServiceName = Settings.ServiceName ??",Suggest using `string.IsNullOrWhitespace` instead of `string.IsNullOrEmpty`.,.cs,1,1,0
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -127,8 +127,8 @@ module.exports = function(config) {
 						exclude: /node_modules/,
 						loader: 'babel-loader',
 						options: {
-							comments: false,
-							compact: true,
+							// comments: false,
+							// compact: true,
 							plugins: coverage ?
 								[['istanbul', {
 									exclude: [",Note to self: Undo before checking in,js,0,1,0
"@@ -226,7 +226,7 @@ void ValidationStateTracker::PreCallRecordCmdClearColorImage(VkCommandBuffer com
                                                              uint32_t rangeCount, const VkImageSubresourceRange *pRanges) {
     if (disabled[command_buffer_state]) return;
 
-    auto cb_node = Get<CMD_BUFFER_STATE>(commandBuffer);
+    auto cb_node = GetWrite<CMD_BUFFER_STATE>(commandBuffer);
     if (cb_node) {
         cb_node->RecordTransferCmd(CMD_CLEARCOLORIMAGE, Get<IMAGE_STATE>(image));
     }",All get writes this file. Same split lock concern.,cpp,0,0,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -127,8 +127,8 @@ module.exports = function(config) {
 						exclude: /node_modules/,
 						loader: 'babel-loader',
 						options: {
-							comments: false,
-							compact: true,
+							// comments: false,
+							// compact: true,
 							plugins: coverage ?
 								[['istanbul', {
 									exclude: [",Note to self: Undo before checking in,js,0,1,0
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -65,10 +65,6 @@ class Product < ActiveRecord::Base
     type.underscore
   end
 
-  def fulfilled_with_github?
-    github_team.present?
-  end
-
   def to_aside_partial
     ""#{self.class.name.underscore.pluralize}/aside""
   end","This was actually unused on `master`, so I removed it instead of fixing it with this change.",rb,0,1,0
"@@ -1195,7 +1195,7 @@ static void handle_get_app_config(GUI_RPC_CONN& grc) {
         return;
     }
     sprintf(path, ""%s/%s"", p->project_dir(), APP_CONFIG_FILE_NAME);
-    printf(""path: %s\n"", path);
+    // printf(""path: %s\n"", path);    // debug only
     int retval = read_file_string(path, s);
     if (retval) {
         grc.mfout.printf(""<error>app_config.xml not found</error>\n"");",Could be completely removed,php,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -220,7 +220,7 @@ class JsGenerator : public BaseGenerator {
        it != sorted_namespaces.end(); it++) {
     if (lang_.language == IDLOptions::kTs) {
       if (it->find('.') == std::string::npos) {
-        code += ""import { flatbuffers } from \""./flatbuffers\""\n"";
+        code += ""import { flatbuffers } from \""flatbuffers\""\n"";
         break;
       }
     } else {",Why is this? What effect will this have on other users? @krojew @JoshGalvin,java,0,0,0
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -219,6 +219,13 @@ namespace MvvmCross.Droid.FullFragging.Caching
 			{
 				(fragInfo.CachedFragment as Fragment).Arguments.Clear();
 				(fragInfo.CachedFragment as Fragment).Arguments.PutAll(bundle);
+
+                var childViewModelCache = Mvx.GetSingleton<IMvxChildViewModelCache>();
+                if (childViewModelCache.Exists(fragInfo.CachedFragment.ViewModel.GetType()))
+                {
+                    fragInfo.CachedFragment.ViewModel = childViewModelCache.Get(fragInfo.CachedFragment.ViewModel.GetType());
+                    childViewModelCache.Remove(fragInfo.CachedFragment.ViewModel.GetType());
+                }
 			}
 			else
 			{",Again: evaluate `fragInfo.CachedFragment.ViewModel.GetType()` once.,.cs,1,1,0
"@@ -0,0 +1,14 @@
+int method(void)
+{
+  return 0;
+}
+
+int sub(void)
+{
+  return 0;
+}
+
+int fun(void)
+{
+  return 0;
+}",...becase there is no whitespace after `(void)`.,c,0,0,0
"@@ -26,9 +26,19 @@ namespace Datadog.Trace
         private readonly CultureInfo _invariantCulture = CultureInfo.InvariantCulture;
         private readonly IDatadogLogger _log = DatadogLogging.GetLoggerFor<SpanContextPropagator>();
         private readonly ConcurrentDictionary<Key, string?> _defaultTagMappingCache = new();
+        private readonly Func<IReadOnlyDictionary<string, string?>?, string, IEnumerable<string?>> _readOnlyDictionaryValueGetterDelegate;
 
         private SpanContextPropagator()
         {
+            IEnumerable<string?> ReadOnlyDictionaryValueGetter(IReadOnlyDictionary<string, string?>? carrier, string name)
+            {
+                if (carrier != null && carrier.TryGetValue(name, out var value))
+                {
+                    yield return value;
+                }
+            }
+
+            _readOnlyDictionaryValueGetterDelegate = ReadOnlyDictionaryValueGetter;
         }
 
         public static SpanContextPropagator Instance { get; } = new();",TODO: `yield return value` or `return new[] { value }`?,.cs,0,1,0
"@@ -61,7 +61,9 @@
     <article>
       <figure id=""bullet-3"" class=""journey-bullet"">3.</figure>
       <h2>Enroll in premium, hands-on video tutorials</h2>
-      <p>Our video tutorials are more than just video tutorials. You&rsquo;ll build real apps and communicate directly with a thoughtbot developer or designer. Begin an online video tutorial as soon as you sign up.</p>
+      <p>Our video tutorials go beyond passive learning. You&rsquo;ll build
+      real apps and communicate directly with a thoughtbot developer or
+      designer. You can begin one as soon as you sign up.</p>
     </article>
     <figure class=""supporting-visual two-stacked"">
       <div>",`You can begin as soon as you sign up.`?,rb,1,0,0
"@@ -53,11 +53,7 @@ static bool add_change_to_rtps_group(
         {
             for (uint32_t frag = 1; frag <= n_fragments; frag++)
             {
-                if (group.add_data_frag(*change, frag, inline_qos))
-                {
-                    reader_change->markFragmentsAsSent(frag);
-                }
-                else
+                if (!group.add_data_frag(*change, frag, inline_qos))
                 {
                     logError(RTPS_WRITER, ""Error sending fragment ("" << change->sequenceNumber << "", "" << frag << "")"");
                 }",Why now is not needed to mark fragment as sent?,cpp,1,1,0
"@@ -41,7 +41,7 @@ namespace OpenTelemetry.Exporter.Jaeger.Tests.Implementation
         [Fact]
         public async void JaegerThriftIntegrationTest_TAbstractBaseGeneratesConsistentThriftPayload()
         {
-            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQxAAAWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQyAAAAAAA="");
+            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgHbWVzc2FnZRUAGAZFdmVudDEAABaAgLPexpa/BRksGANrZXkVABgFdmFsdWUAGAdtZXNzYWdlFQAYBkV2ZW50MgAAAAAA"");
             
             using (var memoryTransport = new InMemoryTransport())
             {",this test case is so wierd. I remember updating it last time =) Hope we will make somthing better eventually,.cs,1,1,0
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -89,9 +89,7 @@ class ScalarTypeComparator
         }
 
         if ($container_type_part instanceof TNonspecificLiteralString
-            && ($input_type_part instanceof TLiteralString
-                || $input_type_part instanceof TNonspecificLiteralString
-                || $input_type_part instanceof TNonEmptyNonspecificLiteralString)
+            && ($input_type_part instanceof TLiteralString || $input_type_part instanceof TNonspecificLiteralString)
         ) {
             return true;
         }",TNonEmptyNonspecificLiteralString is a child of TNonspecificLiteralString just above,php,1,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -65,7 +65,17 @@ public enum Varbits
 	/**
 	 * Grand Exchange
 	 */
+	GRAND_EXCHANGE_ITEM_QUANTITY(4396),
+
+	/**
+	 * Type of GE offer currently being created
+	 * 0 = buy
+	 * 1 = sell
+	 */
+	GE_OFFER_CREATION_TYPE(4397),
+
 	GRAND_EXCHANGE_PRICE_PER_ITEM(4398),
+	GRAND_EXCHANGE_SELECTED_SLOT(4439),
 
 	/**
 	 * Runepouch",why? (that goes for all these varbit changes),java,0,0,0
"@@ -32,6 +32,8 @@ export function Component(props, context) {
 	 */
 	this.props = props;
 
+	this._nextState =
+
 	/**
 	 * @public
 	 * @type {object}",@KevinDoughty Perhaps a bad push?,js,0,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -2158,6 +2158,15 @@ TEST_F(VkLayerTest, RenderPassBeginLayoutsFramebufferImageUsageMismatches) {
     iavci.subresourceRange.aspectMask = VK_IMAGE_ASPECT_COLOR_BIT;
     vk::CreateImageView(m_device->device(), &iavci, NULL, &iav);
 
+    // Create an input depth attachment view
+    VkImageObj iadi(m_device);
+
+    VkFormat dformat = FindSupportedDepthStencilFormat(gpu());
+    iadi.InitNoLayout(128, 128, 1, dformat, VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT, VK_IMAGE_TILING_OPTIMAL);
+    ASSERT_TRUE(iadi.initialized());
+
+    VkImageView iadv = iadi.targetView(dformat, VK_IMAGE_ASPECT_DEPTH_BIT | VK_IMAGE_ASPECT_STENCIL_BIT, 0, 1, 0, 1);
+
     // Create a color attachment view
     VkImageObj cai(m_device);
 ",Can this be done with `VkImageObj::targetView`?,cpp,1,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -240,6 +240,12 @@ class Server extends EventEmitter {
     }
 
     wireProtocol.command(this, ns, cmd, options, (err, result) => {
+      if (err && err instanceof MongoNetworkError) {
+        if (options.session) {
+          options.session.serverSession.isDirty = true;
+        }
+      }
+
       if (err && isSDAMUnrecoverableError(err)) {
         this.emit('error', err);
       }",`if (err && err instanceof MongoNetworkError && options.session)`,js,1,0,0
"@@ -4,7 +4,7 @@ MYUSA_URL = ENV['MYUSA_URL'] || 'https://alpha.my.usa.gov'
 
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :myusa, MYUSA_KEY, MYUSA_SECRET, {
-    scope: 'profile.email',
+    scope: 'profile.email profile.first_name profile.last_name',
     client_options: {
       site: MYUSA_URL,
       token_url: ""/oauth/authorize""",That Was Easy:tm:,rb,0,1,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -435,7 +435,7 @@ describe('ReadConcern', function() {
   });
 
   it('Should set majority readConcern aggregate command but ignore due to out', {
-    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2' } },
+    metadata: { requires: { topology: 'replicaset', mongodb: '>= 3.2 < 4.1' } },
 
     test: function(done) {
       var listener = require('../..').instrument(function(err) {",I didn't realize we could do this!,js,1,1,0
"@@ -11,12 +11,16 @@
 
 namespace Sonata\MediaBundle\CDN;
 
+use Symfony\Bundle\FrameworkBundle\Templating\Helper\AssetsHelper;
+
 class Server implements CDNInterface
 {
+    protected $path;
+
     /**
-     * @var string
+     * @var AssetsHelper
      */
-    protected $path;
+    private $assetsHelper;
 
     /**
      * @param string $path",this is a BC break,php,1,1,0
"@@ -17,7 +17,7 @@ namespace Datadog.Trace.ClrProfiler
                 DefinitionsId = ""FFAFA5168C4F4718B40CA8788875C2DA"",
 
                 // Autogenerated definitions array
-                Definitions = GetDefinitionsArray(),
+                Definitions = GetDefinitionsList().ToArray(),
             };
         }
 ",@tonyredondo for visibility,.cs,0,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -135,7 +135,8 @@ class PathResolver
   # This operation considers posix paths, windows paths, and file URLs.
   #
   # Unix absolute paths and UNC paths start with slash. Windows roots can start
-  # with a drive letter. Absolute paths in the browser start with file://.
+  # with a drive letter. Absolute paths may start with file://, http://, or
+  # https:// when the IO module is xmlhttprequest (Opal runtime only).
   #
   # path - the String path to check
   #",I didn't know that `start_with?` accepts a list of arguments! It's good to know :smile:,rb,0,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -53,11 +53,7 @@ static bool add_change_to_rtps_group(
         {
             for (uint32_t frag = 1; frag <= n_fragments; frag++)
             {
-                if (group.add_data_frag(*change, frag, inline_qos))
-                {
-                    reader_change->markFragmentsAsSent(frag);
-                }
-                else
+                if (!group.add_data_frag(*change, frag, inline_qos))
                 {
                     logError(RTPS_WRITER, ""Error sending fragment ("" << change->sequenceNumber << "", "" << frag << "")"");
                 }",Why now is not needed to mark fragment as sent?,cpp,1,1,0
"@@ -34,6 +34,15 @@ class CocoDataset(CustomDataset):
                'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush')
 
     def load_annotations(self, ann_file):
+        """"""Load annotation from COCO style annotation file
+
+        Args:
+            ann_file (str): Path of annotation file.
+
+        Returns:
+            list[dict]: Annotation info from COCO api.
+        """"""
+
         self.coco = COCO(ann_file)
         self.cat_ids = self.coco.get_cat_ids(cat_names=self.CLASSES)
         self.cat2label = {cat_id: i for i, cat_id in enumerate(self.cat_ids)}",Missing the last `.`,py,1,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -61,13 +61,13 @@ var once sync.Once
 var CloudhubHandler *MessageHandle
 
 // InitHandler create a handler for websocket and quic servers
-func InitHandler(config *hubconfig.Configure, eventq *channelq.ChannelMessageQueue) {
+func InitHandler(eventq *channelq.ChannelMessageQueue) {
 	once.Do(func() {
 		CloudhubHandler = &MessageHandle{
-			KeepaliveInterval: config.KeepaliveInterval,
-			WriteTimeout:      config.WriteTimeout,
+			KeepaliveInterval: int(hubconfig.Get().KeepaliveInterval),
+			WriteTimeout:      int(hubconfig.Get().WriteTimeout),
 			MessageQueue:      eventq,
-			NodeLimit:         config.NodeLimit,
+			NodeLimit:         int(hubconfig.Get().NodeLimit),
 		}
 
 		CloudhubHandler.KeepaliveChannel = make(map[string]chan struct{})",Why need the type conversion here?,go,1,1,0
"@@ -119,6 +119,7 @@ install_requires = [
     ""invenio-documents>=0.1.0.post2"",
     ""invenio-upgrader>=0.1.0"",
     ""invenio-unapi>=0.1.0"",
+    ""invenio-jsonschemas>=0.0.0"",
     ""itsdangerous>=0.24"",
     ""jellyfish>=0.3.2"",
     ""Jinja2>=2.7"",",it's not required dependency,py,1,1,0
"@@ -130,14 +130,14 @@ func TestAttestorTestSuite(t *testing.T) {
 }
 
 func (s *AttestorTestSuite) linkAgentSVIDPath() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/agent_svid.der""),
                 s.config.SVIDCachePath)
         s.Require().NoError(err)
 }
 
 func (s *AttestorTestSuite) linkBundle() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/bundle.der""),
                 s.config.BundleCachePath)
         s.Require().NoError(err)",Did you run into a problem with this?,go,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -9,14 +9,10 @@ public class ASTDeclaration extends AbstractJspNode {
 
     private String name;
 
-    public ASTDeclaration(int id) {
+    ASTDeclaration(int id) {
         super(id);
     }
 
-    public ASTDeclaration(JspParser p, int id) {
-        super(p, id);
-    }
-
     /**
      * @return Returns the name.
      */",`setName()` can be package-private as well,java,1,1,0
"@@ -629,12 +629,13 @@ namespace pwiz.Skyline.Util.Extensions
             }
             for (int i = 0; i < fields.Length; ++i)
             {
-                FieldNames.Add(fields[i].Trim());
-                FieldDict[fields[i]] = i;
+                var trimmed = fields[i].Trim();
+                FieldNames.Add(trimmed);
+                FieldDict[trimmed] = i;
                 // Check to see if the given column name is actually a synonym for the internal canonical (no spaces, serialized) name
                 if (headerSynonyms != null)
                 {
-                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, fields[i], StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
+                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, trimmed, StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
                     if (!string.IsNullOrEmpty(key))
                     {
                         var syn = headerSynonyms[key];","I would name this variable ""fieldName"" instead of ""trimmed"".",.cs,1,1,0
"@@ -349,11 +349,7 @@ public interface Future<T> extends Value<T> {
      * @throws NullPointerException if unit is null.
      */
     static Future<Void> run(CheckedRunnable unit) {
-        Objects.requireNonNull(unit, ""unit is null"");
-        return Future.of(DEFAULT_EXECUTOR_SERVICE, () -> {
-            unit.run();
-            return null;
-        });
+        return run(DEFAULT_EXECUTOR_SERVICE, unit);
     }
 
     /**",only deleted code is good code :-),java,1,0,0
"@@ -0,0 +1,14 @@
+// Copyright (c) .NET Foundation. All rights reserved.
+// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
+
+using System;
+
+namespace Microsoft.AspNetCore.Protocols
+{
+    [Flags]
+    public enum TransferFormat
+    {
+        Binary = 0x01,
+        Text = 0x02
+    }
+}","Binary literal? :). I don't really care either way, mostly just trolling.",.cs,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -23,6 +23,15 @@ void wlr_renderer_end(struct wlr_renderer *r) {
         r->impl->end(r);
 }
 
+void wlr_renderer_clear(struct wlr_renderer *r, float red, float green,
+                float blue, float alpha) {
+        r->impl->clear(r, red, green, blue, alpha);
+}
+
+void wlr_renderer_scissor(struct wlr_renderer *r, struct wlr_box *box) {
+        r->impl->scissor(r, box);
+}
+
 struct wlr_texture *wlr_render_texture_create(struct wlr_renderer *r) {
         return r->impl->texture_create(r);
 }",Check for null,c,1,1,0
"@@ -184,6 +184,8 @@ namespace OpenTelemetry.Instrumentation.Http.Implementation
                     HttpInstrumentationEventSource.Log.EnrichmentException(ex);
                 }
 
+                activity.RecordException(exc);
+
                 if (exc is HttpRequestException)
                 {
                     if (exc.InnerException is SocketException exception)",lets discuss and do this in separate PR.,.cs,0,1,0
"@@ -74,7 +74,7 @@ double getLabuteAtomContribs(const ROMol &mol, std::vector<double> &Vi,
     Vi[i] = M_PI * Ri * (4. * Ri - Vi[i]);
     res += Vi[i];
   }
-  if (includeHs) {
+  if (includeHs && fabs(hContrib) > 1e-4) {
     double Rj = PeriodicTable::getTable()->getRb0(1);
     hContrib = M_PI * Rj * (4. * Rj - hContrib);
     res += hContrib;",Why not includeHs && nAtoms?,cpp,1,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -361,7 +361,9 @@ public class FunctionQParser extends QParser {
         ((FunctionQParser)subParser).setParseMultipleSources(true);
       }
       Query subQuery = subParser.getQuery();
-      if (subQuery instanceof FunctionQuery) {
+      if (subQuery == null) {
+        valueSource = new DoubleConstValueSource(0.0f);
+      } else if (subQuery instanceof FunctionQuery) {
         valueSource = ((FunctionQuery) subQuery).getValueSource();
       } else {
         valueSource = new QueryValueSource(subQuery, 0.0f);",Why a Double?,java,1,1,0
"@@ -349,9 +349,13 @@ public class Camera2 extends android.support.v4.app.Fragment {
                 		Camera.Parameters parameters = preview.mCamera.getParameters();
                 		switch (HDR_STATE){
                     			case HDR_OFF:
-                        			HDR_STATE = HDR_ON;
-                        			camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
-                        			parameters.setSceneMode(SCENE_MODE_HDR);
+                        			if (preview.getSupportSceneModes().contains(SCENE_MODE_HDR)) {
+                                        HDR_STATE = HDR_ON;
+                                        camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
+                                        parameters.setSceneMode(SCENE_MODE_HDR);
+                                    }else {
+                                        Toast.makeText(ctx, R.string.hdr_unsupported_error,Toast.LENGTH_SHORT).show();
+                                    }
                         			break;
                     			case HDR_ON:
                         			HDR_STATE = HDR_OFF;",Properly intend the code pls.,java,1,1,0
"@@ -46,6 +46,8 @@
 
 #include <Kokkos_Core.hpp>
 
+// FIXME_SYCL requires allocate_tracked
+#ifndef KOKKOS_ENABLE_SYCL
 #if !defined(KOKKOS_ENABLE_CUDA) || defined(__CUDACC__)
 
 #include <default/TestDefaultDeviceType_Category.hpp>",Does `malloc` test not pass?,cpp,0,0,0
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -651,9 +651,7 @@ class Algebra
 
                         $new_clause = new Clause(
                             $new_clause_possibilities,
-                            $clause->creating_conditional_id === $grouped_clause->creating_conditional_id
-                                ? $clause->creating_conditional_id
-                                : $grouped_clause->creating_conditional_id,
+                            $grouped_clause->creating_conditional_id,
                             $clause->creating_object_id,
                             false,
                             true,",On the first glance this doesn't look like exact equivalent.,php,1,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -0,0 +1,15 @@
+""""""Test case for typevar-name-missing-variance with default settings""""""
+
+from typing import TypeVar
+
+# Name set by regex pattern
+TypeVarsShouldBeLikeThis = TypeVar(""TypeVarsShouldBeLikeThis"")
+TypeVarsShouldBeLikeThis_contra = TypeVar(
+    ""TypeVarsShouldBeLikeThis_contra"", contravariant=True
+)
+TypeVarsShouldBeLikeThis_co = TypeVar(""TypeVarsShouldBeLikeThis_co"", covariant=True)
+
+# Name using the standard style
+T_GoodName = TypeVar(""T_GoodName"")  # [invalid-name]
+T_GoodName_co = TypeVar(""T_GoodName_co"", covariant=True)  # [invalid-name]
+T_GoodName_contra = TypeVar(""T_GoodName_contra"", contravariant=True)  # [invalid-name]",Better to remove the `T_` prefix,py,1,1,0
"@@ -2192,8 +2192,8 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])
         return DataFrame(internal)
 
-    # TODO: add axis parameter
-    def diff(self, periods=1):
+    # TODO: axis should support 1 or 'columns' either
+    def diff(self, periods: int = 1, axis: int = 0):
         """"""
         First discrete difference of element.
 ",At this moment?,py,0,0,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -45,17 +45,6 @@ namespace Microsoft.CodeAnalysis.Sarif
 
         private static string[] InvalidFiles = new string[]
         {
-            @""ClangAnalyzer\ArrayDataTypes.xml.sarif"",
-            @""ClangAnalyzer\BadMissingString.xml.sarif"",
-            @""ClangAnalyzer\ClangAnalyzer_issueLog1_raw.xml.sarif"",
-            @""ClangAnalyzer\DictionaryDataTypes.xml.sarif"",
-            @""ClangAnalyzer\DivByZero.xml.sarif"",
-            @""ClangAnalyzer\FileNumberCoverage.xml.sarif"",
-            @""ClangAnalyzer\GarbageValueLog.xml.sarif"",
-            @""ClangAnalyzer\MediumLog.xml.sarif"",
-            @""ClangAnalyzer\MissingLocation.xml.sarif"",
-            @""ClangAnalyzer\RealLog.xml.sarif"",
-            @""CppCheck\CppCheck_issueLog1_raw.xml.sarif""
         };
 
         public static IEnumerable<object[]> TestCases",I like that you left the empty array in there.,.cs,1,1,0
"@@ -29,14 +29,14 @@ def test_config_build_detector():
     from mmdet.models import build_detector
 
     config_dpath = _get_config_directory()
-    print('Found config_dpath = {!r}'.format(config_dpath))
+    print(f'Found config_dpath = {config_dpath!r}')
 
     import glob
     config_fpaths = list(glob.glob(join(config_dpath, '**', '*.py')))
     config_fpaths = [p for p in config_fpaths if p.find('_base_') == -1]
     config_names = [relpath(p, config_dpath) for p in config_fpaths]
 
-    print('Using {} config files'.format(len(config_names)))
+    print(f'Using {len(config_names)} config files')
 
     for config_fname in config_names:
         config_fpath = join(config_dpath, config_fname)",The `!r` is unnecessary.,py,1,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -87,10 +87,19 @@ var creatablesMigration = []string{
 	`ALTER TABLE assetcreators ADD COLUMN ctype INTEGER DEFAULT 0`,
 }
 
+var createOnlineAccountIndex = []string{
+	`ALTER TABLE accountbase
+		ADD COLUMN normalizedonlinebalance INTEGER`,
+	`CREATE INDEX IF NOT EXISTS onlineaccountbals
+		ON accountbase ( normalizedonlinebalance, address, data )
+		WHERE normalizedonlinebalance>0`,
+}
+
 var accountsResetExprs = []string{
 	`DROP TABLE IF EXISTS acctrounds`,
 	`DROP TABLE IF EXISTS accounttotals`,
 	`DROP TABLE IF EXISTS accountbase`,
+	`DROP TABLE IF EXISTS onlineaccountbase`,
 	`DROP TABLE IF EXISTS assetcreators`,
 	`DROP TABLE IF EXISTS storedcatchpoints`,
 	`DROP TABLE IF EXISTS catchpointstate`,","this line can be dropped, right ?",go,1,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -102,7 +102,7 @@ Point2D bondInsideRing(const ROMol &mol, const Bond &bond, const Point2D &cds1,
     Atom *bgn_atom = bond->getBeginAtom();
     for (const auto &nbri2 : make_iterator_range(mol.getAtomBonds(bgn_atom))) {
       const Bond *bond2 = mol[nbri2];
-      if (bond2 == bond) {
+      if (bond2->getIdx() == bond->getIdx()) {
         continue;
       }
       if (find(ring.begin(), ring.end(), bond2->getIdx()) != ring.end()) {",oh is that embarrassing,cpp,0,0,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -69,7 +69,7 @@ var (
 		completeJobCompleted: 9,
 	}
 
-	cancelC chan struct{}
+	cancelC = make(chan struct{})
 )
 
 func initPatch(ctx context.Context) {",why is this change needed?,go,1,1,0
"@@ -238,12 +238,15 @@ bool StatelessReader::matched_writer_is_matched(
 bool StatelessReader::change_received(
         CacheChange_t* change)
 {
-    // Only make visible the change if there is not other with bigger sequence number.
+    // std::cout << ""[FAST STATELESS READER] change_received"" << std::endl;
+    // Only make visible the change if there is change_received other with bigger sequence number.
     // TODO Revisar si no hay que incluirlo.
     if (!thereIsUpperRecordOf(change->writerGUID, change->sequenceNumber))
     {
         if (mp_history->received_change(change, 0))
         {
+            auto payload_length = change->serializedPayload.length;
+
             Time_t::now(change->receptionTimestamp);
             update_last_notified(change->writerGUID, change->sequenceNumber);
             ++total_unread_;",Seems this was left here unintentionally,cpp,1,1,0
"@@ -354,13 +354,10 @@ type BPFDataplane interface {
 	RemoveXDP(ifName string, mode XDPMode) error
 	UpdateCIDRMap(ifName string, family IPFamily, ip net.IP, mask int, refCount uint32) error
 	UpdateFailsafeMap(proto uint8, port uint16) error
-	loadXDPRaw(objPath, ifName string, mode XDPMode, mapArgs []string) error
 	GetBPFCalicoDir() string
 	AttachToSockmap() error
 	DetachFromSockmap(mode FindObjectMode) error
 	RemoveSockmap(mode FindObjectMode) error
-	loadBPF(objPath, progPath, progType string, mapArgs []string) error
-	LoadSockops(objPath string) error
 	LoadSockopsWithBytes(objBytes []byte) error
 	LoadSockopsAuto() error
 	RemoveSockops() error",Please can you merge master in before making these changes. I just reinstated a bunch of BPF UTs. Possible that the UTs use this code.,c,0,1,0
"@@ -23,6 +23,8 @@ import javax.annotation.Nullable;
  */
 @AutoValue
 public abstract class InitFieldConfig {
+  private static String randomValueToken = ""$RANDOM"";
+
   public abstract String fieldPath();
 
   @Nullable",Should this be final?,java,1,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -843,13 +843,6 @@ err:
     return NULL;
 }
 
-/*  Create namespace name for jobid 'id'
- */
-static int job_get_ns_name (char *buf, int bufsz, flux_jobid_t id)
-{
-    return fluid_encode (buf, bufsz, id, FLUID_STRING_DOTHEX);
-}
-
 static double job_get_kill_timeout (flux_t *h)
 {
     double t = DEFAULT_KILL_TIMEOUT;","typo in commit message ""notiation"" -> ""notation""",c,0,1,0
"@@ -55,6 +55,7 @@ final class ThumbnailCompilerPassTest extends TestCase
 
 final class TestUncallableAddResizerMethod
 {
+    // @phpstan-ignore-next-line
     private function addResizer(): void
     {
     }",Can you explain why ?,php,1,1,0
"@@ -45,8 +45,8 @@ import (
 const (
 	// heartbeatTimeout is the maximum time to wait between heartbeats
 	// without disconnecting
-	heartbeatTimeout = 5 * time.Minute
-	heartbeatJitter  = 3 * time.Minute
+	heartbeatTimeout = 1 * time.Minute
+	heartbeatJitter  = 1 * time.Minute
 
 	inactiveInstanceReconnectDelay = 1 * time.Hour
 ",Why was the jitter removed?,go,1,1,0
"@@ -130,14 +130,14 @@ func TestAttestorTestSuite(t *testing.T) {
 }
 
 func (s *AttestorTestSuite) linkAgentSVIDPath() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/agent_svid.der""),
                 s.config.SVIDCachePath)
         s.Require().NoError(err)
 }
 
 func (s *AttestorTestSuite) linkBundle() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/bundle.der""),
                 s.config.BundleCachePath)
         s.Require().NoError(err)",Did you run into a problem with this?,go,1,1,0
"@@ -397,6 +397,16 @@ func dealsExpensesPerHour(addr common.Address, deals []*sonm.DWHDeal) (*sonm.Big
 	return sonm.NewBigInt(inAsks), sonm.NewBigInt(inBids)
 }
 
+func dealType(deal *sonm.Deal, addr common.Address) string {
+	if deal.GetSupplierID().Unwrap() == addr || deal.GetMasterID().Unwrap() == addr {
+		return ""SELL""
+	}
+	if deal.GetConsumerID().Unwrap() == addr {
+		return ""BUY""
+	}
+	return """"
+}
+
 func printDealsList(cmd *cobra.Command, addr common.Address, deals []*sonm.DWHDeal) {
 	asks, bids := dealsExpensesPerHour(addr, deals)
 ",What if BOTH conditions are true?,go,1,1,0
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -349,9 +349,13 @@ public class Camera2 extends android.support.v4.app.Fragment {
                 		Camera.Parameters parameters = preview.mCamera.getParameters();
                 		switch (HDR_STATE){
                     			case HDR_OFF:
-                        			HDR_STATE = HDR_ON;
-                        			camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
-                        			parameters.setSceneMode(SCENE_MODE_HDR);
+                        			if (preview.getSupportSceneModes().contains(SCENE_MODE_HDR)) {
+                                        HDR_STATE = HDR_ON;
+                                        camera_hdr.setImageResource(R.drawable.ic_hdr_on_white_24dp);
+                                        parameters.setSceneMode(SCENE_MODE_HDR);
+                                    }else {
+                                        Toast.makeText(ctx, R.string.hdr_unsupported_error,Toast.LENGTH_SHORT).show();
+                                    }
                         			break;
                     			case HDR_ON:
                         			HDR_STATE = HDR_OFF;",Properly intend the code pls.,java,1,1,0
"@@ -43,11 +43,6 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.System.IO.Pipelines
             {
                 var part = _enumerator.Current;
 
-                if (_end)
-                {
-                    return new ReadCursor(part.Segment, part.Start + _currentSpan.Length);
-                }
-
                 return new ReadCursor(part.Segment, part.Start + _index);
             }
         }","This is really strange, now when I look at it.",.cs,1,1,0
"@@ -0,0 +1,17 @@
+module Blacklight
+  module Rendering
+    class Microdata < AbstractStep
+      include ActionView::Helpers::TagHelper
+      def render
+        return next_step(values) unless config.itemprop
+        next_step(values.map { |x| itemprop(x, config.itemprop) })
+      end
+
+      private
+
+        def itemprop(val, itemprop)
+          content_tag :span, val, itemprop: itemprop
+        end
+    end
+  end
+end",2 trailing blank lines detected.,rb,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -709,7 +709,7 @@ read_vex(byte *pc, decode_info_t *di, byte instr_byte,
 }
 
 /* Given an instr_info_t PREFIX_EXT entry, reads the next entry based on the prefixes.
- * Note that this function does not initialise the opcode field in \p di but is set in
+ * Note that this function does not initialize the opcode field in \p di but is set in
  * \p info->type.
  */
 static inline const instr_info_t *",Not a fan of British spelling?,c,1,1,0
"@@ -14,7 +14,7 @@ HTTP_ERRORS = [Timeout::Error,
                Net::HTTPHeaderSyntaxError,
                Net::ProtocolError]
 
-SMTP_SERVER_ERRORS = [TimeoutError,
+SMTP_SERVER_ERRORS = [Timeout::Error,
                       IOError,
                       Net::SMTPUnknownError,
                       Net::SMTPServerBusy,",Freeze mutable objects assigned to constants.,rb,1,1,0
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -0,0 +1,16 @@
+<% 
+  tool_name = Rails.configuration.branding[:application][:name]
+  helpdesk_email = Rails.configuration.branding[:organisation][:helpdesk_email]
+
+  # Override the default Rails route helper for the contact_us page IF an alternate contact_us url was defined
+  # in the branding config file
+  contact_us = Rails.application.config.branding[:organisation][:contact_us_url] || contact_us_url
+%>
+<p>
+  <%= _('All the best') %>
+  <br />
+  <%= _('The %{tool_name} team') %{:tool_name => tool_name} %>
+</p>
+<p>
+  <%= _('You may change your notification preferences on your profile page.') %>&nbsp;<%= _('Please do not reply to this email.') %>&nbsp;<%= raw(_('If you have any questions or need help, please contact us at %{helpdesk_email} or visit %{contact_us}') %{ :helpdesk_email => mail_to(helpdesk_email, helpdesk_email, subject: email_subject), :contact_us => link_to(contact_us, contact_us) }) %>
+</p>","Nice partial, it was copied/pasted across many mails...",rb,1,1,0
"@@ -202,6 +202,19 @@ namespace Microsoft.AspNetCore.Server.KestrelTests
             }
         }
 
+        [Fact]
+        public async Task BadRequestIfContentLengthInvalid()
+        {
+            using (var server = new TestServer(context => { return Task.FromResult(0); }))
+            {
+                using (var connection = server.CreateConnection())
+                {
+                    await connection.Send(""GET / HTTP/1.1\r\nContent-Length: NaN\r\n\r\n"");
+                    await ReceiveBadRequestResponse(connection, ""400 Bad Request"", server.Context.DateHeaderValue);
+                }
+            }
+        }
+
         private async Task ReceiveBadRequestResponse(TestConnection connection, string expectedResponseStatusCode, string expectedDateHeaderValue)
         {
             await connection.ReceiveForcedEnd(",Test with negative value too.,.cs,1,1,0
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -23,6 +23,15 @@ void wlr_renderer_end(struct wlr_renderer *r) {
         r->impl->end(r);
 }
 
+void wlr_renderer_clear(struct wlr_renderer *r, float red, float green,
+                float blue, float alpha) {
+        r->impl->clear(r, red, green, blue, alpha);
+}
+
+void wlr_renderer_scissor(struct wlr_renderer *r, struct wlr_box *box) {
+        r->impl->scissor(r, box);
+}
+
 struct wlr_texture *wlr_render_texture_create(struct wlr_renderer *r) {
         return r->impl->texture_create(r);
 }",Check for null,c,1,1,0
"@@ -438,7 +438,12 @@ describe('Connection Pool', function () {
     });
 
     loadSpecTests('connection-monitoring-and-pooling').forEach(test => {
-      it(test.description, function () {
+      const itFn =
+        test.description ===
+        'must aggressively timeout threads enqueued longer than waitQueueTimeoutMS'
+          ? it.skip
+          : it;
+      itFn(test.description, function () {
         const operations = test.operations;
         const expectedEvents = test.events || [];
         const ignoreEvents = test.ignore || [];","This test has been flaky for a long time, if we're okay with skipping I can make a ticket to take a look at this later.",js,1,1,0
"@@ -1376,8 +1376,6 @@ void DataReaderImpl::release_payload_pool()
 
     PoolConfig config = PoolConfig::from_history_attributes(history_.m_att);
     payload_pool_->release_history(config, true);
-
-    TopicPayloadPoolRegistry::release(payload_pool_);
 }
 
 ReturnCode_t DataReaderImpl::check_datasharing_compatible(",Shouldn't we do `payload_pool_.reset()` here ?,cpp,1,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -76,7 +76,7 @@ describe CatalogController do
           expect(session[:search].keys).to include :id
           
           search = Search.find(session[:search][:id])
-          expect(search.query_params[:q]).to eq @user_query
+          expect(search.query_params['q']).to eq @user_query
         end
       end
 ","There isn't a backwards-compat issue here, right? The old hash was a HWIA, and now we're stuck with a stringified hash?",rb,1,1,0
"@@ -1376,8 +1376,6 @@ void DataReaderImpl::release_payload_pool()
 
     PoolConfig config = PoolConfig::from_history_attributes(history_.m_att);
     payload_pool_->release_history(config, true);
-
-    TopicPayloadPoolRegistry::release(payload_pool_);
 }
 
 ReturnCode_t DataReaderImpl::check_datasharing_compatible(",Shouldn't we do `payload_pool_.reset()` here ?,cpp,1,1,0
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -350,7 +350,7 @@ if __name__ == ""__main__"":
               ],
           },
           maintainer='Guolin Ke',
-          maintainer_email='guolin.ke@microsoft.com',
+          maintainer_email='guolin.ke@outlook.com',
           zip_safe=False,
           cmdclass={
               'install': CustomInstall,",Ah thanks for catching this! Sorry I didn't think of it on #4633. Thankfully it's not as critical with PyPI as it is with CRAN. @shiyu1994 should this be changed to your name and email? My assumption is that Microsoft would prefer to have a Microsoft employee as the primary contact for these artifacts.,cpp,0,1,0
"@@ -86,8 +86,7 @@ bool isValidMatch(const TurnLaneType::Mask tag, const TurnInstruction instructio
                (instruction.type ==
                     TurnType::Continue && // Forks can be experienced, even for straight segments
                 (instruction.direction_modifier == DirectionModifier::SlightLeft ||
-                 instruction.direction_modifier == DirectionModifier::SlightRight)) ||
-               instruction.type == TurnType::Suppressed;
+                 instruction.direction_modifier == DirectionModifier::SlightRight));
     }
     else if (tag == TurnLaneType::slight_left || tag == TurnLaneType::left ||
              tag == TurnLaneType::sharp_left)",we should refactor this ten line return statement ..,cpp,0,1,0
"@@ -9,14 +9,10 @@ public class ASTDeclaration extends AbstractJspNode {
 
     private String name;
 
-    public ASTDeclaration(int id) {
+    ASTDeclaration(int id) {
         super(id);
     }
 
-    public ASTDeclaration(JspParser p, int id) {
-        super(p, id);
-    }
-
     /**
      * @return Returns the name.
      */",`setName()` can be package-private as well,java,1,1,0
"@@ -4,13 +4,12 @@
 
 using System;
 using System.Reflection;
-using System.Threading.Tasks;
 using MvvmCross.Exceptions;
 using MvvmCross.Logging;
 
 namespace MvvmCross.Base
 {
-    public abstract class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
+    public class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
     {
         protected static void ExceptionMaskedAction(Action action, bool maskExceptions)
         {",Please leave as abstract,.cs,1,1,0
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -23,6 +23,8 @@ var requestReplacer = strings.NewReplacer(
 	""\n"", ""\\n"",
 )
 
+var now = time.Now
+
 // Replacer is a type which can replace placeholder
 // substrings in a string with actual values from a
 // http.Request and ResponseRecorder. Always use",This is a very elegant way to make time testable. :+1:,go,1,1,0
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -19,4 +19,6 @@ exports.Date = require('./date');
 
 exports.ObjectId = require('./objectid');
 
+exports.ObjectId = require('./dbref');
+
 exports.Mixed = require('./mixed');",Should be `exports.DBRef` i guess.,js,1,1,0
"@@ -5,7 +5,7 @@ if (ariaHeadingLevel !== null) {
 	return true;
 }
 
-var headingLevel = node.tagName.match(/H(\d)/);
+var headingLevel = node.nodeName.match(/H(\d)/);
 
 if (headingLevel) {
 	this.data(parseInt(headingLevel[1], 10));",do you need `toUpperCase()` here?,js,1,1,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -651,9 +651,7 @@ class Algebra
 
                         $new_clause = new Clause(
                             $new_clause_possibilities,
-                            $clause->creating_conditional_id === $grouped_clause->creating_conditional_id
-                                ? $clause->creating_conditional_id
-                                : $grouped_clause->creating_conditional_id,
+                            $grouped_clause->creating_conditional_id,
                             $clause->creating_object_id,
                             false,
                             true,",On the first glance this doesn't look like exact equivalent.,php,1,1,0
"@@ -1,16 +1,16 @@
 //  Copyright (c) 2018 Demerzel Solutions Limited
 //  This file is part of the Nethermind library.
-// 
+//
 //  The Nethermind library is free software: you can redistribute it and/or modify
 //  it under the terms of the GNU Lesser General Public License as published by
 //  the Free Software Foundation, either version 3 of the License, or
 //  (at your option) any later version.
-// 
+//
 //  The Nethermind library is distributed in the hope that it will be useful,
 //  but WITHOUT ANY WARRANTY; without even the implied warranty of
 //  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 //  GNU Lesser General Public License for more details.
-// 
+//
 //  You should have received a copy of the GNU Lesser General Public License
 //  along with the Nethermind. If not, see <http://www.gnu.org/licenses/>.
 ",I guess your IDE automatically edited these files?,.cs,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -0,0 +1,11 @@
+const path = require('path');
+
+module.exports = {
+	mode: 'development',
+  watch: true,
+	entry: './lib/index.js',
+	output: {
+		path: path.resolve(__dirname, 'dist'),
+		filename: 'axe.js'
+	}
+};","Please feel free to suggest / write a better Webpack config, I'm still new to it.",js,0,1,0
"@@ -694,7 +694,13 @@ class ColorbarPlot(ElementPlot):
             self._cbar_extend = 'max'
 
         # Define special out-of-range colors on colormap
-        cmap = copy.copy(plt.cm.get_cmap(opts.get('cmap')))
+        cmap = opts.get('cmap')
+        if isinstance(cmap, list):
+            cmap = mpl_colors.ListedColormap(cmap)
+        elif isinstance(cmap, util.basestring):
+            cmap = copy.copy(plt.cm.get_cmap(cmap))
+        else:
+            cmap = copy.copy(cmap)
         colors = {}
         for k, val in self.clipping_colors.items():
             if isinstance(val, tuple):",What is all the copying about?,py,1,1,0
"@@ -220,7 +220,7 @@ class JsGenerator : public BaseGenerator {
        it != sorted_namespaces.end(); it++) {
     if (lang_.language == IDLOptions::kTs) {
       if (it->find('.') == std::string::npos) {
-        code += ""import { flatbuffers } from \""./flatbuffers\""\n"";
+        code += ""import { flatbuffers } from \""flatbuffers\""\n"";
         break;
       }
     } else {",Why is this? What effect will this have on other users? @krojew @JoshGalvin,java,0,0,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -138,6 +138,8 @@ class Register(abc.ABCMeta):
         return global_params.iteritems()
 
 
+_event_callbacks = {}
+
 class Task(object):
     __metaclass__ = Register
 ",I think this should go into the Task class.,py,1,1,0
"@@ -90,8 +90,8 @@ namespace Nethermind.Baseline.Test
                 transaction.SenderAddress = key.Address;
                 ecdsa.Sign(key, transaction, true);
                 transaction.Hash = transaction.CalculateHash();
-                AddTxResult result = testRpc.TxPool.SubmitTx(transaction, TxHandlingOptions.None);
-                if (result != AddTxResult.Added)
+                AcceptTxResult result = testRpc.TxPool.SubmitTx(transaction, TxHandlingOptions.None);
+                if (!result.Equals(AcceptTxResult.Accepted))
                 {
                     throw new Exception(""failed to add "" + result);
                 }",implicit bool cast,.cs,1,0,0
"@@ -59,11 +59,10 @@ func (b3 B3) Inject(ctx context.Context, supplier propagation.HTTPSupplier) {
 	if b3.SingleHeader {
 		sampled := sc.TraceFlags & core.TraceFlagsSampled
 		supplier.Set(B3SingleHeader,
-			fmt.Sprintf(""%s-%.16x-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
+			fmt.Sprintf(""%s-%s-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
 	} else {
 		supplier.Set(B3TraceIDHeader, sc.TraceIDString())
-		supplier.Set(B3SpanIDHeader,
-			fmt.Sprintf(""%.16x"", sc.SpanID))
+		supplier.Set(B3SpanIDHeader, sc.SpanID.String())
 
 		var sampled string
 		if sc.IsSampled() {",Is TraceIDString now duplicative?,go,1,1,0
"@@ -1,10 +1,13 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 # SPDX - License - Identifier: Apache - 2.0
 
+# Purpose
+# This code example demonstrates how to configure an Amazon Simple Storage Solution (Amazon S3) bucket as a static website.
+
+# snippet-start:[s3.s3_ruby_bucket_website.rb]
+
 require 'aws-sdk-s3'
 
-# Configures an Amazon S3 bucket as a static website.
-#
 # Prerequisites:
 #
 # - An Amazon S3 bucket.",Simple Storage **Service**,rb,0,0,0
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -0,0 +1,8 @@
+require 'spec_helper'
+
+describe 'Purchases' do
+  it 'raise not found if no purchase exists' do
+    visit purchase_path('robots.txt')
+    expect(page.status_code).to eq(404)
+  end
+end",I'd try writing this as a controller spec.,rb,0,1,0
"@@ -589,9 +589,6 @@ func (b *bucket) ErrorAs(err error, i interface{}) bool {
 }
 
 func (b *bucket) ErrorCode(err error) gcerrors.ErrorCode {
-        if code := gcerrors.Code(err); code != gcerrors.Unknown {
-                return code
-        }
         serr, ok := err.(azblob.StorageError)
         switch {
         case !ok:","Note: I moved this to the concrete class (blob.go). If the driver produces an error that already has an error code, we should always just use it.",go,0,1,0
"@@ -23,4 +23,14 @@ module RSpecHelpers
     end
   end
 
+  def expect_deprecation_with_call_site(file, line)
+    expect(RSpec.configuration.reporter).to receive(:deprecation) do |options|
+      expect(options[:call_site]).to include([file, line].join(':'))
+    end
+  end
+
+  def allow_deprecation
+    allow(RSpec.configuration.reporter).to receive(:deprecation)
+  end
+
 end","I can't get this helper to fail. I've passed incorrect line numbers and it always passes. I see the block get run, but it doesn't seem this inner expectation is properly raised.",rb,0,1,0
"@@ -319,7 +319,8 @@ void setHydrogenCoords(ROMol *mol, unsigned int hydIdx, unsigned int heavyIdx) {
 }  // end of unnamed namespace
 
 namespace MolOps {
-void addHs(RWMol &mol, bool explicitOnly, bool addCoords) {
+void addHs(RWMol &mol, bool explicitOnly, bool addCoords,
+           const UINT_VECT *onlyOnAtoms) {
   // when we hit each atom, clear its computed properties
   // NOTE: it is essential that we not clear the ring info in the
   // molecule's computed properties.  We don't want to have to",Would a bit vector make more sense here?,cpp,1,1,0
"@@ -195,7 +195,10 @@ def main():
         if args.eval:
             eval_kwargs = cfg.get('evaluation', {}).copy()
             # hard-code way to remove EvalHook args
-            for key in ['interval', 'tmpdir', 'start', 'gpu_collect']:
+            for key in [
+                    'interval', 'tmpdir', 'start', 'gpu_collect', 'save_best',
+                    'key_indicator', 'rule'
+            ]:
                 eval_kwargs.pop(key, None)
             eval_kwargs.update(dict(metric=args.eval, **kwargs))
             print(dataset.evaluate(outputs, **eval_kwargs))",Other scripts such as `benchmark.py` may also be affected.,py,0,1,0
"@@ -60,7 +60,11 @@ namespace Datadog.Trace
         /// <summary>
         /// Gets the service name
         /// </summary>
-        public string ServiceName => _context.ServiceName;
+        public string ServiceName
+        {
+            get { return _context.ServiceName; }
+            internal set { _context.ServiceName = value; }
+        }
 
         /// <summary>
         /// Gets the trace's unique identifier.","I'm late to the party sorry, but why not let the non opentracing tracer change the service name too?",.cs,1,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -1,4 +1,13 @@
+require 'logger'
+
 module Bolt
+  class << self
+    attr_accessor :log_level
+    attr_accessor :config
+  end
+
+  @config = {}
+
   require 'bolt/executor'
   require 'bolt/node'
 end","thanks for moving this up here, seems like a much more intuitive place",rb,1,1,0
"@@ -386,7 +386,10 @@ namespace NLog.Layouts
                         var value = ParseParameterValue(stringReader);
                         if (!string.IsNullOrEmpty(parameterName) || !StringHelpers.IsNullOrWhiteSpace(value))
                         {
-                            // TODO NLog 5.0 Should throw exception when invalid configuration (Check throwConfigExceptions)
+                            if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions == true)
+                            {
+                                throw new NLogConfigurationException(""Unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
+                            }
                             InternalLogger.Warn(""Skipping unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
                         }
                     }",Maybe this instead: `if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions ?? LogManager.ThrowExceptions)` ?,.cs,1,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -76,7 +76,7 @@ describe CatalogController do
           expect(session[:search].keys).to include :id
           
           search = Search.find(session[:search][:id])
-          expect(search.query_params[:q]).to eq @user_query
+          expect(search.query_params['q']).to eq @user_query
         end
       end
 ","There isn't a backwards-compat issue here, right? The old hash was a HWIA, and now we're stuck with a stringified hash?",rb,1,1,0
"@@ -3635,6 +3635,8 @@ static PropertyDefinition g_properties[] = {
     {""swift-module-search-paths"", OptionValue::eTypeFileSpecList, false, 0,
      nullptr, nullptr,
      ""List of directories to be searched when locating modules for Swift.""},
+    {""swift-create-module-contexts-in-parallel"", OptionValue::eTypeBoolean, false, true,
+     nullptr, nullptr, ""Create modules AST context in parallel.""},
     {""auto-import-clang-modules"", OptionValue::eTypeBoolean, false, true,
      nullptr, nullptr,
      ""Automatically load Clang modules referred to by the program.""},",`Create the per-module Swift AST contexts in parallel.` ?,cpp,1,0,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -1,12 +1,8 @@
 <% org = template.org.abbreviation.present? ? template.org.abbreviation : template.org.name %>
-<% if example_answer.present? || guidance.present? %>
+<% if guidance.present? %>
   <dl<%= for_plan ? ' class=""dl-horizontal""' : '' %>>
-    <% if example_answer.present? %>
-      <dt><%= _('Example answer') %></dt>
-      <dd><%= raw example_answer.text %><dd>
-    <% end %>
     <% if guidance.present? %>
-      <dt><%= _('Guidance') %></dt>
+      <dt><%= template.customization_of.nil? ? _('Guidance') : _('%{org} Guidance') % { org: guidance.org.short_name } %></dt>
       <dd><%= raw guidance.text %></dd>
     <% end %>
   </dl>",this if is no longer needed,rb,1,1,0
"@@ -12,7 +12,7 @@
  * * Redistributions in binary form must reproduce the above copyright notice,
  *   this list of conditions and the following disclaimer in the documentation
  *   and/or other materials provided with the distribution.
- *
+ *sig
  * * Neither the name of Google, Inc. nor the names of its contributors may be
  *   used to endorse or promote products derived from this software without
  *   specific prior written permission.",Please do a self-review before posting.,c,0,1,0
"@@ -195,7 +195,10 @@ def main():
         if args.eval:
             eval_kwargs = cfg.get('evaluation', {}).copy()
             # hard-code way to remove EvalHook args
-            for key in ['interval', 'tmpdir', 'start', 'gpu_collect']:
+            for key in [
+                    'interval', 'tmpdir', 'start', 'gpu_collect', 'save_best',
+                    'key_indicator', 'rule'
+            ]:
                 eval_kwargs.pop(key, None)
             eval_kwargs.update(dict(metric=args.eval, **kwargs))
             print(dataset.evaluate(outputs, **eval_kwargs))",Other scripts such as `benchmark.py` may also be affected.,py,0,1,0
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -18,17 +18,7 @@ package org.apache.solr.handler;
 
 import java.io.IOException;
 import java.lang.invoke.MethodHandles;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Locale;
-import java.util.Map;
-import java.util.Set;
+import java.util.*;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutionException;
 import java.util.concurrent.ExecutorService;","I've had this happen recently with IntelliJ, was this intentional?",java,0,1,0
"@@ -68,7 +68,9 @@ describe('Server Selection (spec)', function () {
         describe(subType, function () {
           specTests[topologyType][subType].forEach(test => {
             // NOTE: node does not support PossiblePrimary
-            const maybeIt = test.name.match(/Possible/) ? it.skip : it;
+            // TODO: Re-enable LoadBalanced in NODE-3011
+            const maybeIt =
+              test.name.match(/Possible/) || topologyType === 'LoadBalanced' ? it.skip : it;
 
             maybeIt(test.name, function (done) {
               executeServerSelectionTest(test, { checkLatencyWindow: false }, done);",Will re-enable these as part of NODE-3011,js,1,1,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -349,11 +349,7 @@ public interface Future<T> extends Value<T> {
      * @throws NullPointerException if unit is null.
      */
     static Future<Void> run(CheckedRunnable unit) {
-        Objects.requireNonNull(unit, ""unit is null"");
-        return Future.of(DEFAULT_EXECUTOR_SERVICE, () -> {
-            unit.run();
-            return null;
-        });
+        return run(DEFAULT_EXECUTOR_SERVICE, unit);
     }
 
     /**",only deleted code is good code :-),java,1,0,0
"@@ -238,12 +238,15 @@ bool StatelessReader::matched_writer_is_matched(
 bool StatelessReader::change_received(
         CacheChange_t* change)
 {
-    // Only make visible the change if there is not other with bigger sequence number.
+    // std::cout << ""[FAST STATELESS READER] change_received"" << std::endl;
+    // Only make visible the change if there is change_received other with bigger sequence number.
     // TODO Revisar si no hay que incluirlo.
     if (!thereIsUpperRecordOf(change->writerGUID, change->sequenceNumber))
     {
         if (mp_history->received_change(change, 0))
         {
+            auto payload_length = change->serializedPayload.length;
+
             Time_t::now(change->receptionTimestamp);
             update_last_notified(change->writerGUID, change->sequenceNumber);
             ++total_unread_;",Seems this was left here unintentionally,cpp,1,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -195,7 +195,10 @@ def main():
         if args.eval:
             eval_kwargs = cfg.get('evaluation', {}).copy()
             # hard-code way to remove EvalHook args
-            for key in ['interval', 'tmpdir', 'start', 'gpu_collect']:
+            for key in [
+                    'interval', 'tmpdir', 'start', 'gpu_collect', 'save_best',
+                    'key_indicator', 'rule'
+            ]:
                 eval_kwargs.pop(key, None)
             eval_kwargs.update(dict(metric=args.eval, **kwargs))
             print(dataset.evaluate(outputs, **eval_kwargs))",Other scripts such as `benchmark.py` may also be affected.,py,0,1,0
"@@ -102,11 +102,14 @@ class TaskProcess(multiprocessing.Process):
         self.timeout_time = time.time() + worker_timeout if worker_timeout else None
 
     def _run_get_new_deps(self):
+        run_again = False
         try:
             task_gen = self.task.run(tracking_url_callback=self.tracking_url_callback)
         except TypeError as ex:
             if 'unexpected keyword argument' not in getattr(ex, 'message', ex.args[0]):
                 raise
+            run_again = True
+        if run_again:
             task_gen = self.task.run()
         if not isinstance(task_gen, types.GeneratorType):
             return None",what is this if statement - it's pretty horrible,py,1,1,0
"@@ -14,11 +14,9 @@ class HomeController < ApplicationController
   def index
     if user_signed_in?
       name = current_user.name(false)
-      # TODO: Investigate if this is even relevant anymore.
-      # The name var will never be blank here because the logic in
-      # User says to return the email if the firstname and surname are empty
-      # regardless of the flag passed in
-      if name.blank?
+      # The RolesController defaults the firstname and surname (both required fields)
+      # to 'FirstName' and 'Surname' when a plan is shared with an unknown user
+      if name == ""First Name Surname""
         redirect_to edit_user_registration_path
       else
         redirect_to plans_url",Came across this recently in DMPTool and decided to just fix here,rb,0,1,0
"@@ -25,7 +25,8 @@ namespace Microsoft.Rest.Generator.CSharp.Azure
 
         public AzureCSharpCodeGenerator(Settings settings) : base(settings)
         {
-            _namer = new AzureCSharpCodeNamer();
+
+            _namer = new AzureCSharpCodeNamer(settings);
             IsSingleFileGenerationSupported = true;
             pageClasses = new Dictionary<KeyValuePair<string, string>, string>();
         }",Why an empty line,java,1,1,0
"@@ -9,9 +9,9 @@ import (
         ""io/ioutil""
         ""strings""
 
-        ""gopkg.in/editorconfig/editorconfig-core-go.v1""
         ""gopkg.in/macaron.v1""
 
+        ""github.com/editorconfig/editorconfig-core-go/v2""
         ""github.com/gogs/git-module""
 
         ""gogs.io/gogs/internal/db""",This import grouping should be changed.,go,1,1,0
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -81,6 +81,7 @@ module.exports = function Dashboard (props) {
       onDrop={props.handleDrop}
     >
       <div
+        aria-hidden=""true""
         className=""uppy-Dashboard-overlay""
         tabIndex={-1}
         onClick={props.handleClickOutside}",Why was this added?,js,1,1,0
"@@ -14,7 +14,7 @@ HTTP_ERRORS = [Timeout::Error,
                Net::HTTPHeaderSyntaxError,
                Net::ProtocolError]
 
-SMTP_SERVER_ERRORS = [TimeoutError,
+SMTP_SERVER_ERRORS = [Timeout::Error,
                       IOError,
                       Net::SMTPUnknownError,
                       Net::SMTPServerBusy,",Freeze mutable objects assigned to constants.,rb,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -0,0 +1,14 @@
+int method(void)
+{
+  return 0;
+}
+
+int sub(void)
+{
+  return 0;
+}
+
+int fun(void)
+{
+  return 0;
+}",...becase there is no whitespace after `(void)`.,c,0,0,0
"@@ -93,6 +93,19 @@ describe TeamPlan do
     end
   end
 
+  describe '#fulfill' do
+    it 'starts a subscription' do
+      user = build_stubbed(:user)
+      purchase = build_stubbed(:purchase, user: user)
+      plan = build_stubbed(:team_plan)
+      fulfillment = stub_subscription_fulfillment(purchase)
+
+      plan.fulfill(purchase, user)
+
+      expect(fulfillment).to have_received(:fulfill)
+    end
+  end
+
   def team_plan
     build(:team_plan)
   end",Looks like one more instance of the method pointed out above.,rb,0,1,0
"@@ -2192,8 +2192,8 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
         internal = self._internal.copy(sdf=sdf, data_columns=[c.name for c in applied])
         return DataFrame(internal)
 
-    # TODO: add axis parameter
-    def diff(self, periods=1):
+    # TODO: axis should support 1 or 'columns' either
+    def diff(self, periods: int = 1, axis: int = 0):
         """"""
         First discrete difference of element.
 ",At this moment?,py,0,0,0
"@@ -46,6 +46,8 @@
 
 #include <Kokkos_Core.hpp>
 
+// FIXME_SYCL requires allocate_tracked
+#ifndef KOKKOS_ENABLE_SYCL
 #if !defined(KOKKOS_ENABLE_CUDA) || defined(__CUDACC__)
 
 #include <default/TestDefaultDeviceType_Category.hpp>",Does `malloc` test not pass?,cpp,0,0,0
"@@ -75,7 +75,7 @@ namespace NLog.Targets
         /// <value>The endpoint address.</value>
         /// <docgen category='Connection Options' order='10' />
         [RequiredParameter]
-        public string EndpointAddress { get; set; }
+        public virtual string EndpointAddress { get; set; }
 
 #if WCF_SUPPORTED
         /// <summary>",This is the only line that should change. Ignore any other file changes.,.cs,1,1,0
"@@ -45,17 +45,6 @@ namespace Microsoft.CodeAnalysis.Sarif
 
         private static string[] InvalidFiles = new string[]
         {
-            @""ClangAnalyzer\ArrayDataTypes.xml.sarif"",
-            @""ClangAnalyzer\BadMissingString.xml.sarif"",
-            @""ClangAnalyzer\ClangAnalyzer_issueLog1_raw.xml.sarif"",
-            @""ClangAnalyzer\DictionaryDataTypes.xml.sarif"",
-            @""ClangAnalyzer\DivByZero.xml.sarif"",
-            @""ClangAnalyzer\FileNumberCoverage.xml.sarif"",
-            @""ClangAnalyzer\GarbageValueLog.xml.sarif"",
-            @""ClangAnalyzer\MediumLog.xml.sarif"",
-            @""ClangAnalyzer\MissingLocation.xml.sarif"",
-            @""ClangAnalyzer\RealLog.xml.sarif"",
-            @""CppCheck\CppCheck_issueLog1_raw.xml.sarif""
         };
 
         public static IEnumerable<object[]> TestCases",I like that you left the empty array in there.,.cs,1,1,0
"@@ -7,3 +7,9 @@ get(
   as: :book,
   constraints: LicenseableConstraint.new(Book)
 )
+
+get '/backbone-js-on-rails' => redirect('https://gumroad.com/l/backbone-js-on-rails')
+get '/geocoding-on-rails' => redirect('https://gumroad.com/l/geocoding-on-rails')
+get '/ios-on-rails' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ios-on-rails-beta' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ruby-science' => redirect('https://gumroad.com/l/ruby-science')",I actually think this is `ios-on-rails-beta`,rb,1,1,0
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -987,6 +987,7 @@ class BrowseModeDocumentTextInfo(textInfos.TextInfo):
 
 	def getControlFieldSpeech(self, attrs, ancestorAttrs, fieldType, formatConfig=None, extraDetail=False, reason=None):
 		textList = []
+		role=attrs.get('role')
 		landmark = attrs.get(""landmark"")
 		if formatConfig[""reportLandmarks""] and fieldType == ""start_addedToControlFieldStack"" and landmark:
 			try:",This line is no longer necessary.,py,1,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -109,6 +109,7 @@ int main(int argc, char *argv[]) {
                                                                       paths);
     if (!gStorageServer->start()) {
         LOG(ERROR) << ""Storage server start failed"";
+        gStorageServer->stop();
         return EXIT_FAILURE;
     }
 ",Well done. I want to know why the daemon crash?,cpp,0,1,0
"@@ -35,6 +35,7 @@ describe ForumsController do
   end
 
   it 'admin show with pagination' do
+    skip 'TODO: This test never ran correctly. It silently failed due to no assertions.'
     create_list(:topic, 20)
     login_as user
     get :show, id: forum.id",These really should be fixed for real.,rb,0,1,0
"@@ -21,6 +21,8 @@ import com.google.common.base.Charsets;
 import com.google.common.io.ByteStreams;
 import com.google.common.net.MediaType;
 
+import com.sun.org.glassfish.gmbal.ManagedObject;
+
 import org.apache.http.Header;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpHost;","Again, you don't want to depend on glassfish.",py,1,1,0
"@@ -24,7 +24,12 @@ import (
 	""github.com/iotexproject/iotex-core/state/factory""
 )
 
-const testnetActionPath = ""testnet_actions.yaml""
+const (
+	testnetActionPath = ""testnet_actions.yaml""
+	// TODO: Gensis block producer's keypair should be a config. Note genesis block producer is not the creator
+	genesisProducerPublicKey  = ""0444b7ac782c60e90b1aa263fe4d61dbe73bf8260d3e773ce9f4f0dbc181e8e5f2e3b6f6d4cf47f1d53af95cf24b88b92037125c7bf6f63b55bebbb8579b3a9b24""
+	genesisProducerPrivateKey = ""bace9b2435db45b119e1570b4ea9c57993b2311e0c408d743d87cd22838ae892""
+)
 
 // Genesis defines the Genesis default settings
 type Genesis struct {",line is 161 characters (from `lll`),go,1,1,0
"@@ -33,6 +33,18 @@ public class TransactionPoolOptions
   private static final String ETH65_TX_ANNOUNCED_BUFFERING_PERIOD_FLAG =
       ""--Xeth65-tx-announced-buffering-period-milliseconds"";
 
+  private static final String STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG =
+      ""--strict-tx-replay-protection-enabled"";
+
+  @CommandLine.Option(
+      names = {STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG},
+      paramLabel = ""<Boolean>"",
+      description =
+          ""Require transactions submitted via JSON-RPC to use replay protection in accordance with EIP-155 (default: ${DEFAULT-VALUE})"",
+      fallbackValue = ""true"",
+      arity = ""0..1"")
+  private Boolean strictTxReplayProtectionEnabled = false;
+
   @CommandLine.Option(
       names = {TX_MESSAGE_KEEP_ALIVE_SEC_FLAG},
       paramLabel = ""<INTEGER>"",","Ah, so it IS unstable already. Cool, lets prefix with X.",java,1,0,0
"@@ -62,7 +62,7 @@ namespace Microsoft.DotNet.Build.Tasks.Packaging
                 return false;
             }
 
-            if (PackageIndexes != null || PackageIndexes.Length > 0)
+            if (PackageIndexes != null && PackageIndexes.Length > 0)
             {
                 PackageIndex.Current.Merge(PackageIndexes.Select(pi => pi.GetMetadata(""FullPath"")));
             }",Can you instead change this to &&,.cs,1,1,0
"@@ -0,0 +1,16 @@
+﻿using System;
+using MvvmCross.Core.ViewModels;
+
+namespace MvvmCross.Forms.Views.Hints
+{
+    public class MvxPopToRootPresentationHint
+        : MvxPresentationHint
+    {
+        public MvxPopToRootPresentationHint(bool animated = true)
+        {
+            Animated = animated;
+        }
+
+        public bool Animated { get; set; }
+    }
+}",Same about this presentation hint,.cs,0,1,0
"@@ -30,7 +30,7 @@ describe('cleanupPlugins', function() {
 	it('should throw if no audit is configured', function() {
 		assert.throws(
 			function() {
-				cleanupPlugins(document, {});
+				axe.cleanup(document, {});
 			},
 			Error,
 			/^No audit configured/",I think this file should be renamed to just cleanup.js,js,0,1,0
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -2158,6 +2158,15 @@ TEST_F(VkLayerTest, RenderPassBeginLayoutsFramebufferImageUsageMismatches) {
     iavci.subresourceRange.aspectMask = VK_IMAGE_ASPECT_COLOR_BIT;
     vk::CreateImageView(m_device->device(), &iavci, NULL, &iav);
 
+    // Create an input depth attachment view
+    VkImageObj iadi(m_device);
+
+    VkFormat dformat = FindSupportedDepthStencilFormat(gpu());
+    iadi.InitNoLayout(128, 128, 1, dformat, VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT, VK_IMAGE_TILING_OPTIMAL);
+    ASSERT_TRUE(iadi.initialized());
+
+    VkImageView iadv = iadi.targetView(dformat, VK_IMAGE_ASPECT_DEPTH_BIT | VK_IMAGE_ASPECT_STENCIL_BIT, 0, 1, 0, 1);
+
     // Create a color attachment view
     VkImageObj cai(m_device);
 ",Can this be done with `VkImageObj::targetView`?,cpp,1,1,0
"@@ -47,15 +47,12 @@ import json
 import random
 import tempfile
 import unittest2 as unittest
+from pkg_resources import resource_filename
 
-from nupic.data.datasethelpers import findDataset
 from nupic.data.file_record_stream import FileRecordStream
 from nupic.engine import Network
-from nupic.research import fdrutilities as fdrutils
 from nupic.encoders import MultiEncoder
-from nupic.regions.RecordSensorFilters.ModifyFields import ModifyFields
-from nupic.support.unittesthelpers.testcasebase import (TestCaseBase,
-                                                        TestOptionParser)
+from nupic.support.unittesthelpers.testcasebase import TestCaseBase
 
 _VERBOSITY = 0         # how chatty the unit tests should be
 _SEED = 35             # the random seed used throughout",Cleaned up unused imports.,py,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -89,7 +89,14 @@ Query.prototype.bind = function bind (model, op, updateArg) {
   this.op = op;
 
   if (op == 'update' || op == 'findOneAndUpdate') {
-    merge(this._updateArg, updateArg || {});
+    // allow update to be a Document
+    if(updateArg instanceof Document) {
+      updateArg = updateArg.toObject();
+      delete updateArg._id;
+      merge(this._updateArg, updateArg);
+    } else {
+      merge(this._updateArg, updateArg || {});
+    }
   }
 
   return this;",why are we deleting the _id?,js,1,1,0
"@@ -9,11 +9,11 @@ This module contains tools for enumerating tautomers and determining a canonical
 :license: MIT, see LICENSE file for more details.
 """"""
 
-
 import copy
 import logging
 
 from rdkit import Chem
+from rdkit.Chem.MolStandardize import rdMolStandardize
 from rdkit.Chem.rdchem import BondDir, BondStereo, BondType
 
 from .utils import memoized_property, pairwise",I don't think you need to make any edits at all to this file for this PR,cpp,0,1,0
"@@ -117,7 +117,7 @@ Puppet::Functions.create_function(:run_plan, Puppet::Functions::InternalFunction
         # undef/nil
         result = catch(:return) do
           scope.with_global_scope do |global_scope|
-            closure.call_by_name_with_scope(global_scope, params, true)
+            executor.run_plan(global_scope, closure, params)
           end
           nil
         end&.value",@McdonaldSeanp I think this will help you longterm too but heads up.,rb,0,1,0
"@@ -629,12 +629,13 @@ namespace pwiz.Skyline.Util.Extensions
             }
             for (int i = 0; i < fields.Length; ++i)
             {
-                FieldNames.Add(fields[i].Trim());
-                FieldDict[fields[i]] = i;
+                var trimmed = fields[i].Trim();
+                FieldNames.Add(trimmed);
+                FieldDict[trimmed] = i;
                 // Check to see if the given column name is actually a synonym for the internal canonical (no spaces, serialized) name
                 if (headerSynonyms != null)
                 {
-                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, fields[i], StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
+                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, trimmed, StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
                     if (!string.IsNullOrEmpty(key))
                     {
                         var syn = headerSynonyms[key];","I would name this variable ""fieldName"" instead of ""trimmed"".",.cs,1,1,0
"@@ -73,7 +73,7 @@ fpga_result read_sysfs(fpga_token token, char *sysfs_path,
 		resval = res;
 		goto out_destroy;
 	}
-	printf(""size=%d \n"", size);
+
 	if (size > len) {
 		OPAE_ERR(""object size bigger then buffer size"");
 		resval = FPGA_EXCEPTION;",Could you submit this one in a separate pull request?,c,0,1,0
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -0,0 +1,11 @@
+const path = require('path');
+
+module.exports = {
+	mode: 'development',
+  watch: true,
+	entry: './lib/index.js',
+	output: {
+		path: path.resolve(__dirname, 'dist'),
+		filename: 'axe.js'
+	}
+};","Please feel free to suggest / write a better Webpack config, I'm still new to it.",js,0,1,0
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -0,0 +1,17 @@
+module Blacklight
+  module Rendering
+    class Microdata < AbstractStep
+      include ActionView::Helpers::TagHelper
+      def render
+        return next_step(values) unless config.itemprop
+        next_step(values.map { |x| itemprop(x, config.itemprop) })
+      end
+
+      private
+
+        def itemprop(val, itemprop)
+          content_tag :span, val, itemprop: itemprop
+        end
+    end
+  end
+end",2 trailing blank lines detected.,rb,1,1,0
"@@ -18,17 +18,7 @@ package org.apache.solr.handler;
 
 import java.io.IOException;
 import java.lang.invoke.MethodHandles;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Locale;
-import java.util.Map;
-import java.util.Set;
+import java.util.*;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutionException;
 import java.util.concurrent.ExecutorService;","I've had this happen recently with IntelliJ, was this intentional?",java,0,1,0
"@@ -0,0 +1,14 @@
+// Copyright (c) .NET Foundation. All rights reserved.
+// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
+
+using System;
+
+namespace Microsoft.AspNetCore.Protocols
+{
+    [Flags]
+    public enum TransferFormat
+    {
+        Binary = 0x01,
+        Text = 0x02
+    }
+}","Binary literal? :). I don't really care either way, mostly just trolling.",.cs,1,1,0
"@@ -35,7 +35,9 @@
 #include <pthread.h>
 #include <pwd.h>
 #include <signal.h>
+#ifndef __ANDROID__
 #include <spawn.h>
+#endif
 #include <stdio.h>
 #include <unistd.h>
 #include <sys/resource.h>",The same goes here as well.,c,0,1,0
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -2588,7 +2588,7 @@ describe('Operation (Promises)', function () {
    * @example-class Db
    * @example-method collection
    */
-  it('shouldCorrectlyAccessACollectionWithPromises', {
+  it.skip('shouldCorrectlyAccessACollectionWithPromises', {
     metadata: { requires: { topology: ['single'] } },
 
     test: function (done) {",why is this test being skipped?,js,1,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -47,15 +47,12 @@ import json
 import random
 import tempfile
 import unittest2 as unittest
+from pkg_resources import resource_filename
 
-from nupic.data.datasethelpers import findDataset
 from nupic.data.file_record_stream import FileRecordStream
 from nupic.engine import Network
-from nupic.research import fdrutilities as fdrutils
 from nupic.encoders import MultiEncoder
-from nupic.regions.RecordSensorFilters.ModifyFields import ModifyFields
-from nupic.support.unittesthelpers.testcasebase import (TestCaseBase,
-                                                        TestOptionParser)
+from nupic.support.unittesthelpers.testcasebase import TestCaseBase
 
 _VERBOSITY = 0         # how chatty the unit tests should be
 _SEED = 35             # the random seed used throughout",Cleaned up unused imports.,py,1,1,0
"@@ -0,0 +1,17 @@
+<?php
+/**
+ * Copyright © Bold Brand Commerce Sp. z o.o. All rights reserved.
+ * See LICENSE.txt for license details.
+ */
+
+declare(strict_types=1);
+
+namespace Ergonode\Core\Infrastructure\Exception;
+
+class DeserializationException extends SerializerException
+{
+    public function __construct(string $message, \Throwable $previous = null)
+    {
+        parent::__construct($message, $previous);
+    }
+}",I think it should been in `SharedKernel` module.,php,1,1,0
"@@ -58,6 +58,8 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private static final String AZKABAN_FAILURE_MESSAGE =
       ""azkaban.failure.message"";
   private static final long serialVersionUID = -1;
+
+  protected String passwordPlaceholder;
   private AzkabanServer application;
   private String name;
   private String label;",Why passwordPlaceholder is added in AbstractAzkabanServlet instead of LoginAbstractAzkabanServlet?,java,1,1,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -332,7 +332,7 @@ TEST_F(UDPv4Tests, send_to_allowed_interface)
 
         if (IsAddressDefined(locator))
         {
-            descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
+            // descriptor.interfaceWhiteList.emplace_back(""127.0.0.1"");
             descriptor.interfaceWhiteList.emplace_back(IPLocator::toIPv4string(locator));
             UDPv4Transport transportUnderTest(descriptor);
             transportUnderTest.init();","Can we remove this line, please?",cpp,1,1,0
"@@ -39,17 +39,9 @@ kvstore::ResultCode QueryEdgePropsProcessor::collectEdgesProps(
     return ret;
 }
 
-void QueryEdgePropsProcessor::addDefaultProps() {
-    this->edgeContext_.props_.emplace_back(""_src"", 0, PropContext::PropInKeyType::SRC);
-    this->edgeContext_.props_.emplace_back(""_rank"", 1, PropContext::PropInKeyType::RANK);
-    this->edgeContext_.props_.emplace_back(""_dst"", 2, PropContext::PropInKeyType::DST);
-}
-
 void QueryEdgePropsProcessor::process(const cpp2::EdgePropRequest& req) {
     spaceId_ = req.get_space_id();
-    // By default, _src, _rank, _dst will be returned as the first 3 fields
-    addDefaultProps();
-    int32_t returnColumnsNum = req.get_return_columns().size() + this->edgeContext_.props_.size();
+    //    initContext(req.edge_types, true);
     auto retCode = this->checkAndBuildContexts(req);
     if (retCode != cpp2::ErrorCode::SUCCEEDED) {
         for (auto& p : req.get_parts()) {",Why remove the default props?,cpp,1,1,0
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -370,13 +370,13 @@ namespace Nethermind.Specs.ChainSpecStyle
             chainSpec.Allocations = new Dictionary<Address, ChainSpecAllocation>();
             foreach (KeyValuePair<string, AllocationJson> account in chainSpecJson.Accounts)
             {
-                if (account.Value.BuiltIn != null && account.Value.Balance == UInt256.Zero)
+                if (account.Value.BuiltIn != null && account.Value.Balance == null)
                 {
                     continue;
                 }
                 
                 chainSpec.Allocations[new Address(account.Key)] = new ChainSpecAllocation(
-                    account.Value.Balance,
+                    account.Value.Balance ?? UInt256.Zero,
                     account.Value.Nonce,
                     account.Value.Code,
                     account.Value.Constructor,",Is it necessary to check this at all?,.cs,1,1,0
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -119,6 +119,7 @@ install_requires = [
     ""invenio-documents>=0.1.0.post2"",
     ""invenio-upgrader>=0.1.0"",
     ""invenio-unapi>=0.1.0"",
+    ""invenio-jsonschemas>=0.0.0"",
     ""itsdangerous>=0.24"",
     ""jellyfish>=0.3.2"",
     ""Jinja2>=2.7"",",it's not required dependency,py,1,1,0
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -32,7 +32,7 @@ namespace ddb {
 DiscoveryDataBase::DiscoveryDataBase(
         fastrtps::rtps::GuidPrefix_t server_guid_prefix)
     : server_guid_prefix_(server_guid_prefix)
-    , server_acked_by_all_(false)
+    , server_acked_by_all_(true)
 {
 }
 ",I would not change this until the list of servers is defined in the database construction. Better to change it with the implementation that @EduPonz is going to do in the pinging PR.,cpp,0,1,0
"@@ -345,7 +345,7 @@ class GFLHead(AnchorHead):
          bbox_weights_list, num_total_pos, num_total_neg) = cls_reg_targets
 
         num_total_samples = reduce_mean(
-            torch.tensor(num_total_pos).cuda()).item()
+            torch.tensor(num_total_pos).float().cuda()).item()
         num_total_samples = max(num_total_samples, 1.0)
 
         losses_cls, losses_bbox, losses_dfl,\","`torch.tensor(num_total_pos, dtype=torch.float, device=device)`",py,1,0,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -22,6 +22,8 @@ namespace Nethermind.Consensus.Ethash
 {
     public class EthashCache : IEthashDataSet
     {
+        private ArrayPool<uint[]> _arrayPool = ArrayPool<uint[]>.Create(1024 * 1024 * 4, 50);
+        
         private uint[][] Data { get; set; }
 
         public uint Size { get; set; }",why separate pool?,.cs,1,1,0
"@@ -0,0 +1,8 @@
+require 'spec_helper'
+
+describe 'Purchases' do
+  it 'raise not found if no purchase exists' do
+    visit purchase_path('robots.txt')
+    expect(page.status_code).to eq(404)
+  end
+end",I'd try writing this as a controller spec.,rb,0,1,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -202,6 +202,19 @@ namespace Microsoft.AspNetCore.Server.KestrelTests
             }
         }
 
+        [Fact]
+        public async Task BadRequestIfContentLengthInvalid()
+        {
+            using (var server = new TestServer(context => { return Task.FromResult(0); }))
+            {
+                using (var connection = server.CreateConnection())
+                {
+                    await connection.Send(""GET / HTTP/1.1\r\nContent-Length: NaN\r\n\r\n"");
+                    await ReceiveBadRequestResponse(connection, ""400 Bad Request"", server.Context.DateHeaderValue);
+                }
+            }
+        }
+
         private async Task ReceiveBadRequestResponse(TestConnection connection, string expectedResponseStatusCode, string expectedDateHeaderValue)
         {
             await connection.ReceiveForcedEnd(",Test with negative value too.,.cs,1,1,0
"@@ -4,12 +4,11 @@
 
 package net.sourceforge.pmd.lang.plsql.ast;
 
-import net.sourceforge.pmd.lang.ast.Node;
-import net.sourceforge.pmd.lang.ast.NodeStream;
+import net.sourceforge.pmd.lang.ast.impl.javacc.JjtreeNode;
 import net.sourceforge.pmd.lang.symboltable.Scope;
 import net.sourceforge.pmd.lang.symboltable.ScopedNode;
 
-public interface PLSQLNode extends Node, ScopedNode {
+public interface PLSQLNode extends ScopedNode, JjtreeNode<PLSQLNode> {
 
     /** Accept the visitor. **/
     Object jjtAccept(PLSQLParserVisitor visitor, Object data);","hm...yes, these methods are not ideal, too generic like ""getImage"". but this time on plsql...",java,1,1,0
"@@ -146,7 +146,7 @@ module RSpec::Core
       # Returns the message generated for this failure line by line.
       #
       # @return [Array(String)] The example failure message
-      def message_lines
+      def message_lines(default_color_proc=lambda {|x| x })
         @lines ||=
           begin
             lines = [""Failure/Error: #{read_failed_line.strip}""]",This seems more convoluted then what you had before :(. @JonRowe -- can you suggest a way to do this that you'd be satisfied with?,rb,0,1,0
"@@ -35,7 +35,9 @@
 #include <pthread.h>
 #include <pwd.h>
 #include <signal.h>
+#ifndef __ANDROID__
 #include <spawn.h>
+#endif
 #include <stdio.h>
 #include <unistd.h>
 #include <sys/resource.h>",The same goes here as well.,c,0,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -91,7 +91,7 @@ namespace Microsoft.TestPlatform.TestUtilities
             get
             {
                 string value = string.Empty;
-                if (this.runningInCli)
+                if (this.runningInCli || true)
                 {
                     value = Path.Combine(
                         this.testPlatformRootDirectory,",Why is this change required?,.cs,1,1,0
"@@ -29,12 +29,18 @@ import java.util.Collection;
 import java.util.Collections;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.LinkedBlockingDeque;
+import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
-import java.util.concurrent.locks.ReentrantLock;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
 import java.util.function.Function;
 
 import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Stopwatch;
+import com.google.common.util.concurrent.ThreadFactoryBuilder;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.apache.tuweni.bytes.Bytes;","Experimentally determined a while ago. Since the rocks db default lock timeout is 1000ms, I aimed for a flush size that was as big as possible that completes in under 500ms",java,1,1,0
"@@ -295,7 +295,7 @@ public class SmartStoreReactBridge extends ReactContextBaseJavaModule {
 			final IndexSpec[] indexSpecs = IndexSpec.fromJSON(indexesJson);
 
             // Get soup spec if available.
-            final ReadableMap soupSpecObj = args.getMap(SOUP_SPEC);
+            final ReadableMap soupSpecObj = (args.hasKey(SOUP_SPEC) ? args.getMap(SOUP_SPEC) : null);
             if (soupSpecObj != null) {
 
                 // Get soup name.",getMap throws an exception if key doesn't exist,java,1,1,0
"@@ -81,6 +81,7 @@ module.exports = function Dashboard (props) {
       onDrop={props.handleDrop}
     >
       <div
+        aria-hidden=""true""
         className=""uppy-Dashboard-overlay""
         tabIndex={-1}
         onClick={props.handleClickOutside}",Why was this added?,js,1,1,0
"@@ -105,6 +105,10 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Core.Internal
         {
             try
             {
+                // TODO: When we start tracking all connection middleware for shutdown, go back
+                // to logging connections tart and stop in ConnectionDispatcher so we get these
+                // logs for all connection middleware.
+                Log.ConnectionStart(ConnectionId);
                 KestrelEventSource.Log.ConnectionStart(this);
 
                 AdaptedPipeline adaptedPipeline = null;",Why did you move this?,.cs,1,1,0
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -9,11 +9,11 @@ This module contains tools for enumerating tautomers and determining a canonical
 :license: MIT, see LICENSE file for more details.
 """"""
 
-
 import copy
 import logging
 
 from rdkit import Chem
+from rdkit.Chem.MolStandardize import rdMolStandardize
 from rdkit.Chem.rdchem import BondDir, BondStereo, BondType
 
 from .utils import memoized_property, pairwise",I don't think you need to make any edits at all to this file for this PR,cpp,0,1,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -116,8 +116,7 @@ func fieldsByName(example interface{}) map[string]reflect.StructField {
 var _ = DescribeTable(""Config parsing"",
         func(key, value string, expected interface{}, errorExpected ...bool) {
                 config := New()
-                config.UpdateFrom(map[string]string{key: value},
-                        EnvironmentVariable)
+                config.UpdateFrom(map[string]string{key: value}, EnvironmentVariable)
                 configPtr := reflect.ValueOf(config)
                 configElem := configPtr.Elem()
                 fieldRef := configElem.FieldByName(key)","Note, another possibly unnecessary change here.",c,1,1,0
"@@ -17,3 +17,5 @@ var (
         GenerateCommonBinPrefixes = generateCommonBinPrefixes
         PeerPingPollTime          = &peerPingPollTime
 )
+
+type PeerFilterFunc = peerFilterFunc",is this used anywhere?,go,1,1,0
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -108,10 +108,11 @@ module Selenium
 
         def initialize(source, duration, x, y, element: nil, origin: nil)
           super(source)
+
           @duration = duration * 1000
           @x_offset = x
           @y_offset = y
-          @origin = element || origin
+          @origin = origin || POINTER
         end
 
         def type",Should be `@origin = element || origin || POINTER`,js,1,1,0
"@@ -200,11 +200,11 @@ namespace Nethermind.Network.P2P.Subprotocols.Eth.V62
                 Transaction tx = transactions[i];
                 tx.DeliveredBy = Node.Id;
                 tx.Timestamp = _timestamper.UnixTime.Seconds;
-                AddTxResult result = _txPool.SubmitTx(tx, TxHandlingOptions.None);
-                _floodController.Report(result == AddTxResult.Added);
+                AcceptTxResult acceptTxResult = _txPool.SubmitTx(tx, TxHandlingOptions.None);
+                _floodController.Report(acceptTxResult.Equals(AcceptTxResult.Accepted));
 
                 if (Logger.IsTrace) Logger.Trace(
-                    $""{Node:c} sent {tx.Hash} tx and it was {result} (chain ID = {tx.Signature?.ChainId})"");
+                    $""{Node:c} sent {tx.Hash} tx and it was {acceptTxResult.ToString()} (chain ID = {tx.Signature?.ChainId})"");
             }
         }
 ",implicit bool cast,.cs,1,0,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -143,3 +143,7 @@ type wsProjectManager interface {
 type artifactPutter interface {
 	PutArtifact(bucket, fileName string, data io.Reader) (string, error)
 }
+
+type port interface {
+	Set(number int) error
+}",Is this interface used anywhere?,go,1,1,0
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -7,12 +7,13 @@ class PostsController < ApplicationController
   before_action :find_forum_and_topic_records, only: [:create]
 
   def index
-    @posts = Post.paginate(page: params[:page], per_page: 10)
+    all_posts = Post.all
+    @posts = all_posts.paginate(page: params[:page], per_page: 10)
   end
 
   def create
     @post = build_new_post
-    if verify_recaptcha(model: @post) && @post.save
+    if @post.save
       post_notification(@post)
       redirect_to topic_path(@topic)
     else",This looks better the previous way.,rb,1,1,0
"@@ -89,9 +89,7 @@ final class CropResizer implements ResizerInterface
     }
 
     /**
-     * @param array<string, int> $settings
-     *
-     * @phpstan-param array{width: int, height: int} $settings
+     * @param array<string, mixed> $settings
      */
     private function createTargetBox(array $settings): Box
     {",Why losing this ?,php,1,1,0
"@@ -104,7 +104,7 @@ def check_for_software_updates(flash_message=False):
     :return: True if you have latest version, else False if you need to upgrade
              or None if server was not reachable.
     """"""
-    from invenio.config import CFG_VERSION
+    from invenio.version import __version__ as invenio_version
     from invenio.base.i18n import _
     try:
         find = re.compile('Invenio v[0-9]+.[0-9]+.[0-9]+(\-rc[0-9])?'",we can use `invenio.version` instead,py,1,1,0
"@@ -394,6 +394,8 @@ static SSL_CTX *_create_ssl_context(int is_client) {
 
         openssl_initialized = 1;
 
+        SSL_load_error_strings();
+
         if(is_client) {
                 #ifdef HAS_TLS_method
                 method = TLS_client_method();",Move to if in line 390.,c,1,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -3176,8 +3176,8 @@ void WorldServer::UpdateLFP(uint32 LeaderID, GroupLFPMemberEntry *LFPMembers) {
 
 void WorldServer::StopLFP(uint32 LeaderID) {
 
-	GroupLFPMemberEntry LFPMembers;
-	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", &LFPMembers);
+	GroupLFPMemberEntry LFPMembers[MAX_GROUP_MEMBERS];
+	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", LFPMembers);
 }
 
 void WorldServer::HandleLFGMatches(ServerPacket *pack) {",There a reason we're no longer passing by reference here ?,cpp,1,0,0
"@@ -45,8 +45,8 @@ import (
 const (
 	// heartbeatTimeout is the maximum time to wait between heartbeats
 	// without disconnecting
-	heartbeatTimeout = 5 * time.Minute
-	heartbeatJitter  = 3 * time.Minute
+	heartbeatTimeout = 1 * time.Minute
+	heartbeatJitter  = 1 * time.Minute
 
 	inactiveInstanceReconnectDelay = 1 * time.Hour
 ",Why was the jitter removed?,go,1,1,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -18,9 +18,14 @@
 package cmd
 
 import (
+        ""encoding/json""
         ""path/filepath""
         ""time""
 
+        ""github.com/mysteriumnetwork/node/nat/traversal/config""
+
+        ""github.com/mysteriumnetwork/node/nat/traversal""
+
         ""github.com/asaskevich/EventBus""
         log ""github.com/cihub/seelog""
         ""github.com/ethereum/go-ethereum/accounts/keystore""",Something wrong with import blocks.,go,1,0,0
"@@ -124,9 +124,11 @@ public abstract class FlatteningConfig {
     // flattening.
     Map<String, FlatteningConfig> flatteningConfigs = new LinkedHashMap<>();
 
-    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
-    // Let flattenings from proto annotations override flattenings from GAPIC config.
+    // Let flattenings from GAPIC config override flattenings from proto annotations.
     flatteningConfigs.putAll(flatteningConfigsFromProtoFile);
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
+
+    flatteningConfigs.putAll(flatteningConfigsFromGapicConfig);
 
     return ImmutableList.copyOf(flatteningConfigs.values());
   }",Why duplicate this on line 131?,java,1,1,0
"@@ -981,7 +981,7 @@ void DatasetLoader::ConstructBinMappersFromTextData(int rank, int num_machines,
         bin_type = BinType::CategoricalBin;
       }
       bin_mappers[i].reset(new BinMapper());
-      if (sample_values.size() <= start[rank] + i) {
+      if (static_cast<int>(sample_values.size()) <= start[rank] + i) {
         continue;
       }
       if (config_.max_bin_by_feature.empty()) {",thanks! Was seeing this warning too last night,cpp,1,0,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -987,6 +987,7 @@ class BrowseModeDocumentTextInfo(textInfos.TextInfo):
 
 	def getControlFieldSpeech(self, attrs, ancestorAttrs, fieldType, formatConfig=None, extraDetail=False, reason=None):
 		textList = []
+		role=attrs.get('role')
 		landmark = attrs.get(""landmark"")
 		if formatConfig[""reportLandmarks""] and fieldType == ""start_addedToControlFieldStack"" and landmark:
 			try:",This line is no longer necessary.,py,1,1,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -230,4 +230,4 @@ public class Login {
 			return 1; // L: 1317
 		}
 	}
-}
+}",Revert this file,java,1,1,0
"@@ -143,3 +143,7 @@ type wsProjectManager interface {
 type artifactPutter interface {
 	PutArtifact(bucket, fileName string, data io.Reader) (string, error)
 }
+
+type port interface {
+	Set(number int) error
+}",Is this interface used anywhere?,go,1,1,0
"@@ -760,13 +760,13 @@ TEST(NebulaStoreTest, ThreeCopiesCheckpointTest) {
         fs::FileUtils::remove(folly::stringPrintf(""%s/data"", rm.data()).c_str(), true);
         fs::FileUtils::remove(folly::stringPrintf(""%s/wal"", rm.data()).c_str(), true);
         std::string mv = folly::stringPrintf(
-                ""/usr/bin/mv %s/disk%d/nebula/0/checkpoints/snapshot/data %s/disk%d/nebula/0/data"",
+                ""mv %s/disk%d/nebula/0/checkpoints/snapshot/data %s/disk%d/nebula/0/data"",
                 rootPath.path(), i , rootPath.path(), i);
         sleep(1);
         auto ret = system(mv.c_str());
         ASSERT_EQ(0, ret);
         mv = folly::stringPrintf(
-                ""/usr/bin/mv %s/disk%d/nebula/0/checkpoints/snapshot/wal %s/disk%d/nebula/0/wal"",
+                ""mv %s/disk%d/nebula/0/checkpoints/snapshot/wal %s/disk%d/nebula/0/wal"",
                 rootPath.path(), i , rootPath.path(), i);
         sleep(1);
         ret = system(mv.c_str());",Consider the function `rename` in stdio.h?,cpp,1,1,0
"@@ -33,13 +33,13 @@ export function createComponent(Ctor, props, context) {
 		inst;
 
 	if (Ctor.prototype && Ctor.prototype.render) {
-		inst = new Ctor(props, context);
+		inst = new /** @type {(props, context) => void} */(Ctor)(props, context);
 		Component.call(inst, props, context);
 	}
 	else {
 		inst = new Component(props, context);
 		inst.constructor = Ctor;
-		inst.render = doRender;
+		inst['render'] = doRender;
 	}
 
 ",This seems strange to me. @rbiggs Can you elaborate on the thinking behind it?,js,0,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -30,7 +30,7 @@ describe('cleanupPlugins', function() {
 	it('should throw if no audit is configured', function() {
 		assert.throws(
 			function() {
-				cleanupPlugins(document, {});
+				axe.cleanup(document, {});
 			},
 			Error,
 			/^No audit configured/",I think this file should be renamed to just cleanup.js,js,0,1,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -398,7 +398,6 @@ public class UserAccountManager {
 		final String userId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USER_ID));
 		final String username = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USERNAME));
 		final String accountName = accountManager.getUserData(account, AccountManager.KEY_ACCOUNT_NAME);
-		final String clientId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_CLIENT_ID));
 		final String lastName = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_LAST_NAME));
 		final String email = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_EMAIL));
 		final String encFirstName =  accountManager.getUserData(account, AuthenticatorService.KEY_FIRST_NAME);",Unrelated - wasn't being used.,java,0,1,0
"@@ -398,7 +398,6 @@ public class UserAccountManager {
 		final String userId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USER_ID));
 		final String username = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USERNAME));
 		final String accountName = accountManager.getUserData(account, AccountManager.KEY_ACCOUNT_NAME);
-		final String clientId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_CLIENT_ID));
 		final String lastName = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_LAST_NAME));
 		final String email = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_EMAIL));
 		final String encFirstName =  accountManager.getUserData(account, AuthenticatorService.KEY_FIRST_NAME);",Unrelated - wasn't being used.,java,0,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -201,7 +201,9 @@ module RSpec
         attr_reader :example
 
         Example.public_instance_methods(false).each do |name|
-          define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          unless name.to_sym == :run
+            define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          end
         end
 
         Proc.public_instance_methods(false).each do |name|","I tend to prefer using a `next` guard clause, but that's just subjective preference :). Not a merge blocker.",rb,0,1,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -45,8 +45,8 @@ import (
 const (
 	// heartbeatTimeout is the maximum time to wait between heartbeats
 	// without disconnecting
-	heartbeatTimeout = 5 * time.Minute
-	heartbeatJitter  = 3 * time.Minute
+	heartbeatTimeout = 1 * time.Minute
+	heartbeatJitter  = 1 * time.Minute
 
 	inactiveInstanceReconnectDelay = 1 * time.Hour
 ",Why was the jitter removed?,go,1,1,0
"@@ -96,8 +96,8 @@ namespace Examples.Console
                 catch (ArgumentOutOfRangeException e)
                 {
                     // Set status upon error
-                    activity.AddTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
-                    activity.AddTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
+                    activity.SetTag(SpanAttributeConstants.StatusCodeKey, SpanHelper.GetCachedCanonicalCodeString(Status.Internal.CanonicalCode));
+                    activity.SetTag(SpanAttributeConstants.StatusDescriptionKey, e.ToString());
                 }
 
                 // Annotate our activity to capture metadata about our operation",Should we consider changing the return type of `SpanHelper.GetCachedCanonicalCodeString` to int?,.cs,1,1,0
"@@ -89,9 +89,7 @@ final class CropResizer implements ResizerInterface
     }
 
     /**
-     * @param array<string, int> $settings
-     *
-     * @phpstan-param array{width: int, height: int} $settings
+     * @param array<string, mixed> $settings
      */
     private function createTargetBox(array $settings): Box
     {",Why losing this ?,php,1,1,0
"@@ -237,10 +237,6 @@ define([""appSettings"", ""browser"", ""events"", ""htmlMediaHelper"", ""webSettings""], f
             features.push(""voiceinput"");
         }
 
-        if (!browser.tv && !browser.xboxOne) {
-            browser.ps4;
-        }
-
         if (supportsHtmlMediaAutoplay()) {
             features.push(""htmlaudioautoplay"");
             features.push(""htmlvideoautoplay"");",What was this even doing?,js,1,0,0
"@@ -31,7 +31,7 @@ import org.apache.tuweni.bytes.MutableBytes;
  *
  * <h3>Message structure</h3>
  *
- * The following describes the message structure:
+ * <p>The following describes the message structure:
  *
  * <pre>
  *   authRecipient -&gt; E(remote-pubk,","Seems unrelated, but ok.",java,1,1,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -138,6 +138,8 @@ class Register(abc.ABCMeta):
         return global_params.iteritems()
 
 
+_event_callbacks = {}
+
 class Task(object):
     __metaclass__ = Register
 ",I think this should go into the Task class.,py,1,1,0
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -237,10 +237,6 @@ define([""appSettings"", ""browser"", ""events"", ""htmlMediaHelper"", ""webSettings""], f
             features.push(""voiceinput"");
         }
 
-        if (!browser.tv && !browser.xboxOne) {
-            browser.ps4;
-        }
-
         if (supportsHtmlMediaAutoplay()) {
             features.push(""htmlaudioautoplay"");
             features.push(""htmlvideoautoplay"");",What was this even doing?,js,1,0,0
"@@ -1040,7 +1040,9 @@ luaA_screen_module_index(lua_State *L)
             foreach(output, (*screen)->outputs)
                 if(A_STREQ(output->name, name))
                     return luaA_object_push(L, *screen);
-        luaL_error(L, ""Unknown screen output name: %s"", name);
+        luaA_warn(L, ""Unknown screen output name: %s"", name);
+        lua_pushnil(L);
+        return 1;
     }
 
     return luaA_object_push(L, luaA_checkscreen(L, 2));",mb still print the warning?,c,1,0,0
"@@ -60,7 +60,11 @@ namespace Datadog.Trace
         /// <summary>
         /// Gets the service name
         /// </summary>
-        public string ServiceName => _context.ServiceName;
+        public string ServiceName
+        {
+            get { return _context.ServiceName; }
+            internal set { _context.ServiceName = value; }
+        }
 
         /// <summary>
         /// Gets the trace's unique identifier.","I'm late to the party sorry, but why not let the non opentracing tracer change the service name too?",.cs,1,1,0
"@@ -1,5 +1,6 @@
 <?php namespace Backend\Models;
 
+use BackendAuth;
 use Mail;
 use Event;
 use Backend;",Move the backend auth use statement below the backend use statement please,php,1,1,0
"@@ -4,7 +4,7 @@ MYUSA_URL = ENV['MYUSA_URL'] || 'https://alpha.my.usa.gov'
 
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :myusa, MYUSA_KEY, MYUSA_SECRET, {
-    scope: 'profile.email',
+    scope: 'profile.email profile.first_name profile.last_name',
     client_options: {
       site: MYUSA_URL,
       token_url: ""/oauth/authorize""",That Was Easy:tm:,rb,0,1,0
"@@ -3,7 +3,7 @@ FactoryGirl.define do
 
   factory :api_token do
     access_token
-    step
+    step { create(:approval_step) }
     expires_at { Time.current + 7.days }
   end
 end",this is the actual fix?,rb,1,1,0
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -196,7 +196,6 @@ public abstract class SyncTarget {
                 smartStore.beginTransaction();
                 for (int i = 0; i < records.length(); i++) {
                     JSONObject record = new JSONObject(records.getJSONObject(i).toString());
-                    cleanRecord(record);
                     cleanAndSaveInSmartStore(syncManager.getSmartStore(), soupName, record, false);
                 }
                 smartStore.setTransactionSuccessful();",The next method called (cleanAndSaveInSmartStore) does a cleanRecord,java,1,1,0
"@@ -27,11 +27,8 @@ final class ForbiddenSuperGlobalSniff implements Sniff
     {
         return [T_VARIABLE];
     }
-
-    /**
-     * @param int $position
-     */
-    public function process(File $file, $position): void
+    
+    public function process(File $file, int $position): void
     {
         $currentToken = $file->getTokens()[$position];
 ",Should be fixed,php,1,1,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -4,12 +4,11 @@
 
 package net.sourceforge.pmd.lang.plsql.ast;
 
-import net.sourceforge.pmd.lang.ast.Node;
-import net.sourceforge.pmd.lang.ast.NodeStream;
+import net.sourceforge.pmd.lang.ast.impl.javacc.JjtreeNode;
 import net.sourceforge.pmd.lang.symboltable.Scope;
 import net.sourceforge.pmd.lang.symboltable.ScopedNode;
 
-public interface PLSQLNode extends Node, ScopedNode {
+public interface PLSQLNode extends ScopedNode, JjtreeNode<PLSQLNode> {
 
     /** Accept the visitor. **/
     Object jjtAccept(PLSQLParserVisitor visitor, Object data);","hm...yes, these methods are not ideal, too generic like ""getImage"". but this time on plsql...",java,1,1,0
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -26,9 +26,19 @@ namespace Datadog.Trace
         private readonly CultureInfo _invariantCulture = CultureInfo.InvariantCulture;
         private readonly IDatadogLogger _log = DatadogLogging.GetLoggerFor<SpanContextPropagator>();
         private readonly ConcurrentDictionary<Key, string?> _defaultTagMappingCache = new();
+        private readonly Func<IReadOnlyDictionary<string, string?>?, string, IEnumerable<string?>> _readOnlyDictionaryValueGetterDelegate;
 
         private SpanContextPropagator()
         {
+            IEnumerable<string?> ReadOnlyDictionaryValueGetter(IReadOnlyDictionary<string, string?>? carrier, string name)
+            {
+                if (carrier != null && carrier.TryGetValue(name, out var value))
+                {
+                    yield return value;
+                }
+            }
+
+            _readOnlyDictionaryValueGetterDelegate = ReadOnlyDictionaryValueGetter;
         }
 
         public static SpanContextPropagator Instance { get; } = new();",TODO: `yield return value` or `return new[] { value }`?,.cs,0,1,0
"@@ -240,6 +240,12 @@ class Server extends EventEmitter {
     }
 
     wireProtocol.command(this, ns, cmd, options, (err, result) => {
+      if (err && err instanceof MongoNetworkError) {
+        if (options.session) {
+          options.session.serverSession.isDirty = true;
+        }
+      }
+
       if (err && isSDAMUnrecoverableError(err)) {
         this.emit('error', err);
       }",`if (err && err instanceof MongoNetworkError && options.session)`,js,1,0,0
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -8,11 +8,11 @@ package account
 
 import (
 	""fmt""
-	""syscall""
+
+	""github.com/iotexproject/iotex-core/cli/ioctl/util""
 
 	""github.com/spf13/cobra""
 	""go.uber.org/zap""
-	""golang.org/x/crypto/ssh/terminal""
 
 	""github.com/iotexproject/iotex-core/cli/ioctl/cmd/alias""
 	""github.com/iotexproject/iotex-core/pkg/log""",wrong import group,go,1,1,0
"@@ -117,7 +117,7 @@ Puppet::Functions.create_function(:run_plan, Puppet::Functions::InternalFunction
         # undef/nil
         result = catch(:return) do
           scope.with_global_scope do |global_scope|
-            closure.call_by_name_with_scope(global_scope, params, true)
+            executor.run_plan(global_scope, closure, params)
           end
           nil
         end&.value",@McdonaldSeanp I think this will help you longterm too but heads up.,rb,0,1,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -345,7 +345,7 @@ class GFLHead(AnchorHead):
          bbox_weights_list, num_total_pos, num_total_neg) = cls_reg_targets
 
         num_total_samples = reduce_mean(
-            torch.tensor(num_total_pos).cuda()).item()
+            torch.tensor(num_total_pos).float().cuda()).item()
         num_total_samples = max(num_total_samples, 1.0)
 
         losses_cls, losses_bbox, losses_dfl,\","`torch.tensor(num_total_pos, dtype=torch.float, device=device)`",py,1,0,0
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -40,6 +40,9 @@ module Travis
             sh.cmd 'CURL_USER_AGENT=""Travis-CI $(curl --version | head -n 1)""'
             case config[:os]
             when 'linux'
+              if config[:julia] == 'nightly' && config[:arch] == 'arm64'
+                sh.failure 'Nightly Julia binaries are not available for AArch64'
+              end
               sh.cmd 'mkdir -p ~/julia'
               sh.cmd %Q{curl -A ""$CURL_USER_AGENT"" -s -L --retry 7 '#{julia_url}' } \
                        '| tar -C ~/julia -x -z --strip-components=1 -f -'",Is this a typo?,rb,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -331,6 +331,7 @@ namespace NLog.UnitTests.Layouts
                         new CsvColumn(""date"", ""${longdate}""),
                         new CsvColumn(""level"", ""${level}""),
                         new CsvColumn(""message"", ""${message}""),
+                        new CsvColumn(""threadid"", ""${threadid}""),
                     },
                 QuoteChar = ""'"",
                 Delimiter = CsvColumnDelimiterMode.Semicolon,",was a new unit test not a better option?,.cs,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -35,6 +35,8 @@ var cipherMap = map[string]uint16{
 
 func defaultCipherSuites() []uint16 {
 	return []uint16{
+		tls.TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,
+		tls.TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
 		tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,",I think we should put ECDSA first..,go,1,1,0
"@@ -386,7 +386,10 @@ namespace NLog.Layouts
                         var value = ParseParameterValue(stringReader);
                         if (!string.IsNullOrEmpty(parameterName) || !StringHelpers.IsNullOrWhiteSpace(value))
                         {
-                            // TODO NLog 5.0 Should throw exception when invalid configuration (Check throwConfigExceptions)
+                            if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions == true)
+                            {
+                                throw new NLogConfigurationException(""Unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
+                            }
                             InternalLogger.Warn(""Skipping unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
                         }
                     }",Maybe this instead: `if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions ?? LogManager.ThrowExceptions)` ?,.cs,1,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -28,7 +28,17 @@ void LMDB::Open(const string& source, Mode mode) {
   }
   int flags = 0;
   if (mode == READ) {
-    flags = MDB_RDONLY | MDB_NOTLS;
+    // No locking, assume DB is not written to at the same time, otherwise
+    // LMDB tries to lock the file, which fails if filesystem is read-only
+    flags = MDB_RDONLY | MDB_NOTLS | MDB_NOLOCK;
+  }
+  // Allow DB to be stand-alone file
+  {
+    struct stat st_buf;
+    stat(source.c_str(), &st_buf);
+    if (S_ISREG(st_buf.st_mode)) {
+      flags |= MDB_NOSUBDIR;
+    }
   }
   MDB_CHECK(mdb_env_open(mdb_env_, source.c_str(), flags, 0664));
   LOG(INFO) << ""Opened lmdb "" << source;",You should check the return value of stat(2).,cpp,1,1,0
"@@ -52,10 +52,7 @@ namespace NLog
 
         private static readonly IDictionary<string, object> EmptyDefaultDictionary = new SortHelpers.ReadOnlySingleBucketDictionary<string, object>();
 
-        /// <summary>
-        /// 
-        /// </summary>
-        private class ItemRemover : IDisposable
+        private sealed class ItemRemover : IDisposable
         {
             private readonly string _item;
             private bool _disposed;",note: sealed for keep Sonar stop warning about IDisposable,.cs,0,1,0
"@@ -40,6 +40,12 @@ public abstract class MethodDescriptorView {
 
   public abstract List<HeaderRequestParamView> headerRequestParams();
 
+  @Nullable
+  public abstract String requestFormatterName();
+
+  @Nullable
+  public abstract String responseFormatterName();
+
   public boolean hasHeaderRequestParams() {
     return headerRequestParams() != null && !headerRequestParams().isEmpty();
   }","These names aren't needed any more, right?",java,1,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -23,6 +23,8 @@ import javax.annotation.Nullable;
  */
 @AutoValue
 public abstract class InitFieldConfig {
+  private static String randomValueToken = ""$RANDOM"";
+
   public abstract String fieldPath();
 
   @Nullable",Should this be final?,java,1,1,0
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -74,7 +74,7 @@ func accountDelete(args []string) string {
 	for _, v := range ks.Accounts() {
 		if bytes.Equal(account.Bytes(), v.Address.Bytes()) {
 			fmt.Printf(""Enter password #%s:\n"", name)
-			bytePassword, err := terminal.ReadPassword(syscall.Stdin)
+			bytePassword, err := terminal.ReadPassword(int(syscall.Stdin))
 			if err != nil {
 				log.L().Error(""fail to get password"", zap.Error(err))
 				return err.Error()",unnecessary conversion (from `unconvert`),go,1,1,0
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -40,6 +40,12 @@
 -- @param _buttons The table of buttons that should bind to the widget.
 -- @function buttons
 
+--- Emit a signal and ensure all parent widgets in the hierarchies also
+-- forward the signal. This is useful to track signals when there is a dynamic
+-- set of containers and layouts wrapping the widget.
+-- @tparam string signal_name
+-- @param ... Other arguments
+-- @function emit_signal_recursive
 
 --- When the layout (size) change.
 -- This signal is emited when the previous results of `:layout()` and `:fit()`",This part seems to be in the wrong commit. The next commit adds this function.,c,0,1,0
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -694,7 +694,13 @@ class ColorbarPlot(ElementPlot):
             self._cbar_extend = 'max'
 
         # Define special out-of-range colors on colormap
-        cmap = copy.copy(plt.cm.get_cmap(opts.get('cmap')))
+        cmap = opts.get('cmap')
+        if isinstance(cmap, list):
+            cmap = mpl_colors.ListedColormap(cmap)
+        elif isinstance(cmap, util.basestring):
+            cmap = copy.copy(plt.cm.get_cmap(cmap))
+        else:
+            cmap = copy.copy(cmap)
         colors = {}
         for k, val in self.clipping_colors.items():
             if isinstance(val, tuple):",What is all the copying about?,py,1,1,0
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -38,7 +38,8 @@ func (p *diskInspectionProcessor) process(pd persistentDisk,
 
         ir, err := p.inspectDisk(pd.uri)
         if err != nil {
-                return pd, err
+                // Don't directly return err to avoid terminating the import.
+                return pd, nil
         }
 
         isDualBoot := ir.UEFIBootable && ir.BIOSBootableWithHybridMBROrProtectiveMBR",Log the error?,go,1,1,0
"@@ -633,7 +633,7 @@ std::string DynamicStateString(CBStatusFlags input_value) {
     while (input_value) {
         if (input_value & 1) {
             if (!ret.empty()) ret.append(""|"");
-            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1 << index))));
+            ret.append(string_VkDynamicState(ConvertToDynamicState(static_cast<CBStatusFlagBits>(1llu << index))));
         }
         ++index;
         input_value >>= 1;","Just curious, was this causing an error?",cpp,1,1,0
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -52,10 +52,7 @@ namespace NLog
 
         private static readonly IDictionary<string, object> EmptyDefaultDictionary = new SortHelpers.ReadOnlySingleBucketDictionary<string, object>();
 
-        /// <summary>
-        /// 
-        /// </summary>
-        private class ItemRemover : IDisposable
+        private sealed class ItemRemover : IDisposable
         {
             private readonly string _item;
             private bool _disposed;",note: sealed for keep Sonar stop warning about IDisposable,.cs,0,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -107,6 +107,13 @@ import javax.ws.rs.WebApplicationException;
 import javax.ws.rs.core.Response;
 import static javax.ws.rs.core.Response.Status.BAD_REQUEST;
 import javax.ws.rs.core.StreamingOutput;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
 
 /*
     Custom API exceptions [NOT YET IMPLEMENTED]",Looks like glassfish went a bit nuts doing a refactor,java,1,0,0
"@@ -438,7 +438,12 @@ describe('Connection Pool', function () {
     });
 
     loadSpecTests('connection-monitoring-and-pooling').forEach(test => {
-      it(test.description, function () {
+      const itFn =
+        test.description ===
+        'must aggressively timeout threads enqueued longer than waitQueueTimeoutMS'
+          ? it.skip
+          : it;
+      itFn(test.description, function () {
         const operations = test.operations;
         const expectedEvents = test.events || [];
         const ignoreEvents = test.ignore || [];","This test has been flaky for a long time, if we're okay with skipping I can make a ticket to take a look at this later.",js,1,1,0
"@@ -521,7 +521,7 @@ class Package(object):
         return cls._browse(name=name, registry=registry, top_hash=top_hash)
 
     @classmethod
-    def _browse(cls, name, registry, top_hash):
+    def _browse(cls, name, registry=None, top_hash=None):
         validate_package_name(name)
         if registry is None:
             registry = get_from_config('default_local_registry')",Is this change needed for the fix?,py,1,1,0
"@@ -9,10 +9,15 @@ FactoryGirl.define do
     rwa_number ""R1234567"" # TODO remove, since it's not applicable for BA61
     org_code Ncr::Organization.all[0].to_s
     project_title ""NCR Name""
+    sequence(:approving_official_email) {|n| ""approver#{User.count}@some-cartoon-show.com"" }
     association :proposal, flow: 'linear'
 
     trait :with_approvers do
+      # TODO use wo.setup_approvals_and_observers instead
       association :proposal, :with_serial_approvers, flow: 'linear'
+      after :create do |wo|
+        wo.approving_official_email = wo.approving_official.email_address
+      end
     end
 
     trait :is_emergency do",PT story for this?,rb,0,0,0
"@@ -386,7 +386,10 @@ namespace NLog.Layouts
                         var value = ParseParameterValue(stringReader);
                         if (!string.IsNullOrEmpty(parameterName) || !StringHelpers.IsNullOrWhiteSpace(value))
                         {
-                            // TODO NLog 5.0 Should throw exception when invalid configuration (Check throwConfigExceptions)
+                            if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions == true)
+                            {
+                                throw new NLogConfigurationException(""Unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
+                            }
                             InternalLogger.Warn(""Skipping unrecognized property '{0}={1}` for ${{{2}}} ({3})"", parameterName, value, name, layoutRenderer?.GetType());
                         }
                     }",Maybe this instead: `if (throwConfigExceptions ?? LogManager.ThrowConfigExceptions ?? LogManager.ThrowExceptions)` ?,.cs,1,1,0
"@@ -29,12 +29,18 @@ import java.util.Collection;
 import java.util.Collections;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.LinkedBlockingDeque;
+import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
-import java.util.concurrent.locks.ReentrantLock;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
 import java.util.function.Function;
 
 import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Stopwatch;
+import com.google.common.util.concurrent.ThreadFactoryBuilder;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.apache.tuweni.bytes.Bytes;","Experimentally determined a while ago. Since the rocks db default lock timeout is 1000ms, I aimed for a flush size that was as big as possible that completes in under 500ms",java,1,1,0
"@@ -1184,13 +1184,8 @@ static swift::ASTContext *SetupASTContext(
   if (disable_objc_runtime())
     swift_ast_context->GetLanguageOptions().EnableObjCInterop = false;
 
-  if (repl || playground) {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = true;
-  } else {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = false;
-  }
+  swift_ast_context->GetLanguageOptions().Playground = repl || playground;
+  swift_ast_context->GetIRGenOptions().Playground = repl || playground;
 
   // For the expression parser and REPL we want to relax the
   // requirement that you put ""try"" in front of every expression that",This was a typo that prevented the feature to work correctly.,cpp,1,1,0
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -48,6 +48,7 @@ const baseModuleStore = Modules.createModuleStore( 'adsense', {
                 'siteStatus',
                 'accountSetupComplete',
                 'siteSetupComplete',
+                'ownerID',
         ],
         adminPage: 'googlesitekit-module-adsense',
 } );","Thank you, I realize this detail was missed in the IB  ",js,1,1,0
"@@ -86,6 +86,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
         public void Start()
         {
             Log.ConnectionStart(ConnectionId);
+            KestrelEventSource.Log.ConnectionStart(this);
 
             // Start socket prior to applying the ConnectionAdapter
             _socket.ReadStart(_allocCallback, _readCallback, this);",Can we move this into `KestrelTrace`?,.cs,1,1,0
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -107,6 +107,13 @@ import javax.ws.rs.WebApplicationException;
 import javax.ws.rs.core.Response;
 import static javax.ws.rs.core.Response.Status.BAD_REQUEST;
 import javax.ws.rs.core.StreamingOutput;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
 
 /*
     Custom API exceptions [NOT YET IMPLEMENTED]",Looks like glassfish went a bit nuts doing a refactor,java,1,0,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -58,6 +58,8 @@ public abstract class AbstractAzkabanServlet extends HttpServlet {
   private static final String AZKABAN_FAILURE_MESSAGE =
       ""azkaban.failure.message"";
   private static final long serialVersionUID = -1;
+
+  protected String passwordPlaceholder;
   private AzkabanServer application;
   private String name;
   private String label;",Why passwordPlaceholder is added in AbstractAzkabanServlet instead of LoginAbstractAzkabanServlet?,java,1,1,0
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -11,6 +11,13 @@ from .custom import CustomDataset
 
 @DATASETS.register_module()
 class XMLDataset(CustomDataset):
+    """"""XML dataset for detection.
+
+    Args:
+        min_size (int|float|None, optional): The minimum size of bounding
+            boxes in the images. If the size of a bounding box is less than
+            ``min_size``, it would be add to ignored field.
+    """"""
 
     def __init__(self, min_size=None, **kwargs):
         super(XMLDataset, self).__init__(**kwargs)","`int | float | None` or `int | float, optional`",py,1,0,0
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -361,7 +361,9 @@ public class FunctionQParser extends QParser {
         ((FunctionQParser)subParser).setParseMultipleSources(true);
       }
       Query subQuery = subParser.getQuery();
-      if (subQuery instanceof FunctionQuery) {
+      if (subQuery == null) {
+        valueSource = new DoubleConstValueSource(0.0f);
+      } else if (subQuery instanceof FunctionQuery) {
         valueSource = ((FunctionQuery) subQuery).getValueSource();
       } else {
         valueSource = new QueryValueSource(subQuery, 0.0f);",Why a Double?,java,1,1,0
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -61,13 +61,13 @@ var once sync.Once
 var CloudhubHandler *MessageHandle
 
 // InitHandler create a handler for websocket and quic servers
-func InitHandler(config *hubconfig.Configure, eventq *channelq.ChannelMessageQueue) {
+func InitHandler(eventq *channelq.ChannelMessageQueue) {
 	once.Do(func() {
 		CloudhubHandler = &MessageHandle{
-			KeepaliveInterval: config.KeepaliveInterval,
-			WriteTimeout:      config.WriteTimeout,
+			KeepaliveInterval: int(hubconfig.Get().KeepaliveInterval),
+			WriteTimeout:      int(hubconfig.Get().WriteTimeout),
 			MessageQueue:      eventq,
-			NodeLimit:         config.NodeLimit,
+			NodeLimit:         int(hubconfig.Get().NodeLimit),
 		}
 
 		CloudhubHandler.KeepaliveChannel = make(map[string]chan struct{})",Why need the type conversion here?,go,1,1,0
"@@ -0,0 +1,14 @@
+// Copyright (c) .NET Foundation. All rights reserved.
+// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
+
+using System;
+
+namespace Microsoft.AspNetCore.Protocols
+{
+    [Flags]
+    public enum TransferFormat
+    {
+        Binary = 0x01,
+        Text = 0x02
+    }
+}","Binary literal? :). I don't really care either way, mostly just trolling.",.cs,1,1,0
"@@ -14,6 +14,7 @@
 package zipkin.storage.elasticsearch.http;
 
 import java.io.IOException;
+import java.util.*;
 import java.util.concurrent.TimeUnit;
 import okhttp3.mockwebserver.MockResponse;
 import okhttp3.mockwebserver.MockWebServer;",nit: no wildcards,java,1,1,0
"@@ -358,6 +358,11 @@ namespace NLog.Targets.Wrappers
         /// </summary>
         /// <returns>Returns true when scheduled a timer-worker-thread</returns>
         protected virtual bool StartInstantWriterTimer()
+        {
+            return StartTimerUnlessWriterActive(true);
+        }
+
+        private bool StartTimerUnlessWriterActive(bool instant)
         {
             bool lockTaken = false;
             try",shouldn't we return `true` here?,.cs,1,1,0
"@@ -55,6 +55,7 @@ final class ThumbnailCompilerPassTest extends TestCase
 
 final class TestUncallableAddResizerMethod
 {
+    // @phpstan-ignore-next-line
     private function addResizer(): void
     {
     }",Can you explain why ?,php,1,1,0
"@@ -521,7 +521,7 @@ class Package(object):
         return cls._browse(name=name, registry=registry, top_hash=top_hash)
 
     @classmethod
-    def _browse(cls, name, registry, top_hash):
+    def _browse(cls, name, registry=None, top_hash=None):
         validate_package_name(name)
         if registry is None:
             registry = get_from_config('default_local_registry')",Is this change needed for the fix?,py,1,1,0
"@@ -0,0 +1,11 @@
+(() => {
+  const docusaurusVersions = ['9.0'];
+  const legacyVersions = ['8.3.0', '8.2.0', '8.1.0', '8.0.0', '7.4.2', '7.4.1', '7.4.0', '7.3.0', '7.2.2', '7.2.1', '7.2.0', '7.1.1', '7.1.0', '7.0.3', '7.0.2', '7.0.1', '7.0.0', '6.2.2', '6.2.1', '6.2.0', '6.1.1', '6.1.0', '6.0.1', '6.0.0', '5.0.2', '5.0.1', '5.0.0', '4.0.0', '3.0.0', '2.0.0', ['1.18.1', '0.38.1'], ['1.18.0', '0.38.0'], ['1.17.0', '0.37.0'], ['1.16.0', '0.36.0'], ['1.15.1', '0.35.1'], ['1.15.0', '0.35.0'], ['1.14.3', '0.34.3'], ['1.14.2', '0.34.2'], ['1.14.1', '0.34.1'], ['1.14.0', '0.34.0']];
+  const versions = [...docusaurusVersions, ...legacyVersions];
+
+  if (window.location.hostname === 'dev.handsontable.com') {
+    versions.unshift('next');
+  }
+
+  docVersions && docVersions(versions);
+})();","probably redundant file, please verify",js,1,1,0
"@@ -37,6 +37,12 @@ module Selenium
         def bridge_class
           Bridge
         end
+
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
       end # Driver
     end # Firefox
   end # WebDriver",Same here. and all others.,java,0,1,0
"@@ -146,7 +146,7 @@ module RSpec::Core
       # Returns the message generated for this failure line by line.
       #
       # @return [Array(String)] The example failure message
-      def message_lines
+      def message_lines(default_color_proc=lambda {|x| x })
         @lines ||=
           begin
             lines = [""Failure/Error: #{read_failed_line.strip}""]",This seems more convoluted then what you had before :(. @JonRowe -- can you suggest a way to do this that you'd be satisfied with?,rb,0,1,0
"@@ -22,6 +22,7 @@ from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
 
 
 class Options(object):
+    KEY = ""goog:chromeOptions""
 
     def __init__(self):
         self._binary_location = ''",nice touch since Google likes to change things every now and then.,py,1,0,0
"@@ -23,8 +23,13 @@
 
 namespace Thelia\Model;
 
+use Propel\Runtime\Propel;
 use Thelia\Model\Base\Coupon as BaseCoupon;
+use Thelia\Model\Base\CouponCountryQuery;
+use Thelia\Model\Base\CouponModuleQuery;
 use Thelia\Model\Exception\InvalidArgumentException;
+use Thelia\Model\Map\CouponTableMap;
+use Thelia\Model\Tools\ModelEventDispatcherTrait;
 
 /**
  * Used to provide an effect (mostly a discount)",Base model is imported here.,php,1,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -318,7 +318,14 @@ public class ExecutionControllerUtils {
       jobLinkUrl = url.toString();
     } else {
       // If RM job link is invalid or has expired, fetch the job link from JHS or SHS.
-      if (exFlow.getExecutableNode(jobId).getType().equals(SPARK_JOB_TYPE)) {
+      final ExecutableNode node = exFlow.getExecutableNodePath(jobId);
+      if (node == null) {
+        logger.error(
+            ""Invalid job link. Job "" + jobId + "" doesn't exist in "" + exFlow.getExecutionId());
+        return null;
+      }
+
+      if (node.getType().equals(SPARK_JOB_TYPE)) {
         jobLinkUrl =
             azkProps.get(ConfigurationKeys.SPARK_HISTORY_SERVER_JOB_URL).replace
                 (APPLICATION_ID, applicationId);",In which scenario this is a possibility?,java,1,1,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -389,7 +389,7 @@ func (w *worker) reader(offset, end int64, closeOpen bool) (io.ReadCloser, error
 	r := w.rc
 	if w.rc == nil {
 		r, err = w.r.cacheFs().openRateLimited(func() (io.ReadCloser, error) {
-			return w.r.cachedObject.Object.Open(&fs.SeekOption{Offset: offset}, &fs.RangeOption{Start: offset, End: end})
+			return w.r.cachedObject.Object.Open(&fs.RangeOption{Start: offset, End: end - 1})
 		})
 		if err != nil {
 			return nil, err",why a -1 here? @ncw,go,0,1,0
"@@ -170,6 +170,6 @@ public class TableProperties {
   public static final String MERGE_MODE = ""write.merge.mode"";
   public static final String MERGE_MODE_DEFAULT = ""copy-on-write"";
 
-  public static final String MERGE_WRITE_CARDINALITY_CHECK = ""write.merge.cardinality-check.enabled"";
-  public static final boolean MERGE_WRITE_CARDINALITY_CHECK_DEFAULT = true;
+  public static final String MERGE_CARDINALITY_CHECK_ENABLED = ""write.merge.cardinality-check.enabled"";
+  public static final boolean MERGE_CARDINALITY_CHECK_ENABLED_DEFAULT = true;
 }",To match the property name above.,java,0,1,0
"@@ -76,7 +76,7 @@ public class TestEdgeDriver extends RemoteWebDriver implements WebStorage, Locat
                 .findFirst().orElseThrow(WebDriverException::new);
 
         service = (EdgeDriverService) builder.withVerbose(true).withLogFile(logFile.toFile()).build();
-        LOG.info(""edgedriver will log to "" + logFile);
+        LOG.fine(""edgedriver will log to "" + logFile);
         service.start();
         Runtime.getRuntime().addShutdownHook(new Thread(() -> service.stop()));
       }",This is deliberately at this level.,py,1,1,0
"@@ -44,13 +44,6 @@ Account IOLoginData::loadAccount(uint32_t accno)
 	return account;
 }
 
-bool IOLoginData::saveAccount(const Account& acc)
-{
-	std::ostringstream query;
-	query << ""UPDATE `accounts` SET `premium_ends_at` = "" << acc.premiumEndsAt << "" WHERE `id` = "" << acc.id;
-	return Database::getInstance().executeQuery(query.str());
-}
-
 std::string decodeSecret(const std::string& secret)
 {
 	// simple base32 decoding",why are you removing it?,cpp,1,1,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -9,9 +9,9 @@ import (
         ""io/ioutil""
         ""strings""
 
-        ""gopkg.in/editorconfig/editorconfig-core-go.v1""
         ""gopkg.in/macaron.v1""
 
+        ""github.com/editorconfig/editorconfig-core-go/v2""
         ""github.com/gogs/git-module""
 
         ""gogs.io/gogs/internal/db""",This import grouping should be changed.,go,1,1,0
"@@ -21,6 +21,8 @@ import com.google.common.base.Charsets;
 import com.google.common.io.ByteStreams;
 import com.google.common.net.MediaType;
 
+import com.sun.org.glassfish.gmbal.ManagedObject;
+
 import org.apache.http.Header;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpHost;","Again, you don't want to depend on glassfish.",py,1,1,0
"@@ -9,9 +9,9 @@ import (
         ""io/ioutil""
         ""strings""
 
-        ""gopkg.in/editorconfig/editorconfig-core-go.v1""
         ""gopkg.in/macaron.v1""
 
+        ""github.com/editorconfig/editorconfig-core-go/v2""
         ""github.com/gogs/git-module""
 
         ""gogs.io/gogs/internal/db""",This import grouping should be changed.,go,1,1,0
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -23,4 +23,14 @@ module RSpecHelpers
     end
   end
 
+  def expect_deprecation_with_call_site(file, line)
+    expect(RSpec.configuration.reporter).to receive(:deprecation) do |options|
+      expect(options[:call_site]).to include([file, line].join(':'))
+    end
+  end
+
+  def allow_deprecation
+    allow(RSpec.configuration.reporter).to receive(:deprecation)
+  end
+
 end","I can't get this helper to fail. I've passed incorrect line numbers and it always passes. I see the block get run, but it doesn't seem this inner expectation is properly raised.",rb,0,1,0
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -188,12 +188,13 @@ namespace Microsoft.CodeAnalysis.Sarif.Converters
         {
             var context = TestHelper.CreateProjectContext();
 
-            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"");
+            context.RefineMessage(""CA0000"", ""VeryUsefulCheck"", ""1"", ""MyCategory"", ""Breaking"", ""ExcludedInSource"");
             Assert.AreEqual(""CA0000"", context.CheckId);
             Assert.AreEqual(""1"", context.MessageId);
             Assert.AreEqual(""MyCategory"", context.Category);
             Assert.AreEqual(""VeryUsefulCheck"", context.Typename);
             Assert.AreEqual(""Breaking"", context.FixCategory);
+            Assert.AreEqual(""ExcludedInSource"", context.Status);
         }
 
         [TestMethod]","I thought we had names `""Unknown""`, `""SuppressedInSource""`, and `""SuppressedInBaseLine""`.",.cs,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -30,7 +30,7 @@ describe('cleanupPlugins', function() {
 	it('should throw if no audit is configured', function() {
 		assert.throws(
 			function() {
-				cleanupPlugins(document, {});
+				axe.cleanup(document, {});
 			},
 			Error,
 			/^No audit configured/",I think this file should be renamed to just cleanup.js,js,0,1,0
"@@ -38,7 +38,7 @@ module.exports = {
   i18n: i18nConfig,
   plugins: [
     'docusaurus-plugin-sass',
-    isProductionDeployment && ['docusaurus-plugin-sentry', { dsn: 'a7bc89ee3f284570b1d9a47e600e7597' }]
+    isProductionDeployment && ['docusaurus-plugin-sentry', { DSN: 'a7bc89ee3f284570b1d9a47e600e7597' }]
   ].filter(Boolean),
   webpack: {
     jsLoader: (isServer) => ({","hehe, javascript :D and his case sensitive",js,1,0,0
"@@ -2,7 +2,7 @@
   tool_name = Rails.configuration.branding[:application][:name]
   link = accept_invitation_url(@resource, :invitation_token => @token)
   helpdesk_email = Rails.configuration.branding[:organisation][:helpdesk_email]
-  contact_us_url = Rails.configuration.branding[:organisation][:contact_us_url] || contact_us_url
+  contact_us = (Rails.configuration.branding[:organisation][:contact_us_url] || contact_us_url)
   email_subject = _('Query or feedback related to %{tool_name}') %{ :tool_name => tool_name }
 %>
 <% FastGettext.with_locale FastGettext.default_locale do %>","thanks for changing it, the rename is for sure safer!",rb,1,1,0
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -5555,10 +5555,6 @@ emit_special_ibl_xfer(dcontext_t *dcontext, byte *pc, generated_code_t *code, ui
         INSTR_CREATE_cbz(dcontext, opnd_create_instr(skip_unlinked_tgt_jump),
                          opnd_create_reg(SCRATCH_REG5)));
     insert_shared_restore_dcontext_reg(dcontext, &ilist, NULL);
-    /* i#4670: The unlinking case is observed to hit very infrequently on x86. The issue
-     *  or the fix have not been observed on AArchXX yet.
-     */
-    ASSERT_NOT_TESTED();
 #        if defined(AARCH64)
     APP(&ilist,
         INSTR_CREATE_ldr(","> iX: r We don't put ""iX"" in the title: just the branch name. So `s/iX: r/R/`.",c,0,1,0
"@@ -104,7 +104,7 @@ def check_for_software_updates(flash_message=False):
     :return: True if you have latest version, else False if you need to upgrade
              or None if server was not reachable.
     """"""
-    from invenio.config import CFG_VERSION
+    from invenio.version import __version__ as invenio_version
     from invenio.base.i18n import _
     try:
         find = re.compile('Invenio v[0-9]+.[0-9]+.[0-9]+(\-rc[0-9])?'",we can use `invenio.version` instead,py,1,1,0
"@@ -19,7 +19,7 @@ source_t* source_open(const char* file, const char** error_msgp)
 
   fseek(fp, 0, SEEK_END);
   ssize_t size = ftell(fp);
-  
+
   if(size < 0)
   {
     *error_msgp = ""can't determine length of file"";",can you revert changes to this file.,c,1,1,0
"@@ -35,6 +35,7 @@ describe ForumsController do
   end
 
   it 'admin show with pagination' do
+    skip 'TODO: This test never ran correctly. It silently failed due to no assertions.'
     create_list(:topic, 20)
     login_as user
     get :show, id: forum.id",These really should be fixed for real.,rb,0,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -0,0 +1,14 @@
+int method(void)
+{
+  return 0;
+}
+
+int sub(void)
+{
+  return 0;
+}
+
+int fun(void)
+{
+  return 0;
+}",...becase there is no whitespace after `(void)`.,c,0,0,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -318,7 +318,14 @@ public class ExecutionControllerUtils {
       jobLinkUrl = url.toString();
     } else {
       // If RM job link is invalid or has expired, fetch the job link from JHS or SHS.
-      if (exFlow.getExecutableNode(jobId).getType().equals(SPARK_JOB_TYPE)) {
+      final ExecutableNode node = exFlow.getExecutableNodePath(jobId);
+      if (node == null) {
+        logger.error(
+            ""Invalid job link. Job "" + jobId + "" doesn't exist in "" + exFlow.getExecutionId());
+        return null;
+      }
+
+      if (node.getType().equals(SPARK_JOB_TYPE)) {
         jobLinkUrl =
             azkProps.get(ConfigurationKeys.SPARK_HISTORY_SERVER_JOB_URL).replace
                 (APPLICATION_ID, applicationId);",In which scenario this is a possibility?,java,1,1,0
"@@ -843,13 +843,6 @@ err:
     return NULL;
 }
 
-/*  Create namespace name for jobid 'id'
- */
-static int job_get_ns_name (char *buf, int bufsz, flux_jobid_t id)
-{
-    return fluid_encode (buf, bufsz, id, FLUID_STRING_DOTHEX);
-}
-
 static double job_get_kill_timeout (flux_t *h)
 {
     double t = DEFAULT_KILL_TIMEOUT;","typo in commit message ""notiation"" -> ""notation""",c,0,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -23,8 +23,13 @@
 
 namespace Thelia\Model;
 
+use Propel\Runtime\Propel;
 use Thelia\Model\Base\Coupon as BaseCoupon;
+use Thelia\Model\Base\CouponCountryQuery;
+use Thelia\Model\Base\CouponModuleQuery;
 use Thelia\Model\Exception\InvalidArgumentException;
+use Thelia\Model\Map\CouponTableMap;
+use Thelia\Model\Tools\ModelEventDispatcherTrait;
 
 /**
  * Used to provide an effect (mostly a discount)",Base model is imported here.,php,1,1,0
"@@ -62,7 +62,7 @@ namespace Microsoft.DotNet.Build.Tasks.Packaging
                 return false;
             }
 
-            if (PackageIndexes != null || PackageIndexes.Length > 0)
+            if (PackageIndexes != null && PackageIndexes.Length > 0)
             {
                 PackageIndex.Current.Merge(PackageIndexes.Select(pi => pi.GetMetadata(""FullPath"")));
             }",Can you instead change this to &&,.cs,1,1,0
"@@ -102,11 +102,14 @@ class TaskProcess(multiprocessing.Process):
         self.timeout_time = time.time() + worker_timeout if worker_timeout else None
 
     def _run_get_new_deps(self):
+        run_again = False
         try:
             task_gen = self.task.run(tracking_url_callback=self.tracking_url_callback)
         except TypeError as ex:
             if 'unexpected keyword argument' not in getattr(ex, 'message', ex.args[0]):
                 raise
+            run_again = True
+        if run_again:
             task_gen = self.task.run()
         if not isinstance(task_gen, types.GeneratorType):
             return None",what is this if statement - it's pretty horrible,py,1,1,0
"@@ -92,7 +92,11 @@ int flb_parser_json_do(struct flb_parser *parser,
             off = 0;
             msgpack_unpacked_destroy(&result);
             msgpack_unpacked_init(&result);
-            msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off);
+            if (msgpack_unpack_next(&result, tmp_out_buf, tmp_out_size, &off) < 0)
+{
+            msgpack_unpacked_destroy(&result);
+return -1;
+}
             map = result.data;
         }
     }",something went wrong with indentation there,c,0,1,0
"@@ -428,6 +428,12 @@ void encodeVectorTile(const datafacade::ContiguousInternalMemoryDataFacadeBase &
                 const auto &edge = edges[edge_index];
                 const auto geometry_id = get_geometry_id(edge);
 
+                // Get coordinates for start/end nodes of segment (NodeIDs u and v)
+                const auto a = facade.GetCoordinateOfNode(edge.u);
+                const auto b = facade.GetCoordinateOfNode(edge.v);
+                // Calculate the length in meters
+                const double length = osrm::util::coordinate_calculation::haversineDistance(a, b);
+
                 // Weight values
                 const auto forward_weight_vector =
                     facade.GetUncompressedForwardWeights(geometry_id);","when trying to refactor this I thought about this line a bit. It adds some overhead for calculating the distances. Whats is you opinion here @danpat on the potential slowdown? I feel it might be alright, but I am not entirely sure. (This length calculation is already happening further down as well)",cpp,0,1,0
"@@ -176,15 +176,10 @@ namespace Nethermind.Synchronization.FastBlocks
                 }
                 else
                 {
-                    Keccak receiptsRoot = new ReceiptTrie(blockInfo.BlockNumber, _specProvider, receipts).RootHash;
-                    if (receiptsRoot != header.ReceiptsRoot)
-                    {
-                        preparedReceipts = null;
-                    }
-                    else
-                    {
-                        preparedReceipts = receipts;
-                    }
+                    IReleaseSpec releaseSpec = _specProvider.GetSpec(blockInfo.BlockNumber);
+                    preparedReceipts = releaseSpec.ValidateReceipts && new ReceiptTrie(releaseSpec, receipts).RootHash != header.ReceiptsRoot 
+                        ? null 
+                        : receipts;
                 }
             }
 ",we cannot simply not validate receipts - very dangerous - can we discuss more,.cs,1,0,0
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -51,14 +51,15 @@ void updateSubMolConfs(const ROMol &mol, RWMol &res,
     res.addConformer(newConf, false);
   }
 }
-}
+}  // namespace
 
 ROMol *deleteSubstructs(const ROMol &mol, const ROMol &query, bool onlyFrags,
                         bool useChirality) {
-  RWMol *res = static_cast<RWMol *>(new ROMol(mol, false));
+  RWMol *res = new RWMol(mol, false);
   std::vector<MatchVectType> fgpMatches;
   std::vector<MatchVectType>::const_iterator mati;
-  VECT_INT_VECT matches;  // all matches on the molecule - list of list of atom ids
+  VECT_INT_VECT
+  matches;  // all matches on the molecule - list of list of atom ids
   MatchVectType::const_iterator mi;
   // do the substructure matching and get the atoms that match the query
   const bool uniquify = true;",This is odd formatting,cpp,1,1,0
"@@ -1,4 +1,5 @@
 require 'spec_helper'
+require 'pp'
 
 class ClassMixedWithDSLHelpers
   include Beaker::DSL::Helpers",Doesn't look like you're actually using this anywhere?,rb,0,0,0
"@@ -1184,13 +1184,8 @@ static swift::ASTContext *SetupASTContext(
   if (disable_objc_runtime())
     swift_ast_context->GetLanguageOptions().EnableObjCInterop = false;
 
-  if (repl || playground) {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = true;
-  } else {
-    swift_ast_context->GetLanguageOptions().Playground = true;
-    swift_ast_context->GetIRGenOptions().Playground = false;
-  }
+  swift_ast_context->GetLanguageOptions().Playground = repl || playground;
+  swift_ast_context->GetIRGenOptions().Playground = repl || playground;
 
   // For the expression parser and REPL we want to relax the
   // requirement that you put ""try"" in front of every expression that",This was a typo that prevented the feature to work correctly.,cpp,1,1,0
"@@ -21,6 +21,8 @@ import com.google.common.base.Charsets;
 import com.google.common.io.ByteStreams;
 import com.google.common.net.MediaType;
 
+import com.sun.org.glassfish.gmbal.ManagedObject;
+
 import org.apache.http.Header;
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpHost;","Again, you don't want to depend on glassfish.",py,1,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -63,8 +63,10 @@ type generatedAccount struct {
 func init() {
         accountCreateCmd.Flags().UintVarP(&numAccounts, ""num"", ""n"", 1,
                 config.TranslateInLang(flagNumUsages, config.UILanguage))
+
         accountCreateCmd.Flags().BoolVar(&CryptoSm2, ""sm2"", false,
                 config.TranslateInLang(flagSm2Usage, config.UILanguage))
+        accountCreateCmd.Flags().MarkHidden(""sm2"")
 }
 
 func accountCreate() error {",I thought we agree to delete these,go,0,1,0
"@@ -36,6 +36,7 @@ ReaderLocator::ReaderLocator(
     : owner_(owner)
     , locator_info_(max_unicast_locators, max_multicast_locators)
     , expects_inline_qos_(false)
+    , is_local_reader_(false)
     , guid_prefix_as_vector_(1u)
     , guid_as_vector_(1u)
 {",Field `local_reader_` should be initialized to `nullptr`,cpp,1,1,0
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -60,7 +60,11 @@ namespace Datadog.Trace
         /// <summary>
         /// Gets the service name
         /// </summary>
-        public string ServiceName => _context.ServiceName;
+        public string ServiceName
+        {
+            get { return _context.ServiceName; }
+            internal set { _context.ServiceName = value; }
+        }
 
         /// <summary>
         /// Gets the trace's unique identifier.","I'm late to the party sorry, but why not let the non opentracing tracer change the service name too?",.cs,1,1,0
"@@ -9,11 +9,11 @@ This module contains tools for enumerating tautomers and determining a canonical
 :license: MIT, see LICENSE file for more details.
 """"""
 
-
 import copy
 import logging
 
 from rdkit import Chem
+from rdkit.Chem.MolStandardize import rdMolStandardize
 from rdkit.Chem.rdchem import BondDir, BondStereo, BondType
 
 from .utils import memoized_property, pairwise",I don't think you need to make any edits at all to this file for this PR,cpp,0,1,0
"@@ -74,7 +74,7 @@ double getLabuteAtomContribs(const ROMol &mol, std::vector<double> &Vi,
     Vi[i] = M_PI * Ri * (4. * Ri - Vi[i]);
     res += Vi[i];
   }
-  if (includeHs) {
+  if (includeHs && fabs(hContrib) > 1e-4) {
     double Rj = PeriodicTable::getTable()->getRb0(1);
     hContrib = M_PI * Rj * (4. * Rj - hContrib);
     res += hContrib;",Why not includeHs && nAtoms?,cpp,1,1,0
"@@ -1,4 +1,13 @@
+require 'logger'
+
 module Bolt
+  class << self
+    attr_accessor :log_level
+    attr_accessor :config
+  end
+
+  @config = {}
+
   require 'bolt/executor'
   require 'bolt/node'
 end","thanks for moving this up here, seems like a much more intuitive place",rb,1,1,0
"@@ -11,6 +11,13 @@ from .custom import CustomDataset
 
 @DATASETS.register_module()
 class XMLDataset(CustomDataset):
+    """"""XML dataset for detection.
+
+    Args:
+        min_size (int|float|None, optional): The minimum size of bounding
+            boxes in the images. If the size of a bounding box is less than
+            ``min_size``, it would be add to ignored field.
+    """"""
 
     def __init__(self, min_size=None, **kwargs):
         super(XMLDataset, self).__init__(**kwargs)","`int | float | None` or `int | float, optional`",py,1,0,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -55,7 +55,15 @@ namespace Datadog.Trace
             Settings = settings ?? TracerSettings.FromDefaultSources();
             _agentWriter = agentWriter ?? new AgentWriter(new Api(Settings.AgentUri));
             _scopeManager = scopeManager ?? new AsyncLocalScopeManager();
-            Sampler = sampler ?? new RateByServiceSampler();
+            Sampler = sampler ?? new RuleBasedSampler(new RateLimiter(Settings.MaxTracesSubmittedPerSecond));
+
+            if (!string.IsNullOrEmpty(Settings.CustomSamplingRules))
+            {
+                foreach (var rule in RegexSamplingRule.BuildFromConfigurationString(Settings.CustomSamplingRules))
+                {
+                    Sampler.RegisterRule(rule);
+                }
+            }
 
             // if not configured, try to determine an appropriate service name
             DefaultServiceName = Settings.ServiceName ??",Suggest using `string.IsNullOrWhitespace` instead of `string.IsNullOrEmpty`.,.cs,1,1,0
"@@ -62,7 +62,7 @@ namespace Microsoft.DotNet.Build.Tasks.Packaging
                 return false;
             }
 
-            if (PackageIndexes != null || PackageIndexes.Length > 0)
+            if (PackageIndexes != null && PackageIndexes.Length > 0)
             {
                 PackageIndex.Current.Merge(PackageIndexes.Select(pi => pi.GetMetadata(""FullPath"")));
             }",Can you instead change this to &&,.cs,1,1,0
"@@ -86,6 +86,7 @@ namespace Microsoft.AspNetCore.Server.Kestrel.Internal.Http
         public void Start()
         {
             Log.ConnectionStart(ConnectionId);
+            KestrelEventSource.Log.ConnectionStart(this);
 
             // Start socket prior to applying the ConnectionAdapter
             _socket.ReadStart(_allocCallback, _readCallback, this);",Can we move this into `KestrelTrace`?,.cs,1,1,0
"@@ -82,6 +82,8 @@ MSG(object_does_not_provide_read_access_to_columns,
     ""Given object does not provide read access to columns"")
 MSG(object_does_not_provide_write_access_to_columns,
     ""Given object does not provide write access to columns"")
+MSG(object_does_not_provide_access_to_rows_or_columns,
+    ""Given object does not provide access to rows or columns"")
 MSG(unsupported_conversion_types, ""Unsupported conversion types"")
 MSG(row_indices_lt_min_value, ""Row indices are less than the minimum acceptable value"")
 MSG(row_indices_gt_max_value, ""Row indices are larger than the maximum acceptable value"")","Place it in some ""compatibility"" section?",cpp,1,1,0
"@@ -30,7 +30,7 @@ describe('cleanupPlugins', function() {
 	it('should throw if no audit is configured', function() {
 		assert.throws(
 			function() {
-				cleanupPlugins(document, {});
+				axe.cleanup(document, {});
 			},
 			Error,
 			/^No audit configured/",I think this file should be renamed to just cleanup.js,js,0,1,0
"@@ -15,12 +15,12 @@
 """"""Scanner for Enabled APIs.""""""
 
 import json
-import sys
 
 from google.cloud.forseti.common.gcp_type.project import Project
 from google.cloud.forseti.common.util import logger
 from google.cloud.forseti.scanner.audit import enabled_apis_rules_engine
 from google.cloud.forseti.scanner.scanners import base_scanner
+from google.cloud.forseti.common.util import errors as util_errors
 
 LOGGER = logger.get_logger(__name__)
 ",Can you please alpha-sort this import?,py,1,1,0
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -64,7 +64,7 @@ abstract class MergingSnapshotProducer<ThisT> extends SnapshotProducer<ThisT> {
   private static final Set<String> VALIDATE_DATA_FILES_EXIST_SKIP_DELETE_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.REPLACE);
   // delete files can be added in ""overwrite"" or ""delete"" operations
-  private static final Set<String> VALIDATE_REPLACED_DATA_FILES_OPERATIONS =
+  private static final Set<String> VALIDATE_ADDED_DELETE_FILES_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.DELETE);
 
   private final String tableName;",I renamed it to match `VALIDATE_ADDED_FILES_OPERATIONS `.,java,1,1,0
"@@ -55,6 +55,7 @@ final class ThumbnailCompilerPassTest extends TestCase
 
 final class TestUncallableAddResizerMethod
 {
+    // @phpstan-ignore-next-line
     private function addResizer(): void
     {
     }",Can you explain why ?,php,1,1,0
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -25,7 +25,8 @@ namespace Microsoft.Rest.Generator.CSharp.Azure
 
         public AzureCSharpCodeGenerator(Settings settings) : base(settings)
         {
-            _namer = new AzureCSharpCodeNamer();
+
+            _namer = new AzureCSharpCodeNamer(settings);
             IsSingleFileGenerationSupported = true;
             pageClasses = new Dictionary<KeyValuePair<string, string>, string>();
         }",Why an empty line,java,1,1,0
"@@ -0,0 +1,12 @@
+import sys
+import csv
+
+import psycopg2
+
+import config
+
+
+# NOT IMPLEMENTED
+
+def test_pairs():
+    pass",should we remove this file?,py,1,1,0
"@@ -174,6 +174,9 @@ class ElementPlot(BokehPlot, GenericElementPlot):
         default=None, class_=(util.basestring, TickFormatter, FunctionType), doc=""""""
         Formatter for ticks along the x-axis."""""")
 
+    x2rotation = param.Integer(default=None, bounds=(0, 360), doc=""""""
+        Rotation angle of the xticks."""""")
+
     _categorical = False
 
     # Declare which styles cannot be mapped to a non-scalar dimension",Rotation angle of _which_ xticks?,py,1,1,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -0,0 +1,9 @@
+<?php
+
+namespace Psalm\Issue;
+
+class InvalidTypeImport extends CodeIssue
+{
+    const ERROR_LEVEL = 7;
+    const SHORTCODE = 233;
+}","Not sure about the level, feel free to adjust.",php,1,1,0
"@@ -104,7 +104,7 @@ def check_for_software_updates(flash_message=False):
     :return: True if you have latest version, else False if you need to upgrade
              or None if server was not reachable.
     """"""
-    from invenio.config import CFG_VERSION
+    from invenio.version import __version__ as invenio_version
     from invenio.base.i18n import _
     try:
         find = re.compile('Invenio v[0-9]+.[0-9]+.[0-9]+(\-rc[0-9])?'",we can use `invenio.version` instead,py,1,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -22,7 +22,7 @@ import (
 
 func injectFoo() Foo {
 	// This non-call statement makes this an invalid injector.
-	 _ = 42
+	_ = 42
 	panic(wire.Build(provideFoo))
 }
 ","Note to reviewers: sorry, this is a random change from running `gofmt`.",go,0,1,0
"@@ -1,6 +1,7 @@
 // unit tests creating LAMMPS instances via the library interface
 
 #include ""lammps.h""
+#define LAMMPS_LIB_MPI 1
 #include ""library.h""
 #include <cstdio> // for stdin, stdout
 #include <mpi.h>",Should this be here?,cpp,1,1,0
"@@ -21,5 +21,6 @@ namespace Nethermind.Core.Specs.ChainSpecStyle
     public interface IChainSpecLoader
     {
         ChainSpec Load(byte[] data);
+        ChainSpec Load(string jsonData);
     }
 }",i remember there was a reason for which I had to make it byte[] only... I do not remember the exact reason. I think that not every implementation could provide a string (do not know why),.cs,1,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -41,6 +41,8 @@ LXQtMountPlugin::LXQtMountPlugin(const ILXQtPanelPluginStartupInfo &startupInfo)
 
     connect(mButton, &QToolButton::clicked, mPopup, &Popup::showHide);
     connect(mPopup, &Popup::visibilityChanged, mButton, &QToolButton::setDown);
+    // Note: postpone creation of the mDeviceAction to not fire it in startup time
+    QTimer::singleShot(0, this, &LXQtMountPlugin::settingsChanged);
 }
 
 LXQtMountPlugin::~LXQtMountPlugin()","@lxde/lxqt Do we want to fire the action (info, popup) on the panel startup or not?",cpp,0,1,0
"@@ -55,7 +55,7 @@ func ensureOrCreateDir(dir string) error {
         err := ensureDirExists(dir)
         if os.IsNotExist(err) {
                 log.Info(""[Directory config checker] "", ""Directory: "", dir, "" does not exit. Creating new one"")
-                return os.MkdirAll(dir, 0600)
+                return os.MkdirAll(dir, 0700)
         }
         return err
 }",Was is a debugged place??,go,0,0,0
"@@ -1376,8 +1376,6 @@ void DataReaderImpl::release_payload_pool()
 
     PoolConfig config = PoolConfig::from_history_attributes(history_.m_att);
     payload_pool_->release_history(config, true);
-
-    TopicPayloadPoolRegistry::release(payload_pool_);
 }
 
 ReturnCode_t DataReaderImpl::check_datasharing_compatible(",Shouldn't we do `payload_pool_.reset()` here ?,cpp,1,1,0
"@@ -318,7 +318,14 @@ public class ExecutionControllerUtils {
       jobLinkUrl = url.toString();
     } else {
       // If RM job link is invalid or has expired, fetch the job link from JHS or SHS.
-      if (exFlow.getExecutableNode(jobId).getType().equals(SPARK_JOB_TYPE)) {
+      final ExecutableNode node = exFlow.getExecutableNodePath(jobId);
+      if (node == null) {
+        logger.error(
+            ""Invalid job link. Job "" + jobId + "" doesn't exist in "" + exFlow.getExecutionId());
+        return null;
+      }
+
+      if (node.getType().equals(SPARK_JOB_TYPE)) {
         jobLinkUrl =
             azkProps.get(ConfigurationKeys.SPARK_HISTORY_SERVER_JOB_URL).replace
                 (APPLICATION_ID, applicationId);",In which scenario this is a possibility?,java,1,1,0
"@@ -145,3 +145,14 @@ def init():
     objreg.register('command-history', command_history)
     save_manager.add_saveable('command-history', command_history.save,
                               command_history.changed)
+
+
+def init_fprompt():
+    """"""Initialize the LimitLineParser storing the history.""""""
+    save_manager = objreg.get('save-manager')
+    fprompt_history = lineparser.LimitLineParser(
+        standarddir.data(), 'fprompt-history',
+        limit='completion.fprompt_history_max_items')
+    objreg.register('fprompt-history', fprompt_history)
+    save_manager.add_saveable('fprompt-history', fprompt_history.save,
+                              fprompt_history.changed)",No need to have a separate init function for this.,py,1,1,0
"@@ -19,4 +19,6 @@ exports.Date = require('./date');
 
 exports.ObjectId = require('./objectid');
 
+exports.ObjectId = require('./dbref');
+
 exports.Mixed = require('./mixed');",Should be `exports.DBRef` i guess.,js,1,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -1,16 +1,16 @@
 //  Copyright (c) 2018 Demerzel Solutions Limited
 //  This file is part of the Nethermind library.
-// 
+//
 //  The Nethermind library is free software: you can redistribute it and/or modify
 //  it under the terms of the GNU Lesser General Public License as published by
 //  the Free Software Foundation, either version 3 of the License, or
 //  (at your option) any later version.
-// 
+//
 //  The Nethermind library is distributed in the hope that it will be useful,
 //  but WITHOUT ANY WARRANTY; without even the implied warranty of
 //  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 //  GNU Lesser General Public License for more details.
-// 
+//
 //  You should have received a copy of the GNU Lesser General Public License
 //  along with the Nethermind. If not, see <http://www.gnu.org/licenses/>.
 ",I guess your IDE automatically edited these files?,.cs,1,1,0
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -40,8 +40,8 @@ TEST_F(OrderByTest, SyntaxError) {
         cpp2::ExecutionResponse resp;
         auto &player = players_[""Boris Diaw""];
         auto *fmt = ""GO FROM %ld OVER serve YIELD ""
-                    ""$^[player].name as name, serve.start_year as start, $$[team].name""
-                    ""| ORDER BY $-.$$[team].name"";
+                    ""$^player.name as name, serve.start_year as start, $$[team].name""
+                    ""| ORDER BY $-.$$team.name"";
         auto query = folly::stringPrintf(fmt, player.vid());
         auto code = client_->execute(query, resp);
         ASSERT_EQ(cpp2::ErrorCode::E_SYNTAX_ERROR, code);",$$[team].name or $$team.name,cpp,1,1,0
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -108,10 +108,11 @@ module Selenium
 
         def initialize(source, duration, x, y, element: nil, origin: nil)
           super(source)
+
           @duration = duration * 1000
           @x_offset = x
           @y_offset = y
-          @origin = element || origin
+          @origin = origin || POINTER
         end
 
         def type",Should be `@origin = element || origin || POINTER`,js,1,1,0
"@@ -0,0 +1,18 @@
+package org.openqa.selenium;
+
+/**
+ * Created by James Reed on 11/04/2016.
+ * Thrown to indicate that a click was attempted on an element but was intercepted by another
+ * element on top of it
+ */
+public class InterceptingElementException extends InvalidElementStateException {
+
+  public InterceptingElementException(String message) {
+    super(message);
+  }
+
+  public InterceptingElementException(String message, Throwable cause) {
+    super(message, cause);
+  }
+
+}",We keep who wrote the code anonymous.,js,1,1,0
"@@ -0,0 +1,9 @@
+<?php
+
+namespace Psalm\Issue;
+
+class InvalidTypeImport extends CodeIssue
+{
+    const ERROR_LEVEL = 7;
+    const SHORTCODE = 233;
+}","Not sure about the level, feel free to adjust.",php,1,1,0
"@@ -76,7 +76,7 @@ public class TestEdgeDriver extends RemoteWebDriver implements WebStorage, Locat
                 .findFirst().orElseThrow(WebDriverException::new);
 
         service = (EdgeDriverService) builder.withVerbose(true).withLogFile(logFile.toFile()).build();
-        LOG.info(""edgedriver will log to "" + logFile);
+        LOG.fine(""edgedriver will log to "" + logFile);
         service.start();
         Runtime.getRuntime().addShutdownHook(new Thread(() -> service.stop()));
       }",This is deliberately at this level.,py,1,1,0
"@@ -17,11 +17,15 @@ use Nette\Utils\Strings;
 class ErgoPrinter extends Printer
 {
     /**
+     * {@inheritdoc}
+     *
      * @var string
      */
     protected $indentation = '    ';
 
     /**
+     * {@inheritdoc}
+     *
      * @var int
      */
     protected $linesBetweenMethods = 1;",Why whithout type?,php,1,1,0
"@@ -246,7 +246,11 @@ public class IcebergPigInputFormat<T> extends InputFormat<Void, T> {
     private Object convertPartitionValue(Type type, Object value) {
       if (type.typeId() == Types.BinaryType.get().typeId()) {
         ByteBuffer buffer = (ByteBuffer) value;
-        return new DataByteArray(buffer.get(new byte[buffer.remaining()]).array());
+        byte[] bytes = new byte[buffer.remaining()];
+        buffer.get(bytes);
+        // Return the input buffer back to its original position.
+        buffer.position(buffer.position() - bytes.length);
+        return new DataByteArray(bytes);
       }
 
       return value;","I updated this one as you requested @rdblue, however I wasn't sure if I should return the input `value` to its original position (vs consuming the remainder of the byte buffer and moving the position to the end).",java,0,1,0
"@@ -3635,6 +3635,8 @@ static PropertyDefinition g_properties[] = {
     {""swift-module-search-paths"", OptionValue::eTypeFileSpecList, false, 0,
      nullptr, nullptr,
      ""List of directories to be searched when locating modules for Swift.""},
+    {""swift-create-module-contexts-in-parallel"", OptionValue::eTypeBoolean, false, true,
+     nullptr, nullptr, ""Create modules AST context in parallel.""},
     {""auto-import-clang-modules"", OptionValue::eTypeBoolean, false, true,
      nullptr, nullptr,
      ""Automatically load Clang modules referred to by the program.""},",`Create the per-module Swift AST contexts in parallel.` ?,cpp,1,0,0
"@@ -40,6 +40,12 @@
 -- @param _buttons The table of buttons that should bind to the widget.
 -- @function buttons
 
+--- Emit a signal and ensure all parent widgets in the hierarchies also
+-- forward the signal. This is useful to track signals when there is a dynamic
+-- set of containers and layouts wrapping the widget.
+-- @tparam string signal_name
+-- @param ... Other arguments
+-- @function emit_signal_recursive
 
 --- When the layout (size) change.
 -- This signal is emited when the previous results of `:layout()` and `:fit()`",This part seems to be in the wrong commit. The next commit adds this function.,c,0,1,0
"@@ -72,6 +72,18 @@ func (d *Dispatcher) Introspect() introspection.DispatcherStatus {
 			status.OutboundKey = outboundKey
 			outbounds = append(outbounds, status)
 		}
+		if o.Stream != nil {
+			var status introspection.OutboundStatus
+			if o, ok := o.Stream.(introspection.IntrospectableOutbound); ok {
+				status = o.Introspect()
+			} else {
+				status.Transport = ""Introspection not supported""
+			}
+			status.RPCType = ""stream""
+			status.Service = o.ServiceName
+			status.OutboundKey = outboundKey
+			outbounds = append(outbounds, status)
+		}
 	}
 	procedures := introspection.IntrospectProcedures(d.table.Procedures())
 	return introspection.DispatcherStatus{",gonna remove all introspection to add later if need be.,go,0,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -40,6 +40,9 @@ module Travis
             sh.cmd 'CURL_USER_AGENT=""Travis-CI $(curl --version | head -n 1)""'
             case config[:os]
             when 'linux'
+              if config[:julia] == 'nightly' && config[:arch] == 'arm64'
+                sh.failure 'Nightly Julia binaries are not available for AArch64'
+              end
               sh.cmd 'mkdir -p ~/julia'
               sh.cmd %Q{curl -A ""$CURL_USER_AGENT"" -s -L --retry 7 '#{julia_url}' } \
                        '| tar -C ~/julia -x -z --strip-components=1 -f -'",Is this a typo?,rb,1,1,0
"@@ -36,6 +36,7 @@ ReaderLocator::ReaderLocator(
     : owner_(owner)
     , locator_info_(max_unicast_locators, max_multicast_locators)
     , expects_inline_qos_(false)
+    , is_local_reader_(false)
     , guid_prefix_as_vector_(1u)
     , guid_as_vector_(1u)
 {",Field `local_reader_` should be initialized to `nullptr`,cpp,1,1,0
"@@ -130,14 +130,14 @@ func TestAttestorTestSuite(t *testing.T) {
 }
 
 func (s *AttestorTestSuite) linkAgentSVIDPath() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/agent_svid.der""),
                 s.config.SVIDCachePath)
         s.Require().NoError(err)
 }
 
 func (s *AttestorTestSuite) linkBundle() {
-        err := os.Link(
+        err := os.Symlink(
                 path.Join(util.ProjectRoot(), ""test/fixture/certs/bundle.der""),
                 s.config.BundleCachePath)
         s.Require().NoError(err)",Did you run into a problem with this?,go,1,1,0
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -1,9 +1,9 @@
 'use strict';
 
-const MongoError = require('../core').MongoError;
+const MongoError = require('../core/error').MongoError;
 const Aspect = require('./operation').Aspect;
 const OperationBase = require('./operation').OperationBase;
-const ReadPreference = require('../core').ReadPreference;
+const ReadPreference = require('../core/topologies/read_preference');
 const isRetryableError = require('../core/error').isRetryableError;
 const maxWireVersion = require('../core/utils').maxWireVersion;
 const isUnifiedTopology = require('../core/utils').isUnifiedTopology;",why the diff here?,js,1,1,0
"@@ -26,7 +26,7 @@ module Unix
         'puppetbin'        => '/opt/puppet/bin/puppet',
         'puppetbindir'     => '/opt/puppet/bin',
         'puppetsbindir'    => '/opt/puppet/sbin',
-        'systembindir'     => '/opt/puppet/bin',
+        'privatebindir'    => '/opt/puppet/bin',
         'puppetvardir'     => '/var/opt/lib/pe-puppet',
         'hieradatadir'     => '/var/lib/hiera',
         'hieraconf'        => '/etc/puppetlabs/puppet/hiera.yaml',","@kevpl I just noticed the PE default is wrong, it needs to be the same as AIO (/opt/puppetlabs/puppet/bin). Not an issue currently, but something we'll need to come back to.",rb,0,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -22,6 +22,10 @@ void wlr_texture_destroy(struct wlr_texture *texture) {
 struct wlr_texture *wlr_texture_from_pixels(struct wlr_renderer *renderer,
 		uint32_t fmt, uint32_t stride, uint32_t width, uint32_t height,
 		const void *data) {
+	assert(width > 0);
+	assert(height > 0);
+	assert(stride >= width);
+	assert(data);
 	return renderer->impl->texture_from_pixels(renderer, fmt, stride, width,
 		height, data);
 }",Maybe also assert that `stride > 0`?,c,1,1,0
"@@ -343,7 +343,7 @@ class GalleryController
             'csrf_protection' => false,
         ));
 
-        $form->bind($request);
+        $form->handleRequest($request);
 
         if ($form->isValid()) {
             $galleryHasMedia = $form->getData();",Not related to this PR. Please create a separate one.,php,0,1,0
"@@ -23,6 +23,8 @@ import javax.annotation.Nullable;
  */
 @AutoValue
 public abstract class InitFieldConfig {
+  private static String randomValueToken = ""$RANDOM"";
+
   public abstract String fieldPath();
 
   @Nullable",Should this be final?,java,1,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -319,7 +319,8 @@ void setHydrogenCoords(ROMol *mol, unsigned int hydIdx, unsigned int heavyIdx) {
 }  // end of unnamed namespace
 
 namespace MolOps {
-void addHs(RWMol &mol, bool explicitOnly, bool addCoords) {
+void addHs(RWMol &mol, bool explicitOnly, bool addCoords,
+           const UINT_VECT *onlyOnAtoms) {
   // when we hit each atom, clear its computed properties
   // NOTE: it is essential that we not clear the ring info in the
   // molecule's computed properties.  We don't want to have to",Would a bit vector make more sense here?,cpp,1,1,0
"@@ -176,8 +176,8 @@ def add_arguments_to_parser(parser):
 
     analyzer_opts.add_argument('--add-compiler-defaults',
                                action='store_true',
-                               default=False,
                                required=False,
+                               default=argparse.SUPPRESS,
                                help=""Retrieve compiler-specific configuration ""
                                     ""from the compilers themselves, and use ""
                                     ""them with Clang. This is used when the """,Why do we need this change?,c,1,1,0
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -105,8 +105,7 @@ public class RegionStoreClient extends AbstractGRPCClient<TikvBlockingStub, Tikv
   // lockResolverClient, after implements the
   // write implementation of tispark, we can change
   // it to private
-  @VisibleForTesting
-  public final LockResolverClient lockResolverClient;
+  @VisibleForTesting public final LockResolverClient lockResolverClient;
   private TikvBlockingStub blockingStub;
   private TikvStub asyncStub;
 ",please undo this change,java,1,1,0
"@@ -62,7 +62,7 @@ namespace Microsoft.DotNet.Build.Tasks.Packaging
                 return false;
             }
 
-            if (PackageIndexes != null || PackageIndexes.Length > 0)
+            if (PackageIndexes != null && PackageIndexes.Length > 0)
             {
                 PackageIndex.Current.Merge(PackageIndexes.Select(pi => pi.GetMetadata(""FullPath"")));
             }",Can you instead change this to &&,.cs,1,1,0
"@@ -87,10 +87,19 @@ var creatablesMigration = []string{
 	`ALTER TABLE assetcreators ADD COLUMN ctype INTEGER DEFAULT 0`,
 }
 
+var createOnlineAccountIndex = []string{
+	`ALTER TABLE accountbase
+		ADD COLUMN normalizedonlinebalance INTEGER`,
+	`CREATE INDEX IF NOT EXISTS onlineaccountbals
+		ON accountbase ( normalizedonlinebalance, address, data )
+		WHERE normalizedonlinebalance>0`,
+}
+
 var accountsResetExprs = []string{
 	`DROP TABLE IF EXISTS acctrounds`,
 	`DROP TABLE IF EXISTS accounttotals`,
 	`DROP TABLE IF EXISTS accountbase`,
+	`DROP TABLE IF EXISTS onlineaccountbase`,
 	`DROP TABLE IF EXISTS assetcreators`,
 	`DROP TABLE IF EXISTS storedcatchpoints`,
 	`DROP TABLE IF EXISTS catchpointstate`,","this line can be dropped, right ?",go,1,1,0
"@@ -86,8 +86,14 @@ public class InitCodeTransformer {
 
   private final ImportSectionTransformer importSectionTransformer;
 
-  // Whether the initialization code should include user-facing comments like TODOs. This should be
-  // false if the initialization code is being used to generate tests, rather than code samples.
+  // Whether the initialization code should include hardcoded comments like TODOs. This
+  // should only be true when generating incode samples.
+  //
+  // This field should be set to false when generating tests because tests do not need to include
+  // user facing comments.
+  //
+  // This field should be set to false when generating standalone samples because comments in
+  // standalone samples are derived from user configurations, not hardcoded.
   private final boolean generateUserFacingComments;
 
   public InitCodeTransformer() {","nits here and below: ""hard-coded"" ""in-code""",java,1,1,0
"@@ -184,6 +184,8 @@ namespace OpenTelemetry.Instrumentation.Http.Implementation
                     HttpInstrumentationEventSource.Log.EnrichmentException(ex);
                 }
 
+                activity.RecordException(exc);
+
                 if (exc is HttpRequestException)
                 {
                     if (exc.InnerException is SocketException exception)",lets discuss and do this in separate PR.,.cs,0,1,0
"@@ -37,6 +37,18 @@ func (f *CreateRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) bin
         return validate(errs, ctx.Data, f, ctx.Locale)
 }
 
+type ConvertRepoForm struct {
+        Uid         int64  `binding:""Required""`
+        RepoId      int64  `binding:""Required""`
+        RepoName    string `binding:""Required;AlphaDashDot;MaxSize(100)""`
+        Private     bool
+        Description string `binding:""MaxSize(255)""`
+}
+
+func (f *ConvertRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) binding.Errors {
+        return validate(errs, ctx.Data, f, ctx.Locale)
+}
+
 type MigrateRepoForm struct {
         CloneAddr    string `json:""clone_addr"" binding:""Required""`
         AuthUsername string `json:""auth_username""`",Why do you need this?,go,1,1,0
"@@ -346,6 +346,19 @@ const std::string GetMolFileAliasInfo(const RWMol &mol) {
   return ss.str();
 }
 
+const std::string GetMolFilePXAInfo(const RWMol &mol) {
+  std::string res;
+  unsigned int nEntries = 0;
+  for (const auto atom : mol.atoms()) {
+    if (atom->hasProp(""_MolFile_PXA"")) {
+      nEntries += 1;
+      res +=
+          boost::str(boost::format(""M  PXA % 3d%s\n"") % (atom->getIdx() + 1) %
+                     atom->getProp<std::string>(""_MolFile_PXA""));
+    }
+  }
+  return res;
+}
 const std::string GetMolFileZBOInfo(const RWMol &mol) {
   std::stringstream res;
   std::stringstream ss;","This variable is set, but never used.",cpp,1,1,0
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -1,6 +1,7 @@
 // unit tests creating LAMMPS instances via the library interface
 
 #include ""lammps.h""
+#define LAMMPS_LIB_MPI 1
 #include ""library.h""
 #include <cstdio> // for stdin, stdout
 #include <mpi.h>",Should this be here?,cpp,1,1,0
"@@ -28,7 +28,17 @@ void LMDB::Open(const string& source, Mode mode) {
   }
   int flags = 0;
   if (mode == READ) {
-    flags = MDB_RDONLY | MDB_NOTLS;
+    // No locking, assume DB is not written to at the same time, otherwise
+    // LMDB tries to lock the file, which fails if filesystem is read-only
+    flags = MDB_RDONLY | MDB_NOTLS | MDB_NOLOCK;
+  }
+  // Allow DB to be stand-alone file
+  {
+    struct stat st_buf;
+    stat(source.c_str(), &st_buf);
+    if (S_ISREG(st_buf.st_mode)) {
+      flags |= MDB_NOSUBDIR;
+    }
   }
   MDB_CHECK(mdb_env_open(mdb_env_, source.c_str(), flags, 0664));
   LOG(INFO) << ""Opened lmdb "" << source;",You should check the return value of stat(2).,cpp,1,1,0
"@@ -220,7 +220,7 @@ class JsGenerator : public BaseGenerator {
        it != sorted_namespaces.end(); it++) {
     if (lang_.language == IDLOptions::kTs) {
       if (it->find('.') == std::string::npos) {
-        code += ""import { flatbuffers } from \""./flatbuffers\""\n"";
+        code += ""import { flatbuffers } from \""flatbuffers\""\n"";
         break;
       }
     } else {",Why is this? What effect will this have on other users? @krojew @JoshGalvin,java,0,0,0
"@@ -108,10 +108,11 @@ module Selenium
 
         def initialize(source, duration, x, y, element: nil, origin: nil)
           super(source)
+
           @duration = duration * 1000
           @x_offset = x
           @y_offset = y
-          @origin = element || origin
+          @origin = origin || POINTER
         end
 
         def type",Should be `@origin = element || origin || POINTER`,js,1,1,0
"@@ -96,6 +96,16 @@ class ConfigQuery extends BaseConfigQuery
         return self::read('rewriting_enable') == 1;
     }
 
+    public static function isSeoTransliteratorEnable()
+    {
+        return self::read('enable_seo_transliterator') == 1;
+    }
+
+    public static function isEndingWithHtml()
+    {
+        return self::read('enable_html_ending_in_urls') == 1;
+    }
+
     public static function getPageNotFoundView()
     {
         return self::read('page_not_found_view', '404.html');",`isUrlHtmlEndingEnabled` is better,php,1,1,0
"@@ -651,9 +651,7 @@ class Algebra
 
                         $new_clause = new Clause(
                             $new_clause_possibilities,
-                            $clause->creating_conditional_id === $grouped_clause->creating_conditional_id
-                                ? $clause->creating_conditional_id
-                                : $grouped_clause->creating_conditional_id,
+                            $grouped_clause->creating_conditional_id,
                             $clause->creating_object_id,
                             false,
                             true,",On the first glance this doesn't look like exact equivalent.,php,1,1,0
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -220,6 +220,12 @@ _options = [
             ""'plotting.sample_ratio' should be 1.0 >= value >= 0.0."",
         ),
     ),
+    Option(
+        key=""plotting.backend"",
+        doc=(""Backend to use for plotting. Default is matplotlib.""),
+        default=""matplotlib"",
+        types=str,
+    ),
 ]  # type: List[Option]
 
 _options_dict = dict(zip((option.key for option in _options), _options))  # type: Dict[str, Option]",Could you add a list of currently supported backends?,py,1,1,0
"@@ -47,7 +47,7 @@ bool legacy_crtc_set_cursor(struct wlr_drm_backend *drm,
 
         if (drmModeSetCursor(drm->fd, crtc->id, gbm_bo_get_handle(bo).u32,
                         plane->surf.width, plane->surf.height)) {
-                wlr_log_errno(L_ERROR, ""Failed to set hardware cursor"");
+                wlr_log_errno(L_DEBUG, ""Failed to set hardware cursor"");
                 return false;
         }
 ",Added an unrelated fix here,c,0,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -1,9 +1,9 @@
 'use strict';
 
-const MongoError = require('../core').MongoError;
+const MongoError = require('../core/error').MongoError;
 const Aspect = require('./operation').Aspect;
 const OperationBase = require('./operation').OperationBase;
-const ReadPreference = require('../core').ReadPreference;
+const ReadPreference = require('../core/topologies/read_preference');
 const isRetryableError = require('../core/error').isRetryableError;
 const maxWireVersion = require('../core/utils').maxWireVersion;
 const isUnifiedTopology = require('../core/utils').isUnifiedTopology;",why the diff here?,js,1,1,0
"@@ -23,6 +23,15 @@ void wlr_renderer_end(struct wlr_renderer *r) {
         r->impl->end(r);
 }
 
+void wlr_renderer_clear(struct wlr_renderer *r, float red, float green,
+                float blue, float alpha) {
+        r->impl->clear(r, red, green, blue, alpha);
+}
+
+void wlr_renderer_scissor(struct wlr_renderer *r, struct wlr_box *box) {
+        r->impl->scissor(r, box);
+}
+
 struct wlr_texture *wlr_render_texture_create(struct wlr_renderer *r) {
         return r->impl->texture_create(r);
 }",Check for null,c,1,1,0
"@@ -767,15 +767,7 @@ func TestStatelessExportKind(t *testing.T) {
 
 // What works single-threaded should work multi-threaded
 func runMetricExportTests(t *testing.T, opts []ExporterOption, rs []record, expected []metricpb.ResourceMetrics) {
-	t.Run(""1 goroutine"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(1))...), rs, expected)
-	})
-	t.Run(""20 goroutines"", func(t *testing.T) {
-		runMetricExportTest(t, NewUnstartedExporter(append(opts[:len(opts):len(opts)], WorkerCount(20))...), rs, expected)
-	})
-}
-
-func runMetricExportTest(t *testing.T, exp *Exporter, rs []record, expected []metricpb.ResourceMetrics) {
+	exp := NewUnstartedExporter(opts...)
 	msc := &metricsServiceClientStub{}
 	exp.metricExporter = msc
 	exp.started = true",This outside function is likely not needed anymore.,go,1,1,0
"@@ -498,6 +498,7 @@ void Sol2ScriptingEnvironment::ProcessElements(
         [&](const tbb::blocked_range<std::size_t> &range) {
             ExtractionNode result_node;
             ExtractionWay result_way;
+            std::vector<boost::optional<InputRestrictionContainer>> result_res;
             auto &local_context = this->GetSol2Context();
 
             for (auto x = range.begin(), end = range.end(); x != end; ++x)",Remove the `optional`.,cpp,1,1,0
"@@ -1,5 +1,6 @@
 <?php namespace Backend\Models;
 
+use BackendAuth;
 use Mail;
 use Event;
 use Backend;",Move the backend auth use statement below the backend use statement please,php,1,1,0
"@@ -61,7 +61,9 @@
     <article>
       <figure id=""bullet-3"" class=""journey-bullet"">3.</figure>
       <h2>Enroll in premium, hands-on video tutorials</h2>
-      <p>Our video tutorials are more than just video tutorials. You&rsquo;ll build real apps and communicate directly with a thoughtbot developer or designer. Begin an online video tutorial as soon as you sign up.</p>
+      <p>Our video tutorials go beyond passive learning. You&rsquo;ll build
+      real apps and communicate directly with a thoughtbot developer or
+      designer. You can begin one as soon as you sign up.</p>
     </article>
     <figure class=""supporting-visual two-stacked"">
       <div>",`You can begin as soon as you sign up.`?,rb,1,0,0
"@@ -1276,6 +1276,7 @@ func (api *Server) getLogsInBlock(filter *LogFilter, start, count uint64) ([]*io
 	return logs, nil
 }
 
+// TODO: Since GasConsumed on the receipt may not be enough for the gas limit, we use binary search for the gas estimate. Need a better way to address it later.
 func (api *Server) estimateActionGasConsumptionForExecution(exec *iotextypes.Execution, sender string) (*iotexapi.EstimateActionGasConsumptionResponse, error) {
 	sc := &action.Execution{}
 	if err := sc.LoadProto(exec); err != nil {",line is 160 characters (from `lll`),go,1,1,0
"@@ -35,13 +35,13 @@ public class BaseSuite {
   public static ExternalResource testEnvironment = new ExternalResource() {
     @Override
     protected void before() {
-      log.info(""Preparing test environment"");
+      log.finest(""Preparing test environment"");
       GlobalTestEnvironment.get(SeleniumTestEnvironment.class);
       System.setProperty(""webdriver.remote.shorten_log_messages"", ""true"");
     }
     @Override
     protected void after() {
-      log.info(""Cleaning test environment"");
+      log.finest(""Cleaning test environment"");
       TestEnvironment environment = GlobalTestEnvironment.get();
       if (environment != null) {
         environment.stop();",This is in test code: understanding what we're doing is important in this context.,rb,1,1,0
"@@ -12,6 +12,9 @@
 
 #include <inttypes.h>
 #include <argz.h>
+#include <assert.h>
+
+#include ""src/common/libidset/idset.h""
 
 static int internal_comms_info (optparse_t *p, int ac, char *av[])
 {","commit message could use a bit more :-) Wasn't entirely clear what the ""up"" subcommand was initially.",c,0,1,0
"@@ -5,7 +5,7 @@ if (ariaHeadingLevel !== null) {
 	return true;
 }
 
-var headingLevel = node.tagName.match(/H(\d)/);
+var headingLevel = node.nodeName.match(/H(\d)/);
 
 if (headingLevel) {
 	this.data(parseInt(headingLevel[1], 10));",do you need `toUpperCase()` here?,js,1,1,0
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -116,6 +116,11 @@ namespace OpenTelemetry.Trace
                 + ""}"";
         }
 
+        public override Type GetType()
+        {
+            return this.GetType();
+        }
+
         /// <inheritdoc/>
         public override TReturn Match<TReturn>(
             Func<string, TReturn> stringFunction,",is this needed?,.cs,1,0,0
"@@ -40,6 +40,12 @@
 -- @param _buttons The table of buttons that should bind to the widget.
 -- @function buttons
 
+--- Emit a signal and ensure all parent widgets in the hierarchies also
+-- forward the signal. This is useful to track signals when there is a dynamic
+-- set of containers and layouts wrapping the widget.
+-- @tparam string signal_name
+-- @param ... Other arguments
+-- @function emit_signal_recursive
 
 --- When the layout (size) change.
 -- This signal is emited when the previous results of `:layout()` and `:fit()`",This part seems to be in the wrong commit. The next commit adds this function.,c,0,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -37,6 +37,12 @@ module Selenium
         def bridge_class
           Bridge
         end
+
+        def print_page(**options)
+          options[:page_ranges] &&= Array(options[:page_ranges])
+
+          bridge.print_page(options)
+        end
       end # Driver
     end # Firefox
   end # WebDriver",Same here. and all others.,java,0,1,0
"@@ -1040,7 +1040,9 @@ luaA_screen_module_index(lua_State *L)
             foreach(output, (*screen)->outputs)
                 if(A_STREQ(output->name, name))
                     return luaA_object_push(L, *screen);
-        luaL_error(L, ""Unknown screen output name: %s"", name);
+        luaA_warn(L, ""Unknown screen output name: %s"", name);
+        lua_pushnil(L);
+        return 1;
     }
 
     return luaA_object_push(L, luaA_checkscreen(L, 2));",mb still print the warning?,c,1,0,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -25,7 +25,8 @@ namespace Microsoft.Rest.Generator.CSharp.Azure
 
         public AzureCSharpCodeGenerator(Settings settings) : base(settings)
         {
-            _namer = new AzureCSharpCodeNamer();
+
+            _namer = new AzureCSharpCodeNamer(settings);
             IsSingleFileGenerationSupported = true;
             pageClasses = new Dictionary<KeyValuePair<string, string>, string>();
         }",Why an empty line,java,1,1,0
"@@ -65,10 +65,6 @@ class Product < ActiveRecord::Base
     type.underscore
   end
 
-  def fulfilled_with_github?
-    github_team.present?
-  end
-
   def to_aside_partial
     ""#{self.class.name.underscore.pluralize}/aside""
   end","This was actually unused on `master`, so I removed it instead of fixing it with this change.",rb,0,1,0
"@@ -181,7 +181,9 @@ class DataFrameConversionTest(ReusedSQLTestCase, SQLTestUtils, TestUtils):
         self.assert_eq(kdf.to_latex(sparsify=False), pdf.to_latex(sparsify=False))
         self.assert_eq(kdf.to_latex(index_names=False), pdf.to_latex(index_names=False))
         self.assert_eq(kdf.to_latex(bold_rows=True), pdf.to_latex(bold_rows=True))
-        self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
+        # TODO: error in pandas >= 1.0.0:
+        # `ValueError: buf is not a file name and encoding is specified.`
+        # self.assert_eq(kdf.to_latex(encoding='ascii'), pdf.to_latex(encoding='ascii'))
         self.assert_eq(kdf.to_latex(decimal=','), pdf.to_latex(decimal=','))
 
     def test_to_records(self):",Can we fix this case to match with pandas 1.0.0?,py,1,1,0
"@@ -40,6 +40,12 @@ public abstract class MethodDescriptorView {
 
   public abstract List<HeaderRequestParamView> headerRequestParams();
 
+  @Nullable
+  public abstract String requestFormatterName();
+
+  @Nullable
+  public abstract String responseFormatterName();
+
   public boolean hasHeaderRequestParams() {
     return headerRequestParams() != null && !headerRequestParams().isEmpty();
   }","These names aren't needed any more, right?",java,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_training = (coeff_pred[0].dim() == 4)
+
         # Training state
-        if self.training:
+        if is_training:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",use another name rather than is_training.,py,1,1,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -29,13 +29,13 @@ import java.util.Map;
  * Iteration order is not specified.
  * @lucene.internal
  */
-final class Multiset<T> extends AbstractCollection<T> {
+public final class Multiset<T> extends AbstractCollection<T> {
 
   private final Map<T, Integer> map = new HashMap<>();
   private int size;
 
   /** Create an empty {@link Multiset}. */
-  Multiset() {
+  public Multiset() {
     super();
   }
 ",This is used in o.a.l.sandbox.search.CoveringQuery.,java,1,1,0
"@@ -57,12 +57,10 @@ int Tree::Split(int leaf, int feature, int real_feature, uint32_t threshold_bin,
   decision_type_[new_node_idx] = 0;
   SetDecisionType(&decision_type_[new_node_idx], false, kCategoricalMask);
   SetDecisionType(&decision_type_[new_node_idx], default_left, kDefaultLeftMask);
-  if (missing_type == MissingType::None) {
-    SetMissingType(&decision_type_[new_node_idx], 0);
-  } else if (missing_type == MissingType::Zero) {
-    SetMissingType(&decision_type_[new_node_idx], 1);
-  } else if (missing_type == MissingType::NaN) {
-    SetMissingType(&decision_type_[new_node_idx], 2);
+  if (missing_type == MissingType::None
+      || missing_type == MissingType::Zero
+      || missing_type == MissingType::NaN) {
+    SetMissingType(&decision_type_[new_node_idx], missing_type);
   }
   threshold_in_bin_[new_node_idx] = threshold_bin;
   threshold_[new_node_idx] = threshold_double;",I think this `if` could be removed,cpp,1,1,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -33,6 +33,18 @@ public class TransactionPoolOptions
   private static final String ETH65_TX_ANNOUNCED_BUFFERING_PERIOD_FLAG =
       ""--Xeth65-tx-announced-buffering-period-milliseconds"";
 
+  private static final String STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG =
+      ""--strict-tx-replay-protection-enabled"";
+
+  @CommandLine.Option(
+      names = {STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG},
+      paramLabel = ""<Boolean>"",
+      description =
+          ""Require transactions submitted via JSON-RPC to use replay protection in accordance with EIP-155 (default: ${DEFAULT-VALUE})"",
+      fallbackValue = ""true"",
+      arity = ""0..1"")
+  private Boolean strictTxReplayProtectionEnabled = false;
+
   @CommandLine.Option(
       names = {TX_MESSAGE_KEEP_ALIVE_SEC_FLAG},
       paramLabel = ""<INTEGER>"",","Ah, so it IS unstable already. Cool, lets prefix with X.",java,1,0,0
"@@ -107,6 +107,13 @@ import javax.ws.rs.WebApplicationException;
 import javax.ws.rs.core.Response;
 import static javax.ws.rs.core.Response.Status.BAD_REQUEST;
 import javax.ws.rs.core.StreamingOutput;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
+import static edu.harvard.iq.dataverse.util.json.JsonPrinter.json;
 
 /*
     Custom API exceptions [NOT YET IMPLEMENTED]",Looks like glassfish went a bit nuts doing a refactor,java,1,0,0
"@@ -428,6 +428,12 @@ void encodeVectorTile(const datafacade::ContiguousInternalMemoryDataFacadeBase &
                 const auto &edge = edges[edge_index];
                 const auto geometry_id = get_geometry_id(edge);
 
+                // Get coordinates for start/end nodes of segment (NodeIDs u and v)
+                const auto a = facade.GetCoordinateOfNode(edge.u);
+                const auto b = facade.GetCoordinateOfNode(edge.v);
+                // Calculate the length in meters
+                const double length = osrm::util::coordinate_calculation::haversineDistance(a, b);
+
                 // Weight values
                 const auto forward_weight_vector =
                     facade.GetUncompressedForwardWeights(geometry_id);","when trying to refactor this I thought about this line a bit. It adds some overhead for calculating the distances. Whats is you opinion here @danpat on the potential slowdown? I feel it might be alright, but I am not entirely sure. (This length calculation is already happening further down as well)",cpp,0,1,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -59,11 +59,10 @@ func (b3 B3) Inject(ctx context.Context, supplier propagation.HTTPSupplier) {
 	if b3.SingleHeader {
 		sampled := sc.TraceFlags & core.TraceFlagsSampled
 		supplier.Set(B3SingleHeader,
-			fmt.Sprintf(""%s-%.16x-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
+			fmt.Sprintf(""%s-%s-%.1d"", sc.TraceIDString(), sc.SpanID, sampled))
 	} else {
 		supplier.Set(B3TraceIDHeader, sc.TraceIDString())
-		supplier.Set(B3SpanIDHeader,
-			fmt.Sprintf(""%.16x"", sc.SpanID))
+		supplier.Set(B3SpanIDHeader, sc.SpanID.String())
 
 		var sampled string
 		if sc.IsSampled() {",Is TraceIDString now duplicative?,go,1,1,0
"@@ -294,6 +294,13 @@ Query.prototype.cast = function (model, obj) {
               continue;
             }
 
+            if ('$regex' === $cond) {
+              if ('RegExp' !== nested.constructor.name) {
+                throw new Error(""$type parameter must be RegExp"");
+              }
+              continue;
+            }
+
             if ('$not' === $cond) {
               this.cast(model, nested);
             } else {",we should probably cast strings to regexps here.,js,1,1,0
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -29,14 +29,14 @@ def test_config_build_detector():
     from mmdet.models import build_detector
 
     config_dpath = _get_config_directory()
-    print('Found config_dpath = {!r}'.format(config_dpath))
+    print(f'Found config_dpath = {config_dpath!r}')
 
     import glob
     config_fpaths = list(glob.glob(join(config_dpath, '**', '*.py')))
     config_fpaths = [p for p in config_fpaths if p.find('_base_') == -1]
     config_names = [relpath(p, config_dpath) for p in config_fpaths]
 
-    print('Using {} config files'.format(len(config_names)))
+    print(f'Using {len(config_names)} config files')
 
     for config_fname in config_names:
         config_fpath = join(config_dpath, config_fname)",The `!r` is unnecessary.,py,1,1,0
"@@ -689,8 +689,15 @@ class YOLACTProtonet(BaseModule):
         prototypes = prototypes.permute(0, 2, 3, 1).contiguous()
 
         num_imgs = x.size(0)
-        # Training state
-        if self.training:
+
+        # The reason for not using self.is_training is that
+        # val workflow will have a dimension mismatch error.
+        # Note that this writing method is very tricky.
+        # Fix https://github.com/open-mmlab/mmdetection/issues/5978
+        is_train_or_val_workflow = (coeff_pred[0].dim() == 4)
+
+        # Train or val workflow
+        if is_train_or_val_workflow:
             coeff_pred_list = []
             for coeff_pred_per_level in coeff_pred:
                 coeff_pred_per_level = \",self.is_training or self.training?,py,1,1,0
"@@ -1,6 +1,7 @@
 <div class=""row"">
   <div class=""col-md-12"">
     <h1>Usage statistics</h1>
+    <p><%= _('Use the filters to generate organisational usage statistics for a custom date range. The graphs display new users and plans for your organisation over the past year. You can download a CSV report for each graph.') %></p>
   </div>
 </div>
 <div class=""row"">","this hint should help to mitigate any confusion, nite to see it",rb,1,1,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -7,7 +7,7 @@ csp_policy = {
   :form_action => %w['self'],
   :frame_ancestors => %w['self'],
   :frame_src => %w['self'],
-  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr],
+  :img_src => %w['self' data: www.gravatar.com *.wp.com tile.openstreetmap.org *.tile.openstreetmap.org *.tile.thunderforest.com tileserver.memomaps.de *.openstreetmap.fr *.global.ssl.fastly.net],
   :manifest_src => %w['self'],
   :media_src => %w['none'],
   :object_src => %w['self'],",I'd make this an override in the `embed` method of the export controller rather than enabling it globally.,rb,0,1,0
"@@ -26,9 +26,19 @@ namespace Datadog.Trace
         private readonly CultureInfo _invariantCulture = CultureInfo.InvariantCulture;
         private readonly IDatadogLogger _log = DatadogLogging.GetLoggerFor<SpanContextPropagator>();
         private readonly ConcurrentDictionary<Key, string?> _defaultTagMappingCache = new();
+        private readonly Func<IReadOnlyDictionary<string, string?>?, string, IEnumerable<string?>> _readOnlyDictionaryValueGetterDelegate;
 
         private SpanContextPropagator()
         {
+            IEnumerable<string?> ReadOnlyDictionaryValueGetter(IReadOnlyDictionary<string, string?>? carrier, string name)
+            {
+                if (carrier != null && carrier.TryGetValue(name, out var value))
+                {
+                    yield return value;
+                }
+            }
+
+            _readOnlyDictionaryValueGetterDelegate = ReadOnlyDictionaryValueGetter;
         }
 
         public static SpanContextPropagator Instance { get; } = new();",TODO: `yield return value` or `return new[] { value }`?,.cs,0,1,0
"@@ -260,9 +260,9 @@ func (d decoder) MapLen() (int, bool) {
 	return len(d.av.M), true
 }
 
-func (d decoder) DecodeMap(f func(key string, vd driver.Decoder) bool) {
+func (d decoder) DecodeMap(f func(key string, vd driver.Decoder, exactMatch bool) bool) {
 	for k, av := range d.av.M {
-		if !f(k, decoder{av}) {
+		if !f(k, decoder{av}, true) {
 			break
 		}
 	}",why not use `exactMatch` here?,go,1,1,0
"@@ -29,7 +29,6 @@ import org.apache.iceberg.Table;
 import org.apache.iceberg.TableMetadata;
 import org.apache.iceberg.TableOperations;
 import org.apache.iceberg.actions.BaseExpireSnapshotsActionResult;
-import org.apache.iceberg.actions.BaseSparkAction;
 import org.apache.iceberg.actions.ExpireSnapshots;
 import org.apache.iceberg.exceptions.NotFoundException;
 import org.apache.iceberg.exceptions.ValidationException;",Unrelated to this PR? Not a big deal might as well get it in though.,java,0,1,0
"@@ -0,0 +1,11 @@
+(() => {
+  const docusaurusVersions = ['9.0'];
+  const legacyVersions = ['8.3.0', '8.2.0', '8.1.0', '8.0.0', '7.4.2', '7.4.1', '7.4.0', '7.3.0', '7.2.2', '7.2.1', '7.2.0', '7.1.1', '7.1.0', '7.0.3', '7.0.2', '7.0.1', '7.0.0', '6.2.2', '6.2.1', '6.2.0', '6.1.1', '6.1.0', '6.0.1', '6.0.0', '5.0.2', '5.0.1', '5.0.0', '4.0.0', '3.0.0', '2.0.0', ['1.18.1', '0.38.1'], ['1.18.0', '0.38.0'], ['1.17.0', '0.37.0'], ['1.16.0', '0.36.0'], ['1.15.1', '0.35.1'], ['1.15.0', '0.35.0'], ['1.14.3', '0.34.3'], ['1.14.2', '0.34.2'], ['1.14.1', '0.34.1'], ['1.14.0', '0.34.0']];
+  const versions = [...docusaurusVersions, ...legacyVersions];
+
+  if (window.location.hostname === 'dev.handsontable.com') {
+    versions.unshift('next');
+  }
+
+  docVersions && docVersions(versions);
+})();","probably redundant file, please verify",js,1,1,0
"@@ -269,6 +269,13 @@ def set_rate_limits(per_token_limit, per_ip_limit, window_size):
         set_rate_limits(per_token_limit, per_ip_limit, window_size)
 
 
+@cli.command(name=""update_all_user_listen_counts"")
+def update_all_user_listen_counts():
+    """""" Scans listen table and update listen counts for all users """"""
+    application = webserver.create_app()
+    with application.app_context():
+        ts_update_user_listen_counts()
+
 @cli.command(name=""recalculate_all_user_data"")
 def recalculate_all_user_data():
     """"""",Could use updating.,py,1,1,0
"@@ -37,6 +37,18 @@ func (f *CreateRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) bin
         return validate(errs, ctx.Data, f, ctx.Locale)
 }
 
+type ConvertRepoForm struct {
+        Uid         int64  `binding:""Required""`
+        RepoId      int64  `binding:""Required""`
+        RepoName    string `binding:""Required;AlphaDashDot;MaxSize(100)""`
+        Private     bool
+        Description string `binding:""MaxSize(255)""`
+}
+
+func (f *ConvertRepoForm) Validate(ctx *macaron.Context, errs binding.Errors) binding.Errors {
+        return validate(errs, ctx.Data, f, ctx.Locale)
+}
+
 type MigrateRepoForm struct {
         CloneAddr    string `json:""clone_addr"" binding:""Required""`
         AuthUsername string `json:""auth_username""`",Why do you need this?,go,1,1,0
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -140,8 +140,8 @@ type Config struct {
         PrometheusMetricsEnabled bool `config:""bool;false""`
         PrometheusMetricsPort    int  `config:""int(0,65535);9091""`
 
-        FailsafeInboundHostPorts  []uint16 `config:""port-list;22;die-on-fail""`
-        FailsafeOutboundHostPorts []uint16 `config:""port-list;2379,2380,4001,7001;die-on-fail""`
+        FailsafeInboundHostPorts  []ProtoPort `config:""port-list;tcp:22,udp:68;die-on-fail""`
+        FailsafeOutboundHostPorts []ProtoPort `config:""port-list;tcp:2379,tcp:2380,tcp:4001,tcp:7001,udp:53,udp:67;die-on-fail""`
 
         UsageReportingEnabled bool   `config:""bool;true""`
         ClusterGUID           string `config:""string;baddecaf""`",Not a big fan of this format. We also need to update the docs - can you link me to that PR when it's ready? It should probably explain the reason for each port being included as well.,c,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -3,7 +3,7 @@ FactoryGirl.define do
 
   factory :api_token do
     access_token
-    step
+    step { create(:approval_step) }
     expires_at { Time.current + 7.days }
   end
 end",this is the actual fix?,rb,1,1,0
"@@ -226,7 +226,7 @@ void ValidationStateTracker::PreCallRecordCmdClearColorImage(VkCommandBuffer com
                                                              uint32_t rangeCount, const VkImageSubresourceRange *pRanges) {
     if (disabled[command_buffer_state]) return;
 
-    auto cb_node = Get<CMD_BUFFER_STATE>(commandBuffer);
+    auto cb_node = GetWrite<CMD_BUFFER_STATE>(commandBuffer);
     if (cb_node) {
         cb_node->RecordTransferCmd(CMD_CLEARCOLORIMAGE, Get<IMAGE_STATE>(image));
     }",All get writes this file. Same split lock concern.,cpp,0,0,0
"@@ -269,6 +269,7 @@ bool nano::mdb_store::do_upgrades (nano::write_transaction & transaction_a, bool
                 case 17:
                         upgrade_v17_to_v18 (transaction_a);
                         needs_vacuuming = true;
+                        // Upgrades to v19 & v20 are both part of the v22 node release
                 case 18:
                         upgrade_v18_to_v19 (transaction_a);
                         needs_vacuuming = true;",Should we start using [[fallthrough]]; ?,cpp,1,1,0
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -7710,9 +7710,9 @@ defaultdict(<class 'list'>, {'col..., 'col...})]
 
         Examples
         --------
-        >>> df = ks.DataFrame({'A': {0: 'a', 1: 'b', 2: 'c'},
-        ...                    'B': {0: 1, 1: 3, 2: 5},
-        ...                    'C': {0: 2, 1: 4, 2: 6}},
+        >>> df = ks.DataFrame({'A': {'0': 'a', '1': 'b', '2': 'c'},
+        ...                    'B': {'0': '1', '1': '3', '2': '5'},
+        ...                    'C': {'0': '2', '1': '4', '2': '6'}},
         ...                   columns=['A', 'B', 'C'])
         >>> df
            A  B  C",Why changed here? Seems not related?,py,1,0,0
"@@ -176,8 +176,8 @@ def add_arguments_to_parser(parser):
 
     analyzer_opts.add_argument('--add-compiler-defaults',
                                action='store_true',
-                               default=False,
                                required=False,
+                               default=argparse.SUPPRESS,
                                help=""Retrieve compiler-specific configuration ""
                                     ""from the compilers themselves, and use ""
                                     ""them with Clang. This is used when the """,Why do we need this change?,c,1,1,0
"@@ -12,7 +12,7 @@
  * * Redistributions in binary form must reproduce the above copyright notice,
  *   this list of conditions and the following disclaimer in the documentation
  *   and/or other materials provided with the distribution.
- *
+ *sig
  * * Neither the name of Google, Inc. nor the names of its contributors may be
  *   used to endorse or promote products derived from this software without
  *   specific prior written permission.",Please do a self-review before posting.,c,0,1,0
"@@ -76,7 +76,7 @@ public class TestEdgeDriver extends RemoteWebDriver implements WebStorage, Locat
                 .findFirst().orElseThrow(WebDriverException::new);
 
         service = (EdgeDriverService) builder.withVerbose(true).withLogFile(logFile.toFile()).build();
-        LOG.info(""edgedriver will log to "" + logFile);
+        LOG.fine(""edgedriver will log to "" + logFile);
         service.start();
         Runtime.getRuntime().addShutdownHook(new Thread(() -> service.stop()));
       }",This is deliberately at this level.,py,1,1,0
"@@ -6,6 +6,8 @@ from kinto.core.schema import (Any, HeaderField, QueryField, HeaderQuotedInteger
                                FieldList, TimeStamp, URL)
 from kinto.core.utils import native_value
 
+POSTGRESQL_MAX_INTEGER_VALUE = 9223372036854775807
+
 
 class TimeStamp(TimeStamp):
     """"""This schema is deprecated, you shoud use `kinto.core.schema.TimeStamp` instead.""""""",`2**64 / 2`,py,0,0,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -251,12 +251,12 @@ public class HiveCatalog extends BaseMetastoreCatalog implements SupportsNamespa
             namespace);
 
     } catch (TException e) {
-      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MataStore"", e);
+      throw new RuntimeException(""Failed to create namespace "" + namespace + "" in Hive MetaStore"", e);
 
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
       throw new RuntimeException(
-          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MataStore"", e);
+          ""Interrupted in call to createDatabase(name) "" + namespace + "" in Hive MetaStore"", e);
     }
   }
 ","Out of curiosity, how do Hive folks prefer to write it? `MetaStore` or `Metastore`?",java,0,1,0
"@@ -64,6 +64,7 @@ class Uppy {
         connectedToInternet: 'Connected to the Internet',
         // Strings for remote providers
         noFilesFound: 'You have no files or folders here',
+        loadMore: 'Load more',
         selectX: {
           0: 'Select %{smart_count}',
           1: 'Select %{smart_count}'",do we still need this?,js,1,1,0
"@@ -4,12 +4,11 @@
 
 package net.sourceforge.pmd.lang.plsql.ast;
 
-import net.sourceforge.pmd.lang.ast.Node;
-import net.sourceforge.pmd.lang.ast.NodeStream;
+import net.sourceforge.pmd.lang.ast.impl.javacc.JjtreeNode;
 import net.sourceforge.pmd.lang.symboltable.Scope;
 import net.sourceforge.pmd.lang.symboltable.ScopedNode;
 
-public interface PLSQLNode extends Node, ScopedNode {
+public interface PLSQLNode extends ScopedNode, JjtreeNode<PLSQLNode> {
 
     /** Accept the visitor. **/
     Object jjtAccept(PLSQLParserVisitor visitor, Object data);","hm...yes, these methods are not ideal, too generic like ""getImage"". but this time on plsql...",java,1,1,0
"@@ -981,7 +981,7 @@ void DatasetLoader::ConstructBinMappersFromTextData(int rank, int num_machines,
         bin_type = BinType::CategoricalBin;
       }
       bin_mappers[i].reset(new BinMapper());
-      if (sample_values.size() <= start[rank] + i) {
+      if (static_cast<int>(sample_values.size()) <= start[rank] + i) {
         continue;
       }
       if (config_.max_bin_by_feature.empty()) {",thanks! Was seeing this warning too last night,cpp,1,0,0
"@@ -117,7 +117,7 @@ Puppet::Functions.create_function(:run_plan, Puppet::Functions::InternalFunction
         # undef/nil
         result = catch(:return) do
           scope.with_global_scope do |global_scope|
-            closure.call_by_name_with_scope(global_scope, params, true)
+            executor.run_plan(global_scope, closure, params)
           end
           nil
         end&.value",@McdonaldSeanp I think this will help you longterm too but heads up.,rb,0,1,0
"@@ -4,13 +4,12 @@
 
 using System;
 using System.Reflection;
-using System.Threading.Tasks;
 using MvvmCross.Exceptions;
 using MvvmCross.Logging;
 
 namespace MvvmCross.Base
 {
-    public abstract class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
+    public class MvxMainThreadDispatcher : MvxSingleton<IMvxMainThreadDispatcher>, IMvxMainThreadDispatcher
     {
         protected static void ExceptionMaskedAction(Action action, bool maskExceptions)
         {",Please leave as abstract,.cs,1,1,0
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -32,7 +32,7 @@ BOOST_AUTO_TEST_CASE(test_tile)
     const auto rc = osrm.Tile(params, result);
     BOOST_CHECK(rc == Status::Ok);
 
-    BOOST_CHECK_EQUAL(result.size(), 114033);
+    BOOST_CHECK_EQUAL(result.size(), 113824);
 
     protozero::pbf_reader tile_message(result);
     tile_message.next();",Why does this change?,cpp,1,1,0
"@@ -19,7 +19,7 @@ package participation
 import (
         ""path/filepath""
         ""testing""
-
+        ""runtime"" 
         ""github.com/stretchr/testify/require""
 
         ""github.com/algorand/go-algorand/config""",add an empty line after this entry,go,0,1,0
"@@ -51,6 +51,11 @@ namespace Nethermind.Network
             long next = 0;
             for (int i = 0; i < specProvider.TransitionBlocks.Length; i++)
             {
+                if (specProvider.TransitionBlocks[i] >= long.MaxValue - 100)
+                {
+                    continue;
+                }
+                
                 long transition = specProvider.TransitionBlocks[i];
                 if (transition > headNumber)
                 {",Why this const? Can we name this const better?,.cs,1,1,0
"@@ -159,7 +159,15 @@ public abstract class GapicProductConfig implements ProductConfig {
             .put(document.name(), DiscoGapicInterfaceConfig.createInterfaceConfig(document))
             .build();
     // TODO actually load data
-    return createDummyInstance(interfaceConfigMap, """", """", null);
+
+    LanguageSettingsProto settings =
+        configProto.getLanguageSettings().get(configProto.getLanguage());
+    if (settings == null) {
+      settings = LanguageSettingsProto.getDefaultInstance();
+    }
+
+    // TODO (end copy from above method)
+    return createDummyInstance(interfaceConfigMap, settings.getPackageName(), """", null);
   }
 
   /** Creates an GapicProductConfig with no content. Exposed for testing. */",Can we get rid of this TODO?,java,1,1,0
"@@ -1246,7 +1246,7 @@ nano::error nano::telemetry_data::serialize_json (nano::jsonconfig & json, bool
 	json.put (""block_count"", block_count);
 	json.put (""cemented_count"", cemented_count);
 	json.put (""unchecked_count"", unchecked_count);
-	json.put (""account_count"", account_count);
+	json.put (""count"", account_count);
 	json.put (""bandwidth_cap"", bandwidth_cap);
 	json.put (""peer_count"", peer_count);
 	json.put (""protocol_version"", protocol_version);","ops, this wasn't supposed to be changed. I'll fix.",cpp,1,1,0
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -127,8 +127,8 @@ module.exports = function(config) {
 						exclude: /node_modules/,
 						loader: 'babel-loader',
 						options: {
-							comments: false,
-							compact: true,
+							// comments: false,
+							// compact: true,
 							plugins: coverage ?
 								[['istanbul', {
 									exclude: [",Note to self: Undo before checking in,js,0,1,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -12,7 +12,7 @@
  * * Redistributions in binary form must reproduce the above copyright notice,
  *   this list of conditions and the following disclaimer in the documentation
  *   and/or other materials provided with the distribution.
- *
+ *sig
  * * Neither the name of Google, Inc. nor the names of its contributors may be
  *   used to endorse or promote products derived from this software without
  *   specific prior written permission.",Please do a self-review before posting.,c,0,1,0
"@@ -0,0 +1,16 @@
+class Account::Subscription
+  attr_reader :account
+
+  def initialize(account)
+    @account = account
+  end
+
+  def unsubscribe(notification_type = :all)
+    attribute_name = case notification_type
+                     when :kudo then :email_kudos
+                     when :post then :email_posts
+                     else :email_master
+                     end
+    account.update_attribute(attribute_name, false)
+  end
+end",This file can go into `app/models/account/subscription.rb`?,rb,0,1,0
"@@ -19,7 +19,10 @@ package org.openqa.selenium.grid.graphql;
 
 import graphql.schema.DataFetcher;
 import graphql.schema.DataFetchingEnvironment;
+
+import org.openqa.selenium.SessionNotCreatedException;
 import org.openqa.selenium.grid.distributor.Distributor;
+import org.openqa.selenium.grid.sessionmap.SessionMap;
 import org.openqa.selenium.internal.Require;
 
 import java.net.URI;",You can safely revert changes to this file.,java,1,1,0
"@@ -105,7 +105,7 @@ public class RequestHandler implements Comparable<RequestHandler> {
   public void process() {
     switch (request.getRequestType()) {
       case START_SESSION:
-        log.info(""Got a request to create a new session: ""
+        log.finest(""Got a request to create a new session: ""
                  + new DesiredCapabilities(request.getDesiredCapabilities()));
         try {
           registry.addNewSessionRequest(this);",This change is unhelpful to users.,js,1,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -86,8 +86,7 @@ bool isValidMatch(const TurnLaneType::Mask tag, const TurnInstruction instructio
                (instruction.type ==
                     TurnType::Continue && // Forks can be experienced, even for straight segments
                 (instruction.direction_modifier == DirectionModifier::SlightLeft ||
-                 instruction.direction_modifier == DirectionModifier::SlightRight)) ||
-               instruction.type == TurnType::Suppressed;
+                 instruction.direction_modifier == DirectionModifier::SlightRight));
     }
     else if (tag == TurnLaneType::slight_left || tag == TurnLaneType::left ||
              tag == TurnLaneType::sharp_left)",we should refactor this ten line return statement ..,cpp,0,1,0
"@@ -240,6 +240,12 @@ class Server extends EventEmitter {
     }
 
     wireProtocol.command(this, ns, cmd, options, (err, result) => {
+      if (err && err instanceof MongoNetworkError) {
+        if (options.session) {
+          options.session.serverSession.isDirty = true;
+        }
+      }
+
       if (err && isSDAMUnrecoverableError(err)) {
         this.emit('error', err);
       }",`if (err && err instanceof MongoNetworkError && options.session)`,js,1,0,0
"@@ -971,7 +971,7 @@ class _tls_sessions(object):
                 if len(sid) > 12:
                     sid = sid[:11] + ""...""
                 res.append((src, dst, sid))
-        colwidth = map(lambda x: max(map(lambda y: len(y), x)), apply(zip, res))
+        colwidth = [max([len(y) for y in x]) for x in zip(*res)]
         fmt = ""  "".join(map(lambda x: ""%%-%ds""%x, colwidth))
         return ""\n"".join(map(lambda x: fmt % x, res))
 ",Use a generator () instead of [],py,1,1,0
"@@ -40,8 +40,8 @@ TEST_F(OrderByTest, SyntaxError) {
         cpp2::ExecutionResponse resp;
         auto &player = players_[""Boris Diaw""];
         auto *fmt = ""GO FROM %ld OVER serve YIELD ""
-                    ""$^[player].name as name, serve.start_year as start, $$[team].name""
-                    ""| ORDER BY $-.$$[team].name"";
+                    ""$^player.name as name, serve.start_year as start, $$[team].name""
+                    ""| ORDER BY $-.$$team.name"";
         auto query = folly::stringPrintf(fmt, player.vid());
         auto code = client_->execute(query, resp);
         ASSERT_EQ(cpp2::ErrorCode::E_SYNTAX_ERROR, code);",$$[team].name or $$team.name,cpp,1,1,0
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -54,7 +54,7 @@ class DbalBatchActionQuery implements BatchActionQueryInterface
             $record['all'],
             $record['processed'],
             new \DateTime($record['created_at']),
-            $record['all'] === $record['processed'] ? new \DateTime($record['last_processed_at']) : null
+            $record['all'] === $record['processed'] ? new \DateTime($record['last_processed_at'] ?? $record['created_at']) : null
         );
 
         foreach ($this->getEntries($id, $language) as $entry) {",This seems redundant and not related,php,1,1,0
"@@ -121,7 +121,8 @@ TEST (node, send_single_observing_peer)
         }
 }
 
-TEST (node, send_single_many_peers)
+// TODO: rai::system fails to connect peers
+TEST (node, DISABLED_send_single_many_peers)
 {
         rai::system system (24000, 10);
         rai::keypair key2;",Due to the `max_peers_per_ip` reduction it seems,cpp,1,1,0
"@@ -446,15 +446,14 @@ const reducer = (state = defaultState, action) => {
 			}
 			break;
 
-			// Replace all the notes with the provided array
 		case 'NOTE_UPDATE_ALL':
 			newState = Object.assign({}, state);
 			newState.notes = action.notes;
 			newState.notesSource = action.notesSource;
 			break;
 
-			// Insert the note into the note list if it's new, or
-			// update it within the note array if it already exists.
+		// Insert the note into the note list if it's new, or
+		// update it within the note array if it already exists.
 		case 'NOTE_UPDATE_ONE':
 			{
 				const modNote = action.note;",Also please remove this file.,js,1,1,0
"@@ -43,6 +43,7 @@ DesktopSwitchConfiguration::DesktopSwitchConfiguration(PluginSettings *settings,
 
     connect(ui->rowsSB, SIGNAL(valueChanged(int)), this, SLOT(rowsChanged(int)));
     connect(ui->labelTypeCB, SIGNAL(currentIndexChanged(int)), this, SLOT(labelTypeChanged(int)));
+    connect(ui->showOnlyActiveCB, &QAbstractButton::toggled, [this] (bool checked) { this->settings().setValue(""showOnlyActive"", checked); });
 
     loadDesktopsNames();
 }",Implicit string cast,cpp,1,1,0
"@@ -111,7 +111,7 @@ bool save_model::do_save_model_weights(model *m) {
 
   // Shared checkpoint, logic identical to Distributed.i
   makedir(m_dir.c_str());
-  std::string epochdir = get_shared_checkpoint_dirname(m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
+  std::string epochdir = get_shared_checkpoint_dirname(c.get_trainer().get_name(), m, m_dir.c_str(), c.get_execution_mode(), epoch, step);
   if (comm->am_trainer_master()) {
     p.open_checkpoint(epochdir.c_str());
   }",See. You got the trainer's name through a model pointer...,cpp,1,1,0
"@@ -350,7 +350,7 @@ if __name__ == ""__main__"":
               ],
           },
           maintainer='Guolin Ke',
-          maintainer_email='guolin.ke@microsoft.com',
+          maintainer_email='guolin.ke@outlook.com',
           zip_safe=False,
           cmdclass={
               'install': CustomInstall,",Ah thanks for catching this! Sorry I didn't think of it on #4633. Thankfully it's not as critical with PyPI as it is with CRAN. @shiyu1994 should this be changed to your name and email? My assumption is that Microsoft would prefer to have a Microsoft employee as the primary contact for these artifacts.,cpp,0,1,0
"@@ -0,0 +1,17 @@
+<?php
+/**
+ * Copyright © Bold Brand Commerce Sp. z o.o. All rights reserved.
+ * See LICENSE.txt for license details.
+ */
+
+declare(strict_types=1);
+
+namespace Ergonode\Core\Infrastructure\Exception;
+
+class DeserializationException extends SerializerException
+{
+    public function __construct(string $message, \Throwable $previous = null)
+    {
+        parent::__construct($message, $previous);
+    }
+}",I think it should been in `SharedKernel` module.,php,1,1,0
"@@ -0,0 +1,11 @@
+const path = require('path');
+
+module.exports = {
+	mode: 'development',
+  watch: true,
+	entry: './lib/index.js',
+	output: {
+		path: path.resolve(__dirname, 'dist'),
+		filename: 'axe.js'
+	}
+};","Please feel free to suggest / write a better Webpack config, I'm still new to it.",js,0,1,0
"@@ -15,6 +15,10 @@ ExecutionContext::~ExecutionContext() {
         sm_ = nullptr;
     }
 
+    if (nullptr != gflagsManager_) {
+        gflagsManager_ = nullptr;
+    }
+
     if (nullptr != storage_) {
         storage_ = nullptr;
     }",maybe here can set nullptr directly.,cpp,1,1,0
"@@ -1178,6 +1178,8 @@ static void CreateDirectoryRecursively(PJ_CONTEXT *ctx,
 
 std::string pj_context_get_user_writable_directory(PJ_CONTEXT *ctx,
                                                    bool create) {
+    if (!ctx)
+        ctx = pj_get_default_ctx();
     if (ctx->user_writable_directory.empty()) {
         // For testing purposes only
         const char *env_var_PROJ_USER_WRITABLE_DIRECTORY =",Was this missing before?,cpp,1,1,0
"@@ -20,6 +20,11 @@ class User < ActiveRecord::Base
   has_many :outgoing_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assigner_id'
   has_many :outgoing_delegates, through: :outgoing_delegations, source: :assignee
 
+  has_many :incoming_delegations, class_name: 'ApprovalDelegate', foreign_key: 'assignee_id'
+  has_many :incoming_delegates, through: :incoming_delegations, source: :assigner
+
+  has_many :completed_steps, class_name: ""Step"", foreign_key: ""completer""
+
   def self.active
     where(active: true)
   end",surprised code climate isn't yelling about single quotes. Seems like that integration is a bit flaky these days...,rb,1,0,0
"@@ -19,7 +19,8 @@ package org.apache.lucene.search;
 
 import org.apache.lucene.util.PriorityQueue;
 
-final class HitQueue extends PriorityQueue<ScoreDoc> {
+/** Expert: Priority queue containing hit docs */
+public final class HitQueue extends PriorityQueue<ScoreDoc> {
 
   /**
    * Creates a new instance with <code>size</code> elements. If",This is used in o.a.l.sandbox.search.LargeNumHitsTopDocsCollector.,java,1,1,0
"@@ -237,10 +237,6 @@ define([""appSettings"", ""browser"", ""events"", ""htmlMediaHelper"", ""webSettings""], f
             features.push(""voiceinput"");
         }
 
-        if (!browser.tv && !browser.xboxOne) {
-            browser.ps4;
-        }
-
         if (supportsHtmlMediaAutoplay()) {
             features.push(""htmlaudioautoplay"");
             features.push(""htmlvideoautoplay"");",What was this even doing?,js,1,0,0
"@@ -15,12 +15,12 @@
 """"""Scanner for Enabled APIs.""""""
 
 import json
-import sys
 
 from google.cloud.forseti.common.gcp_type.project import Project
 from google.cloud.forseti.common.util import logger
 from google.cloud.forseti.scanner.audit import enabled_apis_rules_engine
 from google.cloud.forseti.scanner.scanners import base_scanner
+from google.cloud.forseti.common.util import errors as util_errors
 
 LOGGER = logger.get_logger(__name__)
 ",Can you please alpha-sort this import?,py,1,1,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -98,6 +98,12 @@ class IssueData
      */
     public $error_level;
 
+    /**
+     * @var int
+     * @readonly
+     */
+    public $shortcode;
+
     /**
      * @var string
      * @readonly",Added this so it can be used to send the error code to the client.,php,0,1,0
"@@ -400,7 +400,7 @@ class HadoopJobRunner(JobRunner):
 
     def __init__(self, streaming_jar, modules=None, streaming_args=None,
                  libjars=None, libjars_in_hdfs=None, jobconfs=None,
-                 input_format=None, output_format=None,
+                 archives=None, input_format=None, output_format=None,
                  end_job_with_atomic_move_dir=True):
         def get(x, default):
             return x is not None and x or default",Why not add as last argument?,py,1,1,0
"@@ -55,7 +55,15 @@ namespace Datadog.Trace
             Settings = settings ?? TracerSettings.FromDefaultSources();
             _agentWriter = agentWriter ?? new AgentWriter(new Api(Settings.AgentUri));
             _scopeManager = scopeManager ?? new AsyncLocalScopeManager();
-            Sampler = sampler ?? new RateByServiceSampler();
+            Sampler = sampler ?? new RuleBasedSampler(new RateLimiter(Settings.MaxTracesSubmittedPerSecond));
+
+            if (!string.IsNullOrEmpty(Settings.CustomSamplingRules))
+            {
+                foreach (var rule in RegexSamplingRule.BuildFromConfigurationString(Settings.CustomSamplingRules))
+                {
+                    Sampler.RegisterRule(rule);
+                }
+            }
 
             // if not configured, try to determine an appropriate service name
             DefaultServiceName = Settings.ServiceName ??",Suggest using `string.IsNullOrWhitespace` instead of `string.IsNullOrEmpty`.,.cs,1,1,0
"@@ -48,6 +48,7 @@ const baseModuleStore = Modules.createModuleStore( 'adsense', {
                 'siteStatus',
                 'accountSetupComplete',
                 'siteSetupComplete',
+                'ownerID',
         ],
         adminPage: 'googlesitekit-module-adsense',
 } );","Thank you, I realize this detail was missed in the IB  ",js,1,1,0
"@@ -6,6 +6,7 @@
 #include <wlr/types/wlr_xdg_output.h>
 #include <wlr/util/log.h>
 #include ""xdg-output-unstable-v1-protocol.h""
+#include ""types/wlr_output_layout.h""
 
 #define OUTPUT_MANAGER_VERSION 2
 ",Hmmm. I'm not a fan of this.,c,0,1,0
"@@ -34,6 +34,10 @@ static int writeCtagsPtagEntry (tagWriter *writer CTAGS_ATTR_UNUSED,
                                                                 void *clientData);
 static bool treatFieldAsFixed (int fieldType);
 
+#ifdef WIN32
+static enum filenameSepOp overrideFilenameSeparator (enum filenameSepOp currentSetting);
+#endif        /* WIN32 */
+
 struct rejection {
         bool rejectionInThisInput;
 };",Did you intentionally remove this?,c,0,1,0
"@@ -201,7 +201,9 @@ module RSpec
         attr_reader :example
 
         Example.public_instance_methods(false).each do |name|
-          define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          unless name.to_sym == :run
+            define_method(name) { |*a, &b| @example.__send__(name, *a, &b) }
+          end
         end
 
         Proc.public_instance_methods(false).each do |name|","I tend to prefer using a `next` guard clause, but that's just subjective preference :). Not a merge blocker.",rb,0,1,0
"@@ -464,6 +464,10 @@ public class QpsControllerManagerTest {
     ArchaiusUtils.setProperty(key, value);
   }
 
+  public static void deleteConfig(String key) {
+    ArchaiusUtils.setProperty(key, null);
+  }
+
   private static void setConfigWithDefaultPrefix(boolean isProvider, String key, int value) {
     String configKey = Config.CONSUMER_LIMIT_KEY_PREFIX + key;
     if (isProvider) {",This method never used,java,1,1,0
"@@ -262,6 +262,19 @@ def define_model(model_name, dbengine, model_seed):
                primary_key=True),
     )
 
+    groups_settings = Table(
+        '{}_groups_settings'.format(model_name),
+        base.metadata,
+        Column('group_name',
+               ForeignKey('{}.name'.format(members_tablename)),
+               primary_key=True),
+        Column('settings',
+               Text(16777215)),
+    )
+
+
+
+
     def get_string_by_dialect(db_dialect, column_size):
         """"""Get Sqlalchemy String by dialect.
         Sqlite doesn't support collation type, need to define different",@blueandgold I'm still somewhat unfamiliar with the model stuff and want to confirm that Im not missing anything I need here. For instance I probably need bindings or queries? Lets chat tomorrow,py,0,1,0
"@@ -272,6 +272,15 @@ def test_classifier(output, task, boosting_type, tree_learner, cluster):
         )
         dask_classifier = dask_classifier.fit(dX, dy, sample_weight=dw)
         p1 = dask_classifier.predict(dX)
+        p1_raw = dask_classifier.predict(dX, raw_score=True).compute()
+        p1_first_iter_raw = dask_classifier.predict(dX, start_iteration=0, num_iteration=1, raw_score=True).compute()
+        p1_early_stop_raw = dask_classifier.predict(
+            dX,
+            pred_early_stop=True,
+            pred_early_stop_margin=1.0,
+            pred_early_stop_freq=2,
+            raw_score=True
+        )
         p1_proba = dask_classifier.predict_proba(dX).compute()
         p1_pred_leaf = dask_classifier.predict(dX, pred_leaf=True)
         p1_local = dask_classifier.to_local().predict(X)",Just curious: why does this particular line not ends with `.compute()`?,cpp,1,1,0
"@@ -29,12 +29,18 @@ import java.util.Collection;
 import java.util.Collections;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.LinkedBlockingDeque;
+import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
-import java.util.concurrent.locks.ReentrantLock;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
 import java.util.function.Function;
 
 import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Stopwatch;
+import com.google.common.util.concurrent.ThreadFactoryBuilder;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.apache.tuweni.bytes.Bytes;","Experimentally determined a while ago. Since the rocks db default lock timeout is 1000ms, I aimed for a flush size that was as big as possible that completes in under 500ms",java,1,1,0
"@@ -1,15 +1,16 @@
 ﻿// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.
 // Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 
-using System;
-using System.Collections.Generic;
-using System.Threading.Tasks;
 using Microsoft.AspNet.Builder;
 using Microsoft.AspNet.FeatureModel;
 using Microsoft.AspNet.Hosting.Server;
 using Microsoft.AspNet.Server.Kestrel;
 using Microsoft.Framework.ConfigurationModel;
+using Microsoft.Framework.Logging;
 using Microsoft.Framework.Runtime;
+using System;
+using System.Collections.Generic;
+using System.Threading.Tasks;
 
 namespace Kestrel
 {",This is the wrong sort order for usings.,.cs,1,1,0
"@@ -65,10 +65,6 @@ class Product < ActiveRecord::Base
     type.underscore
   end
 
-  def fulfilled_with_github?
-    github_team.present?
-  end
-
   def to_aside_partial
     ""#{self.class.name.underscore.pluralize}/aside""
   end","This was actually unused on `master`, so I removed it instead of fixing it with this change.",rb,0,1,0
"@@ -72,8 +72,12 @@ public class DebugOperationTracer implements OperationTracer {
               memory,
               storage,
               frame.getRevertReason(),
-              maybeRefunds));
+              maybeRefunds,
+              frame.isMemoryWritten(),
+              Optional.ofNullable(frame.getCode()),
+              frame.getCurrentOperation().getStackItemsProduced()));
     }
+    frame.setMemoryWritten(false);
   }
 
   private Optional<Map<UInt256, UInt256>> captureStorage(final MessageFrame frame) {",This feels messy - looks like you're using the frame to capture op-level state changes?,java,1,1,0
"@@ -87,8 +87,12 @@ namespace Nethermind.Runner.Ethereum.Steps
                         logger.Error(""Error during jsonRpc runner start"", x.Exception);
                 }, cancellationToken);
 
+                JsonRpcIpcRunner jsonIpcRunner = new(jsonRpcProcessor, _api.ConfigProvider, _api.LogManager);
+                jsonIpcRunner.Start(cancellationToken);
+
 #pragma warning disable 4014
                 _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonRpcRunner.StopAsync())); // do not await
+                _api.DisposeStack.Push(new Reactive.AnonymousDisposable(() => jsonIpcRunner.Dispose())); // do not await
 #pragma warning restore 4014
             }
             else",IDisposable can be pushed here normally,.cs,1,1,0
"@@ -181,6 +181,7 @@ def do_register_localstack_plugins():
             listener=stepfunctions_listener.UPDATE_STEPFUNCTIONS))
 
     except Exception as e:
+        print('exception', e)
         if not os.environ.get(ENV_SCRIPT_STARTING_DOCKER):
             print('Unable to register plugins: %s' % e)
             sys.stdout.flush()",Let's remove this `print` please.,py,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -18,17 +18,7 @@ package org.apache.solr.handler;
 
 import java.io.IOException;
 import java.lang.invoke.MethodHandles;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Locale;
-import java.util.Map;
-import java.util.Set;
+import java.util.*;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutionException;
 import java.util.concurrent.ExecutorService;","I've had this happen recently with IntelliJ, was this intentional?",java,0,1,0
"@@ -35,6 +35,8 @@ var cipherMap = map[string]uint16{
 
 func defaultCipherSuites() []uint16 {
 	return []uint16{
+		tls.TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,
+		tls.TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
 		tls.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
 		tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,",I think we should put ECDSA first..,go,1,1,0
"@@ -295,7 +295,7 @@ public class SmartStoreReactBridge extends ReactContextBaseJavaModule {
 			final IndexSpec[] indexSpecs = IndexSpec.fromJSON(indexesJson);
 
             // Get soup spec if available.
-            final ReadableMap soupSpecObj = args.getMap(SOUP_SPEC);
+            final ReadableMap soupSpecObj = (args.hasKey(SOUP_SPEC) ? args.getMap(SOUP_SPEC) : null);
             if (soupSpecObj != null) {
 
                 // Get soup name.",getMap throws an exception if key doesn't exist,java,1,1,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -29,7 +29,7 @@ from boto.s3.key import Key
 from luigi.s3 import S3Client
 
 
-if sys.version_info[:2] == (3, 4):
+if (3, 4, 0) <= sys.version_info[:3] < (3, 4, 3):
     # spulec/moto#308
     mock_s3 = unittest.skip('moto mock doesn\'t work with python3.4')
 ","Out of curiosity, why it doesn't work on < Python 3.4.3?",py,1,1,0
"@@ -0,0 +1,6 @@
+from .utils import verify_model
+
+
+__all__ = [
+    'verify_model'
+]",No need to design `test_onnx` as python package.,py,0,1,0
"@@ -164,7 +164,7 @@ namespace OpenTelemetry.Instrumentation.AspNetCore.Tests
                 var response = await client.GetAsync(""/api/values/2"");
                 response.EnsureSuccessStatusCode(); // Status Code 200-299
 
-                WaitForProcessorInvocations(spanProcessor, 4);
+                WaitForProcessorInvocations(spanProcessor, 2);
             }
 
             // begin and end was called once each.",I'm probably just missing it... but what accounted for this change?,.cs,1,1,0
"@@ -184,6 +184,8 @@ namespace OpenTelemetry.Instrumentation.Http.Implementation
                     HttpInstrumentationEventSource.Log.EnrichmentException(ex);
                 }
 
+                activity.RecordException(exc);
+
                 if (exc is HttpRequestException)
                 {
                     if (exc.InnerException is SocketException exception)",lets discuss and do this in separate PR.,.cs,0,1,0
"@@ -526,6 +526,7 @@ module Bolt
     end
 
     def apply_manifest(code, targets, filename = nil, noop = false)
+      Puppet[:tasks] = false
       ast = pal.parse_manifest(code, filename)
 
       executor = Bolt::Executor.new(config.concurrency, analytics, noop)",Was this a bug?,rb,1,1,0
"@@ -1195,7 +1195,7 @@ static void handle_get_app_config(GUI_RPC_CONN& grc) {
         return;
     }
     sprintf(path, ""%s/%s"", p->project_dir(), APP_CONFIG_FILE_NAME);
-    printf(""path: %s\n"", path);
+    // printf(""path: %s\n"", path);    // debug only
     int retval = read_file_string(path, s);
     if (retval) {
         grc.mfout.printf(""<error>app_config.xml not found</error>\n"");",Could be completely removed,php,1,1,0
"@@ -9,6 +9,8 @@ const Note = require('lib/models/Note.js');
 const Resource = require('lib/models/Resource.js');
 const urlValidator = require('valid-url');
 const { _ } = require('lib/locale.js');
+const http = require('http');
+const https = require('https');
 
 function shimInit() {
 	shim.fsDriver = () => {",These 2 lines can only be run when not on on mobile.,js,1,1,0
"@@ -37,9 +37,7 @@ public class MaxScoreCollector extends SimpleCollector {
 
   @Override
   public ScoreMode scoreMode() {
-    // Should be TOP_SCORES but this would wrap the scorer unnecessarily since
-    // this collector is only used in a MultiCollector.
-    return ScoreMode.COMPLETE;
+    return ScoreMode.TOP_SCORES;
   }
 
   @Override",why can we make this change?,java,1,1,0
"@@ -47,6 +47,9 @@ def molecule_provisioner_section_data():
                 'instance-1': [{
                     'foo': 'bar'
                 }],
+                'localhost': [{
+                    'foo': 'baz'
+                }]
             },
             'group_vars': {
                 'example_group1': [{",This and line 156 below adds coverage for the special case of localhost host_vars,py,0,1,0
"@@ -41,7 +41,7 @@ namespace OpenTelemetry.Exporter.Jaeger.Tests.Implementation
         [Fact]
         public async void JaegerThriftIntegrationTest_TAbstractBaseGeneratesConsistentThriftPayload()
         {
-            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQxAAAWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQyAAAAAAA="");
+            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgHbWVzc2FnZRUAGAZFdmVudDEAABaAgLPexpa/BRksGANrZXkVABgFdmFsdWUAGAdtZXNzYWdlFQAYBkV2ZW50MgAAAAAA"");
             
             using (var memoryTransport = new InMemoryTransport())
             {",this test case is so wierd. I remember updating it last time =) Hope we will make somthing better eventually,.cs,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -138,6 +138,8 @@ class Register(abc.ABCMeta):
         return global_params.iteritems()
 
 
+_event_callbacks = {}
+
 class Task(object):
     __metaclass__ = Register
 ",I think this should go into the Task class.,py,1,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -55,7 +55,7 @@ func ensureOrCreateDir(dir string) error {
         err := ensureDirExists(dir)
         if os.IsNotExist(err) {
                 log.Info(""[Directory config checker] "", ""Directory: "", dir, "" does not exit. Creating new one"")
-                return os.MkdirAll(dir, 0600)
+                return os.MkdirAll(dir, 0700)
         }
         return err
 }",Was is a debugged place??,go,0,0,0
"@@ -35,7 +35,9 @@
 #include <pthread.h>
 #include <pwd.h>
 #include <signal.h>
+#ifndef __ANDROID__
 #include <spawn.h>
+#endif
 #include <stdio.h>
 #include <unistd.h>
 #include <sys/resource.h>",The same goes here as well.,c,0,1,0
"@@ -174,6 +174,9 @@ class ElementPlot(BokehPlot, GenericElementPlot):
         default=None, class_=(util.basestring, TickFormatter, FunctionType), doc=""""""
         Formatter for ticks along the x-axis."""""")
 
+    x2rotation = param.Integer(default=None, bounds=(0, 360), doc=""""""
+        Rotation angle of the xticks."""""")
+
     _categorical = False
 
     # Declare which styles cannot be mapped to a non-scalar dimension",Rotation angle of _which_ xticks?,py,1,1,0
"@@ -20,6 +20,8 @@ C2::Application.routes.draw do
   match ""/auth/:provider/callback"" => ""auth#oauth_callback"", via: [:get]
   get ""/auth/failure"" => ""auth#failure""
   post ""/logout"" => ""auth#logout""
+  resources :users, only: [:update]
+
   resources :help, only: [:index, :show]
 
   # mandrill-rails",Sweet! +100 for the better security and standards-compliance this change gives us.,rb,1,1,0
"@@ -3635,6 +3635,8 @@ static PropertyDefinition g_properties[] = {
     {""swift-module-search-paths"", OptionValue::eTypeFileSpecList, false, 0,
      nullptr, nullptr,
      ""List of directories to be searched when locating modules for Swift.""},
+    {""swift-create-module-contexts-in-parallel"", OptionValue::eTypeBoolean, false, true,
+     nullptr, nullptr, ""Create modules AST context in parallel.""},
     {""auto-import-clang-modules"", OptionValue::eTypeBoolean, false, true,
      nullptr, nullptr,
      ""Automatically load Clang modules referred to by the program.""},",`Create the per-module Swift AST contexts in parallel.` ?,cpp,1,0,0
"@@ -52,5 +52,17 @@ namespace AutoRest.Swagger.Validation
         ///     The severity of this message (ie, debug/info/warning/error/fatal, etc)
         /// </summary>
         public override Category Severity => Category.Warning;
+
+        /// <summary>
+        /// What kind of open api document type this rule should be applied to
+        /// </summary>
+        public override ServiceDefinitionDocumentType ServiceDefinitionDocumentType => ServiceDefinitionDocumentType.ARM;
+
+        /// <summary>
+        /// When to apply the validation rule, before or after it has been merged as a part of 
+        /// its merged document as specified in the corresponding '.md' file
+        /// By default consider all rules to be applied for After only
+        /// </summary>
+        public override ServiceDefinitionDocumentState ValidationRuleMergeState => ServiceDefinitionDocumentState.Individual;
     }
 }",why not consider data-plane here?,java,1,1,0
"@@ -34,6 +34,15 @@ class CocoDataset(CustomDataset):
                'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush')
 
     def load_annotations(self, ann_file):
+        """"""Load annotation from COCO style annotation file
+
+        Args:
+            ann_file (str): Path of annotation file.
+
+        Returns:
+            list[dict]: Annotation info from COCO api.
+        """"""
+
         self.coco = COCO(ann_file)
         self.cat_ids = self.coco.get_cat_ids(cat_names=self.CLASSES)
         self.cat2label = {cat_id: i for i, cat_id in enumerate(self.cat_ids)}",Missing the last `.`,py,1,1,0
"@@ -512,9 +512,14 @@ folly::Future<Status> AdminClient::createSnapshot(GraphSpaceID spaceId, const st
 
     folly::Promise<Status> pro;
     auto f = pro.getFuture();
+
+    /**
+     * Don't need retry.
+     * Because existing checkpoint directories leads to fail again.
+     **/
     getResponse(allHosts, 0, std::move(req), [] (auto client, auto request) {
         return client->future_createCheckpoint(request);
-    }, 0, std::move(pro), 1 /*The snapshot operation only needs to be retried twice*/);
+    }, 0, std::move(pro), 0);
     return f;
 }
 ",What if there are some connection failure?,cpp,1,1,0
"@@ -23,6 +23,8 @@ import javax.annotation.Nullable;
  */
 @AutoValue
 public abstract class InitFieldConfig {
+  private static String randomValueToken = ""$RANDOM"";
+
   public abstract String fieldPath();
 
   @Nullable",Should this be final?,java,1,1,0
"@@ -41,7 +41,7 @@ namespace OpenTelemetry.Exporter.Jaeger.Tests.Implementation
         [Fact]
         public async void JaegerThriftIntegrationTest_TAbstractBaseGeneratesConsistentThriftPayload()
         {
-            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQxAAAWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgLZGVzY3JpcHRpb24VABgGRXZlbnQyAAAAAAA="");
+            var validJaegerThriftPayload = Convert.FromBase64String(""goEBCWVtaXRCYXRjaBwcGAx0ZXN0IHByb2Nlc3MZHBgQdGVzdF9wcm9jZXNzX3RhZxUAGAp0ZXN0X3ZhbHVlAAAZHBab5cuG2OehhdwBFuPakI2n2cCVLhbUpdv9yJDPo4EBFpjckNKFzqHOsgEYBE5hbWUZHBUAFpvly4bY56GF3AEW49qQjafZwJUuFpCmrOGWyrWcgwEAFQIWgICz3saWvwUWgJycORl8GAlzdHJpbmdLZXkVABgFdmFsdWUAGAdsb25nS2V5FQZGAgAYCGxvbmdLZXkyFQZGAgAYCWRvdWJsZUtleRUCJwAAAAAAAPA/ABgKZG91YmxlS2V5MhUCJwAAAAAAAPA/ABgHYm9vbEtleRUEMQAYCXNwYW4ua2luZBUAGAZjbGllbnQAGSwWgICz3saWvwUZLBgDa2V5FQAYBXZhbHVlABgHbWVzc2FnZRUAGAZFdmVudDEAABaAgLPexpa/BRksGANrZXkVABgFdmFsdWUAGAdtZXNzYWdlFQAYBkV2ZW50MgAAAAAA"");
             
             using (var memoryTransport = new InMemoryTransport())
             {",this test case is so wierd. I remember updating it last time =) Hope we will make somthing better eventually,.cs,1,1,0
"@@ -23,6 +23,15 @@ void wlr_renderer_end(struct wlr_renderer *r) {
         r->impl->end(r);
 }
 
+void wlr_renderer_clear(struct wlr_renderer *r, float red, float green,
+                float blue, float alpha) {
+        r->impl->clear(r, red, green, blue, alpha);
+}
+
+void wlr_renderer_scissor(struct wlr_renderer *r, struct wlr_box *box) {
+        r->impl->scissor(r, box);
+}
+
 struct wlr_texture *wlr_render_texture_create(struct wlr_renderer *r) {
         return r->impl->texture_create(r);
 }",Check for null,c,1,1,0
"@@ -29,13 +29,13 @@ import java.util.Map;
  * Iteration order is not specified.
  * @lucene.internal
  */
-final class Multiset<T> extends AbstractCollection<T> {
+public final class Multiset<T> extends AbstractCollection<T> {
 
   private final Map<T, Integer> map = new HashMap<>();
   private int size;
 
   /** Create an empty {@link Multiset}. */
-  Multiset() {
+  public Multiset() {
     super();
   }
 ",This is used in o.a.l.sandbox.search.CoveringQuery.,java,1,1,0
"@@ -3,7 +3,7 @@
 
 # Purpose:
 # sns-ruby-example-create-topic.rb demonstrates how to create an Amazon Simple Notification Services (SNS) topic using
-# the AWS SDK for JavaScript (v3).
+# the AWS SDK for Ruby.
 
 # Inputs:
 # - REGION",Simple Notification **Service** (singular),rb,0,0,0
"@@ -987,6 +987,7 @@ class BrowseModeDocumentTextInfo(textInfos.TextInfo):
 
 	def getControlFieldSpeech(self, attrs, ancestorAttrs, fieldType, formatConfig=None, extraDetail=False, reason=None):
 		textList = []
+		role=attrs.get('role')
 		landmark = attrs.get(""landmark"")
 		if formatConfig[""reportLandmarks""] and fieldType == ""start_addedToControlFieldStack"" and landmark:
 			try:",This line is no longer necessary.,py,1,1,0
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -30,8 +30,8 @@ namespace OpenTelemetry.Trace
         private readonly ActivityListener listener;
         private readonly Resource resource;
         private readonly Sampler sampler;
+        private readonly ActivitySourceAdapter adapter;
         private BaseProcessor<Activity> processor;
-        private ActivitySourceAdapter adapter;
 
         static TracerProviderSdk()
         {","Unrelated, VS was suggesting to make `ActivitySourceAdapter` readonly so I cleaned it up.",.cs,0,1,0
"@@ -1118,7 +1118,7 @@ window.ConfigurationsView = countlyView.extend({
             return input;
         }
         else if (typeof value === ""number"") {
-            return ""<input type='number' id='"" + id + ""' value='"" + value + ""' max='2147483647' min='0' onkeyup='this.value= (parseInt(this.value) > 2147483647) ? 2147483647 : this.value;'/>"";
+            return ""<input type='number' id='"" + id + ""' value='"" + value + ""'/>"";
         }
         else {
             return ""<input type='text' id='"" + id + ""' value='"" + value + ""'/>"";",I think we agreed to leave this one,js,0,1,0
"@@ -123,9 +123,17 @@ M  V30 END SGROUP
 M  V30 END CTAB
 M  END''')
     nm = rdAbbreviations.CondenseAbbreviationSubstanceGroups(m)
-    nm.RemoveAllConformers() # avoid coords in CXSMILES
+    nm.RemoveAllConformers()  # avoid coords in CXSMILES
     self.assertEqual(Chem.MolToCXSmiles(nm), '*C1CC1 |$CF3;;;$|')
 
+  def testGithub3692(self):
+    defaults = rdAbbreviations.GetDefaultAbbreviations()
+    self.assertIsNotNone(defaults[0].mol)
+    lbls = [x.label for x in defaults]
+    self.assertIn('CO2Et', lbls)
+    idx = lbls.index('CO2Et')
+    self.assertEqual(Chem.MolToSmiles(defaults[idx].mol), '*C(=O)OCC')
+
 
 if __name__ == '__main__':  # pragma: nocover
   unittest.main()",Is this commit supposed to be in this batch?,cpp,0,1,0
"@@ -1,5 +1,5 @@
 from functools import update_wrapper
-from typing import Any, Callable, Dict, List, Optional, Sequence, Set, Union
+from typing import TYPE_CHECKING, Any, Callable, Dict, List, Optional, Sequence, Set, Union
 
 from dagster import check
 from dagster.core.decorator_utils import format_docstring_for_description","Oops, I'm going to move these changes that don't have anything to do with asset defs to a separate PR.",py,0,1,0
"@@ -22,7 +22,7 @@ import (
 
 func injectFoo() Foo {
 	// This non-call statement makes this an invalid injector.
-	 _ = 42
+	_ = 42
 	panic(wire.Build(provideFoo))
 }
 ","Note to reviewers: sorry, this is a random change from running `gofmt`.",go,0,1,0
"@@ -216,10 +216,14 @@ public class AddTextFragment extends BaseEditFragment implements TextWatcher, Fo
     public void onShow() {
         activity.changeMode(EditImageActivity.MODE_TEXT);
         activity.mainImage.setImageBitmap(activity.mainBitmap);
+        activity.addTextFragment.getmTextStickerView().mainImage = activity.mainImage;
+        activity.addTextFragment.getmTextStickerView().mainBitmap = activity.mainBitmap;
         mTextStickerView.setVisibility(View.VISIBLE);
         mInputText.clearFocus();
     }
 
+    public TextStickerView getmTextStickerView(){return mTextStickerView;}
+
     public void applyTextImage() {
         if (mSaveTask != null) {
             mSaveTask.cancel(true);",Can this be made static?,java,1,1,0
"@@ -152,14 +152,10 @@ func (c *Client) buildTestCommand(target *core.BuildTarget) (*pb.Command, error)
 // getCommand returns the appropriate command to use for a target.
 func (c *Client) getCommand(target *core.BuildTarget) string {
         if target.IsRemoteFile {
-                // TODO(peterebden): we should handle this using the Remote Fetch API once that's available.
-                urls := make([]string, len(target.Sources))
-                for i, s := range target.Sources {
-                        urls[i] = ""curl -fsSLo $OUT "" + s.String()
-                }
-                cmd := strings.Join(urls, "" || "")
+                // This isn't a real command, but it suits us to construct a pseudo-version of one.
+                cmd := ""fetch "" + strings.Join(target.AllURLs(c.state.Config), "" "") + "" & verify "" + strings.Join(target.Hashes, "" "")
                 if target.IsBinary {
-                        return ""("" + cmd + "") && chmod +x $OUT""
+                        return cmd + "" binary""
                 }
                 return cmd
         }",How does this work?,go,1,1,0
"@@ -0,0 +1,17 @@
+module Blacklight
+  module Rendering
+    class Microdata < AbstractStep
+      include ActionView::Helpers::TagHelper
+      def render
+        return next_step(values) unless config.itemprop
+        next_step(values.map { |x| itemprop(x, config.itemprop) })
+      end
+
+      private
+
+        def itemprop(val, itemprop)
+          content_tag :span, val, itemprop: itemprop
+        end
+    end
+  end
+end",2 trailing blank lines detected.,rb,1,1,0
"@@ -21,7 +21,6 @@ type idCacheKey struct {
 // internally by just their block ID (since blocks are immutable and
 // content-addressable).
 type BlockCacheStandard struct {
-        config             Config
         cleanBytesCapacity uint64
 
         ids *lru.Cache",Looks like we don't need this anymore,go,1,1,0
"@@ -1376,8 +1376,6 @@ void DataReaderImpl::release_payload_pool()
 
     PoolConfig config = PoolConfig::from_history_attributes(history_.m_att);
     payload_pool_->release_history(config, true);
-
-    TopicPayloadPoolRegistry::release(payload_pool_);
 }
 
 ReturnCode_t DataReaderImpl::check_datasharing_compatible(",Shouldn't we do `payload_pool_.reset()` here ?,cpp,1,1,0
"@@ -629,12 +629,13 @@ namespace pwiz.Skyline.Util.Extensions
             }
             for (int i = 0; i < fields.Length; ++i)
             {
-                FieldNames.Add(fields[i].Trim());
-                FieldDict[fields[i]] = i;
+                var trimmed = fields[i].Trim();
+                FieldNames.Add(trimmed);
+                FieldDict[trimmed] = i;
                 // Check to see if the given column name is actually a synonym for the internal canonical (no spaces, serialized) name
                 if (headerSynonyms != null)
                 {
-                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, fields[i], StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
+                    var key = headerSynonyms.Keys.FirstOrDefault(k => string.Compare(k, trimmed, StringComparison.OrdinalIgnoreCase)==0); // Case insensitive
                     if (!string.IsNullOrEmpty(key))
                     {
                         var syn = headerSynonyms[key];","I would name this variable ""fieldName"" instead of ""trimmed"".",.cs,1,1,0
"@@ -1,12 +1,8 @@
 <% org = template.org.abbreviation.present? ? template.org.abbreviation : template.org.name %>
-<% if example_answer.present? || guidance.present? %>
+<% if guidance.present? %>
   <dl<%= for_plan ? ' class=""dl-horizontal""' : '' %>>
-    <% if example_answer.present? %>
-      <dt><%= _('Example answer') %></dt>
-      <dd><%= raw example_answer.text %><dd>
-    <% end %>
     <% if guidance.present? %>
-      <dt><%= _('Guidance') %></dt>
+      <dt><%= template.customization_of.nil? ? _('Guidance') : _('%{org} Guidance') % { org: guidance.org.short_name } %></dt>
       <dd><%= raw guidance.text %></dd>
     <% end %>
   </dl>",this if is no longer needed,rb,1,1,0
"@@ -30,14 +30,14 @@ import org.apache.commons.dbutils.ResultSetHandler;
  */
 public interface DatabaseTransOperator {
 
-
   /**
    * returns the last id from a previous insert statement.
    * Note that last insert and this operation should use the same connection.
    *
    * @return the last inserted id in mysql per connection.
+   * @throws SQLException
    */
-  long  getLastInsertId();
+  long getLastInsertId() throws SQLException;
 
   /**
    *",Curious: What is the difference between `DatabaseOperator` and `DatabaseTransOperator`?,java,0,1,0
"@@ -53,11 +53,7 @@ static bool add_change_to_rtps_group(
         {
             for (uint32_t frag = 1; frag <= n_fragments; frag++)
             {
-                if (group.add_data_frag(*change, frag, inline_qos))
-                {
-                    reader_change->markFragmentsAsSent(frag);
-                }
-                else
+                if (!group.add_data_frag(*change, frag, inline_qos))
                 {
                     logError(RTPS_WRITER, ""Error sending fragment ("" << change->sequenceNumber << "", "" << frag << "")"");
                 }",Why now is not needed to mark fragment as sent?,cpp,1,1,0
"@@ -19848,4 +19848,4 @@ var reactDom = ReactDOM$3.default || ReactDOM$3;
 
 return reactDom;
 
-})));
+})));",Why would this file have changed?,js,1,1,0
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -74,7 +74,7 @@ double getLabuteAtomContribs(const ROMol &mol, std::vector<double> &Vi,
     Vi[i] = M_PI * Ri * (4. * Ri - Vi[i]);
     res += Vi[i];
   }
-  if (includeHs) {
+  if (includeHs && fabs(hContrib) > 1e-4) {
     double Rj = PeriodicTable::getTable()->getRb0(1);
     hContrib = M_PI * Rj * (4. * Rj - hContrib);
     res += hContrib;",Why not includeHs && nAtoms?,cpp,1,1,0
"@@ -331,6 +331,7 @@ namespace NLog.UnitTests.Layouts
                         new CsvColumn(""date"", ""${longdate}""),
                         new CsvColumn(""level"", ""${level}""),
                         new CsvColumn(""message"", ""${message}""),
+                        new CsvColumn(""threadid"", ""${threadid}""),
                     },
                 QuoteChar = ""'"",
                 Delimiter = CsvColumnDelimiterMode.Semicolon,",was a new unit test not a better option?,.cs,1,1,0
"@@ -152,14 +152,10 @@ func (c *Client) buildTestCommand(target *core.BuildTarget) (*pb.Command, error)
 // getCommand returns the appropriate command to use for a target.
 func (c *Client) getCommand(target *core.BuildTarget) string {
         if target.IsRemoteFile {
-                // TODO(peterebden): we should handle this using the Remote Fetch API once that's available.
-                urls := make([]string, len(target.Sources))
-                for i, s := range target.Sources {
-                        urls[i] = ""curl -fsSLo $OUT "" + s.String()
-                }
-                cmd := strings.Join(urls, "" || "")
+                // This isn't a real command, but it suits us to construct a pseudo-version of one.
+                cmd := ""fetch "" + strings.Join(target.AllURLs(c.state.Config), "" "") + "" & verify "" + strings.Join(target.Hashes, "" "")
                 if target.IsBinary {
-                        return ""("" + cmd + "") && chmod +x $OUT""
+                        return cmd + "" binary""
                 }
                 return cmd
         }",How does this work?,go,1,1,0
"@@ -46,6 +46,8 @@
 
 #include <Kokkos_Core.hpp>
 
+// FIXME_SYCL requires allocate_tracked
+#ifndef KOKKOS_ENABLE_SYCL
 #if !defined(KOKKOS_ENABLE_CUDA) || defined(__CUDACC__)
 
 #include <default/TestDefaultDeviceType_Category.hpp>",Does `malloc` test not pass?,cpp,0,0,0
"@@ -24,12 +24,14 @@ import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicLong;
+import java.util.Locale;
 
 import org.apache.solr.client.solrj.cloud.SolrCloudManager;
 import org.apache.solr.client.solrj.cloud.autoscaling.ReplicaInfo;",is this being used?,java,1,1,0
"@@ -7,3 +7,9 @@ get(
   as: :book,
   constraints: LicenseableConstraint.new(Book)
 )
+
+get '/backbone-js-on-rails' => redirect('https://gumroad.com/l/backbone-js-on-rails')
+get '/geocoding-on-rails' => redirect('https://gumroad.com/l/geocoding-on-rails')
+get '/ios-on-rails' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ios-on-rails-beta' => redirect('https://gumroad.com/l/ios-on-rails')
+get '/ruby-science' => redirect('https://gumroad.com/l/ruby-science')",I actually think this is `ios-on-rails-beta`,rb,1,1,0
"@@ -327,6 +327,14 @@ var _ = infrastructure.DatastoreDescribe(""_BPF-SAFE_ IPIP topology before adding
                 BeforeEach(func() {
                         ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)
                         defer cancel()
+                        if bpfEnabled {
+                                infra.RemoveNodeAddresses(felixes[0])
+                        } else {
+                                for _, f := range felixes {
+                                        infra.RemoveNodeAddresses(f)
+                                }
+                        }
+
                         listOptions := options.ListOptions{}
                         if bpfEnabled {
                                 listOptions.Name = felixes[0].Hostname",Why this difference?,c,1,1,0
"@@ -589,9 +589,6 @@ func (b *bucket) ErrorAs(err error, i interface{}) bool {
 }
 
 func (b *bucket) ErrorCode(err error) gcerrors.ErrorCode {
-        if code := gcerrors.Code(err); code != gcerrors.Unknown {
-                return code
-        }
         serr, ok := err.(azblob.StorageError)
         switch {
         case !ok:","Note: I moved this to the concrete class (blob.go). If the driver produces an error that already has an error code, we should always just use it.",go,0,1,0
"@@ -52,7 +52,9 @@
         var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);
         if ((ctrlDown && !isMultipleSelection) || event.altKey) { //if ctrl+enter or alt+enter, add new line
           if(that.isOpened()){
-            that.val(that.val() + '\n');
+            var caretPosition = that.wtDom.getCaretPosition(that.TEXTAREA);
+            that.val(that.val().substr(0, caretPosition) + '\n' + that.val().substr(caretPosition));
+            that.wtDom.setCaretPosition(that.TEXTAREA, caretPosition + 1);
             that.focus();
           } else {
             that.beginEditing(that.originalValue + '\n')",don't you have to remove this line (58) too?,js,1,1,0
"@@ -406,6 +406,8 @@ namespace Nethermind.State
                     Set(cellByAddress.Key, _zeroValue);
                 }
             }
+
+            _storages[address] = new StorageTree(_stateDb, Keccak.EmptyTreeHash);
         }
 
         private enum ChangeType",this is the fix,.cs,1,0,0
"@@ -40,8 +40,8 @@ TEST_F(OrderByTest, SyntaxError) {
         cpp2::ExecutionResponse resp;
         auto &player = players_[""Boris Diaw""];
         auto *fmt = ""GO FROM %ld OVER serve YIELD ""
-                    ""$^[player].name as name, serve.start_year as start, $$[team].name""
-                    ""| ORDER BY $-.$$[team].name"";
+                    ""$^player.name as name, serve.start_year as start, $$[team].name""
+                    ""| ORDER BY $-.$$team.name"";
         auto query = folly::stringPrintf(fmt, player.vid());
         auto code = client_->execute(query, resp);
         ASSERT_EQ(cpp2::ErrorCode::E_SYNTAX_ERROR, code);",$$[team].name or $$team.name,cpp,1,1,0
"@@ -60,7 +60,11 @@ namespace Datadog.Trace
         /// <summary>
         /// Gets the service name
         /// </summary>
-        public string ServiceName => _context.ServiceName;
+        public string ServiceName
+        {
+            get { return _context.ServiceName; }
+            internal set { _context.ServiceName = value; }
+        }
 
         /// <summary>
         /// Gets the trace's unique identifier.","I'm late to the party sorry, but why not let the non opentracing tracer change the service name too?",.cs,1,1,0
"@@ -22,6 +22,7 @@ from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
 
 
 class Options(object):
+    KEY = ""goog:chromeOptions""
 
     def __init__(self):
         self._binary_location = ''",nice touch since Google likes to change things every now and then.,py,1,0,0
"@@ -32,7 +32,7 @@ namespace ddb {
 DiscoveryDataBase::DiscoveryDataBase(
         fastrtps::rtps::GuidPrefix_t server_guid_prefix)
     : server_guid_prefix_(server_guid_prefix)
-    , server_acked_by_all_(false)
+    , server_acked_by_all_(true)
 {
 }
 ",I would not change this until the list of servers is defined in the database construction. Better to change it with the implementation that @EduPonz is going to do in the pinging PR.,cpp,0,1,0
"@@ -89,9 +89,7 @@ class ScalarTypeComparator
         }
 
         if ($container_type_part instanceof TNonspecificLiteralString
-            && ($input_type_part instanceof TLiteralString
-                || $input_type_part instanceof TNonspecificLiteralString
-                || $input_type_part instanceof TNonEmptyNonspecificLiteralString)
+            && ($input_type_part instanceof TLiteralString || $input_type_part instanceof TNonspecificLiteralString)
         ) {
             return true;
         }",TNonEmptyNonspecificLiteralString is a child of TNonspecificLiteralString just above,php,1,1,0
"@@ -1,5 +1,6 @@
 require 'erb'
 require 'shellwords'
+require 'set'
 
 module RSpec
   module Core","An aside, are we not worried about polluting stdlib here?",rb,0,1,0
"@@ -43,7 +43,8 @@ public class PolyglotScriptEngine implements PhoenicisScriptEngine {
         this.language = language;
         this.context = Context.newBuilder(language)
                 .allowExperimentalOptions(true)
-                .options(options).allowHostAccess(true).build();
+                .allowHostAccess(true)
+                .options(options).build();
     }
 
     @Override",I tried to replace by `allowHostAccess(true)` by something else because it seems to be deprecated but I couldn't find a working replacement operation.,java,1,1,0
"@@ -89,9 +89,7 @@ final class CropResizer implements ResizerInterface
     }
 
     /**
-     * @param array<string, int> $settings
-     *
-     * @phpstan-param array{width: int, height: int} $settings
+     * @param array<string, mixed> $settings
      */
     private function createTargetBox(array $settings): Box
     {",Why losing this ?,php,1,1,0
"@@ -9,10 +9,15 @@ FactoryGirl.define do
     rwa_number ""R1234567"" # TODO remove, since it's not applicable for BA61
     org_code Ncr::Organization.all[0].to_s
     project_title ""NCR Name""
+    sequence(:approving_official_email) {|n| ""approver#{User.count}@some-cartoon-show.com"" }
     association :proposal, flow: 'linear'
 
     trait :with_approvers do
+      # TODO use wo.setup_approvals_and_observers instead
       association :proposal, :with_serial_approvers, flow: 'linear'
+      after :create do |wo|
+        wo.approving_official_email = wo.approving_official.email_address
+      end
     end
 
     trait :is_emergency do",PT story for this?,rb,0,0,0
"@@ -69,7 +69,7 @@ var (
 		completeJobCompleted: 9,
 	}
 
-	cancelC chan struct{}
+	cancelC = make(chan struct{})
 )
 
 func initPatch(ctx context.Context) {",why is this change needed?,go,1,1,0
"@@ -31,7 +31,7 @@
 // THE POSSIBILITY OF SUCH DAMAGE.
 // 
 
-#if !SILVERLIGHT && !NETSTANDARD || NETSTANDARD1_3PLUS
+#if !SILVERLIGHT && !NETSTANDARD
 
 namespace NLog.LayoutRenderers
 {",Isn't this a quick fix? Disabling the code?,.cs,1,1,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -226,7 +226,7 @@ void ValidationStateTracker::PreCallRecordCmdClearColorImage(VkCommandBuffer com
                                                              uint32_t rangeCount, const VkImageSubresourceRange *pRanges) {
     if (disabled[command_buffer_state]) return;
 
-    auto cb_node = Get<CMD_BUFFER_STATE>(commandBuffer);
+    auto cb_node = GetWrite<CMD_BUFFER_STATE>(commandBuffer);
     if (cb_node) {
         cb_node->RecordTransferCmd(CMD_CLEARCOLORIMAGE, Get<IMAGE_STATE>(image));
     }",All get writes this file. Same split lock concern.,cpp,0,0,0
"@@ -8,11 +8,11 @@ package account
 
 import (
 	""fmt""
-	""syscall""
+
+	""github.com/iotexproject/iotex-core/cli/ioctl/util""
 
 	""github.com/spf13/cobra""
 	""go.uber.org/zap""
-	""golang.org/x/crypto/ssh/terminal""
 
 	""github.com/iotexproject/iotex-core/cli/ioctl/cmd/alias""
 	""github.com/iotexproject/iotex-core/pkg/log""",wrong import group,go,1,1,0
"@@ -73,7 +73,7 @@ fpga_result read_sysfs(fpga_token token, char *sysfs_path,
 		resval = res;
 		goto out_destroy;
 	}
-	printf(""size=%d \n"", size);
+
 	if (size > len) {
 		OPAE_ERR(""object size bigger then buffer size"");
 		resval = FPGA_EXCEPTION;",Could you submit this one in a separate pull request?,c,0,1,0
"@@ -269,8 +269,12 @@ module Beaker
     def get_domain_name(host)
       domain = nil
       search = nil
-      if ((host['platform'] =~ /windows/) and not host.is_cygwin?)
-        resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+      if host['platform'] =~ /windows/
+        if host.is_cygwin?
+          resolv_conf = host.exec(Command.new(""cat /cygdrive/c/Windows/System32/drivers/etc/hosts"")).stdout
+        else
+          resolv_conf = host.exec(Command.new('type C:\Windows\System32\drivers\etc\hosts')).stdout
+        end
       else
         resolv_conf = host.exec(Command.new(""cat /etc/resolv.conf"")).stdout
       end","I'm not a fan of hardcoded system drives, but if it works...",rb,1,1,0
"@@ -3176,8 +3176,8 @@ void WorldServer::UpdateLFP(uint32 LeaderID, GroupLFPMemberEntry *LFPMembers) {
 
 void WorldServer::StopLFP(uint32 LeaderID) {
 
-	GroupLFPMemberEntry LFPMembers;
-	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", &LFPMembers);
+	GroupLFPMemberEntry LFPMembers[MAX_GROUP_MEMBERS];
+	UpdateLFP(LeaderID, LFPOff, 0, 0, 0, 0, """", LFPMembers);
 }
 
 void WorldServer::HandleLFGMatches(ServerPacket *pack) {",There a reason we're no longer passing by reference here ?,cpp,1,0,0
"@@ -220,6 +220,12 @@ _options = [
             ""'plotting.sample_ratio' should be 1.0 >= value >= 0.0."",
         ),
     ),
+    Option(
+        key=""plotting.backend"",
+        doc=(""Backend to use for plotting. Default is matplotlib.""),
+        default=""matplotlib"",
+        types=str,
+    ),
 ]  # type: List[Option]
 
 _options_dict = dict(zip((option.key for option in _options), _options))  # type: Dict[str, Option]",Could you add a list of currently supported backends?,py,1,1,0
"@@ -0,0 +1,15 @@
+""""""Test case for typevar-name-missing-variance with default settings""""""
+
+from typing import TypeVar
+
+# Name set by regex pattern
+TypeVarsShouldBeLikeThis = TypeVar(""TypeVarsShouldBeLikeThis"")
+TypeVarsShouldBeLikeThis_contra = TypeVar(
+    ""TypeVarsShouldBeLikeThis_contra"", contravariant=True
+)
+TypeVarsShouldBeLikeThis_co = TypeVar(""TypeVarsShouldBeLikeThis_co"", covariant=True)
+
+# Name using the standard style
+T_GoodName = TypeVar(""T_GoodName"")  # [invalid-name]
+T_GoodName_co = TypeVar(""T_GoodName_co"", covariant=True)  # [invalid-name]
+T_GoodName_contra = TypeVar(""T_GoodName_contra"", contravariant=True)  # [invalid-name]",Better to remove the `T_` prefix,py,1,1,0
"@@ -66,6 +66,17 @@ public interface TableScan {
    */
   TableScan project(Schema schema);
 
+  /**
+   * Create a new {@link TableScan} from this that, if data columns where selected
+   * via {@link #select(java.util.Collection)}, controls whether the match to the schema will be done
+   * with case sensitivity.
+   *
+   * MUST be called before {@link #select(java.util.Collection)}!
+   *
+   * @return a new scan based on this with case sensitivity as stated
+   */
+  TableScan caseSensitive(boolean caseSensitive);
+
   /**
    * Create a new {@link TableScan} from this that will read the given data columns. This produces
    * an expected schema that includes all fields that are either selected or used by this scan's",This seems like a problem to me. Can we do everything lazily so that it doesn't matter what order refinement calls are made in?,java,1,0,0
"@@ -2,4 +2,13 @@ module NotifierHelper
   def fp(text)
     format_paragraph(text, 72, 0)
   end
+
+  def link_to_user(display_name)
+    link_to(
+      display_name,
+      user_url(display_name, :host => SERVER_URL),
+      :target => ""_blank"",
+      :style => ""text-decoration: none; color: #222; font-weight: bold""
+    )
+  end
 end","I added the `link_to_user` helper to declutter the template a bit, but then it means this Ruby file now contains some CSS instructions. What's the proper Rails way to do this?",rb,0,1,0
"@@ -12,7 +12,7 @@ namespace Microsoft.CodeAnalysis.Sarif
     {
         string GetProperty(string propertyName);
         T GetProperty<T>(string propertyName);
-        void SetProperty(string propertyName, string value);
+        void SetProperty<T>(string propertyName, T value);
         IList<string> PropertyNames { get; }
     }
 }",`SetProperty` can now take any type. #Resolved,.cs,1,1,0
"@@ -75,7 +75,7 @@ namespace NLog.Targets
         /// <value>The endpoint address.</value>
         /// <docgen category='Connection Options' order='10' />
         [RequiredParameter]
-        public string EndpointAddress { get; set; }
+        public virtual string EndpointAddress { get; set; }
 
 #if WCF_SUPPORTED
         /// <summary>",This is the only line that should change. Ignore any other file changes.,.cs,1,1,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -19,6 +19,7 @@ import getHours from ""date-fns/getHours"";
 import getDay from ""date-fns/getDay"";
 import getDate from ""date-fns/getDate"";
 import dfgetWeek from ""date-fns/getWeek"";
+import getISOWeek from ""date-fns/getISOWeek"";
 import getMonth from ""date-fns/getMonth"";
 import getQuarter from ""date-fns/getQuarter"";
 import getYear from ""date-fns/getYear"";",Is this still being used?,js,1,1,0
"@@ -1195,7 +1195,7 @@ static void handle_get_app_config(GUI_RPC_CONN& grc) {
         return;
     }
     sprintf(path, ""%s/%s"", p->project_dir(), APP_CONFIG_FILE_NAME);
-    printf(""path: %s\n"", path);
+    // printf(""path: %s\n"", path);    // debug only
     int retval = read_file_string(path, s);
     if (retval) {
         grc.mfout.printf(""<error>app_config.xml not found</error>\n"");",Could be completely removed,php,1,1,0
"@@ -64,7 +64,7 @@ abstract class MergingSnapshotProducer<ThisT> extends SnapshotProducer<ThisT> {
   private static final Set<String> VALIDATE_DATA_FILES_EXIST_SKIP_DELETE_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.REPLACE);
   // delete files can be added in ""overwrite"" or ""delete"" operations
-  private static final Set<String> VALIDATE_REPLACED_DATA_FILES_OPERATIONS =
+  private static final Set<String> VALIDATE_ADDED_DELETE_FILES_OPERATIONS =
       ImmutableSet.of(DataOperations.OVERWRITE, DataOperations.DELETE);
 
   private final String tableName;",I renamed it to match `VALIDATE_ADDED_FILES_OPERATIONS `.,java,1,1,0
"@@ -81,6 +81,7 @@ module.exports = function Dashboard (props) {
       onDrop={props.handleDrop}
     >
       <div
+        aria-hidden=""true""
         className=""uppy-Dashboard-overlay""
         tabIndex={-1}
         onClick={props.handleClickOutside}",Why was this added?,js,1,1,0
"@@ -62,7 +62,7 @@ public class TopLevelJoinQuery extends JoinQuery {
 
     final SolrIndexSearcher solrSearcher = (SolrIndexSearcher) searcher;
     final JoinQueryWeight weight = new JoinQueryWeight(solrSearcher, ScoreMode.COMPLETE_NO_SCORES, 1.0f);
-    final SolrIndexSearcher fromSearcher = weight.fromSearcher;
+    final SolrIndexSearcher fromSearcher = weight.toSearcher; // fromIndex isn't specified, so this has to be toSearcher
     final SolrIndexSearcher toSearcher = weight.toSearcher;
 
     try {",but what if `fromIndex` is specified?,java,1,1,0
"@@ -105,8 +105,7 @@ public class RegionStoreClient extends AbstractGRPCClient<TikvBlockingStub, Tikv
   // lockResolverClient, after implements the
   // write implementation of tispark, we can change
   // it to private
-  @VisibleForTesting
-  public final LockResolverClient lockResolverClient;
+  @VisibleForTesting public final LockResolverClient lockResolverClient;
   private TikvBlockingStub blockingStub;
   private TikvStub asyncStub;
 ",please undo this change,java,1,1,0
"@@ -33,6 +33,18 @@ public class TransactionPoolOptions
   private static final String ETH65_TX_ANNOUNCED_BUFFERING_PERIOD_FLAG =
       ""--Xeth65-tx-announced-buffering-period-milliseconds"";
 
+  private static final String STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG =
+      ""--strict-tx-replay-protection-enabled"";
+
+  @CommandLine.Option(
+      names = {STRICT_TX_REPLAY_PROTECTION_ENABLED_FLAG},
+      paramLabel = ""<Boolean>"",
+      description =
+          ""Require transactions submitted via JSON-RPC to use replay protection in accordance with EIP-155 (default: ${DEFAULT-VALUE})"",
+      fallbackValue = ""true"",
+      arity = ""0..1"")
+  private Boolean strictTxReplayProtectionEnabled = false;
+
   @CommandLine.Option(
       names = {TX_MESSAGE_KEEP_ALIVE_SEC_FLAG},
       paramLabel = ""<INTEGER>"",","Ah, so it IS unstable already. Cool, lets prefix with X.",java,1,0,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -18,6 +18,12 @@ namespace Datadog.Trace.Configuration
         /// <seealso cref=""TracerSettings.Environment""/>
         public const string Environment = ""DD_ENV"";
 
+        /// <summary>
+        /// Configuration key for the application's version. Sets the ""version"" tag on every <see cref=""Span""/>.
+        /// </summary>
+        /// <seealso cref=""TracerSettings.Version""/>
+        public const string Version = ""DD_VERSION"";
+
         /// <summary>
         /// Configuration key for the application's default service name.
         /// Used as the service name for top-level spans,",Wasn't sure on wording for overriding `DD_SERVICE_NAME`. Thoughts?,.cs,1,1,0
"@@ -35,13 +35,13 @@ public class BaseSuite {
   public static ExternalResource testEnvironment = new ExternalResource() {
     @Override
     protected void before() {
-      log.info(""Preparing test environment"");
+      log.finest(""Preparing test environment"");
       GlobalTestEnvironment.get(SeleniumTestEnvironment.class);
       System.setProperty(""webdriver.remote.shorten_log_messages"", ""true"");
     }
     @Override
     protected void after() {
-      log.info(""Cleaning test environment"");
+      log.finest(""Cleaning test environment"");
       TestEnvironment environment = GlobalTestEnvironment.get();
       if (environment != null) {
         environment.stop();",This is in test code: understanding what we're doing is important in this context.,rb,1,1,0
"@@ -22,6 +22,7 @@ from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
 
 
 class Options(object):
+    KEY = ""goog:chromeOptions""
 
     def __init__(self):
         self._binary_location = ''",nice touch since Google likes to change things every now and then.,py,1,0,0
"@@ -50,14 +50,8 @@ const (
         eniIPv4Address        = ""10.0.0.2""
 )
 
-func TestTaskMetadata(t *testing.T) {
-        ctrl := gomock.NewController(t)
-        defer ctrl.Finish()
-
-        state := mock_dockerstate.NewMockTaskEngineState(ctrl)
-        auditLog := mock_audit.NewMockAuditLogger(ctrl)
-
-        task := &api.Task{
+var (
+        task = &api.Task{
                 Arn:                 taskARN,
                 Family:              family,
                 Version:             version,","cool, didn't know var declaration blocks were a thing.",go,1,1,0
"@@ -23,4 +23,14 @@ module RSpecHelpers
     end
   end
 
+  def expect_deprecation_with_call_site(file, line)
+    expect(RSpec.configuration.reporter).to receive(:deprecation) do |options|
+      expect(options[:call_site]).to include([file, line].join(':'))
+    end
+  end
+
+  def allow_deprecation
+    allow(RSpec.configuration.reporter).to receive(:deprecation)
+  end
+
 end","I can't get this helper to fail. I've passed incorrect line numbers and it always passes. I see the block get run, but it doesn't seem this inner expectation is properly raised.",rb,0,1,0
"@@ -0,0 +1,3 @@
+const isFocusable = virtualNode.isFocusable;
+
+return isFocusable;",Why not just return `virtualNode.isFocusable`?,js,1,1,0
"@@ -32,6 +32,8 @@ export function Component(props, context) {
 	 */
 	this.props = props;
 
+	this._nextState =
+
 	/**
 	 * @public
 	 * @type {object}",@KevinDoughty Perhaps a bad push?,js,0,1,0
"@@ -40,12 +40,7 @@ function getAttributeNameValue(node, at) {
   if (name.indexOf('href') !== -1 || name.indexOf('src') !== -1) {
     const friendly = getFriendlyUriEnd(node.getAttribute(name));
     if (friendly) {
-      const value = encodeURI(friendly);
-      if (value) {
-        atnv = escapeSelector(at.name) + '$=""' + escapeSelector(value) + '""';
-      } else {
-        return;
-      }
+      atnv = escapeSelector(at.name) + '$=""' + friendly + '""';
     } else {
       atnv =
         escapeSelector(at.name) +",Need to make the same change on line 48,js,1,1,0
"@@ -17,7 +17,9 @@
 #include ""oneapi/dal/test/engine/config.hpp""
 
 #include <stdexcept>
-#include ""oneapi/dal/test/engine/common.hpp""
+#include ""oneapi/dal/test/engine/common_base.hpp""
+
+#include <iostream>
 
 namespace oneapi::dal::test::engine {
 ",Is it necessary?,cpp,1,1,0
"@@ -36,6 +36,7 @@ ReaderLocator::ReaderLocator(
     : owner_(owner)
     , locator_info_(max_unicast_locators, max_multicast_locators)
     , expects_inline_qos_(false)
+    , is_local_reader_(false)
     , guid_prefix_as_vector_(1u)
     , guid_as_vector_(1u)
 {",Field `local_reader_` should be initialized to `nullptr`,cpp,1,1,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -1,5 +1,10 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
-# SPDX-License-Identifier: Apache-2.0
+# SPDX - License - Identifier: Apache - 2.0
+
+# Purpose
+# This code example demonstrates how to receives messages in a queue in Amazon Simple Queue Service (Amazon SQS).
+
+# snippet-start:[s3.ruby.sqs-ruby-example-get-messages.rb]
 
 require 'aws-sdk-sqs'
 require 'aws-sdk-sts'",receive (remove 's'),rb,1,0,0
"@@ -107,7 +107,7 @@ define([""globalize"", ""dom"", ""emby-checkbox"", ""emby-select"", ""emby-input""], funct
         if (!plugins.length) return html;
 
         html += '<div class=""metadataFetcher"" data-type=""' + availableTypeOptions.Type + '"">';
-        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", availableTypeOptions.Type) + ""</h3>"";
+        html += '<h3 class=""checkboxListLabel"">' + globalize.translate(""LabelTypeMetadataDownloaders"", globalize.translate(availableTypeOptions.Type)) + ""</h3>"";
         html += '<div class=""checkboxList paperList checkboxList-paperList"">';
         for (var i = 0; i < plugins.length; i++) {
             var plugin = plugins[i];",This does not look right...,js,1,1,0
"@@ -40,7 +40,8 @@ export function setAccessor(node, name, old, value, isSvg) {
 		}
 		if (value && typeof value==='object') {
 			if (!isString(old)) {
-				for (let i in old) if (!(i in value)) node.style[i] = '';
+				for (let i in old)
+					if (!(i in value) || value[i] == null || value[i] === false) node.style[i] = '';
 			}
 			for (let i in value) {
 				node.style[i] = typeof value[i]==='number' && !NON_DIMENSION_PROPS[i] ? (value[i]+'px') : value[i];",Can skip the `in` check now I think,js,1,1,0
"@@ -406,6 +406,8 @@ namespace Nethermind.State
                     Set(cellByAddress.Key, _zeroValue);
                 }
             }
+
+            _storages[address] = new StorageTree(_stateDb, Keccak.EmptyTreeHash);
         }
 
         private enum ChangeType",this is the fix,.cs,1,0,0
"@@ -1,8 +1,15 @@
 package net
 
 import (
+        ""context""
+        ""fmt""
+        ""sort""
+
         ma ""gx/ipfs/QmNTCey11oxhb1AxDnQBRHtdhap6Ctud872NjAYPYYXPuc/go-multiaddr""
         ""gx/ipfs/QmTu65MVbemtUxJEWgsTtzv9Zv9P8rvmqNA4eG9TrTRGYc/go-libp2p-peer""
+        ""gx/ipfs/QmU7iTrsNaJfu1Rf5DrvaJLH9wJtQwmP4Dj8oPduprAU68/go-libp2p-swarm""
+        ""gx/ipfs/QmVmDhyTTUcQXFD1rRQ64fGLMSAoaQvNH3hwuaCFAPq2hy/errors""
+        routing ""gx/ipfs/QmWaDSNoSdSXU9b6udyaq9T8y6LkzMwqWxECznFqvtcTsk/go-libp2p-routing""
         ""gx/ipfs/QmZZseAa9xcK6tT3YpaShNUAEpyRAoWmUL5ojH3uGNepAc/go-libp2p-metrics""
         ""gx/ipfs/QmcNGX5RaxPPCYwa6yGXM1EcUbrreTTinixLcYGmMwf1sx/go-libp2p/p2p/protocol/ping""
         ""gx/ipfs/Qmd52WKRSwrBK5gUaJKawryZQ5by6UbNB8KVW2Zy6JtbyW/go-libp2p-host""","Blocking: hey @anorth, this works for me but you blocked this when I first did it so wanted to run it by you to make sure you are on board.",go,0,1,0
"@@ -53,11 +53,7 @@ static bool add_change_to_rtps_group(
         {
             for (uint32_t frag = 1; frag <= n_fragments; frag++)
             {
-                if (group.add_data_frag(*change, frag, inline_qos))
-                {
-                    reader_change->markFragmentsAsSent(frag);
-                }
-                else
+                if (!group.add_data_frag(*change, frag, inline_qos))
                 {
                     logError(RTPS_WRITER, ""Error sending fragment ("" << change->sequenceNumber << "", "" << frag << "")"");
                 }",Why now is not needed to mark fragment as sent?,cpp,1,1,0
"@@ -146,7 +146,7 @@ module RSpec::Core
       # Returns the message generated for this failure line by line.
       #
       # @return [Array(String)] The example failure message
-      def message_lines
+      def message_lines(default_color_proc=lambda {|x| x })
         @lines ||=
           begin
             lines = [""Failure/Error: #{read_failed_line.strip}""]",This seems more convoluted then what you had before :(. @JonRowe -- can you suggest a way to do this that you'd be satisfied with?,rb,0,1,0
"@@ -38,6 +38,9 @@ try:
 except NameError:
     pass
 
+if sys.version > '3':
+    long = int
+
 
 class WebElement(object):
     """"""Represents a DOM element.",Should be `if sys.version_info[0] > 2:`,js,1,1,0
"@@ -45,6 +45,8 @@
 #include ""proj/internal/lru_cache.hpp""
 #include ""proj/internal/tracing.hpp""
 
+#include ""sqlite3.hpp""
+
 #include <cmath>
 #include <cstdlib>
 #include <cstring>",should this be a system include?,cpp,1,1,0
"@@ -853,6 +853,19 @@ class DefaultRecord extends AbstractBase
         return $params;
     }
 
+    /**
+     * Get an alternate display title.
+     *
+     * @return string
+     */
+    public function getAlternateDisplayTitle()
+    {
+        $format = '%s %s';
+        $short = $this->fields['alt_title_short'] ?? '';
+        $sub = $this->fields['alt_title_sub'] ?? '';
+        return sprintf($short, $sub);
+    }
+
     /**
      * Get the OpenURL parameters to represent this record (useful for the
      * title attribute of a COinS span tag).","I did this for convenience but maybe this should be split out into two functions like the corresponding ""normal"" fields are? Or maybe the corresponding fields could be combined into 1 function, e.g. `getDisplayTitle`? I wasn't sure what to do here so I just did something quick and easy. I'm not sure if it's problematic though.",php,0,1,0
"@@ -43,13 +43,13 @@ func addTestingTsfBlocks(bc Blockchain) error {
         tsf0, _ := action.NewTransfer(
                 1,
                 big.NewInt(3000000000),
-                Gen.CreatorAddr(config.Default.Chain.ID),
+                Gen.CreatorAddr(),
                 ta.Addrinfo[""producer""].Bech32(),
                 []byte{}, uint64(100000),
                 big.NewInt(10),
         )
         pubk, _ := keypair.DecodePublicKey(Gen.CreatorPubKey)
-        sig, _ := hex.DecodeString(""b14516e888e78e8dcba9af59607c8deea404f52c3df706a0bb6e1fadfda58113983b9201400ff75202fe486363a2e99052b3866595be932542bc0b860278b0753ab3fd2c66764a01"")
+        sig, _ := hex.DecodeString(""3584fe777dd090e1a7a825896f532485ea2cc35d7c300c6c56f0e2e78b51c6ded33f7d0069f4f6f6b6762306466fcff6f261bb30d9e1550f2f8be4f988e740903fd734209cb60101"")
         bd := &action.EnvelopeBuilder{}
         elp := bd.SetAction(tsf0).
                 SetDestinationAddress(ta.Addrinfo[""producer""].Bech32()).",line is 175 characters (from `lll`),go,1,1,0
"@@ -0,0 +1,8 @@
+require 'spec_helper'
+
+describe 'Purchases' do
+  it 'raise not found if no purchase exists' do
+    visit purchase_path('robots.txt')
+    expect(page.status_code).to eq(404)
+  end
+end",I'd try writing this as a controller spec.,rb,0,1,0
"@@ -52,6 +52,7 @@ namespace NLog.UnitTests.Targets
     using NLog.Internal;
     using NLog.LayoutRenderers;
 
+    [System.Runtime.InteropServices.GuidAttribute(""FF35CCD9-C7C7-4E3F-9194-3C3076DA3B7C"")]
     public class FileTargetTests : NLogTestBase
     {
         private readonly ILogger logger = LogManager.GetLogger(""NLog.UnitTests.Targets.FileTargetTests"");",Why is this needed?,.cs,1,1,0
"@@ -1,9 +1,9 @@
 'use strict';
 
-const MongoError = require('../core').MongoError;
+const MongoError = require('../core/error').MongoError;
 const Aspect = require('./operation').Aspect;
 const OperationBase = require('./operation').OperationBase;
-const ReadPreference = require('../core').ReadPreference;
+const ReadPreference = require('../core/topologies/read_preference');
 const isRetryableError = require('../core/error').isRetryableError;
 const maxWireVersion = require('../core/utils').maxWireVersion;
 const isUnifiedTopology = require('../core/utils').isUnifiedTopology;",why the diff here?,js,1,1,0
"@@ -89,9 +89,7 @@ class ScalarTypeComparator
         }
 
         if ($container_type_part instanceof TNonspecificLiteralString
-            && ($input_type_part instanceof TLiteralString
-                || $input_type_part instanceof TNonspecificLiteralString
-                || $input_type_part instanceof TNonEmptyNonspecificLiteralString)
+            && ($input_type_part instanceof TLiteralString || $input_type_part instanceof TNonspecificLiteralString)
         ) {
             return true;
         }",TNonEmptyNonspecificLiteralString is a child of TNonspecificLiteralString just above,php,1,1,0
"@@ -398,7 +398,6 @@ public class UserAccountManager {
 		final String userId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USER_ID));
 		final String username = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_USERNAME));
 		final String accountName = accountManager.getUserData(account, AccountManager.KEY_ACCOUNT_NAME);
-		final String clientId = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_CLIENT_ID));
 		final String lastName = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_LAST_NAME));
 		final String email = SalesforceSDKManager.decrypt(accountManager.getUserData(account, AuthenticatorService.KEY_EMAIL));
 		final String encFirstName =  accountManager.getUserData(account, AuthenticatorService.KEY_FIRST_NAME);",Unrelated - wasn't being used.,java,0,1,0
"@@ -139,14 +139,9 @@ public class ClusterStatus {
       if (collectionVsAliases.containsKey(name) && !collectionVsAliases.get(name).isEmpty()) {
         collectionStatus.put(""aliases"", collectionVsAliases.get(name));
       }
-      try {
-        String configName = zkStateReader.readConfigName(name);
-        collectionStatus.put(""configName"", configName);
-        collectionProps.add(name, collectionStatus);
-      } catch (KeeperException.NoNodeException ex) {
-        // skip this collection because the configset's znode has been deleted
-        // which can happen during aggressive collection removal, see SOLR-10720
-      }
+      String configName = message.getStr(ZkStateReader.COLLECTION_CONFIG_PROP, clusterStateCollection.getConfigName());
+      collectionStatus.put(ZkStateReader.CONFIGNAME_PROP, configName);
+      collectionProps.add(name, collectionStatus);
     }
 
     List<String> liveNodes = zkStateReader.getZkClient().getChildren(ZkStateReader.LIVE_NODES_ZKNODE, null, true);",The message didn't have this before (I assume?); does it now?,java,1,1,0
"@@ -29,12 +29,18 @@ import java.util.Collection;
 import java.util.Collections;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.LinkedBlockingDeque;
+import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
-import java.util.concurrent.locks.ReentrantLock;
+import java.util.concurrent.locks.Lock;
+import java.util.concurrent.locks.ReadWriteLock;
+import java.util.concurrent.locks.ReentrantReadWriteLock;
 import java.util.function.Function;
 
 import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Stopwatch;
+import com.google.common.util.concurrent.ThreadFactoryBuilder;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.apache.tuweni.bytes.Bytes;","Experimentally determined a while ago. Since the rocks db default lock timeout is 1000ms, I aimed for a flush size that was as big as possible that completes in under 500ms",java,1,1,0
"@@ -269,6 +269,13 @@ def set_rate_limits(per_token_limit, per_ip_limit, window_size):
         set_rate_limits(per_token_limit, per_ip_limit, window_size)
 
 
+@cli.command(name=""update_all_user_listen_counts"")
+def update_all_user_listen_counts():
+    """""" Scans listen table and update listen counts for all users """"""
+    application = webserver.create_app()
+    with application.app_context():
+        ts_update_user_listen_counts()
+
 @cli.command(name=""recalculate_all_user_data"")
 def recalculate_all_user_data():
     """"""",Could use updating.,py,1,1,0
"@@ -1,10 +1,13 @@
 # Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 # SPDX - License - Identifier: Apache - 2.0
 
+# Purpose
+# This code example demonstrates how to configure an Amazon Simple Storage Solution (Amazon S3) bucket as a static website.
+
+# snippet-start:[s3.s3_ruby_bucket_website.rb]
+
 require 'aws-sdk-s3'
 
-# Configures an Amazon S3 bucket as a static website.
-#
 # Prerequisites:
 #
 # - An Amazon S3 bucket.",Simple Storage **Service**,rb,0,0,0
"@@ -16,9 +16,16 @@ module.exports = function(environment) {
     APP: {
       // Here you can pass flags/options to your application instance
       // when it is created
+    },
+
+    'simple-auth': {
+
+    },
+    'ember-cli-mirage': {
+      enabled: false
     }
   };
-    
+
 ENV.APP.manifest = {
   enabled: true,
   appcacheFile: ""/manifest.appcache"",",remanent of cli mirage.,js,1,0,0
"@@ -108,7 +108,11 @@ class NdWidget(param.Parameterized):
         super(NdWidget, self).__init__(**params)
         self.id = plot.comm.target if plot.comm else uuid.uuid4().hex
         self.plot = plot
-        self.dimensions, self.keys = drop_streams(plot.streams,
+        streams = []
+        for stream in plot.streams:
+            if any(k in plot.dimensions for k in stream.contents):
+                streams.append(stream)
+        self.dimensions, self.keys = drop_streams(streams,
                                                   plot.dimensions,
                                                   plot.keys)
 ",I assume this bit is simply a bug fix and otherwise unrelated?,py,0,1,0
"@@ -1040,7 +1040,9 @@ luaA_screen_module_index(lua_State *L)
             foreach(output, (*screen)->outputs)
                 if(A_STREQ(output->name, name))
                     return luaA_object_push(L, *screen);
-        luaL_error(L, ""Unknown screen output name: %s"", name);
+        luaA_warn(L, ""Unknown screen output name: %s"", name);
+        lua_pushnil(L);
+        return 1;
     }
 
     return luaA_object_push(L, luaA_checkscreen(L, 2));",mb still print the warning?,c,1,0,0
"@@ -0,0 +1,11 @@
+const path = require('path');
+
+module.exports = {
+	mode: 'development',
+  watch: true,
+	entry: './lib/index.js',
+	output: {
+		path: path.resolve(__dirname, 'dist'),
+		filename: 'axe.js'
+	}
+};","Please feel free to suggest / write a better Webpack config, I'm still new to it.",js,0,1,0
"@@ -23,7 +23,7 @@
       .imagery(iD.data.imagery)
       .taginfo(iD.services.taginfo())
       .embed(true)
-      .assetPath(""/iD/"") <%# Cant use asset_path('iD/') in production. %>
+      .assetPath(""iD/"")
       .assetMap(<%= assets(""iD"").to_json.html_safe %>)
       .locale(""<%= locale %>"", ""<%= asset_path(""iD/locales/#{locale}.json"") %>"")
       .preauth({",Do we know why this didn't work in production before and does now?,rb,1,1,0
"@@ -397,6 +397,16 @@ func dealsExpensesPerHour(addr common.Address, deals []*sonm.DWHDeal) (*sonm.Big
 	return sonm.NewBigInt(inAsks), sonm.NewBigInt(inBids)
 }
 
+func dealType(deal *sonm.Deal, addr common.Address) string {
+	if deal.GetSupplierID().Unwrap() == addr || deal.GetMasterID().Unwrap() == addr {
+		return ""SELL""
+	}
+	if deal.GetConsumerID().Unwrap() == addr {
+		return ""BUY""
+	}
+	return """"
+}
+
 func printDealsList(cmd *cobra.Command, addr common.Address, deals []*sonm.DWHDeal) {
 	asks, bids := dealsExpensesPerHour(addr, deals)
 ",What if BOTH conditions are true?,go,1,1,0
